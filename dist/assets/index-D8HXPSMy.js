(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="64b5f436-6e11-4db2-9a4f-f51da20ef57d",t._sentryDebugIdIdentifier="sentry-dbid-64b5f436-6e11-4db2-9a4f-f51da20ef57d")}catch{}})();function UU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var aG=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};aG.SENTRY_RELEASE={id:"a2018c2a1b9a750d5faae39db6de4a02191f00dc"};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function _x(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var FU={exports:{}},xx={},BU={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hg=Symbol.for("react.element"),lG=Symbol.for("react.portal"),cG=Symbol.for("react.fragment"),uG=Symbol.for("react.strict_mode"),dG=Symbol.for("react.profiler"),fG=Symbol.for("react.provider"),hG=Symbol.for("react.context"),pG=Symbol.for("react.forward_ref"),mG=Symbol.for("react.suspense"),gG=Symbol.for("react.memo"),vG=Symbol.for("react.lazy"),I2=Symbol.iterator;function yG(t){return t===null||typeof t!="object"?null:(t=I2&&t[I2]||t["@@iterator"],typeof t=="function"?t:null)}var zU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VU=Object.assign,HU={};function rh(t,e,n){this.props=t,this.context=e,this.refs=HU,this.updater=n||zU}rh.prototype.isReactComponent={};rh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jU(){}jU.prototype=rh.prototype;function CC(t,e,n){this.props=t,this.context=e,this.refs=HU,this.updater=n||zU}var AC=CC.prototype=new jU;AC.constructor=CC;VU(AC,rh.prototype);AC.isPureReactComponent=!0;var L2=Array.isArray,WU=Object.prototype.hasOwnProperty,RC={current:null},GU={key:!0,ref:!0,__self:!0,__source:!0};function $U(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)WU.call(e,r)&&!GU.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:hg,type:t,key:s,ref:o,props:i,_owner:RC.current}}function _G(t,e){return{$$typeof:hg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function PC(t){return typeof t=="object"&&t!==null&&t.$$typeof===hg}function xG(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k2=/\/+/g;function u1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xG(""+t.key):e.toString(36)}function _0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case hg:case lG:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+u1(o,0):r,L2(i)?(n="",t!=null&&(n=t.replace(k2,"$&/")+"/"),_0(i,e,n,"",function(c){return c})):i!=null&&(PC(i)&&(i=_G(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(k2,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",L2(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+u1(s,a);o+=_0(s,e,n,l,i)}else if(l=yG(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+u1(s,a++),o+=_0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fv(t,e,n){if(t==null)return t;var r=[],i=0;return _0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function SG(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mi={current:null},x0={transition:null},wG={ReactCurrentDispatcher:Mi,ReactCurrentBatchConfig:x0,ReactCurrentOwner:RC};function XU(){throw Error("act(...) is not supported in production builds of React.")}Kt.Children={map:Fv,forEach:function(t,e,n){Fv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fv(t,function(){e++}),e},toArray:function(t){return Fv(t,function(e){return e})||[]},only:function(t){if(!PC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Kt.Component=rh;Kt.Fragment=cG;Kt.Profiler=dG;Kt.PureComponent=CC;Kt.StrictMode=uG;Kt.Suspense=mG;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wG;Kt.act=XU;Kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=VU({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=RC.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)WU.call(e,l)&&!GU.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:hg,type:t.type,key:i,ref:s,props:r,_owner:o}};Kt.createContext=function(t){return t={$$typeof:hG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fG,_context:t},t.Consumer=t};Kt.createElement=$U;Kt.createFactory=function(t){var e=$U.bind(null,t);return e.type=t,e};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(t){return{$$typeof:pG,render:t}};Kt.isValidElement=PC;Kt.lazy=function(t){return{$$typeof:vG,_payload:{_status:-1,_result:t},_init:SG}};Kt.memo=function(t,e){return{$$typeof:gG,type:t,compare:e===void 0?null:e}};Kt.startTransition=function(t){var e=x0.transition;x0.transition={};try{t()}finally{x0.transition=e}};Kt.unstable_act=XU;Kt.useCallback=function(t,e){return Mi.current.useCallback(t,e)};Kt.useContext=function(t){return Mi.current.useContext(t)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(t){return Mi.current.useDeferredValue(t)};Kt.useEffect=function(t,e){return Mi.current.useEffect(t,e)};Kt.useId=function(){return Mi.current.useId()};Kt.useImperativeHandle=function(t,e,n){return Mi.current.useImperativeHandle(t,e,n)};Kt.useInsertionEffect=function(t,e){return Mi.current.useInsertionEffect(t,e)};Kt.useLayoutEffect=function(t,e){return Mi.current.useLayoutEffect(t,e)};Kt.useMemo=function(t,e){return Mi.current.useMemo(t,e)};Kt.useReducer=function(t,e,n){return Mi.current.useReducer(t,e,n)};Kt.useRef=function(t){return Mi.current.useRef(t)};Kt.useState=function(t){return Mi.current.useState(t)};Kt.useSyncExternalStore=function(t,e,n){return Mi.current.useSyncExternalStore(t,e,n)};Kt.useTransition=function(){return Mi.current.useTransition()};Kt.version="18.3.1";BU.exports=Kt;var O=BU.exports;const zo=_x(O),ME=UU({__proto__:null,default:zo},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bG=O,EG=Symbol.for("react.element"),MG=Symbol.for("react.fragment"),TG=Object.prototype.hasOwnProperty,CG=bG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AG={key:!0,ref:!0,__self:!0,__source:!0};function qU(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)TG.call(e,r)&&!AG.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:EG,type:t,key:s,ref:o,props:i,_owner:CG.current}}xx.Fragment=MG;xx.jsx=qU;xx.jsxs=qU;FU.exports=xx;var U=FU.exports,TE={},YU={exports:{}},us={},KU={exports:{}},JU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,W){var G=k.length;k.push(W);e:for(;0<G;){var ee=G-1>>>1,ae=k[ee];if(0<i(ae,W))k[ee]=W,k[G]=ae,G=ee;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var W=k[0],G=k.pop();if(G!==W){k[0]=G;e:for(var ee=0,ae=k.length,Pe=ae>>>1;ee<Pe;){var re=2*(ee+1)-1,ye=k[re],Ee=re+1,xe=k[Ee];if(0>i(ye,G))Ee<ae&&0>i(xe,ye)?(k[ee]=xe,k[Ee]=G,ee=Ee):(k[ee]=ye,k[re]=G,ee=re);else if(Ee<ae&&0>i(xe,G))k[ee]=xe,k[Ee]=G,ee=Ee;else break e}}return W}function i(k,W){var G=k.sortIndex-W.sortIndex;return G!==0?G:k.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(k){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=k)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(k){if(y=!1,w(k),!g)if(n(l)!==null)g=!0,q(R);else{var W=n(c);W!==null&&fe(E,W.startTime-k)}}function R(k,W){g=!1,y&&(y=!1,v(L),L=-1),m=!0;var G=p;try{for(w(W),d=n(l);d!==null&&(!(d.expirationTime>W)||k&&!N());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,p=d.priorityLevel;var ae=ee(d.expirationTime<=W);W=t.unstable_now(),typeof ae=="function"?d.callback=ae:d===n(l)&&r(l),w(W)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var re=n(c);re!==null&&fe(E,re.startTime-W),Pe=!1}return Pe}finally{d=null,p=G,m=!1}}var A=!1,M=null,L=-1,P=5,C=-1;function N(){return!(t.unstable_now()-C<P)}function H(){if(M!==null){var k=t.unstable_now();C=k;var W=!0;try{W=M(!0,k)}finally{W?z():(A=!1,M=null)}}else A=!1}var z;if(typeof S=="function")z=function(){S(H)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,X=$.port2;$.port1.onmessage=H,z=function(){X.postMessage(null)}}else z=function(){_(H,0)};function q(k){M=k,A||(A=!0,z())}function fe(k,W){L=_(function(){k(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,q(R))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return k()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,W){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var G=p;p=k;try{return W()}finally{p=G}},t.unstable_scheduleCallback=function(k,W,G){var ee=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,k){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,k={id:u++,callback:W,priorityLevel:k,startTime:G,expirationTime:ae,sortIndex:-1},G>ee?(k.sortIndex=G,e(c,k),n(l)===null&&k===n(c)&&(y?(v(L),L=-1):y=!0,fe(E,G-ee))):(k.sortIndex=ae,e(l,k),g||m||(g=!0,q(R))),k},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(k){var W=p;return function(){var G=p;p=W;try{return k.apply(this,arguments)}finally{p=G}}}})(JU);KU.exports=JU;var RG=KU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PG=O,os=RG;function Ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZU=new Set,cm={};function Lu(t,e){Rf(t,e),Rf(t+"Capture",e)}function Rf(t,e){for(cm[t]=e,t=0;t<e.length;t++)ZU.add(e[t])}var La=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),CE=Object.prototype.hasOwnProperty,IG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O2={},N2={};function LG(t){return CE.call(N2,t)?!0:CE.call(O2,t)?!1:IG.test(t)?N2[t]=!0:(O2[t]=!0,!1)}function kG(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OG(t,e,n,r){if(e===null||typeof e>"u"||kG(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ti(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gr[t]=new Ti(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gr[e]=new Ti(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gr[t]=new Ti(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gr[t]=new Ti(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gr[t]=new Ti(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gr[t]=new Ti(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gr[t]=new Ti(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gr[t]=new Ti(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gr[t]=new Ti(t,5,!1,t.toLowerCase(),null,!1,!1)});var IC=/[\-:]([a-z])/g;function LC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(IC,LC);Gr[e]=new Ti(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(IC,LC);Gr[e]=new Ti(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(IC,LC);Gr[e]=new Ti(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gr[t]=new Ti(t,1,!1,t.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new Ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gr[t]=new Ti(t,1,!1,t.toLowerCase(),null,!0,!0)});function kC(t,e,n,r){var i=Gr.hasOwnProperty(e)?Gr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OG(e,n,i,r)&&(n=null),r||i===null?LG(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ha=PG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bv=Symbol.for("react.element"),Wd=Symbol.for("react.portal"),Gd=Symbol.for("react.fragment"),OC=Symbol.for("react.strict_mode"),AE=Symbol.for("react.profiler"),QU=Symbol.for("react.provider"),eF=Symbol.for("react.context"),NC=Symbol.for("react.forward_ref"),RE=Symbol.for("react.suspense"),PE=Symbol.for("react.suspense_list"),DC=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),tF=Symbol.for("react.offscreen"),D2=Symbol.iterator;function qh(t){return t===null||typeof t!="object"?null:(t=D2&&t[D2]||t["@@iterator"],typeof t=="function"?t:null)}var qn=Object.assign,d1;function Ap(t){if(d1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);d1=e&&e[1]||""}return`
`+d1+t}var f1=!1;function h1(t,e){if(!t||f1)return"";f1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{f1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ap(t):""}function NG(t){switch(t.tag){case 5:return Ap(t.type);case 16:return Ap("Lazy");case 13:return Ap("Suspense");case 19:return Ap("SuspenseList");case 0:case 2:case 15:return t=h1(t.type,!1),t;case 11:return t=h1(t.type.render,!1),t;case 1:return t=h1(t.type,!0),t;default:return""}}function IE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gd:return"Fragment";case Wd:return"Portal";case AE:return"Profiler";case OC:return"StrictMode";case RE:return"Suspense";case PE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eF:return(t.displayName||"Context")+".Consumer";case QU:return(t._context.displayName||"Context")+".Provider";case NC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case DC:return e=t.displayName||null,e!==null?e:IE(t.type)||"Memo";case yl:e=t._payload,t=t._init;try{return IE(t(e))}catch{}}return null}function DG(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IE(e);case 8:return e===OC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function UG(t){var e=nF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zv(t){t._valueTracker||(t._valueTracker=UG(t))}function rF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function t_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function LE(t,e){var n=e.checked;return qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function U2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iF(t,e){e=e.checked,e!=null&&kC(t,"checked",e,!1)}function kE(t,e){iF(t,e);var n=Xl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?OE(t,e.type,n):e.hasOwnProperty("defaultValue")&&OE(t,e.type,Xl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function OE(t,e,n){(e!=="number"||t_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rp=Array.isArray;function yf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function NE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return qn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function B2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ie(92));if(Rp(n)){if(1<n.length)throw Error(Ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xl(n)}}function sF(t,e){var n=Xl(e.value),r=Xl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function z2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vv,aF=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vv=Vv||document.createElement("div"),Vv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function um(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Up={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FG=["Webkit","ms","Moz","O"];Object.keys(Up).forEach(function(t){FG.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Up[e]=Up[t]})});function lF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Up.hasOwnProperty(t)&&Up[t]?(""+e).trim():e+"px"}function cF(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lF(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var BG=qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UE(t,e){if(e){if(BG[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function FE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BE=null;function UC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zE=null,_f=null,xf=null;function V2(t){if(t=gg(t)){if(typeof zE!="function")throw Error(Ie(280));var e=t.stateNode;e&&(e=Mx(e),zE(t.stateNode,t.type,e))}}function uF(t){_f?xf?xf.push(t):xf=[t]:_f=t}function dF(){if(_f){var t=_f,e=xf;if(xf=_f=null,V2(t),e)for(t=0;t<e.length;t++)V2(e[t])}}function fF(t,e){return t(e)}function hF(){}var p1=!1;function pF(t,e,n){if(p1)return t(e,n);p1=!0;try{return fF(t,e,n)}finally{p1=!1,(_f!==null||xf!==null)&&(hF(),dF())}}function dm(t,e){var n=t.stateNode;if(n===null)return null;var r=Mx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ie(231,e,typeof n));return n}var VE=!1;if(La)try{var Yh={};Object.defineProperty(Yh,"passive",{get:function(){VE=!0}}),window.addEventListener("test",Yh,Yh),window.removeEventListener("test",Yh,Yh)}catch{VE=!1}function zG(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Fp=!1,n_=null,r_=!1,HE=null,VG={onError:function(t){Fp=!0,n_=t}};function HG(t,e,n,r,i,s,o,a,l){Fp=!1,n_=null,zG.apply(VG,arguments)}function jG(t,e,n,r,i,s,o,a,l){if(HG.apply(this,arguments),Fp){if(Fp){var c=n_;Fp=!1,n_=null}else throw Error(Ie(198));r_||(r_=!0,HE=c)}}function ku(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function H2(t){if(ku(t)!==t)throw Error(Ie(188))}function WG(t){var e=t.alternate;if(!e){if(e=ku(t),e===null)throw Error(Ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return H2(i),t;if(s===r)return H2(i),e;s=s.sibling}throw Error(Ie(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ie(189))}}if(n.alternate!==r)throw Error(Ie(190))}if(n.tag!==3)throw Error(Ie(188));return n.stateNode.current===n?t:e}function gF(t){return t=WG(t),t!==null?vF(t):null}function vF(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vF(t);if(e!==null)return e;t=t.sibling}return null}var yF=os.unstable_scheduleCallback,j2=os.unstable_cancelCallback,GG=os.unstable_shouldYield,$G=os.unstable_requestPaint,ar=os.unstable_now,XG=os.unstable_getCurrentPriorityLevel,FC=os.unstable_ImmediatePriority,_F=os.unstable_UserBlockingPriority,i_=os.unstable_NormalPriority,qG=os.unstable_LowPriority,xF=os.unstable_IdlePriority,Sx=null,Vo=null;function YG(t){if(Vo&&typeof Vo.onCommitFiberRoot=="function")try{Vo.onCommitFiberRoot(Sx,t,void 0,(t.current.flags&128)===128)}catch{}}var ao=Math.clz32?Math.clz32:ZG,KG=Math.log,JG=Math.LN2;function ZG(t){return t>>>=0,t===0?32:31-(KG(t)/JG|0)|0}var Hv=64,jv=4194304;function Pp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function s_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pp(a):(s&=o,s!==0&&(r=Pp(s)))}else o=n&~i,o!==0?r=Pp(o):s!==0&&(r=Pp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ao(e),i=1<<n,r|=t[n],e&=~i;return r}function QG(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e9(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ao(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=QG(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SF(){var t=Hv;return Hv<<=1,!(Hv&4194240)&&(Hv=64),t}function m1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ao(e),t[e]=n}function t9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ao(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function BC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ao(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var mn=0;function wF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bF,zC,EF,MF,TF,WE=!1,Wv=[],Ol=null,Nl=null,Dl=null,fm=new Map,hm=new Map,Al=[],n9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W2(t,e){switch(t){case"focusin":case"focusout":Ol=null;break;case"dragenter":case"dragleave":Nl=null;break;case"mouseover":case"mouseout":Dl=null;break;case"pointerover":case"pointerout":fm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hm.delete(e.pointerId)}}function Kh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=gg(e),e!==null&&zC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function r9(t,e,n,r,i){switch(e){case"focusin":return Ol=Kh(Ol,t,e,n,r,i),!0;case"dragenter":return Nl=Kh(Nl,t,e,n,r,i),!0;case"mouseover":return Dl=Kh(Dl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return fm.set(s,Kh(fm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hm.set(s,Kh(hm.get(s)||null,t,e,n,r,i)),!0}return!1}function CF(t){var e=$c(t.target);if(e!==null){var n=ku(e);if(n!==null){if(e=n.tag,e===13){if(e=mF(n),e!==null){t.blockedOn=e,TF(t.priority,function(){EF(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function S0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=GE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);BE=r,n.target.dispatchEvent(r),BE=null}else return e=gg(n),e!==null&&zC(e),t.blockedOn=n,!1;e.shift()}return!0}function G2(t,e,n){S0(t)&&n.delete(e)}function i9(){WE=!1,Ol!==null&&S0(Ol)&&(Ol=null),Nl!==null&&S0(Nl)&&(Nl=null),Dl!==null&&S0(Dl)&&(Dl=null),fm.forEach(G2),hm.forEach(G2)}function Jh(t,e){t.blockedOn===e&&(t.blockedOn=null,WE||(WE=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,i9)))}function pm(t){function e(i){return Jh(i,t)}if(0<Wv.length){Jh(Wv[0],t);for(var n=1;n<Wv.length;n++){var r=Wv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ol!==null&&Jh(Ol,t),Nl!==null&&Jh(Nl,t),Dl!==null&&Jh(Dl,t),fm.forEach(e),hm.forEach(e),n=0;n<Al.length;n++)r=Al[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Al.length&&(n=Al[0],n.blockedOn===null);)CF(n),n.blockedOn===null&&Al.shift()}var Sf=Ha.ReactCurrentBatchConfig,o_=!0;function s9(t,e,n,r){var i=mn,s=Sf.transition;Sf.transition=null;try{mn=1,VC(t,e,n,r)}finally{mn=i,Sf.transition=s}}function o9(t,e,n,r){var i=mn,s=Sf.transition;Sf.transition=null;try{mn=4,VC(t,e,n,r)}finally{mn=i,Sf.transition=s}}function VC(t,e,n,r){if(o_){var i=GE(t,e,n,r);if(i===null)M1(t,e,r,a_,n),W2(t,r);else if(r9(i,t,e,n,r))r.stopPropagation();else if(W2(t,r),e&4&&-1<n9.indexOf(t)){for(;i!==null;){var s=gg(i);if(s!==null&&bF(s),s=GE(t,e,n,r),s===null&&M1(t,e,r,a_,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else M1(t,e,r,null,n)}}var a_=null;function GE(t,e,n,r){if(a_=null,t=UC(r),t=$c(t),t!==null)if(e=ku(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mF(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return a_=t,null}function AF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XG()){case FC:return 1;case _F:return 4;case i_:case qG:return 16;case xF:return 536870912;default:return 16}default:return 16}}var Ll=null,HC=null,w0=null;function RF(){if(w0)return w0;var t,e=HC,n=e.length,r,i="value"in Ll?Ll.value:Ll.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return w0=i.slice(t,1<r?1-r:void 0)}function b0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gv(){return!0}function $2(){return!1}function ds(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gv:$2,this.isPropagationStopped=$2,this}return qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gv)},persist:function(){},isPersistent:Gv}),e}var ih={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jC=ds(ih),mg=qn({},ih,{view:0,detail:0}),a9=ds(mg),g1,v1,Zh,wx=qn({},mg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:WC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zh&&(Zh&&t.type==="mousemove"?(g1=t.screenX-Zh.screenX,v1=t.screenY-Zh.screenY):v1=g1=0,Zh=t),g1)},movementY:function(t){return"movementY"in t?t.movementY:v1}}),X2=ds(wx),l9=qn({},wx,{dataTransfer:0}),c9=ds(l9),u9=qn({},mg,{relatedTarget:0}),y1=ds(u9),d9=qn({},ih,{animationName:0,elapsedTime:0,pseudoElement:0}),f9=ds(d9),h9=qn({},ih,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),p9=ds(h9),m9=qn({},ih,{data:0}),q2=ds(m9),g9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=y9[t])?!!e[t]:!1}function WC(){return _9}var x9=qn({},mg,{key:function(t){if(t.key){var e=g9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=b0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?v9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:WC,charCode:function(t){return t.type==="keypress"?b0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?b0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S9=ds(x9),w9=qn({},wx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y2=ds(w9),b9=qn({},mg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:WC}),E9=ds(b9),M9=qn({},ih,{propertyName:0,elapsedTime:0,pseudoElement:0}),T9=ds(M9),C9=qn({},wx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A9=ds(C9),R9=[9,13,27,32],GC=La&&"CompositionEvent"in window,Bp=null;La&&"documentMode"in document&&(Bp=document.documentMode);var P9=La&&"TextEvent"in window&&!Bp,PF=La&&(!GC||Bp&&8<Bp&&11>=Bp),K2=" ",J2=!1;function IF(t,e){switch(t){case"keyup":return R9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $d=!1;function I9(t,e){switch(t){case"compositionend":return LF(e);case"keypress":return e.which!==32?null:(J2=!0,K2);case"textInput":return t=e.data,t===K2&&J2?null:t;default:return null}}function L9(t,e){if($d)return t==="compositionend"||!GC&&IF(t,e)?(t=RF(),w0=HC=Ll=null,$d=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return PF&&e.locale!=="ko"?null:e.data;default:return null}}var k9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k9[t.type]:e==="textarea"}function kF(t,e,n,r){uF(r),e=l_(e,"onChange"),0<e.length&&(n=new jC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zp=null,mm=null;function O9(t){WF(t,0)}function bx(t){var e=Yd(t);if(rF(e))return t}function N9(t,e){if(t==="change")return e}var OF=!1;if(La){var _1;if(La){var x1="oninput"in document;if(!x1){var Q2=document.createElement("div");Q2.setAttribute("oninput","return;"),x1=typeof Q2.oninput=="function"}_1=x1}else _1=!1;OF=_1&&(!document.documentMode||9<document.documentMode)}function eL(){zp&&(zp.detachEvent("onpropertychange",NF),mm=zp=null)}function NF(t){if(t.propertyName==="value"&&bx(mm)){var e=[];kF(e,mm,t,UC(t)),pF(O9,e)}}function D9(t,e,n){t==="focusin"?(eL(),zp=e,mm=n,zp.attachEvent("onpropertychange",NF)):t==="focusout"&&eL()}function U9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bx(mm)}function F9(t,e){if(t==="click")return bx(e)}function B9(t,e){if(t==="input"||t==="change")return bx(e)}function z9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var po=typeof Object.is=="function"?Object.is:z9;function gm(t,e){if(po(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!CE.call(e,i)||!po(t[i],e[i]))return!1}return!0}function tL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nL(t,e){var n=tL(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tL(n)}}function DF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UF(){for(var t=window,e=t_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=t_(t.document)}return e}function $C(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function V9(t){var e=UF(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DF(n.ownerDocument.documentElement,n)){if(r!==null&&$C(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=nL(n,s);var o=nL(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var H9=La&&"documentMode"in document&&11>=document.documentMode,Xd=null,$E=null,Vp=null,XE=!1;function rL(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;XE||Xd==null||Xd!==t_(r)||(r=Xd,"selectionStart"in r&&$C(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vp&&gm(Vp,r)||(Vp=r,r=l_($E,"onSelect"),0<r.length&&(e=new jC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xd)))}function $v(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qd={animationend:$v("Animation","AnimationEnd"),animationiteration:$v("Animation","AnimationIteration"),animationstart:$v("Animation","AnimationStart"),transitionend:$v("Transition","TransitionEnd")},S1={},FF={};La&&(FF=document.createElement("div").style,"AnimationEvent"in window||(delete qd.animationend.animation,delete qd.animationiteration.animation,delete qd.animationstart.animation),"TransitionEvent"in window||delete qd.transitionend.transition);function Ex(t){if(S1[t])return S1[t];if(!qd[t])return t;var e=qd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FF)return S1[t]=e[n];return t}var BF=Ex("animationend"),zF=Ex("animationiteration"),VF=Ex("animationstart"),HF=Ex("transitionend"),jF=new Map,iL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rc(t,e){jF.set(t,e),Lu(e,[t])}for(var w1=0;w1<iL.length;w1++){var b1=iL[w1],j9=b1.toLowerCase(),W9=b1[0].toUpperCase()+b1.slice(1);rc(j9,"on"+W9)}rc(BF,"onAnimationEnd");rc(zF,"onAnimationIteration");rc(VF,"onAnimationStart");rc("dblclick","onDoubleClick");rc("focusin","onFocus");rc("focusout","onBlur");rc(HF,"onTransitionEnd");Rf("onMouseEnter",["mouseout","mouseover"]);Rf("onMouseLeave",["mouseout","mouseover"]);Rf("onPointerEnter",["pointerout","pointerover"]);Rf("onPointerLeave",["pointerout","pointerover"]);Lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ip="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ip));function sL(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jG(r,e,void 0,t),t.currentTarget=null}function WF(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;sL(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;sL(i,a,c),s=l}}}if(r_)throw t=HE,r_=!1,HE=null,t}function Rn(t,e){var n=e[ZE];n===void 0&&(n=e[ZE]=new Set);var r=t+"__bubble";n.has(r)||(GF(e,t,2,!1),n.add(r))}function E1(t,e,n){var r=0;e&&(r|=4),GF(n,t,r,e)}var Xv="_reactListening"+Math.random().toString(36).slice(2);function vm(t){if(!t[Xv]){t[Xv]=!0,ZU.forEach(function(n){n!=="selectionchange"&&(G9.has(n)||E1(n,!1,t),E1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xv]||(e[Xv]=!0,E1("selectionchange",!1,e))}}function GF(t,e,n,r){switch(AF(e)){case 1:var i=s9;break;case 4:i=o9;break;default:i=VC}n=i.bind(null,e,n,t),i=void 0,!VE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function M1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$c(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}pF(function(){var c=s,u=UC(n),d=[];e:{var p=jF.get(t);if(p!==void 0){var m=jC,g=t;switch(t){case"keypress":if(b0(n)===0)break e;case"keydown":case"keyup":m=S9;break;case"focusin":g="focus",m=y1;break;case"focusout":g="blur",m=y1;break;case"beforeblur":case"afterblur":m=y1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=X2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=c9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=E9;break;case BF:case zF:case VF:m=f9;break;case HF:m=T9;break;case"scroll":m=a9;break;case"wheel":m=A9;break;case"copy":case"cut":case"paste":m=p9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Y2}var y=(e&4)!==0,_=!y&&t==="scroll",v=y?p!==null?p+"Capture":null:p;y=[];for(var S=c,w;S!==null;){w=S;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=dm(S,v),E!=null&&y.push(ym(S,E,w)))),_)break;S=S.return}0<y.length&&(p=new m(p,g,null,n,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==BE&&(g=n.relatedTarget||n.fromElement)&&($c(g)||g[ka]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=c,g=g?$c(g):null,g!==null&&(_=ku(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(y=X2,E="onMouseLeave",v="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(y=Y2,E="onPointerLeave",v="onPointerEnter",S="pointer"),_=m==null?p:Yd(m),w=g==null?p:Yd(g),p=new y(E,S+"leave",m,n,u),p.target=_,p.relatedTarget=w,E=null,$c(u)===c&&(y=new y(v,S+"enter",g,n,u),y.target=w,y.relatedTarget=_,E=y),_=E,m&&g)t:{for(y=m,v=g,S=0,w=y;w;w=cd(w))S++;for(w=0,E=v;E;E=cd(E))w++;for(;0<S-w;)y=cd(y),S--;for(;0<w-S;)v=cd(v),w--;for(;S--;){if(y===v||v!==null&&y===v.alternate)break t;y=cd(y),v=cd(v)}y=null}else y=null;m!==null&&oL(d,p,m,y,!1),g!==null&&_!==null&&oL(d,_,g,y,!0)}}e:{if(p=c?Yd(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=N9;else if(Z2(p))if(OF)R=B9;else{R=U9;var A=D9}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=F9);if(R&&(R=R(t,c))){kF(d,R,n,u);break e}A&&A(t,p,c),t==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&OE(p,"number",p.value)}switch(A=c?Yd(c):window,t){case"focusin":(Z2(A)||A.contentEditable==="true")&&(Xd=A,$E=c,Vp=null);break;case"focusout":Vp=$E=Xd=null;break;case"mousedown":XE=!0;break;case"contextmenu":case"mouseup":case"dragend":XE=!1,rL(d,n,u);break;case"selectionchange":if(H9)break;case"keydown":case"keyup":rL(d,n,u)}var M;if(GC)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else $d?IF(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(PF&&n.locale!=="ko"&&($d||L!=="onCompositionStart"?L==="onCompositionEnd"&&$d&&(M=RF()):(Ll=u,HC="value"in Ll?Ll.value:Ll.textContent,$d=!0)),A=l_(c,L),0<A.length&&(L=new q2(L,t,null,n,u),d.push({event:L,listeners:A}),M?L.data=M:(M=LF(n),M!==null&&(L.data=M)))),(M=P9?I9(t,n):L9(t,n))&&(c=l_(c,"onBeforeInput"),0<c.length&&(u=new q2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=M))}WF(d,e)})}function ym(t,e,n){return{instance:t,listener:e,currentTarget:n}}function l_(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=dm(t,n),s!=null&&r.unshift(ym(t,s,i)),s=dm(t,e),s!=null&&r.push(ym(t,s,i))),t=t.return}return r}function cd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oL(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=dm(n,s),l!=null&&o.unshift(ym(n,l,a))):i||(l=dm(n,s),l!=null&&o.push(ym(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $9=/\r\n?/g,X9=/\u0000|\uFFFD/g;function aL(t){return(typeof t=="string"?t:""+t).replace($9,`
`).replace(X9,"")}function qv(t,e,n){if(e=aL(e),aL(t)!==e&&n)throw Error(Ie(425))}function c_(){}var qE=null,YE=null;function KE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var JE=typeof setTimeout=="function"?setTimeout:void 0,q9=typeof clearTimeout=="function"?clearTimeout:void 0,lL=typeof Promise=="function"?Promise:void 0,Y9=typeof queueMicrotask=="function"?queueMicrotask:typeof lL<"u"?function(t){return lL.resolve(null).then(t).catch(K9)}:JE;function K9(t){setTimeout(function(){throw t})}function T1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pm(e)}function Ul(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var sh=Math.random().toString(36).slice(2),Oo="__reactFiber$"+sh,_m="__reactProps$"+sh,ka="__reactContainer$"+sh,ZE="__reactEvents$"+sh,J9="__reactListeners$"+sh,Z9="__reactHandles$"+sh;function $c(t){var e=t[Oo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ka]||n[Oo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cL(t);t!==null;){if(n=t[Oo])return n;t=cL(t)}return e}t=n,n=t.parentNode}return null}function gg(t){return t=t[Oo]||t[ka],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ie(33))}function Mx(t){return t[_m]||null}var QE=[],Kd=-1;function ic(t){return{current:t}}function In(t){0>Kd||(t.current=QE[Kd],QE[Kd]=null,Kd--)}function Cn(t,e){Kd++,QE[Kd]=t.current,t.current=e}var ql={},ui=ic(ql),Ui=ic(!1),yu=ql;function Pf(t,e){var n=t.type.contextTypes;if(!n)return ql;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fi(t){return t=t.childContextTypes,t!=null}function u_(){In(Ui),In(ui)}function uL(t,e,n){if(ui.current!==ql)throw Error(Ie(168));Cn(ui,e),Cn(Ui,n)}function $F(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ie(108,DG(t)||"Unknown",i));return qn({},n,r)}function d_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ql,yu=ui.current,Cn(ui,t),Cn(Ui,Ui.current),!0}function dL(t,e,n){var r=t.stateNode;if(!r)throw Error(Ie(169));n?(t=$F(t,e,yu),r.__reactInternalMemoizedMergedChildContext=t,In(Ui),In(ui),Cn(ui,t)):In(Ui),Cn(Ui,n)}var ma=null,Tx=!1,C1=!1;function XF(t){ma===null?ma=[t]:ma.push(t)}function Q9(t){Tx=!0,XF(t)}function sc(){if(!C1&&ma!==null){C1=!0;var t=0,e=mn;try{var n=ma;for(mn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ma=null,Tx=!1}catch(i){throw ma!==null&&(ma=ma.slice(t+1)),yF(FC,sc),i}finally{mn=e,C1=!1}}return null}var Jd=[],Zd=0,f_=null,h_=0,As=[],Rs=0,_u=null,_a=1,xa="";function Dc(t,e){Jd[Zd++]=h_,Jd[Zd++]=f_,f_=t,h_=e}function qF(t,e,n){As[Rs++]=_a,As[Rs++]=xa,As[Rs++]=_u,_u=t;var r=_a;t=xa;var i=32-ao(r)-1;r&=~(1<<i),n+=1;var s=32-ao(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_a=1<<32-ao(e)+i|n<<i|r,xa=s+t}else _a=1<<s|n<<i|r,xa=t}function XC(t){t.return!==null&&(Dc(t,1),qF(t,1,0))}function qC(t){for(;t===f_;)f_=Jd[--Zd],Jd[Zd]=null,h_=Jd[--Zd],Jd[Zd]=null;for(;t===_u;)_u=As[--Rs],As[Rs]=null,xa=As[--Rs],As[Rs]=null,_a=As[--Rs],As[Rs]=null}var rs=null,ts=null,Dn=!1,io=null;function YF(t,e){var n=Ls(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fL(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rs=t,ts=Ul(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rs=t,ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_u!==null?{id:_a,overflow:xa}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ls(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rs=t,ts=null,!0):!1;default:return!1}}function eM(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tM(t){if(Dn){var e=ts;if(e){var n=e;if(!fL(t,e)){if(eM(t))throw Error(Ie(418));e=Ul(n.nextSibling);var r=rs;e&&fL(t,e)?YF(r,n):(t.flags=t.flags&-4097|2,Dn=!1,rs=t)}}else{if(eM(t))throw Error(Ie(418));t.flags=t.flags&-4097|2,Dn=!1,rs=t}}}function hL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rs=t}function Yv(t){if(t!==rs)return!1;if(!Dn)return hL(t),Dn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!KE(t.type,t.memoizedProps)),e&&(e=ts)){if(eM(t))throw KF(),Error(Ie(418));for(;e;)YF(t,e),e=Ul(e.nextSibling)}if(hL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ts=Ul(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ts=null}}else ts=rs?Ul(t.stateNode.nextSibling):null;return!0}function KF(){for(var t=ts;t;)t=Ul(t.nextSibling)}function If(){ts=rs=null,Dn=!1}function YC(t){io===null?io=[t]:io.push(t)}var e$=Ha.ReactCurrentBatchConfig;function Qh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ie(309));var r=n.stateNode}if(!r)throw Error(Ie(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ie(284));if(!n._owner)throw Error(Ie(290,t))}return t}function Kv(t,e){throw t=Object.prototype.toString.call(e),Error(Ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pL(t){var e=t._init;return e(t._payload)}function JF(t){function e(v,S){if(t){var w=v.deletions;w===null?(v.deletions=[S],v.flags|=16):w.push(S)}}function n(v,S){if(!t)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function r(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function i(v,S){return v=Vl(v,S),v.index=0,v.sibling=null,v}function s(v,S,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<S?(v.flags|=2,S):w):(v.flags|=2,S)):(v.flags|=1048576,S)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,S,w,E){return S===null||S.tag!==6?(S=O1(w,v.mode,E),S.return=v,S):(S=i(S,w),S.return=v,S)}function l(v,S,w,E){var R=w.type;return R===Gd?u(v,S,w.props.children,E,w.key):S!==null&&(S.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yl&&pL(R)===S.type)?(E=i(S,w.props),E.ref=Qh(v,S,w),E.return=v,E):(E=P0(w.type,w.key,w.props,null,v.mode,E),E.ref=Qh(v,S,w),E.return=v,E)}function c(v,S,w,E){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=N1(w,v.mode,E),S.return=v,S):(S=i(S,w.children||[]),S.return=v,S)}function u(v,S,w,E,R){return S===null||S.tag!==7?(S=ou(w,v.mode,E,R),S.return=v,S):(S=i(S,w),S.return=v,S)}function d(v,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return S=O1(""+S,v.mode,w),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bv:return w=P0(S.type,S.key,S.props,null,v.mode,w),w.ref=Qh(v,null,S),w.return=v,w;case Wd:return S=N1(S,v.mode,w),S.return=v,S;case yl:var E=S._init;return d(v,E(S._payload),w)}if(Rp(S)||qh(S))return S=ou(S,v.mode,w,null),S.return=v,S;Kv(v,S)}return null}function p(v,S,w,E){var R=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return R!==null?null:a(v,S,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bv:return w.key===R?l(v,S,w,E):null;case Wd:return w.key===R?c(v,S,w,E):null;case yl:return R=w._init,p(v,S,R(w._payload),E)}if(Rp(w)||qh(w))return R!==null?null:u(v,S,w,E,null);Kv(v,w)}return null}function m(v,S,w,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(S,v,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bv:return v=v.get(E.key===null?w:E.key)||null,l(S,v,E,R);case Wd:return v=v.get(E.key===null?w:E.key)||null,c(S,v,E,R);case yl:var A=E._init;return m(v,S,w,A(E._payload),R)}if(Rp(E)||qh(E))return v=v.get(w)||null,u(S,v,E,R,null);Kv(S,E)}return null}function g(v,S,w,E){for(var R=null,A=null,M=S,L=S=0,P=null;M!==null&&L<w.length;L++){M.index>L?(P=M,M=null):P=M.sibling;var C=p(v,M,w[L],E);if(C===null){M===null&&(M=P);break}t&&M&&C.alternate===null&&e(v,M),S=s(C,S,L),A===null?R=C:A.sibling=C,A=C,M=P}if(L===w.length)return n(v,M),Dn&&Dc(v,L),R;if(M===null){for(;L<w.length;L++)M=d(v,w[L],E),M!==null&&(S=s(M,S,L),A===null?R=M:A.sibling=M,A=M);return Dn&&Dc(v,L),R}for(M=r(v,M);L<w.length;L++)P=m(M,v,L,w[L],E),P!==null&&(t&&P.alternate!==null&&M.delete(P.key===null?L:P.key),S=s(P,S,L),A===null?R=P:A.sibling=P,A=P);return t&&M.forEach(function(N){return e(v,N)}),Dn&&Dc(v,L),R}function y(v,S,w,E){var R=qh(w);if(typeof R!="function")throw Error(Ie(150));if(w=R.call(w),w==null)throw Error(Ie(151));for(var A=R=null,M=S,L=S=0,P=null,C=w.next();M!==null&&!C.done;L++,C=w.next()){M.index>L?(P=M,M=null):P=M.sibling;var N=p(v,M,C.value,E);if(N===null){M===null&&(M=P);break}t&&M&&N.alternate===null&&e(v,M),S=s(N,S,L),A===null?R=N:A.sibling=N,A=N,M=P}if(C.done)return n(v,M),Dn&&Dc(v,L),R;if(M===null){for(;!C.done;L++,C=w.next())C=d(v,C.value,E),C!==null&&(S=s(C,S,L),A===null?R=C:A.sibling=C,A=C);return Dn&&Dc(v,L),R}for(M=r(v,M);!C.done;L++,C=w.next())C=m(M,v,L,C.value,E),C!==null&&(t&&C.alternate!==null&&M.delete(C.key===null?L:C.key),S=s(C,S,L),A===null?R=C:A.sibling=C,A=C);return t&&M.forEach(function(H){return e(v,H)}),Dn&&Dc(v,L),R}function _(v,S,w,E){if(typeof w=="object"&&w!==null&&w.type===Gd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Bv:e:{for(var R=w.key,A=S;A!==null;){if(A.key===R){if(R=w.type,R===Gd){if(A.tag===7){n(v,A.sibling),S=i(A,w.props.children),S.return=v,v=S;break e}}else if(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===yl&&pL(R)===A.type){n(v,A.sibling),S=i(A,w.props),S.ref=Qh(v,A,w),S.return=v,v=S;break e}n(v,A);break}else e(v,A);A=A.sibling}w.type===Gd?(S=ou(w.props.children,v.mode,E,w.key),S.return=v,v=S):(E=P0(w.type,w.key,w.props,null,v.mode,E),E.ref=Qh(v,S,w),E.return=v,v=E)}return o(v);case Wd:e:{for(A=w.key;S!==null;){if(S.key===A)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){n(v,S.sibling),S=i(S,w.children||[]),S.return=v,v=S;break e}else{n(v,S);break}else e(v,S);S=S.sibling}S=N1(w,v.mode,E),S.return=v,v=S}return o(v);case yl:return A=w._init,_(v,S,A(w._payload),E)}if(Rp(w))return g(v,S,w,E);if(qh(w))return y(v,S,w,E);Kv(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,S!==null&&S.tag===6?(n(v,S.sibling),S=i(S,w),S.return=v,v=S):(n(v,S),S=O1(w,v.mode,E),S.return=v,v=S),o(v)):n(v,S)}return _}var Lf=JF(!0),ZF=JF(!1),p_=ic(null),m_=null,Qd=null,KC=null;function JC(){KC=Qd=m_=null}function ZC(t){var e=p_.current;In(p_),t._currentValue=e}function nM(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wf(t,e){m_=t,KC=Qd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Oi=!0),t.firstContext=null)}function Us(t){var e=t._currentValue;if(KC!==t)if(t={context:t,memoizedValue:e,next:null},Qd===null){if(m_===null)throw Error(Ie(308));Qd=t,m_.dependencies={lanes:0,firstContext:t}}else Qd=Qd.next=t;return e}var Xc=null;function QC(t){Xc===null?Xc=[t]:Xc.push(t)}function QF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,QC(e)):(n.next=i.next,i.next=n),e.interleaved=n,Oa(t,r)}function Oa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _l=!1;function eA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ea(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Oa(t,n)}return i=r.interleaved,i===null?(e.next=e,QC(r)):(e.next=i.next,i.next=e),r.interleaved=e,Oa(t,n)}function E0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,BC(t,n)}}function mL(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function g_(t,e,n,r){var i=t.updateQueue;_l=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(p=e,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(m,d,p):g,p==null)break e;d=qn({},d,p);break e;case 2:_l=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Su|=o,t.lanes=o,t.memoizedState=d}}function gL(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ie(191,i));i.call(r)}}}var vg={},Ho=ic(vg),xm=ic(vg),Sm=ic(vg);function qc(t){if(t===vg)throw Error(Ie(174));return t}function tA(t,e){switch(Cn(Sm,e),Cn(xm,t),Cn(Ho,vg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:DE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=DE(e,t)}In(Ho),Cn(Ho,e)}function kf(){In(Ho),In(xm),In(Sm)}function tB(t){qc(Sm.current);var e=qc(Ho.current),n=DE(e,t.type);e!==n&&(Cn(xm,t),Cn(Ho,n))}function nA(t){xm.current===t&&(In(Ho),In(xm))}var Wn=ic(0);function v_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var A1=[];function rA(){for(var t=0;t<A1.length;t++)A1[t]._workInProgressVersionPrimary=null;A1.length=0}var M0=Ha.ReactCurrentDispatcher,R1=Ha.ReactCurrentBatchConfig,xu=0,$n=null,xr=null,Lr=null,y_=!1,Hp=!1,wm=0,t$=0;function Zr(){throw Error(Ie(321))}function iA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!po(t[n],e[n]))return!1;return!0}function sA(t,e,n,r,i,s){if(xu=s,$n=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,M0.current=t===null||t.memoizedState===null?s$:o$,t=n(r,i),Hp){s=0;do{if(Hp=!1,wm=0,25<=s)throw Error(Ie(301));s+=1,Lr=xr=null,e.updateQueue=null,M0.current=a$,t=n(r,i)}while(Hp)}if(M0.current=__,e=xr!==null&&xr.next!==null,xu=0,Lr=xr=$n=null,y_=!1,e)throw Error(Ie(300));return t}function oA(){var t=wm!==0;return wm=0,t}function Ao(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?$n.memoizedState=Lr=t:Lr=Lr.next=t,Lr}function Fs(){if(xr===null){var t=$n.alternate;t=t!==null?t.memoizedState:null}else t=xr.next;var e=Lr===null?$n.memoizedState:Lr.next;if(e!==null)Lr=e,xr=t;else{if(t===null)throw Error(Ie(310));xr=t,t={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Lr===null?$n.memoizedState=Lr=t:Lr=Lr.next=t}return Lr}function bm(t,e){return typeof e=="function"?e(t):e}function P1(t){var e=Fs(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=xr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((xu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,$n.lanes|=u,Su|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,po(r,e.memoizedState)||(Oi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$n.lanes|=s,Su|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function I1(t){var e=Fs(),n=e.queue;if(n===null)throw Error(Ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);po(s,e.memoizedState)||(Oi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function nB(){}function rB(t,e){var n=$n,r=Fs(),i=e(),s=!po(r.memoizedState,i);if(s&&(r.memoizedState=i,Oi=!0),r=r.queue,aA(oB.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Lr!==null&&Lr.memoizedState.tag&1){if(n.flags|=2048,Em(9,sB.bind(null,n,r,i,e),void 0,null),Ur===null)throw Error(Ie(349));xu&30||iB(n,e,i)}return i}function iB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$n.updateQueue,e===null?(e={lastEffect:null,stores:null},$n.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sB(t,e,n,r){e.value=n,e.getSnapshot=r,aB(e)&&lB(t)}function oB(t,e,n){return n(function(){aB(e)&&lB(t)})}function aB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!po(t,n)}catch{return!0}}function lB(t){var e=Oa(t,1);e!==null&&lo(e,t,1,-1)}function vL(t){var e=Ao();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bm,lastRenderedState:t},e.queue=t,t=t.dispatch=i$.bind(null,$n,t),[e.memoizedState,t]}function Em(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$n.updateQueue,e===null?(e={lastEffect:null,stores:null},$n.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cB(){return Fs().memoizedState}function T0(t,e,n,r){var i=Ao();$n.flags|=t,i.memoizedState=Em(1|e,n,void 0,r===void 0?null:r)}function Cx(t,e,n,r){var i=Fs();r=r===void 0?null:r;var s=void 0;if(xr!==null){var o=xr.memoizedState;if(s=o.destroy,r!==null&&iA(r,o.deps)){i.memoizedState=Em(e,n,s,r);return}}$n.flags|=t,i.memoizedState=Em(1|e,n,s,r)}function yL(t,e){return T0(8390656,8,t,e)}function aA(t,e){return Cx(2048,8,t,e)}function uB(t,e){return Cx(4,2,t,e)}function dB(t,e){return Cx(4,4,t,e)}function fB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hB(t,e,n){return n=n!=null?n.concat([t]):null,Cx(4,4,fB.bind(null,e,t),n)}function lA(){}function pB(t,e){var n=Fs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mB(t,e){var n=Fs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gB(t,e,n){return xu&21?(po(n,e)||(n=SF(),$n.lanes|=n,Su|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Oi=!0),t.memoizedState=n)}function n$(t,e){var n=mn;mn=n!==0&&4>n?n:4,t(!0);var r=R1.transition;R1.transition={};try{t(!1),e()}finally{mn=n,R1.transition=r}}function vB(){return Fs().memoizedState}function r$(t,e,n){var r=zl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yB(t))_B(e,n);else if(n=QF(t,e,n,r),n!==null){var i=Si();lo(n,t,r,i),xB(n,e,r)}}function i$(t,e,n){var r=zl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yB(t))_B(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,po(a,o)){var l=e.interleaved;l===null?(i.next=i,QC(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=QF(t,e,i,r),n!==null&&(i=Si(),lo(n,t,r,i),xB(n,e,r))}}function yB(t){var e=t.alternate;return t===$n||e!==null&&e===$n}function _B(t,e){Hp=y_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xB(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,BC(t,n)}}var __={readContext:Us,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},s$={readContext:Us,useCallback:function(t,e){return Ao().memoizedState=[t,e===void 0?null:e],t},useContext:Us,useEffect:yL,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,T0(4194308,4,fB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return T0(4194308,4,t,e)},useInsertionEffect:function(t,e){return T0(4,2,t,e)},useMemo:function(t,e){var n=Ao();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ao();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=r$.bind(null,$n,t),[r.memoizedState,t]},useRef:function(t){var e=Ao();return t={current:t},e.memoizedState=t},useState:vL,useDebugValue:lA,useDeferredValue:function(t){return Ao().memoizedState=t},useTransition:function(){var t=vL(!1),e=t[0];return t=n$.bind(null,t[1]),Ao().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$n,i=Ao();if(Dn){if(n===void 0)throw Error(Ie(407));n=n()}else{if(n=e(),Ur===null)throw Error(Ie(349));xu&30||iB(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yL(oB.bind(null,r,s,t),[t]),r.flags|=2048,Em(9,sB.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ao(),e=Ur.identifierPrefix;if(Dn){var n=xa,r=_a;n=(r&~(1<<32-ao(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=t$++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},o$={readContext:Us,useCallback:pB,useContext:Us,useEffect:aA,useImperativeHandle:hB,useInsertionEffect:uB,useLayoutEffect:dB,useMemo:mB,useReducer:P1,useRef:cB,useState:function(){return P1(bm)},useDebugValue:lA,useDeferredValue:function(t){var e=Fs();return gB(e,xr.memoizedState,t)},useTransition:function(){var t=P1(bm)[0],e=Fs().memoizedState;return[t,e]},useMutableSource:nB,useSyncExternalStore:rB,useId:vB,unstable_isNewReconciler:!1},a$={readContext:Us,useCallback:pB,useContext:Us,useEffect:aA,useImperativeHandle:hB,useInsertionEffect:uB,useLayoutEffect:dB,useMemo:mB,useReducer:I1,useRef:cB,useState:function(){return I1(bm)},useDebugValue:lA,useDeferredValue:function(t){var e=Fs();return xr===null?e.memoizedState=t:gB(e,xr.memoizedState,t)},useTransition:function(){var t=I1(bm)[0],e=Fs().memoizedState;return[t,e]},useMutableSource:nB,useSyncExternalStore:rB,useId:vB,unstable_isNewReconciler:!1};function Qs(t,e){if(t&&t.defaultProps){e=qn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rM(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ax={isMounted:function(t){return(t=t._reactInternals)?ku(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Si(),i=zl(t),s=Ea(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fl(t,s,i),e!==null&&(lo(e,t,i,r),E0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Si(),i=zl(t),s=Ea(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fl(t,s,i),e!==null&&(lo(e,t,i,r),E0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Si(),r=zl(t),i=Ea(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fl(t,i,r),e!==null&&(lo(e,t,r,n),E0(e,t,r))}};function _L(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!gm(n,r)||!gm(i,s):!0}function SB(t,e,n){var r=!1,i=ql,s=e.contextType;return typeof s=="object"&&s!==null?s=Us(s):(i=Fi(e)?yu:ui.current,r=e.contextTypes,s=(r=r!=null)?Pf(t,i):ql),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ax,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xL(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ax.enqueueReplaceState(e,e.state,null)}function iM(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},eA(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Us(s):(s=Fi(e)?yu:ui.current,i.context=Pf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rM(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ax.enqueueReplaceState(i,i.state,null),g_(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Of(t,e){try{var n="",r=e;do n+=NG(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function L1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sM(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var l$=typeof WeakMap=="function"?WeakMap:Map;function wB(t,e,n){n=Ea(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){S_||(S_=!0,mM=r),sM(t,e)},n}function bB(t,e,n){n=Ea(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){sM(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sM(t,e),typeof r!="function"&&(Bl===null?Bl=new Set([this]):Bl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function SL(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new l$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=w$.bind(null,t,e,n),e.then(t,t))}function wL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bL(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ea(-1,1),e.tag=2,Fl(n,e,1))),n.lanes|=1),t)}var c$=Ha.ReactCurrentOwner,Oi=!1;function yi(t,e,n,r){e.child=t===null?ZF(e,null,n,r):Lf(e,t.child,n,r)}function EL(t,e,n,r,i){n=n.render;var s=e.ref;return wf(e,i),r=sA(t,e,n,r,s,i),n=oA(),t!==null&&!Oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Na(t,e,i)):(Dn&&n&&XC(e),e.flags|=1,yi(t,e,r,i),e.child)}function ML(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!gA(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,EB(t,e,s,r,i)):(t=P0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:gm,n(o,r)&&t.ref===e.ref)return Na(t,e,i)}return e.flags|=1,t=Vl(s,r),t.ref=e.ref,t.return=e,e.child=t}function EB(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(gm(s,r)&&t.ref===e.ref)if(Oi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Oi=!0);else return e.lanes=t.lanes,Na(t,e,i)}return oM(t,e,n,r,i)}function MB(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(tf,Qi),Qi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Cn(tf,Qi),Qi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Cn(tf,Qi),Qi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Cn(tf,Qi),Qi|=r;return yi(t,e,i,n),e.child}function TB(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oM(t,e,n,r,i){var s=Fi(n)?yu:ui.current;return s=Pf(e,s),wf(e,i),n=sA(t,e,n,r,s,i),r=oA(),t!==null&&!Oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Na(t,e,i)):(Dn&&r&&XC(e),e.flags|=1,yi(t,e,n,i),e.child)}function TL(t,e,n,r,i){if(Fi(n)){var s=!0;d_(e)}else s=!1;if(wf(e,i),e.stateNode===null)C0(t,e),SB(e,n,r),iM(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Us(c):(c=Fi(n)?yu:ui.current,c=Pf(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&xL(e,o,r,c),_l=!1;var p=e.memoizedState;o.state=p,g_(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ui.current||_l?(typeof u=="function"&&(rM(e,n,u,r),l=e.memoizedState),(a=_l||_L(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eB(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Qs(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Us(l):(l=Fi(n)?yu:ui.current,l=Pf(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&xL(e,o,r,l),_l=!1,p=e.memoizedState,o.state=p,g_(e,r,o,i);var g=e.memoizedState;a!==d||p!==g||Ui.current||_l?(typeof m=="function"&&(rM(e,n,m,r),g=e.memoizedState),(c=_l||_L(e,n,c,r,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return aM(t,e,n,r,s,i)}function aM(t,e,n,r,i,s){TB(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&dL(e,n,!1),Na(t,e,s);r=e.stateNode,c$.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Lf(e,t.child,null,s),e.child=Lf(e,null,a,s)):yi(t,e,a,s),e.memoizedState=r.state,i&&dL(e,n,!0),e.child}function CB(t){var e=t.stateNode;e.pendingContext?uL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uL(t,e.context,!1),tA(t,e.containerInfo)}function CL(t,e,n,r,i){return If(),YC(i),e.flags|=256,yi(t,e,n,r),e.child}var lM={dehydrated:null,treeContext:null,retryLane:0};function cM(t){return{baseLanes:t,cachePool:null,transitions:null}}function AB(t,e,n){var r=e.pendingProps,i=Wn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Cn(Wn,i&1),t===null)return tM(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ix(o,r,0,null),t=ou(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=cM(n),e.memoizedState=lM,t):cA(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return u$(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Vl(a,s):(s=ou(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?cM(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=lM,r}return s=t.child,t=s.sibling,r=Vl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cA(t,e){return e=Ix({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jv(t,e,n,r){return r!==null&&YC(r),Lf(e,t.child,null,n),t=cA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function u$(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=L1(Error(Ie(422))),Jv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ix({mode:"visible",children:r.children},i,0,null),s=ou(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Lf(e,t.child,null,o),e.child.memoizedState=cM(o),e.memoizedState=lM,s);if(!(e.mode&1))return Jv(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ie(419)),r=L1(s,r,void 0),Jv(t,e,o,r)}if(a=(o&t.childLanes)!==0,Oi||a){if(r=Ur,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Oa(t,i),lo(r,t,i,-1))}return mA(),r=L1(Error(Ie(421))),Jv(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=b$.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ts=Ul(i.nextSibling),rs=e,Dn=!0,io=null,t!==null&&(As[Rs++]=_a,As[Rs++]=xa,As[Rs++]=_u,_a=t.id,xa=t.overflow,_u=e),e=cA(e,r.children),e.flags|=4096,e)}function AL(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nM(t.return,e,n)}function k1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function RB(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yi(t,e,r.children,n),r=Wn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&AL(t,n,e);else if(t.tag===19)AL(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Cn(Wn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&v_(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),k1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&v_(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}k1(e,!0,n,null,s);break;case"together":k1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function C0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Na(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Su|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ie(153));if(e.child!==null){for(t=e.child,n=Vl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function d$(t,e,n){switch(e.tag){case 3:CB(e),If();break;case 5:tB(e);break;case 1:Fi(e.type)&&d_(e);break;case 4:tA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Cn(p_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Cn(Wn,Wn.current&1),e.flags|=128,null):n&e.child.childLanes?AB(t,e,n):(Cn(Wn,Wn.current&1),t=Na(t,e,n),t!==null?t.sibling:null);Cn(Wn,Wn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RB(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Cn(Wn,Wn.current),r)break;return null;case 22:case 23:return e.lanes=0,MB(t,e,n)}return Na(t,e,n)}var PB,uM,IB,LB;PB=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uM=function(){};IB=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,qc(Ho.current);var s=null;switch(n){case"input":i=LE(t,i),r=LE(t,r),s=[];break;case"select":i=qn({},i,{value:void 0}),r=qn({},r,{value:void 0}),s=[];break;case"textarea":i=NE(t,i),r=NE(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=c_)}UE(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(cm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(cm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Rn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};LB=function(t,e,n,r){n!==r&&(e.flags|=4)};function ep(t,e){if(!Dn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function f$(t,e,n){var r=e.pendingProps;switch(qC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(e),null;case 1:return Fi(e.type)&&u_(),Qr(e),null;case 3:return r=e.stateNode,kf(),In(Ui),In(ui),rA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,io!==null&&(yM(io),io=null))),uM(t,e),Qr(e),null;case 5:nA(e);var i=qc(Sm.current);if(n=e.type,t!==null&&e.stateNode!=null)IB(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return Qr(e),null}if(t=qc(Ho.current),Yv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Oo]=e,r[_m]=s,t=(e.mode&1)!==0,n){case"dialog":Rn("cancel",r),Rn("close",r);break;case"iframe":case"object":case"embed":Rn("load",r);break;case"video":case"audio":for(i=0;i<Ip.length;i++)Rn(Ip[i],r);break;case"source":Rn("error",r);break;case"img":case"image":case"link":Rn("error",r),Rn("load",r);break;case"details":Rn("toggle",r);break;case"input":U2(r,s),Rn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rn("invalid",r);break;case"textarea":B2(r,s),Rn("invalid",r)}UE(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&qv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qv(r.textContent,a,t),i=["children",""+a]):cm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rn("scroll",r)}switch(n){case"input":zv(r),F2(r,s,!0);break;case"textarea":zv(r),z2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=c_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oF(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Oo]=e,t[_m]=r,PB(t,e,!1,!1),e.stateNode=t;e:{switch(o=FE(n,r),n){case"dialog":Rn("cancel",t),Rn("close",t),i=r;break;case"iframe":case"object":case"embed":Rn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ip.length;i++)Rn(Ip[i],t);i=r;break;case"source":Rn("error",t),i=r;break;case"img":case"image":case"link":Rn("error",t),Rn("load",t),i=r;break;case"details":Rn("toggle",t),i=r;break;case"input":U2(t,r),i=LE(t,r),Rn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qn({},r,{value:void 0}),Rn("invalid",t);break;case"textarea":B2(t,r),i=NE(t,r),Rn("invalid",t);break;default:i=r}UE(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?cF(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&aF(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&um(t,l):typeof l=="number"&&um(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(cm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Rn("scroll",t):l!=null&&kC(t,s,l,o))}switch(n){case"input":zv(t),F2(t,r,!1);break;case"textarea":zv(t),z2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yf(t,!!r.multiple,s,!1):r.defaultValue!=null&&yf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=c_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qr(e),null;case 6:if(t&&e.stateNode!=null)LB(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(n=qc(Sm.current),qc(Ho.current),Yv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Oo]=e,(s=r.nodeValue!==n)&&(t=rs,t!==null))switch(t.tag){case 3:qv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Oo]=e,e.stateNode=r}return Qr(e),null;case 13:if(In(Wn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dn&&ts!==null&&e.mode&1&&!(e.flags&128))KF(),If(),e.flags|=98560,s=!1;else if(s=Yv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ie(317));s[Oo]=e}else If(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qr(e),s=!1}else io!==null&&(yM(io),io=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Wn.current&1?br===0&&(br=3):mA())),e.updateQueue!==null&&(e.flags|=4),Qr(e),null);case 4:return kf(),uM(t,e),t===null&&vm(e.stateNode.containerInfo),Qr(e),null;case 10:return ZC(e.type._context),Qr(e),null;case 17:return Fi(e.type)&&u_(),Qr(e),null;case 19:if(In(Wn),s=e.memoizedState,s===null)return Qr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ep(s,!1);else{if(br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=v_(t),o!==null){for(e.flags|=128,ep(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Cn(Wn,Wn.current&1|2),e.child}t=t.sibling}s.tail!==null&&ar()>Nf&&(e.flags|=128,r=!0,ep(s,!1),e.lanes=4194304)}else{if(!r)if(t=v_(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ep(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Dn)return Qr(e),null}else 2*ar()-s.renderingStartTime>Nf&&n!==1073741824&&(e.flags|=128,r=!0,ep(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ar(),e.sibling=null,n=Wn.current,Cn(Wn,r?n&1|2:n&1),e):(Qr(e),null);case 22:case 23:return pA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qi&1073741824&&(Qr(e),e.subtreeFlags&6&&(e.flags|=8192)):Qr(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function h$(t,e){switch(qC(e),e.tag){case 1:return Fi(e.type)&&u_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kf(),In(Ui),In(ui),rA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nA(e),null;case 13:if(In(Wn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));If()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return In(Wn),null;case 4:return kf(),null;case 10:return ZC(e.type._context),null;case 22:case 23:return pA(),null;case 24:return null;default:return null}}var Zv=!1,oi=!1,p$=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function ef(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){er(t,e,r)}else n.current=null}function dM(t,e,n){try{n()}catch(r){er(t,e,r)}}var RL=!1;function m$(t,e){if(qE=o_,t=UF(),$C(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(YE={focusedElem:t,selectionRange:n},o_=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,_=g.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Qs(e.type,y),_);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(E){er(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return g=RL,RL=!1,g}function jp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dM(e,n,s)}i=i.next}while(i!==r)}}function Rx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fM(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kB(t){var e=t.alternate;e!==null&&(t.alternate=null,kB(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Oo],delete e[_m],delete e[ZE],delete e[J9],delete e[Z9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OB(t){return t.tag===5||t.tag===3||t.tag===4}function PL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hM(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=c_));else if(r!==4&&(t=t.child,t!==null))for(hM(t,e,n),t=t.sibling;t!==null;)hM(t,e,n),t=t.sibling}function pM(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pM(t,e,n),t=t.sibling;t!==null;)pM(t,e,n),t=t.sibling}var Vr=null,to=!1;function rl(t,e,n){for(n=n.child;n!==null;)NB(t,e,n),n=n.sibling}function NB(t,e,n){if(Vo&&typeof Vo.onCommitFiberUnmount=="function")try{Vo.onCommitFiberUnmount(Sx,n)}catch{}switch(n.tag){case 5:oi||ef(n,e);case 6:var r=Vr,i=to;Vr=null,rl(t,e,n),Vr=r,to=i,Vr!==null&&(to?(t=Vr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vr.removeChild(n.stateNode));break;case 18:Vr!==null&&(to?(t=Vr,n=n.stateNode,t.nodeType===8?T1(t.parentNode,n):t.nodeType===1&&T1(t,n),pm(t)):T1(Vr,n.stateNode));break;case 4:r=Vr,i=to,Vr=n.stateNode.containerInfo,to=!0,rl(t,e,n),Vr=r,to=i;break;case 0:case 11:case 14:case 15:if(!oi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dM(n,e,o),i=i.next}while(i!==r)}rl(t,e,n);break;case 1:if(!oi&&(ef(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){er(n,e,a)}rl(t,e,n);break;case 21:rl(t,e,n);break;case 22:n.mode&1?(oi=(r=oi)||n.memoizedState!==null,rl(t,e,n),oi=r):rl(t,e,n);break;default:rl(t,e,n)}}function IL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new p$),e.forEach(function(r){var i=E$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vr=a.stateNode,to=!1;break e;case 3:Vr=a.stateNode.containerInfo,to=!0;break e;case 4:Vr=a.stateNode.containerInfo,to=!0;break e}a=a.return}if(Vr===null)throw Error(Ie(160));NB(s,o,i),Vr=null,to=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){er(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)DB(e,t),e=e.sibling}function DB(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xs(e,t),To(t),r&4){try{jp(3,t,t.return),Rx(3,t)}catch(y){er(t,t.return,y)}try{jp(5,t,t.return)}catch(y){er(t,t.return,y)}}break;case 1:Xs(e,t),To(t),r&512&&n!==null&&ef(n,n.return);break;case 5:if(Xs(e,t),To(t),r&512&&n!==null&&ef(n,n.return),t.flags&32){var i=t.stateNode;try{um(i,"")}catch(y){er(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&iF(i,s),FE(a,o);var c=FE(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?cF(i,d):u==="dangerouslySetInnerHTML"?aF(i,d):u==="children"?um(i,d):kC(i,u,d,c)}switch(a){case"input":kE(i,s);break;case"textarea":sF(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?yf(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?yf(i,!!s.multiple,s.defaultValue,!0):yf(i,!!s.multiple,s.multiple?[]:"",!1))}i[_m]=s}catch(y){er(t,t.return,y)}}break;case 6:if(Xs(e,t),To(t),r&4){if(t.stateNode===null)throw Error(Ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){er(t,t.return,y)}}break;case 3:if(Xs(e,t),To(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pm(e.containerInfo)}catch(y){er(t,t.return,y)}break;case 4:Xs(e,t),To(t);break;case 13:Xs(e,t),To(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fA=ar())),r&4&&IL(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(oi=(c=oi)||u,Xs(e,t),oi=c):Xs(e,t),To(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ye=t,u=t.child;u!==null;){for(d=Ye=u;Ye!==null;){switch(p=Ye,m=p.child,p.tag){case 0:case 11:case 14:case 15:jp(4,p,p.return);break;case 1:ef(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){er(r,n,y)}}break;case 5:ef(p,p.return);break;case 22:if(p.memoizedState!==null){kL(d);continue}}m!==null?(m.return=p,Ye=m):kL(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lF("display",o))}catch(y){er(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){er(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xs(e,t),To(t),r&4&&IL(t);break;case 21:break;default:Xs(e,t),To(t)}}function To(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OB(n)){var r=n;break e}n=n.return}throw Error(Ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(um(i,""),r.flags&=-33);var s=PL(t);pM(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=PL(t);hM(t,a,o);break;default:throw Error(Ie(161))}}catch(l){er(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function g$(t,e,n){Ye=t,UB(t)}function UB(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var i=Ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||oi;a=Zv;var c=oi;if(Zv=o,(oi=l)&&!c)for(Ye=i;Ye!==null;)o=Ye,l=o.child,o.tag===22&&o.memoizedState!==null?OL(i):l!==null?(l.return=o,Ye=l):OL(i);for(;s!==null;)Ye=s,UB(s),s=s.sibling;Ye=i,Zv=a,oi=c}LL(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ye=s):LL(t)}}function LL(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:oi||Rx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!oi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Qs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gL(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gL(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&pm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}oi||e.flags&512&&fM(e)}catch(p){er(e,e.return,p)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function kL(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function OL(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rx(4,e)}catch(l){er(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){er(e,i,l)}}var s=e.return;try{fM(e)}catch(l){er(e,s,l)}break;case 5:var o=e.return;try{fM(e)}catch(l){er(e,o,l)}}}catch(l){er(e,e.return,l)}if(e===t){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var v$=Math.ceil,x_=Ha.ReactCurrentDispatcher,uA=Ha.ReactCurrentOwner,Ns=Ha.ReactCurrentBatchConfig,tn=0,Ur=null,hr=null,Wr=0,Qi=0,tf=ic(0),br=0,Mm=null,Su=0,Px=0,dA=0,Wp=null,ki=null,fA=0,Nf=1/0,ha=null,S_=!1,mM=null,Bl=null,Qv=!1,kl=null,w_=0,Gp=0,gM=null,A0=-1,R0=0;function Si(){return tn&6?ar():A0!==-1?A0:A0=ar()}function zl(t){return t.mode&1?tn&2&&Wr!==0?Wr&-Wr:e$.transition!==null?(R0===0&&(R0=SF()),R0):(t=mn,t!==0||(t=window.event,t=t===void 0?16:AF(t.type)),t):1}function lo(t,e,n,r){if(50<Gp)throw Gp=0,gM=null,Error(Ie(185));pg(t,n,r),(!(tn&2)||t!==Ur)&&(t===Ur&&(!(tn&2)&&(Px|=n),br===4&&Rl(t,Wr)),Bi(t,r),n===1&&tn===0&&!(e.mode&1)&&(Nf=ar()+500,Tx&&sc()))}function Bi(t,e){var n=t.callbackNode;e9(t,e);var r=s_(t,t===Ur?Wr:0);if(r===0)n!==null&&j2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&j2(n),e===1)t.tag===0?Q9(NL.bind(null,t)):XF(NL.bind(null,t)),Y9(function(){!(tn&6)&&sc()}),n=null;else{switch(wF(r)){case 1:n=FC;break;case 4:n=_F;break;case 16:n=i_;break;case 536870912:n=xF;break;default:n=i_}n=GB(n,FB.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function FB(t,e){if(A0=-1,R0=0,tn&6)throw Error(Ie(327));var n=t.callbackNode;if(bf()&&t.callbackNode!==n)return null;var r=s_(t,t===Ur?Wr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=b_(t,r);else{e=r;var i=tn;tn|=2;var s=zB();(Ur!==t||Wr!==e)&&(ha=null,Nf=ar()+500,su(t,e));do try{x$();break}catch(a){BB(t,a)}while(!0);JC(),x_.current=s,tn=i,hr!==null?e=0:(Ur=null,Wr=0,e=br)}if(e!==0){if(e===2&&(i=jE(t),i!==0&&(r=i,e=vM(t,i))),e===1)throw n=Mm,su(t,0),Rl(t,r),Bi(t,ar()),n;if(e===6)Rl(t,r);else{if(i=t.current.alternate,!(r&30)&&!y$(i)&&(e=b_(t,r),e===2&&(s=jE(t),s!==0&&(r=s,e=vM(t,s))),e===1))throw n=Mm,su(t,0),Rl(t,r),Bi(t,ar()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:Uc(t,ki,ha);break;case 3:if(Rl(t,r),(r&130023424)===r&&(e=fA+500-ar(),10<e)){if(s_(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Si(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=JE(Uc.bind(null,t,ki,ha),e);break}Uc(t,ki,ha);break;case 4:if(Rl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ao(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ar()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*v$(r/1960))-r,10<r){t.timeoutHandle=JE(Uc.bind(null,t,ki,ha),r);break}Uc(t,ki,ha);break;case 5:Uc(t,ki,ha);break;default:throw Error(Ie(329))}}}return Bi(t,ar()),t.callbackNode===n?FB.bind(null,t):null}function vM(t,e){var n=Wp;return t.current.memoizedState.isDehydrated&&(su(t,e).flags|=256),t=b_(t,e),t!==2&&(e=ki,ki=n,e!==null&&yM(e)),t}function yM(t){ki===null?ki=t:ki.push.apply(ki,t)}function y$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!po(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rl(t,e){for(e&=~dA,e&=~Px,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ao(e),r=1<<n;t[n]=-1,e&=~r}}function NL(t){if(tn&6)throw Error(Ie(327));bf();var e=s_(t,0);if(!(e&1))return Bi(t,ar()),null;var n=b_(t,e);if(t.tag!==0&&n===2){var r=jE(t);r!==0&&(e=r,n=vM(t,r))}if(n===1)throw n=Mm,su(t,0),Rl(t,e),Bi(t,ar()),n;if(n===6)throw Error(Ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Uc(t,ki,ha),Bi(t,ar()),null}function hA(t,e){var n=tn;tn|=1;try{return t(e)}finally{tn=n,tn===0&&(Nf=ar()+500,Tx&&sc())}}function wu(t){kl!==null&&kl.tag===0&&!(tn&6)&&bf();var e=tn;tn|=1;var n=Ns.transition,r=mn;try{if(Ns.transition=null,mn=1,t)return t()}finally{mn=r,Ns.transition=n,tn=e,!(tn&6)&&sc()}}function pA(){Qi=tf.current,In(tf)}function su(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q9(n)),hr!==null)for(n=hr.return;n!==null;){var r=n;switch(qC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&u_();break;case 3:kf(),In(Ui),In(ui),rA();break;case 5:nA(r);break;case 4:kf();break;case 13:In(Wn);break;case 19:In(Wn);break;case 10:ZC(r.type._context);break;case 22:case 23:pA()}n=n.return}if(Ur=t,hr=t=Vl(t.current,null),Wr=Qi=e,br=0,Mm=null,dA=Px=Su=0,ki=Wp=null,Xc!==null){for(e=0;e<Xc.length;e++)if(n=Xc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xc=null}return t}function BB(t,e){do{var n=hr;try{if(JC(),M0.current=__,y_){for(var r=$n.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}y_=!1}if(xu=0,Lr=xr=$n=null,Hp=!1,wm=0,uA.current=null,n===null||n.return===null){br=1,Mm=e,hr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Wr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=wL(o);if(m!==null){m.flags&=-257,bL(m,o,a,s,e),m.mode&1&&SL(s,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){SL(s,c,e),mA();break e}l=Error(Ie(426))}}else if(Dn&&a.mode&1){var _=wL(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),bL(_,o,a,s,e),YC(Of(l,a));break e}}s=l=Of(l,a),br!==4&&(br=2),Wp===null?Wp=[s]:Wp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=wB(s,l,e);mL(s,v);break e;case 1:a=l;var S=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Bl===null||!Bl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=bB(s,a,e);mL(s,E);break e}}s=s.return}while(s!==null)}HB(n)}catch(R){e=R,hr===n&&n!==null&&(hr=n=n.return);continue}break}while(!0)}function zB(){var t=x_.current;return x_.current=__,t===null?__:t}function mA(){(br===0||br===3||br===2)&&(br=4),Ur===null||!(Su&268435455)&&!(Px&268435455)||Rl(Ur,Wr)}function b_(t,e){var n=tn;tn|=2;var r=zB();(Ur!==t||Wr!==e)&&(ha=null,su(t,e));do try{_$();break}catch(i){BB(t,i)}while(!0);if(JC(),tn=n,x_.current=r,hr!==null)throw Error(Ie(261));return Ur=null,Wr=0,br}function _$(){for(;hr!==null;)VB(hr)}function x$(){for(;hr!==null&&!GG();)VB(hr)}function VB(t){var e=WB(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,e===null?HB(t):hr=e,uA.current=null}function HB(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=h$(n,e),n!==null){n.flags&=32767,hr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{br=6,hr=null;return}}else if(n=f$(n,e,Qi),n!==null){hr=n;return}if(e=e.sibling,e!==null){hr=e;return}hr=e=t}while(e!==null);br===0&&(br=5)}function Uc(t,e,n){var r=mn,i=Ns.transition;try{Ns.transition=null,mn=1,S$(t,e,n,r)}finally{Ns.transition=i,mn=r}return null}function S$(t,e,n,r){do bf();while(kl!==null);if(tn&6)throw Error(Ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ie(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(t9(t,s),t===Ur&&(hr=Ur=null,Wr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qv||(Qv=!0,GB(i_,function(){return bf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ns.transition,Ns.transition=null;var o=mn;mn=1;var a=tn;tn|=4,uA.current=null,m$(t,n),DB(n,t),V9(YE),o_=!!qE,YE=qE=null,t.current=n,g$(n),$G(),tn=a,mn=o,Ns.transition=s}else t.current=n;if(Qv&&(Qv=!1,kl=t,w_=i),s=t.pendingLanes,s===0&&(Bl=null),YG(n.stateNode),Bi(t,ar()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(S_)throw S_=!1,t=mM,mM=null,t;return w_&1&&t.tag!==0&&bf(),s=t.pendingLanes,s&1?t===gM?Gp++:(Gp=0,gM=t):Gp=0,sc(),null}function bf(){if(kl!==null){var t=wF(w_),e=Ns.transition,n=mn;try{if(Ns.transition=null,mn=16>t?16:t,kl===null)var r=!1;else{if(t=kl,kl=null,w_=0,tn&6)throw Error(Ie(331));var i=tn;for(tn|=4,Ye=t.current;Ye!==null;){var s=Ye,o=s.child;if(Ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ye=c;Ye!==null;){var u=Ye;switch(u.tag){case 0:case 11:case 15:jp(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ye=d;else for(;Ye!==null;){u=Ye;var p=u.sibling,m=u.return;if(kB(u),u===c){Ye=null;break}if(p!==null){p.return=m,Ye=p;break}Ye=m}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}Ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ye=o;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:jp(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ye=v;break e}Ye=s.return}}var S=t.current;for(Ye=S;Ye!==null;){o=Ye;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ye=w;else e:for(o=S;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rx(9,a)}}catch(R){er(a,a.return,R)}if(a===o){Ye=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Ye=E;break e}Ye=a.return}}if(tn=i,sc(),Vo&&typeof Vo.onPostCommitFiberRoot=="function")try{Vo.onPostCommitFiberRoot(Sx,t)}catch{}r=!0}return r}finally{mn=n,Ns.transition=e}}return!1}function DL(t,e,n){e=Of(n,e),e=wB(t,e,1),t=Fl(t,e,1),e=Si(),t!==null&&(pg(t,1,e),Bi(t,e))}function er(t,e,n){if(t.tag===3)DL(t,t,n);else for(;e!==null;){if(e.tag===3){DL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bl===null||!Bl.has(r))){t=Of(n,t),t=bB(e,t,1),e=Fl(e,t,1),t=Si(),e!==null&&(pg(e,1,t),Bi(e,t));break}}e=e.return}}function w$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Si(),t.pingedLanes|=t.suspendedLanes&n,Ur===t&&(Wr&n)===n&&(br===4||br===3&&(Wr&130023424)===Wr&&500>ar()-fA?su(t,0):dA|=n),Bi(t,e)}function jB(t,e){e===0&&(t.mode&1?(e=jv,jv<<=1,!(jv&130023424)&&(jv=4194304)):e=1);var n=Si();t=Oa(t,e),t!==null&&(pg(t,e,n),Bi(t,n))}function b$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jB(t,n)}function E$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),jB(t,n)}var WB;WB=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ui.current)Oi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Oi=!1,d$(t,e,n);Oi=!!(t.flags&131072)}else Oi=!1,Dn&&e.flags&1048576&&qF(e,h_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;C0(t,e),t=e.pendingProps;var i=Pf(e,ui.current);wf(e,n),i=sA(null,e,r,t,i,n);var s=oA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fi(r)?(s=!0,d_(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,eA(e),i.updater=Ax,e.stateNode=i,i._reactInternals=e,iM(e,r,t,n),e=aM(null,e,r,!0,s,n)):(e.tag=0,Dn&&s&&XC(e),yi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(C0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=T$(r),t=Qs(r,t),i){case 0:e=oM(null,e,r,t,n);break e;case 1:e=TL(null,e,r,t,n);break e;case 11:e=EL(null,e,r,t,n);break e;case 14:e=ML(null,e,r,Qs(r.type,t),n);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qs(r,i),oM(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qs(r,i),TL(t,e,r,i,n);case 3:e:{if(CB(e),t===null)throw Error(Ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,eB(t,e),g_(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Of(Error(Ie(423)),e),e=CL(t,e,r,n,i);break e}else if(r!==i){i=Of(Error(Ie(424)),e),e=CL(t,e,r,n,i);break e}else for(ts=Ul(e.stateNode.containerInfo.firstChild),rs=e,Dn=!0,io=null,n=ZF(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(If(),r===i){e=Na(t,e,n);break e}yi(t,e,r,n)}e=e.child}return e;case 5:return tB(e),t===null&&tM(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,KE(r,i)?o=null:s!==null&&KE(r,s)&&(e.flags|=32),TB(t,e),yi(t,e,o,n),e.child;case 6:return t===null&&tM(e),null;case 13:return AB(t,e,n);case 4:return tA(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Lf(e,null,r,n):yi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qs(r,i),EL(t,e,r,i,n);case 7:return yi(t,e,e.pendingProps,n),e.child;case 8:return yi(t,e,e.pendingProps.children,n),e.child;case 12:return yi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Cn(p_,r._currentValue),r._currentValue=o,s!==null)if(po(s.value,o)){if(s.children===i.children&&!Ui.current){e=Na(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ea(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nM(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ie(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nM(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wf(e,n),i=Us(i),r=r(i),e.flags|=1,yi(t,e,r,n),e.child;case 14:return r=e.type,i=Qs(r,e.pendingProps),i=Qs(r.type,i),ML(t,e,r,i,n);case 15:return EB(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qs(r,i),C0(t,e),e.tag=1,Fi(r)?(t=!0,d_(e)):t=!1,wf(e,n),SB(e,r,i),iM(e,r,i,n),aM(null,e,r,!0,t,n);case 19:return RB(t,e,n);case 22:return MB(t,e,n)}throw Error(Ie(156,e.tag))};function GB(t,e){return yF(t,e)}function M$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(t,e,n,r){return new M$(t,e,n,r)}function gA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T$(t){if(typeof t=="function")return gA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===NC)return 11;if(t===DC)return 14}return 2}function Vl(t,e){var n=t.alternate;return n===null?(n=Ls(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function P0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")gA(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gd:return ou(n.children,i,s,e);case OC:o=8,i|=8;break;case AE:return t=Ls(12,n,e,i|2),t.elementType=AE,t.lanes=s,t;case RE:return t=Ls(13,n,e,i),t.elementType=RE,t.lanes=s,t;case PE:return t=Ls(19,n,e,i),t.elementType=PE,t.lanes=s,t;case tF:return Ix(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QU:o=10;break e;case eF:o=9;break e;case NC:o=11;break e;case DC:o=14;break e;case yl:o=16,r=null;break e}throw Error(Ie(130,t==null?t:typeof t,""))}return e=Ls(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ou(t,e,n,r){return t=Ls(7,t,r,e),t.lanes=n,t}function Ix(t,e,n,r){return t=Ls(22,t,r,e),t.elementType=tF,t.lanes=n,t.stateNode={isHidden:!1},t}function O1(t,e,n){return t=Ls(6,t,null,e),t.lanes=n,t}function N1(t,e,n){return e=Ls(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function C$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=m1(0),this.expirationTimes=m1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vA(t,e,n,r,i,s,o,a,l){return t=new C$(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ls(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eA(s),t}function A$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $B(t){if(!t)return ql;t=t._reactInternals;e:{if(ku(t)!==t||t.tag!==1)throw Error(Ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(t.tag===1){var n=t.type;if(Fi(n))return $F(t,n,e)}return e}function XB(t,e,n,r,i,s,o,a,l){return t=vA(n,r,!0,t,i,s,o,a,l),t.context=$B(null),n=t.current,r=Si(),i=zl(n),s=Ea(r,i),s.callback=e??null,Fl(n,s,i),t.current.lanes=i,pg(t,i,r),Bi(t,r),t}function Lx(t,e,n,r){var i=e.current,s=Si(),o=zl(i);return n=$B(n),e.context===null?e.context=n:e.pendingContext=n,e=Ea(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fl(i,e,o),t!==null&&(lo(t,i,o,s),E0(t,i,o)),o}function E_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function UL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yA(t,e){UL(t,e),(t=t.alternate)&&UL(t,e)}function R$(){return null}var qB=typeof reportError=="function"?reportError:function(t){console.error(t)};function _A(t){this._internalRoot=t}kx.prototype.render=_A.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ie(409));Lx(t,e,null,null)};kx.prototype.unmount=_A.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wu(function(){Lx(null,t,null,null)}),e[ka]=null}};function kx(t){this._internalRoot=t}kx.prototype.unstable_scheduleHydration=function(t){if(t){var e=MF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Al.length&&e!==0&&e<Al[n].priority;n++);Al.splice(n,0,t),n===0&&CF(t)}};function xA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ox(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FL(){}function P$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=E_(o);s.call(c)}}var o=XB(e,r,t,0,null,!1,!1,"",FL);return t._reactRootContainer=o,t[ka]=o.current,vm(t.nodeType===8?t.parentNode:t),wu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=E_(l);a.call(c)}}var l=vA(t,0,!1,null,null,!1,!1,"",FL);return t._reactRootContainer=l,t[ka]=l.current,vm(t.nodeType===8?t.parentNode:t),wu(function(){Lx(e,l,n,r)}),l}function Nx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=E_(o);a.call(l)}}Lx(e,o,t,i)}else o=P$(n,e,t,i,r);return E_(o)}bF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pp(e.pendingLanes);n!==0&&(BC(e,n|1),Bi(e,ar()),!(tn&6)&&(Nf=ar()+500,sc()))}break;case 13:wu(function(){var r=Oa(t,1);if(r!==null){var i=Si();lo(r,t,1,i)}}),yA(t,1)}};zC=function(t){if(t.tag===13){var e=Oa(t,134217728);if(e!==null){var n=Si();lo(e,t,134217728,n)}yA(t,134217728)}};EF=function(t){if(t.tag===13){var e=zl(t),n=Oa(t,e);if(n!==null){var r=Si();lo(n,t,e,r)}yA(t,e)}};MF=function(){return mn};TF=function(t,e){var n=mn;try{return mn=t,e()}finally{mn=n}};zE=function(t,e,n){switch(e){case"input":if(kE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Mx(r);if(!i)throw Error(Ie(90));rF(r),kE(r,i)}}}break;case"textarea":sF(t,n);break;case"select":e=n.value,e!=null&&yf(t,!!n.multiple,e,!1)}};fF=hA;hF=wu;var I$={usingClientEntryPoint:!1,Events:[gg,Yd,Mx,uF,dF,hA]},tp={findFiberByHostInstance:$c,bundleType:0,version:"18.3.0",rendererPackageName:"react-dom"},L$={bundleType:tp.bundleType,version:tp.version,rendererPackageName:tp.rendererPackageName,rendererConfig:tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ha.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gF(t),t===null?null:t.stateNode},findFiberByHostInstance:tp.findFiberByHostInstance||R$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.0-next-8a015b68cc-20240425"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ey=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ey.isDisabled&&ey.supportsFiber)try{Sx=ey.inject(L$),Vo=ey}catch{}}us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I$;us.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xA(e))throw Error(Ie(200));return A$(t,e,null,n)};us.createRoot=function(t,e){if(!xA(t))throw Error(Ie(299));var n=!1,r="",i=qB;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vA(t,1,!1,null,null,n,!1,r,i),t[ka]=e.current,vm(t.nodeType===8?t.parentNode:t),new _A(e)};us.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ie(188)):(t=Object.keys(t).join(","),Error(Ie(268,t)));return t=gF(e),t=t===null?null:t.stateNode,t};us.flushSync=function(t){return wu(t)};us.hydrate=function(t,e,n){if(!Ox(e))throw Error(Ie(200));return Nx(null,t,e,!0,n)};us.hydrateRoot=function(t,e,n){if(!xA(t))throw Error(Ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qB;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=XB(e,null,t,1,n??null,i,!1,s,o),t[ka]=e.current,vm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new kx(e)};us.render=function(t,e,n){if(!Ox(e))throw Error(Ie(200));return Nx(null,t,e,!1,n)};us.unmountComponentAtNode=function(t){if(!Ox(t))throw Error(Ie(40));return t._reactRootContainer?(wu(function(){Nx(null,null,t,!1,function(){t._reactRootContainer=null,t[ka]=null})}),!0):!1};us.unstable_batchedUpdates=hA;us.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ox(n))throw Error(Ie(200));if(t==null||t._reactInternals===void 0)throw Error(Ie(38));return Nx(t,e,n,!1,r)};us.version="18.3.0-next-8a015b68cc-20240425";function YB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YB)}catch(t){console.error(t)}}YB(),YU.exports=us;var Dx=YU.exports;const k$=_x(Dx),O$=UU({__proto__:null,default:k$},[Dx]);var BL=Dx;TE.createRoot=BL.createRoot,TE.hydrateRoot=BL.hydrateRoot;function KB(t,e){return function(){return t.apply(e,arguments)}}const{toString:N$}=Object.prototype,{getPrototypeOf:SA}=Object,Ux=(t=>e=>{const n=N$.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),go=t=>(t=t.toLowerCase(),e=>Ux(e)===t),Fx=t=>e=>typeof e===t,{isArray:oh}=Array,Tm=Fx("undefined");function D$(t){return t!==null&&!Tm(t)&&t.constructor!==null&&!Tm(t.constructor)&&Ds(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const JB=go("ArrayBuffer");function U$(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&JB(t.buffer),e}const F$=Fx("string"),Ds=Fx("function"),ZB=Fx("number"),Bx=t=>t!==null&&typeof t=="object",B$=t=>t===!0||t===!1,I0=t=>{if(Ux(t)!=="object")return!1;const e=SA(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z$=go("Date"),V$=go("File"),H$=go("Blob"),j$=go("FileList"),W$=t=>Bx(t)&&Ds(t.pipe),G$=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ds(t.append)&&((e=Ux(t))==="formdata"||e==="object"&&Ds(t.toString)&&t.toString()==="[object FormData]"))},$$=go("URLSearchParams"),[X$,q$,Y$,K$]=["ReadableStream","Request","Response","Headers"].map(go),J$=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yg(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),oh(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function QB(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const ez=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tz=t=>!Tm(t)&&t!==ez;function _M(){const{caseless:t}=tz(this)&&this||{},e={},n=(r,i)=>{const s=t&&QB(e,i)||i;I0(e[s])&&I0(r)?e[s]=_M(e[s],r):I0(r)?e[s]=_M({},r):oh(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&yg(arguments[r],n);return e}const Z$=(t,e,n,{allOwnKeys:r}={})=>(yg(e,(i,s)=>{n&&Ds(i)?t[s]=KB(i,n):t[s]=i},{allOwnKeys:r}),t),Q$=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),e7=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},t7=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&SA(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},n7=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},r7=t=>{if(!t)return null;if(oh(t))return t;let e=t.length;if(!ZB(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},i7=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&SA(Uint8Array)),s7=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},o7=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},a7=go("HTMLFormElement"),l7=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),zL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),c7=go("RegExp"),nz=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};yg(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},u7=t=>{nz(t,(e,n)=>{if(Ds(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ds(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},d7=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return oh(t)?r(t):r(String(t).split(e)),n},f7=()=>{},h7=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,D1="abcdefghijklmnopqrstuvwxyz",VL="0123456789",rz={DIGIT:VL,ALPHA:D1,ALPHA_DIGIT:D1+D1.toUpperCase()+VL},p7=(t=16,e=rz.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function m7(t){return!!(t&&Ds(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const g7=t=>{const e=new Array(10),n=(r,i)=>{if(Bx(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=oh(r)?[]:{};return yg(r,(o,a)=>{const l=n(o,i+1);!Tm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},v7=go("AsyncFunction"),y7=t=>t&&(Bx(t)||Ds(t))&&Ds(t.then)&&Ds(t.catch),ge={isArray:oh,isArrayBuffer:JB,isBuffer:D$,isFormData:G$,isArrayBufferView:U$,isString:F$,isNumber:ZB,isBoolean:B$,isObject:Bx,isPlainObject:I0,isReadableStream:X$,isRequest:q$,isResponse:Y$,isHeaders:K$,isUndefined:Tm,isDate:z$,isFile:V$,isBlob:H$,isRegExp:c7,isFunction:Ds,isStream:W$,isURLSearchParams:$$,isTypedArray:i7,isFileList:j$,forEach:yg,merge:_M,extend:Z$,trim:J$,stripBOM:Q$,inherits:e7,toFlatObject:t7,kindOf:Ux,kindOfTest:go,endsWith:n7,toArray:r7,forEachEntry:s7,matchAll:o7,isHTMLForm:a7,hasOwnProperty:zL,hasOwnProp:zL,reduceDescriptors:nz,freezeMethods:u7,toObjectSet:d7,toCamelCase:l7,noop:f7,toFiniteNumber:h7,findKey:QB,global:ez,isContextDefined:tz,ALPHABET:rz,generateString:p7,isSpecCompliantForm:m7,toJSONObject:g7,isAsyncFn:v7,isThenable:y7};function Ot(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}ge.inherits(Ot,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const iz=Ot.prototype,sz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sz[t]={value:t}});Object.defineProperties(Ot,sz);Object.defineProperty(iz,"isAxiosError",{value:!0});Ot.from=(t,e,n,r,i,s)=>{const o=Object.create(iz);return ge.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Ot.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const _7=null;function xM(t){return ge.isPlainObject(t)||ge.isArray(t)}function oz(t){return ge.endsWith(t,"[]")?t.slice(0,-2):t}function HL(t,e,n){return t?t.concat(e).map(function(i,s){return i=oz(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function x7(t){return ge.isArray(t)&&!t.some(xM)}const S7=ge.toFlatObject(ge,{},null,function(e){return/^is[A-Z]/.test(e)});function zx(t,e,n){if(!ge.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ge.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!ge.isUndefined(_[y])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(e);if(!ge.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(ge.isDate(g))return g.toISOString();if(!l&&ge.isBlob(g))throw new Ot("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(g)||ge.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,y,_){let v=g;if(g&&!_&&typeof g=="object"){if(ge.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(ge.isArray(g)&&x7(g)||(ge.isFileList(g)||ge.endsWith(y,"[]"))&&(v=ge.toArray(g)))return y=oz(y),v.forEach(function(w,E){!(ge.isUndefined(w)||w===null)&&e.append(o===!0?HL([y],E,s):o===null?y:y+"[]",c(w))}),!1}return xM(g)?!0:(e.append(HL(_,y,s),c(g)),!1)}const d=[],p=Object.assign(S7,{defaultVisitor:u,convertValue:c,isVisitable:xM});function m(g,y){if(!ge.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(g),ge.forEach(g,function(v,S){(!(ge.isUndefined(v)||v===null)&&i.call(e,v,ge.isString(S)?S.trim():S,y,p))===!0&&m(v,y?y.concat(S):[S])}),d.pop()}}if(!ge.isObject(t))throw new TypeError("data must be an object");return m(t),e}function jL(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function wA(t,e){this._pairs=[],t&&zx(t,this,e)}const az=wA.prototype;az.append=function(e,n){this._pairs.push([e,n])};az.toString=function(e){const n=e?function(r){return e.call(this,r,jL)}:jL;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function w7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lz(t,e,n){if(!e)return t;const r=n&&n.encode||w7,i=n&&n.serialize;let s;if(i?s=i(e,n):s=ge.isURLSearchParams(e)?e.toString():new wA(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class WL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ge.forEach(this.handlers,function(r){r!==null&&e(r)})}}const cz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},b7=typeof URLSearchParams<"u"?URLSearchParams:wA,E7=typeof FormData<"u"?FormData:null,M7=typeof Blob<"u"?Blob:null,T7={isBrowser:!0,classes:{URLSearchParams:b7,FormData:E7,Blob:M7},protocols:["http","https","file","blob","url","data"]},bA=typeof window<"u"&&typeof document<"u",C7=(t=>bA&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),A7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",R7=bA&&window.location.href||"http://localhost",P7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bA,hasStandardBrowserEnv:C7,hasStandardBrowserWebWorkerEnv:A7,origin:R7},Symbol.toStringTag,{value:"Module"})),co={...P7,...T7};function I7(t,e){return zx(t,new co.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return co.isNode&&ge.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function L7(t){return ge.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function k7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function uz(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&ge.isArray(i)?i.length:o,l?(ge.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!ge.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&ge.isArray(i[o])&&(i[o]=k7(i[o])),!a)}if(ge.isFormData(t)&&ge.isFunction(t.entries)){const n={};return ge.forEachEntry(t,(r,i)=>{e(L7(r),i,n,0)}),n}return null}function O7(t,e,n){if(ge.isString(t))try{return(e||JSON.parse)(t),ge.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const EA={transitional:cz,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=ge.isObject(e);if(s&&ge.isHTMLForm(e)&&(e=new FormData(e)),ge.isFormData(e))return i?JSON.stringify(uz(e)):e;if(ge.isArrayBuffer(e)||ge.isBuffer(e)||ge.isStream(e)||ge.isFile(e)||ge.isBlob(e)||ge.isReadableStream(e))return e;if(ge.isArrayBufferView(e))return e.buffer;if(ge.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return I7(e,this.formSerializer).toString();if((a=ge.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return zx(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),O7(e)):e}],transformResponse:[function(e){const n=this.transitional||EA.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(ge.isResponse(e)||ge.isReadableStream(e))return e;if(e&&ge.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Ot.from(a,Ot.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:co.classes.FormData,Blob:co.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],t=>{EA.headers[t]={}});const MA=EA,N7=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),D7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&N7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},GL=Symbol("internals");function np(t){return t&&String(t).trim().toLowerCase()}function L0(t){return t===!1||t==null?t:ge.isArray(t)?t.map(L0):String(t)}function U7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const F7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function U1(t,e,n,r,i){if(ge.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!ge.isString(e)){if(ge.isString(r))return e.indexOf(r)!==-1;if(ge.isRegExp(r))return r.test(e)}}function B7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function z7(t,e){const n=ge.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Vx{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=np(l);if(!u)throw new Error("header name must be a non-empty string");const d=ge.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=L0(a))}const o=(a,l)=>ge.forEach(a,(c,u)=>s(c,u,l));if(ge.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(ge.isString(e)&&(e=e.trim())&&!F7(e))o(D7(e),n);else if(ge.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=np(e),e){const r=ge.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return U7(i);if(ge.isFunction(n))return n.call(this,i,r);if(ge.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=np(e),e){const r=ge.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||U1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=np(o),o){const a=ge.findKey(r,o);a&&(!n||U1(r,r[a],a,n))&&(delete r[a],i=!0)}}return ge.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||U1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return ge.forEach(this,(i,s)=>{const o=ge.findKey(r,s);if(o){n[o]=L0(i),delete n[s];return}const a=e?B7(s):String(s).trim();a!==s&&delete n[s],n[a]=L0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ge.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&ge.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[GL]=this[GL]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=np(o);r[a]||(z7(i,o),r[a]=!0)}return ge.isArray(e)?e.forEach(s):s(e),this}}Vx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(Vx.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});ge.freezeMethods(Vx);const uo=Vx;function F1(t,e){const n=this||MA,r=e||n,i=uo.from(r.headers);let s=r.data;return ge.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function dz(t){return!!(t&&t.__CANCEL__)}function ah(t,e,n){Ot.call(this,t??"canceled",Ot.ERR_CANCELED,e,n),this.name="CanceledError"}ge.inherits(ah,Ot,{__CANCEL__:!0});function fz(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ot("Request failed with status code "+n.status,[Ot.ERR_BAD_REQUEST,Ot.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function V7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function H7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,p=0;for(;d!==i;)p+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=u&&c-u;return m?Math.round(p*1e3/m):void 0}}function j7(t,e){let n=0;const r=1e3/e;let i=null;return function(){const o=this===!0,a=Date.now();if(o||a-n>r)return i&&(clearTimeout(i),i=null),n=a,t.apply(null,arguments);i||(i=setTimeout(()=>(i=null,n=Date.now(),t.apply(null,arguments)),r-(a-n)))}}const M_=(t,e,n=3)=>{let r=0;const i=H7(50,250);return j7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null};d[e?"download":"upload"]=!0,t(d)},n)},W7=co.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=ge.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),G7=co.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];ge.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ge.isString(r)&&o.push("path="+r),ge.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function $7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function X7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function hz(t,e){return t&&!$7(e)?X7(t,e):e}const $L=t=>t instanceof uo?{...t}:t;function bu(t,e){e=e||{};const n={};function r(c,u,d){return ge.isPlainObject(c)&&ge.isPlainObject(u)?ge.merge.call({caseless:d},c,u):ge.isPlainObject(u)?ge.merge({},u):ge.isArray(u)?u.slice():u}function i(c,u,d){if(ge.isUndefined(u)){if(!ge.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function s(c,u){if(!ge.isUndefined(u))return r(void 0,u)}function o(c,u){if(ge.isUndefined(u)){if(!ge.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i($L(c),$L(u),!0)};return ge.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||i,p=d(t[u],e[u],u);ge.isUndefined(p)&&d!==a||(n[u]=p)}),n}const pz=t=>{const e=bu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=uo.from(o),e.url=lz(hz(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ge.isFormData(n)){if(co.hasStandardBrowserEnv||co.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(co.hasStandardBrowserEnv&&(r&&ge.isFunction(r)&&(r=r(e)),r||r!==!1&&W7(e.url))){const c=i&&s&&G7.read(s);c&&o.set(i,c)}return e},q7=typeof XMLHttpRequest<"u",Y7=q7&&function(t){return new Promise(function(n,r){const i=pz(t);let s=i.data;const o=uo.from(i.headers).normalize();let{responseType:a}=i,l;function c(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let u=new XMLHttpRequest;u.open(i.method.toUpperCase(),i.url,!0),u.timeout=i.timeout;function d(){if(!u)return;const m=uo.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:m,config:t,request:u};fz(function(v){n(v),c()},function(v){r(v),c()},y),u=null}"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(r(new Ot("Request aborted",Ot.ECONNABORTED,i,u)),u=null)},u.onerror=function(){r(new Ot("Network Error",Ot.ERR_NETWORK,i,u)),u=null},u.ontimeout=function(){let g=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const y=i.transitional||cz;i.timeoutErrorMessage&&(g=i.timeoutErrorMessage),r(new Ot(g,y.clarifyTimeoutError?Ot.ETIMEDOUT:Ot.ECONNABORTED,i,u)),u=null},s===void 0&&o.setContentType(null),"setRequestHeader"in u&&ge.forEach(o.toJSON(),function(g,y){u.setRequestHeader(y,g)}),ge.isUndefined(i.withCredentials)||(u.withCredentials=!!i.withCredentials),a&&a!=="json"&&(u.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&u.addEventListener("progress",M_(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",M_(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=m=>{u&&(r(!m||m.type?new ah(null,t,u):m),u.abort(),u=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const p=V7(i.url);if(p&&co.protocols.indexOf(p)===-1){r(new Ot("Unsupported protocol "+p+":",Ot.ERR_BAD_REQUEST,t));return}u.send(s||null)})},K7=(t,e)=>{let n=new AbortController,r;const i=function(l){if(!r){r=!0,o();const c=l instanceof Error?l:this.reason;n.abort(c instanceof Ot?c:new ah(c instanceof Error?c.message:c))}};let s=e&&setTimeout(()=>{i(new Ot(`timeout ${e} of ms exceeded`,Ot.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",i):l.unsubscribe(i))}),t=null)};t.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",i));const{signal:a}=n;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]},J7=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Z7=async function*(t,e,n){for await(const r of t)yield*J7(ArrayBuffer.isView(r)?r:await n(String(r)),e)},XL=(t,e,n,r,i)=>{const s=Z7(t,e,i);let o=0;return new ReadableStream({type:"bytes",async pull(a){const{done:l,value:c}=await s.next();if(l){a.close(),r();return}let u=c.byteLength;n&&n(o+=u),a.enqueue(new Uint8Array(c))},cancel(a){return r(a),s.return()}},{highWaterMark:2})},qL=(t,e)=>{const n=t!=null;return r=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:r}))},Hx=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",mz=Hx&&typeof ReadableStream=="function",SM=Hx&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Q7=mz&&(()=>{let t=!1;const e=new Request(co.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),YL=64*1024,wM=mz&&!!(()=>{try{return ge.isReadableStream(new Response("").body)}catch{}})(),T_={stream:wM&&(t=>t.body)};Hx&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!T_[e]&&(T_[e]=ge.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ot(`Response type '${e}' is not supported`,Ot.ERR_NOT_SUPPORT,r)})})})(new Response);const eX=async t=>{if(t==null)return 0;if(ge.isBlob(t))return t.size;if(ge.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(ge.isArrayBufferView(t))return t.byteLength;if(ge.isURLSearchParams(t)&&(t=t+""),ge.isString(t))return(await SM(t)).byteLength},tX=async(t,e)=>{const n=ge.toFiniteNumber(t.getContentLength());return n??eX(e)},nX=Hx&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:p}=pz(t);c=c?(c+"").toLowerCase():"text";let[m,g]=i||s||o?K7([i,s],o):[],y,_;const v=()=>{!y&&setTimeout(()=>{m&&m.unsubscribe()}),y=!0};let S;try{if(l&&Q7&&n!=="get"&&n!=="head"&&(S=await tX(u,r))!==0){let A=new Request(e,{method:"POST",body:r,duplex:"half"}),M;ge.isFormData(r)&&(M=A.headers.get("content-type"))&&u.setContentType(M),A.body&&(r=XL(A.body,YL,qL(S,M_(l)),null,SM))}ge.isString(d)||(d=d?"cors":"omit"),_=new Request(e,{...p,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",withCredentials:d});let w=await fetch(_);const E=wM&&(c==="stream"||c==="response");if(wM&&(a||E)){const A={};["status","statusText","headers"].forEach(L=>{A[L]=w[L]});const M=ge.toFiniteNumber(w.headers.get("content-length"));w=new Response(XL(w.body,YL,a&&qL(M,M_(a,!0)),E&&v,SM),A)}c=c||"text";let R=await T_[ge.findKey(T_,c)||"text"](w,t);return!E&&v(),g&&g(),await new Promise((A,M)=>{fz(A,M,{data:R,headers:uo.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:_})})}catch(w){throw v(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new Ot("Network Error",Ot.ERR_NETWORK,t,_),{cause:w.cause||w}):Ot.from(w,w&&w.code,t,_)}}),bM={http:_7,xhr:Y7,fetch:nX};ge.forEach(bM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const KL=t=>`- ${t}`,rX=t=>ge.isFunction(t)||t===null||t===!1,gz={getAdapter:t=>{t=ge.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!rX(n)&&(r=bM[(o=String(n)).toLowerCase()],r===void 0))throw new Ot(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(KL).join(`
`):" "+KL(s[0]):"as no adapter specified";throw new Ot("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:bM};function B1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ah(null,t)}function JL(t){return B1(t),t.headers=uo.from(t.headers),t.data=F1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),gz.getAdapter(t.adapter||MA.adapter)(t).then(function(r){return B1(t),r.data=F1.call(t,t.transformResponse,r),r.headers=uo.from(r.headers),r},function(r){return dz(r)||(B1(t),r&&r.response&&(r.response.data=F1.call(t,t.transformResponse,r.response),r.response.headers=uo.from(r.response.headers))),Promise.reject(r)})}const vz="1.7.2",TA={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{TA[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const ZL={};TA.transitional=function(e,n,r){function i(s,o){return"[Axios v"+vz+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Ot(i(o," has been removed"+(n?" in "+n:"")),Ot.ERR_DEPRECATED);return n&&!ZL[o]&&(ZL[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function iX(t,e,n){if(typeof t!="object")throw new Ot("options must be an object",Ot.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Ot("option "+s+" must be "+l,Ot.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ot("Unknown option "+s,Ot.ERR_BAD_OPTION)}}const EM={assertOptions:iX,validators:TA},il=EM.validators;class C_{constructor(e){this.defaults=e,this.interceptors={request:new WL,response:new WL}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=bu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&EM.assertOptions(r,{silentJSONParsing:il.transitional(il.boolean),forcedJSONParsing:il.transitional(il.boolean),clarifyTimeoutError:il.transitional(il.boolean)},!1),i!=null&&(ge.isFunction(i)?n.paramsSerializer={serialize:i}:EM.assertOptions(i,{encode:il.function,serialize:il.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&ge.merge(s.common,s[n.method]);s&&ge.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=uo.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,d=0,p;if(!l){const g=[JL.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),p=g.length,u=Promise.resolve(n);d<p;)u=u.then(g[d++],g[d++]);return u}p=a.length;let m=n;for(d=0;d<p;){const g=a[d++],y=a[d++];try{m=g(m)}catch(_){y.call(this,_);break}}try{u=JL.call(this,m)}catch(g){return Promise.reject(g)}for(d=0,p=c.length;d<p;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=bu(this.defaults,e);const n=hz(e.baseURL,e.url);return lz(n,e.params,e.paramsSerializer)}}ge.forEach(["delete","get","head","options"],function(e){C_.prototype[e]=function(n,r){return this.request(bu(r||{},{method:e,url:n,data:(r||{}).data}))}});ge.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(bu(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}C_.prototype[e]=n(),C_.prototype[e+"Form"]=n(!0)});const k0=C_;class CA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new ah(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new CA(function(i){e=i}),cancel:e}}}const sX=CA;function oX(t){return function(n){return t.apply(null,n)}}function aX(t){return ge.isObject(t)&&t.isAxiosError===!0}const MM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(MM).forEach(([t,e])=>{MM[e]=t});const lX=MM;function yz(t){const e=new k0(t),n=KB(k0.prototype.request,e);return ge.extend(n,k0.prototype,e,{allOwnKeys:!0}),ge.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return yz(bu(t,i))},n}const Pn=yz(MA);Pn.Axios=k0;Pn.CanceledError=ah;Pn.CancelToken=sX;Pn.isCancel=dz;Pn.VERSION=vz;Pn.toFormData=zx;Pn.AxiosError=Ot;Pn.Cancel=Pn.CanceledError;Pn.all=function(e){return Promise.all(e)};Pn.spread=oX;Pn.isAxiosError=aX;Pn.mergeConfig=bu;Pn.AxiosHeaders=uo;Pn.formToJSON=t=>uz(ge.isHTMLForm(t)?new FormData(t):t);Pn.getAdapter=gz.getAdapter;Pn.HttpStatusCode=lX;Pn.default=Pn;const _z=O.createContext(),ja=()=>O.useContext(_z),cX=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{},[s]),O.useEffect(()=>{const g=JSON.parse(localStorage.getItem("session"));g&&n(g),i(!1)},[]);const a=async(g,y,_,v)=>{i(!0);try{if((await Pn.post("https://push-it-backend.vercel.app/register",{email:g,username:y,fullname:_,password:v})).status!==201)throw new Error("Sign up failed")}catch(S){throw S}finally{i(!1)}},l=async()=>{try{const g=await Pn.post("https://push-it-backend.vercel.app/resend-verification",{username:e.user.username},{headers:{Authorization:`Bearer ${e.token}`}});if(g.status!==200)throw new Error("Failed to resend verification email");console.log(g.data.message)}catch(g){console.error("Error resending verification email:",g),alert("Error resending verification email. Please try again later.")}},c=async(g,y)=>{i(!0);try{const _=await Pn.post("https://push-it-backend.vercel.app/login",{username:g,password:y});if(o(_.status),_.status!==200)throw new Error("Login failed");const v=_.data;n(v),localStorage.setItem("session",JSON.stringify(v)),window.location.reload()}catch(_){throw _}finally{i(!1)}},u=()=>{n(null),localStorage.removeItem("session"),window.location.reload()},d=async g=>{i(!0);try{const y=await Pn.get(`https://push-it-backend.vercel.app/verify-email?token=${g}`);if(y.status!==200)throw new Error("Email verification failed");const _=y.data;n(_),localStorage.setItem("session",JSON.stringify(_))}catch(y){throw y}finally{i(!1)}},p=async g=>{i(!0);try{const y=await Pn.post("https://push-it-backend.vercel.app/request-password-reset",{email:g});if(y.status!==200)throw new Error("Failed to send password reset link");console.log(y.data.message)}catch(y){throw console.error("Error sending password reset link:",y),y}finally{i(!1)}},m=async(g,y)=>{i(!0);try{const _=await Pn.post("https://push-it-backend.vercel.app/reset-password",{token:g,newPassword:y});if(_.status!==200)throw new Error("Password reset failed");console.log(_.data.message)}catch(_){throw console.error("Error resetting password:",_),_}finally{i(!1)}};return r?U.jsx("div",{children:"Loading..."}):U.jsx(_z.Provider,{value:{session:e,resendVerificationEmail:l,login:c,logout:u,signUp:a,verifyEmail:d,requestPasswordReset:p,resetPassword:m,status:s},children:t})},jx=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Wx=O.createContext({}),Gx=O.createContext(null),AA=typeof document<"u",$x=AA?O.useLayoutEffect:O.useEffect,xz=O.createContext({strict:!1}),RA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uX="framerAppearId",Sz="data-"+RA(uX),dX={skipAnimations:!1,useManualTiming:!1};class QL{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function fX(t){let e=new QL,n=new QL,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&i,p=d?e:n;return c&&o.add(l),p.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];o.has(u)&&(a.schedule(u),t()),u(l)}i=!1,s&&(s=!1,a.process(l))}};return a}const ty=["read","resolveKeyframes","update","preRender","render","postRender"],hX=40;function wz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=ty.reduce((d,p)=>(d[p]=fX(()=>n=!0),d),{}),o=d=>{s[d].process(i)},a=()=>{const d=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,hX),1),i.timestamp=d,i.isProcessing=!0,ty.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:ty.reduce((d,p)=>{const m=s[p];return d[p]=(g,y=!1,_=!1)=>(n||l(),m.schedule(g,y,_)),d},{}),cancel:d=>ty.forEach(p=>s[p].cancel(d)),state:i,steps:s}}const{schedule:PA,cancel:U1e}=wz(queueMicrotask,!1);function pX(t,e,n,r){const{visualElement:i}=O.useContext(Wx),s=O.useContext(xz),o=O.useContext(Gx),a=O.useContext(jx).reducedMotion,l=O.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;O.useInsertionEffect(()=>{c&&c.update(n,o)});const u=O.useRef(!!(n[Sz]&&!window.HandoffComplete));return $x(()=>{c&&(PA.postRender(c.render),u.current&&c.animationState&&c.animationState.animateChanges())}),O.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function nf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function mX(t,e,n){return O.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):nf(n)&&(n.current=r))},[e])}function Cm(t){return typeof t=="string"||Array.isArray(t)}function Xx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const IA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],LA=["initial",...IA];function qx(t){return Xx(t.animate)||LA.some(e=>Cm(t[e]))}function bz(t){return!!(qx(t)||t.variants)}function gX(t,e){if(qx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Cm(n)?n:void 0,animate:Cm(r)?r:void 0}}return t.inherit!==!1?e:{}}function vX(t){const{initial:e,animate:n}=gX(t,O.useContext(Wx));return O.useMemo(()=>({initial:e,animate:n}),[ek(e),ek(n)])}function ek(t){return Array.isArray(t)?t.join(" "):t}const tk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Am={};for(const t in tk)Am[t]={isEnabled:e=>tk[t].some(n=>!!e[n])};function yX(t){for(const e in t)Am[e]={...Am[e],...t[e]}}const kA=O.createContext({}),Ez=O.createContext({}),_X=Symbol.for("motionComponentSymbol");function xX({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&yX(t);function s(a,l){let c;const u={...O.useContext(jx),...a,layoutId:SX(a)},{isStatic:d}=u,p=vX(a),m=r(a,d);if(!d&&AA){p.visualElement=pX(i,m,u,e);const g=O.useContext(Ez),y=O.useContext(xz).strict;p.visualElement&&(c=p.visualElement.loadFeatures(u,y,t,g))}return U.jsxs(Wx.Provider,{value:p,children:[c&&p.visualElement?U.jsx(c,{visualElement:p.visualElement,...u}):null,n(i,a,mX(m,p.visualElement,l),m,d,p.visualElement)]})}const o=O.forwardRef(s);return o[_X]=i,o}function SX({layoutId:t}){const e=O.useContext(kA).id;return e&&t!==void 0?e+"-"+t:t}function wX(t){function e(r,i={}){return xX(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const bX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OA(t){return typeof t!="string"||t.includes("-")?!1:!!(bX.indexOf(t)>-1||/[A-Z]/u.test(t))}const A_={};function EX(t){Object.assign(A_,t)}const _g=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ou=new Set(_g);function Mz(t,{layout:e,layoutId:n}){return Ou.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!A_[t]||t==="opacity")}const mr=t=>!!(t&&t.getVelocity),MX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TX=_g.length;function CX(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<TX;o++){const a=_g[o];if(t[a]!==void 0){const l=MX[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const Tz=t=>e=>typeof e=="string"&&e.startsWith(t),Cz=Tz("--"),AX=Tz("var(--"),NA=t=>AX(t)?RX.test(t.split("/*")[0].trim()):!1,RX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,PX=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Yl=(t,e,n)=>n>e?e:n<t?t:n,lh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$p={...lh,transform:t=>Yl(0,1,t)},ny={...lh,default:1},Xp=t=>Math.round(t*1e5)/1e5,DA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,IX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,LX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function xg(t){return typeof t=="string"}const Sg=t=>({test:e=>xg(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ml=Sg("deg"),jo=Sg("%"),xt=Sg("px"),kX=Sg("vh"),OX=Sg("vw"),nk={...jo,parse:t=>jo.parse(t)/100,transform:t=>jo.transform(t*100)},rk={...lh,transform:Math.round},Az={borderWidth:xt,borderTopWidth:xt,borderRightWidth:xt,borderBottomWidth:xt,borderLeftWidth:xt,borderRadius:xt,radius:xt,borderTopLeftRadius:xt,borderTopRightRadius:xt,borderBottomRightRadius:xt,borderBottomLeftRadius:xt,width:xt,maxWidth:xt,height:xt,maxHeight:xt,size:xt,top:xt,right:xt,bottom:xt,left:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,rotate:ml,rotateX:ml,rotateY:ml,rotateZ:ml,scale:ny,scaleX:ny,scaleY:ny,scaleZ:ny,skew:ml,skewX:ml,skewY:ml,distance:xt,translateX:xt,translateY:xt,translateZ:xt,x:xt,y:xt,z:xt,perspective:xt,transformPerspective:xt,opacity:$p,originX:nk,originY:nk,originZ:xt,zIndex:rk,backgroundPositionX:xt,backgroundPositionY:xt,fillOpacity:$p,strokeOpacity:$p,numOctaves:rk};function UA(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const d in e){const p=e[d];if(Cz(d)){s[d]=p;continue}const m=Az[d],g=PX(p,m);if(Ou.has(d)){if(l=!0,o[d]=g,!u)continue;p!==(m.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=g):i[d]=g}if(e.transform||(l||r?i.transform=CX(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;i.transformOrigin=`${d} ${p} ${m}`}}const FA=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rz(t,e,n){for(const r in e)!mr(e[r])&&!Mz(r,n)&&(t[r]=e[r])}function NX({transformTemplate:t},e,n){return O.useMemo(()=>{const r=FA();return UA(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function DX(t,e,n){const r=t.style||{},i={};return Rz(i,r,t),Object.assign(i,NX(t,e,n)),i}function UX(t,e,n){const r={},i=DX(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const FX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function R_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||FX.has(t)}let Pz=t=>!R_(t);function BX(t){t&&(Pz=e=>e.startsWith("on")?!R_(e):t(e))}try{BX(require("@emotion/is-prop-valid").default)}catch{}function zX(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Pz(i)||n===!0&&R_(i)||!e&&!R_(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function ik(t,e,n){return typeof t=="string"?t:xt.transform(e+n*t)}function VX(t,e,n){const r=ik(e,t.x,t.width),i=ik(n,t.y,t.height);return`${r} ${i}`}const HX={offset:"stroke-dashoffset",array:"stroke-dasharray"},jX={offset:"strokeDashoffset",array:"strokeDasharray"};function WX(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?HX:jX;t[s.offset]=xt.transform(-r);const o=xt.transform(e),a=xt.transform(n);t[s.array]=`${o} ${a}`}function BA(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,p){if(UA(t,c,u,p),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:y}=t;m.transform&&(y&&(g.transform=m.transform),delete m.transform),y&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=VX(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&WX(m,o,a,l,!1)}const Iz=()=>({...FA(),attrs:{}}),zA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GX(t,e,n,r){const i=O.useMemo(()=>{const s=Iz();return BA(s,e,{enableHardwareAcceleration:!1},zA(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Rz(s,t.style,t),i.style={...s,...i.style}}return i}function $X(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(OA(n)?GX:UX)(r,s,o,n),c=zX(r,typeof n=="string",t),u=n!==O.Fragment?{...c,...l,ref:i}:{},{children:d}=r,p=O.useMemo(()=>mr(d)?d.get():d,[d]);return O.createElement(n,{...u,children:p})}}function Lz(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const kz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Oz(t,e,n,r){Lz(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(kz.has(i)?i:RA(i),e.attrs[i])}function VA(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(mr(i[o])||e.style&&mr(e.style[o])||Mz(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function Nz(t,e,n){const r=VA(t,e,n);for(const i in t)if(mr(t[i])||mr(e[i])){const s=_g.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function HA(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function jA(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const TM=t=>Array.isArray(t),XX=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),qX=t=>TM(t)?t[t.length-1]||0:t;function O0(t){const e=mr(t)?t.get():t;return XX(e)?e.toValue():e}function YX({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:KX(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const Dz=t=>(e,n)=>{const r=O.useContext(Wx),i=O.useContext(Gx),s=()=>YX(t,e,r,i);return n?s():jA(s)};function KX(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=O0(s[p]);let{initial:o,animate:a}=t;const l=qx(t),c=bz(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!Xx(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const g=HA(t,m);if(!g)return;const{transitionEnd:y,transition:_,...v}=g;for(const S in v){let w=v[S];if(Array.isArray(w)){const E=u?w.length-1:0;w=w[E]}w!==null&&(i[S]=w)}for(const S in y)i[S]=y[S]}),i}const ai=t=>t,{schedule:vr,cancel:qo,state:Hr,steps:z1}=wz(typeof requestAnimationFrame<"u"?requestAnimationFrame:ai,!0),JX={useVisualState:Dz({scrapeMotionValuesFromProps:Nz,createRenderState:Iz,onMount:(t,e,{renderState:n,latestValues:r})=>{vr.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),vr.render(()=>{BA(n,r,{enableHardwareAcceleration:!1},zA(e.tagName),t.transformTemplate),Oz(e,n)})}})},ZX={useVisualState:Dz({scrapeMotionValuesFromProps:VA,createRenderState:FA})};function QX(t,{forwardMotionProps:e=!1},n,r){return{...OA(t)?JX:ZX,preloadedFeatures:n,useRender:$X(e),createVisualElement:r,Component:t}}function Sa(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Uz=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Yx(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const eq=t=>e=>Uz(e)&&t(e,Yx(e));function Ma(t,e,n,r){return Sa(t,e,eq(n),r)}const tq=(t,e)=>n=>e(t(n)),Ta=(...t)=>t.reduce(tq);function Fz(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const sk=Fz("dragHorizontal"),ok=Fz("dragVertical");function Bz(t){let e=!1;if(t==="y")e=ok();else if(t==="x")e=sk();else{const n=sk(),r=ok();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function zz(){const t=Bz(!0);return t?(t(),!1):!0}class oc{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ak(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||zz())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&l(s,o)};return Ma(t.current,n,i,{passive:!t.getProps()[r]})}class nq extends oc{mount(){this.unmount=Ta(ak(this.node,!0),ak(this.node,!1))}unmount(){}}class rq extends oc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ta(Sa(this.node.current,"focus",()=>this.onFocus()),Sa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Vz=(t,e)=>e?t===e?!0:Vz(t,e.parentElement):!1;function V1(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Yx(n))}class iq extends oc{constructor(){super(...arguments),this.removeStartListeners=ai,this.removeEndListeners=ai,this.removeAccessibleListeners=ai,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Ma(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();!d&&!Vz(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)},{passive:!(r.onTap||r.onPointerUp)}),o=Ma(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ta(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||V1("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&u(l,c)})};this.removeEndListeners(),this.removeEndListeners=Sa(this.node.current,"keyup",o),V1("down",(a,l)=>{this.startPress(a,l)})},n=Sa(this.node.current,"keydown",e),r=()=>{this.isPressing&&V1("cancel",(s,o)=>this.cancelPress(s,o))},i=Sa(this.node.current,"blur",r);this.removeAccessibleListeners=Ta(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&r(e,n)}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zz()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&r(e,n)}mount(){const e=this.node.getProps(),n=Ma(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Sa(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ta(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const CM=new WeakMap,H1=new WeakMap,sq=t=>{const e=CM.get(t.target);e&&e(t)},oq=t=>{t.forEach(sq)};function aq({root:t,...e}){const n=t||document;H1.has(n)||H1.set(n,{});const r=H1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(oq,{root:t,...e})),r[i]}function lq(t,e,n){const r=aq(e);return CM.set(t,n),r.observe(t),()=>{CM.delete(t),r.unobserve(t)}}const cq={some:0,all:1};class uq extends oc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:cq[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),p=c?u:d;p&&p(l)};return lq(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(dq(e,n))&&this.startObserver()}unmount(){}}function dq({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const fq={inView:{Feature:uq},tap:{Feature:iq},focus:{Feature:rq},hover:{Feature:nq}};function Hz(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function hq(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function pq(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Kx(t,e,n){const r=t.getProps();return HA(r,e,n!==void 0?n:r.custom,hq(t),pq(t))}const Ca=t=>t*1e3,Wo=t=>t/1e3,mq={type:"spring",stiffness:500,damping:25,restSpeed:10},gq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),vq={type:"keyframes",duration:.8},yq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_q=(t,{keyframes:e})=>e.length>2?vq:Ou.has(t)?t.startsWith("scale")?gq(e[1]):mq:yq;function xq({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function WA(t,e){return t[e]||t.default||t}const Sq=t=>t!==null;function Jx(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Sq),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}let N0;function wq(){N0=void 0}const Hl={now:()=>(N0===void 0&&Hl.set(Hr.isProcessing||dX.useManualTiming?Hr.timestamp:performance.now()),N0),set:t=>{N0=t,queueMicrotask(wq)}},jz=t=>/^0[^.\s]+$/u.test(t);function bq(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||jz(t):!0}let GA=ai;const Wz=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Eq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mq(t){const e=Eq.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Gz(t,e,n=1){const[r,i]=Mq(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Wz(o)?parseFloat(o):o}return NA(i)?Gz(i,e,n+1):i}const Tq=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),lk=t=>t===lh||t===xt,ck=(t,e)=>parseFloat(t.split(", ")[e]),uk=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ck(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?ck(s[1],t):0}},Cq=new Set(["x","y","z"]),Aq=_g.filter(t=>!Cq.has(t));function Rq(t){const e=[];return Aq.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Df={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:uk(4,13),y:uk(5,14)};Df.translateX=Df.x;Df.translateY=Df.y;const $z=t=>e=>e.test(t),Pq={test:t=>t==="auto",parse:t=>t},Xz=[lh,xt,jo,ml,OX,kX,Pq],dk=t=>Xz.find($z(t)),au=new Set;let AM=!1,RM=!1;function qz(){if(RM){const t=Array.from(au).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Rq(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}RM=!1,AM=!1,au.forEach(t=>t.complete()),au.clear()}function Yz(){au.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(RM=!0)})}function Iq(){Yz(),qz()}class $A{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(au.add(this),AM||(AM=!0,vr.read(Yz),vr.resolveKeyframes(qz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),au.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,au.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const XA=(t,e)=>n=>!!(xg(n)&&LX.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Kz=(t,e,n)=>r=>{if(!xg(r))return r;const[i,s,o,a]=r.match(DA);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Lq=t=>Yl(0,255,t),j1={...lh,transform:t=>Math.round(Lq(t))},Yc={test:XA("rgb","red"),parse:Kz("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+j1.transform(t)+", "+j1.transform(e)+", "+j1.transform(n)+", "+Xp($p.transform(r))+")"};function kq(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const PM={test:XA("#"),parse:kq,transform:Yc.transform},rf={test:XA("hsl","hue"),parse:Kz("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+jo.transform(Xp(e))+", "+jo.transform(Xp(n))+", "+Xp($p.transform(r))+")"},ii={test:t=>Yc.test(t)||PM.test(t)||rf.test(t),parse:t=>Yc.test(t)?Yc.parse(t):rf.test(t)?rf.parse(t):PM.parse(t),transform:t=>xg(t)?t:t.hasOwnProperty("red")?Yc.transform(t):rf.transform(t)};function Oq(t){var e,n;return isNaN(t)&&xg(t)&&(((e=t.match(DA))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(IX))===null||n===void 0?void 0:n.length)||0)>0}const Jz="number",Zz="color",Nq="var",Dq="var(",fk="${}",Uq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function P_(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Uq,l=>(ii.test(l)?(r.color.push(s),i.push(Zz),n.push(ii.parse(l))):l.startsWith(Dq)?(r.var.push(s),i.push(Nq),n.push(l)):(r.number.push(s),i.push(Jz),n.push(parseFloat(l))),++s,fk)).split(fk);return{values:n,split:a,indexes:r,types:i}}function Qz(t){return P_(t).values}function e4(t){const{split:e,types:n}=P_(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Jz?s+=Xp(i[o]):a===Zz?s+=ii.transform(i[o]):s+=i[o]}return s}}const Fq=t=>typeof t=="number"?0:t;function Bq(t){const e=Qz(t);return e4(t)(e.map(Fq))}const Kl={test:Oq,parse:Qz,createTransformer:e4,getAnimatableNone:Bq},zq=new Set(["brightness","contrast","saturate","opacity"]);function Vq(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(DA)||[];if(!r)return t;const i=n.replace(r,"");let s=zq.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Hq=/\b([a-z-]*)\(.*?\)/gu,IM={...Kl,getAnimatableNone:t=>{const e=t.match(Hq);return e?e.map(Vq).join(" "):t}},jq={...Az,color:ii,backgroundColor:ii,outlineColor:ii,fill:ii,stroke:ii,borderColor:ii,borderTopColor:ii,borderRightColor:ii,borderBottomColor:ii,borderLeftColor:ii,filter:IM,WebkitFilter:IM},qA=t=>jq[t];function t4(t,e){let n=qA(t);return n!==IM&&(n=Kl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}function Wq(t,e,n){let r=0,i;for(;r<t.length&&!i;)typeof t[r]=="string"&&t[r]!=="none"&&t[r]!=="0"&&(i=t[r]),r++;if(i&&n)for(const s of e)t[s]=t4(n,i)}class n4 extends $A{constructor(e,n,r,i){super(e,n,r,i,i==null?void 0:i.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){const c=e[l];if(typeof c=="string"&&NA(c)){const u=Gz(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(!Tq.has(r)||e.length!==2)return this.resolveNoneKeyframes();const[i,s]=e,o=dk(i),a=dk(s);if(o!==a)if(lk(o)&&lk(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)bq(e[i])&&r.push(i);r.length&&Wq(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Df[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Df[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function r4(t){let e;return()=>(e===void 0&&(e=t()),e)}const hk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Kl.test(t)||t==="0")&&!t.startsWith("url("));function Gq(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function $q(t,e,n,r){const i=t[0];if(i===null)return!1;const s=t[t.length-1],o=hk(i,e),a=hk(s,e);return!o||!a?!1:Gq(t)||n==="spring"&&r}class i4{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Iq(),this._resolved}onKeyframesResolved(e,n){this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!$q(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(Jx(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function s4(t,e){return e?t*(1e3/e):0}const Xq=5;function o4(t,e,n){const r=Math.max(e-Xq,0);return s4(n-t(r),e-r)}const W1=.001,qq=.01,Yq=10,Kq=.05,Jq=1;function Zq({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Yl(Kq,Jq,o),t=Yl(qq,Yq,Wo(t)),o<1?(i=c=>{const u=c*o,d=u*t,p=u-n,m=LM(c,o),g=Math.exp(-d);return W1-p/m*g},s=c=>{const d=c*o*t,p=d*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-d),y=LM(Math.pow(c,2),o);return(-i(c)+W1>0?-1:1)*((p-m)*g)/y}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-W1+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=eY(i,s,a);if(t=Ca(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Qq=12;function eY(t,e,n){let r=n;for(let i=1;i<Qq;i++)r=r-t(r)/e(r);return r}function LM(t,e){return t*Math.sqrt(1-e*e)}const tY=["duration","bounce"],nY=["stiffness","damping","mass"];function pk(t,e){return e.some(n=>t[n]!==void 0)}function rY(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!pk(t,nY)&&pk(t,tY)){const n=Zq(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function YA({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:p}=rY({...r,velocity:-Wo(r.velocity||0)}),m=d||0,g=l/(2*Math.sqrt(a*c)),y=s-i,_=Wo(Math.sqrt(a/c)),v=Math.abs(y)<5;n||(n=v?.01:2),e||(e=v?.005:.5);let S;if(g<1){const w=LM(_,g);S=E=>{const R=Math.exp(-g*_*E);return s-R*((m+g*_*y)/w*Math.sin(w*E)+y*Math.cos(w*E))}}else if(g===1)S=w=>s-Math.exp(-_*w)*(y+(m+_*y)*w);else{const w=_*Math.sqrt(g*g-1);S=E=>{const R=Math.exp(-g*_*E),A=Math.min(w*E,300);return s-R*((m+g*_*y)*Math.sinh(A)+w*y*Math.cosh(A))/w}}return{calculatedDuration:p&&u||null,next:w=>{const E=S(w);if(p)o.done=w>=u;else{let R=m;w!==0&&(g<1?R=o4(S,w,E):R=0);const A=Math.abs(R)<=n,M=Math.abs(s-E)<=e;o.done=A&&M}return o.value=o.done?s:E,o}}}function mk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],p={done:!1,value:d},m=L=>a!==void 0&&L<a||l!==void 0&&L>l,g=L=>a===void 0?l:l===void 0||Math.abs(a-L)<Math.abs(l-L)?a:l;let y=n*e;const _=d+y,v=o===void 0?_:o(_);v!==_&&(y=v-d);const S=L=>-y*Math.exp(-L/r),w=L=>v+S(L),E=L=>{const P=S(L),C=w(L);p.done=Math.abs(P)<=c,p.value=p.done?v:C};let R,A;const M=L=>{m(p.value)&&(R=L,A=YA({keyframes:[p.value,g(p.value)],velocity:o4(w,L,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return M(0),{calculatedDuration:null,next:L=>{let P=!1;return!A&&R===void 0&&(P=!0,E(L),M(L)),R!==void 0&&L>=R?A.next(L-R):(!P&&E(L),p)}}}const a4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,iY=1e-7,sY=12;function oY(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=a4(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>iY&&++a<sY);return o}function wg(t,e,n,r){if(t===e&&n===r)return ai;const i=s=>oY(s,0,1,t,n);return s=>s===0||s===1?s:a4(i(s),e,r)}const aY=wg(.42,0,1,1),lY=wg(0,0,.58,1),l4=wg(.42,0,.58,1),c4=t=>Array.isArray(t)&&typeof t[0]!="number",u4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,d4=t=>e=>1-t(1-e),KA=t=>1-Math.sin(Math.acos(t)),f4=d4(KA),cY=u4(KA),h4=wg(.33,1.53,.69,.99),JA=d4(h4),uY=u4(JA),dY=t=>(t*=2)<1?.5*JA(t):.5*(2-Math.pow(2,-10*(t-1))),fY={linear:ai,easeIn:aY,easeInOut:l4,easeOut:lY,circIn:KA,circInOut:cY,circOut:f4,backIn:JA,backInOut:uY,backOut:h4,anticipate:dY},gk=t=>{if(Array.isArray(t)){GA(t.length===4);const[e,n,r,i]=t;return wg(e,n,r,i)}else if(typeof t=="string")return fY[t];return t},Uf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Un=(t,e,n)=>t+(e-t)*n;function G1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hY({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=G1(l,a,t+1/3),s=G1(l,a,t),o=G1(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const $1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},pY=[PM,Yc,rf],mY=t=>pY.find(e=>e.test(t));function vk(t){const e=mY(t);let n=e.parse(t);return e===rf&&(n=hY(n)),n}const yk=(t,e)=>{const n=vk(t),r=vk(e),i={...n};return s=>(i.red=$1(n.red,r.red,s),i.green=$1(n.green,r.green,s),i.blue=$1(n.blue,r.blue,s),i.alpha=Un(n.alpha,r.alpha,s),Yc.transform(i))};function kM(t,e){return n=>n>0?e:t}function gY(t,e){return n=>Un(t,e,n)}function ZA(t){return typeof t=="number"?gY:typeof t=="string"?NA(t)?kM:ii.test(t)?yk:_Y:Array.isArray(t)?p4:typeof t=="object"?ii.test(t)?yk:vY:kM}function p4(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>ZA(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function vY(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ZA(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function yY(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const _Y=(t,e)=>{const n=Kl.createTransformer(e),r=P_(t),i=P_(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ta(p4(yY(r,i),i.values),n):kM(t,e)};function m4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Un(t,e,n):ZA(t)(t,e)}function xY(t,e,n){const r=[],i=n||m4,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ai:e;a=Ta(l,a)}r.push(a)}return r}function SY(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(GA(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=xY(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=Uf(t[u],t[u+1],c);return o[u](d)};return n?c=>l(Yl(t[0],t[s-1],c)):l}function g4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Uf(0,e,r);t.push(Un(n,1,i))}}function v4(t){const e=[0];return g4(e,t.length-1),e}function wY(t,e){return t.map(n=>n*e)}function bY(t,e){return t.map(()=>e||l4).splice(0,t.length-1)}function I_({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=c4(r)?r.map(gk):gk(r),s={done:!1,value:e[0]},o=wY(n&&n.length===e.length?n:v4(e),t),a=SY(o,e,{ease:Array.isArray(i)?i:bY(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const OM=2e4;function y4(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<OM;)e+=n,r=t.next(e);return e>=OM?1/0:e}const EY=t=>{const e=({timestamp:n})=>t(n);return{start:()=>vr.update(e,!0),stop:()=>qo(e),now:()=>Hr.isProcessing?Hr.timestamp:Hl.now()}},MY={decay:mk,inertia:mk,tween:I_,keyframes:I_,spring:YA},TY=t=>t/100;class QA extends i4{constructor({KeyframeResolver:e=$A,...n}){super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:r,motionValue:i,keyframes:s}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);r&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(s,o,r,i):this.resolver=new e(s,o,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=MY[n]||I_;let l,c;a!==I_&&typeof e[0]!="number"&&(l=Ta(TY,m4(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=y4(u));const{calculatedDuration:d}=u,p=d+i,m=p*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:L}=this.options;return{done:!0,value:L[L.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:g,repeatDelay:y,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),S=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let w=this.currentTime,E=s;if(m){const L=Math.min(this.currentTime,u)/d;let P=Math.floor(L),C=L%1;!C&&L>=1&&(C=1),C===1&&P--,P=Math.min(P,m+1),!!(P%2)&&(g==="reverse"?(C=1-C,y&&(C-=y/d)):g==="mirror"&&(E=o)),w=Yl(0,1,C)*d}const R=S?{done:!1,value:l[0]}:E.next(w);a&&(R.value=a(R.value));let{done:A}=R;!S&&c!==null&&(A=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return M&&i!==void 0&&(R.value=Jx(l,this.options,i)),_&&_(R.value),M&&this.finish(),R}get duration(){const{resolved:e}=this;return e?Wo(e.calculatedDuration):0}get time(){return Wo(this.currentTime)}set time(e){e=Ca(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Wo(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=EY,onPlay:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=r),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const _4=t=>Array.isArray(t)&&typeof t[0]=="number";function x4(t){return!!(!t||typeof t=="string"&&t in eR||_4(t)||Array.isArray(t)&&t.every(x4))}const Lp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,eR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lp([0,.65,.55,1]),circOut:Lp([.55,0,1,.45]),backIn:Lp([.31,.01,.66,-.59]),backOut:Lp([.33,1.53,.69,.99])};function CY(t){return S4(t)||eR.easeOut}function S4(t){if(t)return _4(t)?Lp(t):Array.isArray(t)?t.map(CY):eR[t]}function AY(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=S4(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const RY=r4(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),PY=new Set(["opacity","clipPath","filter","transform"]),L_=10,IY=2e4;function LY(t){return t.type==="spring"||t.name==="backgroundColor"||!x4(t.ease)}function kY(t,e){const n=new QA({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<IY;)r=n.sample(s),i.push(r.value),s+=L_;return{times:void 0,keyframes:i,duration:s-L_,ease:"linear"}}class _k extends i4{constructor(e){super(e);const{name:n,motionValue:r,keyframes:i}=this.options;this.resolver=new n4(i,(s,o)=>this.onKeyframesResolved(s,o),n,r),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(LY(this.options)){const{onComplete:d,onUpdate:p,motionValue:m,...g}=this.options,y=kY(e,g);e=y.keyframes,e.length===1&&(e[1]=e[0]),i=y.duration,s=y.times,o=y.ease,a="keyframes"}const u=AY(l.owner.current,c,e,{...this.options,duration:i,times:s,ease:o});return u.startTime=Hl.now(),this.pendingTimeline?(u.timeline=this.pendingTimeline,this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;l.set(Jx(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Wo(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Wo(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ca(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ai;const{animation:r}=n;r.timeline=e,r.onfinish=null}return ai}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(!(n.playState==="idle"||n.playState==="finished")){if(this.time){const{motionValue:l,onUpdate:c,onComplete:u,...d}=this.options,p=new QA({...d,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),m=Ca(this.time);l.setWithVelocity(p.sample(m-L_).value,p.sample(m).value,L_)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return RY()&&r&&PY.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const tR=(t,e,n,r={},i,s)=>o=>{const a=WA(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ca(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};xq(a)||(u={...u,..._q(t,u)}),u.duration&&(u.duration=Ca(u.duration)),u.repeatDelay&&(u.repeatDelay=Ca(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const p=Jx(u.keyframes,a);if(p!==void 0){vr.update(()=>{u.onUpdate(p),u.onComplete()});return}}return!s&&_k.supports(u)?new _k(u):new QA(u)};function k_(t){return!!(mr(t)&&t.add)}function nR(t,e){t.indexOf(e)===-1&&t.push(e)}function Zx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class rR{constructor(){this.subscriptions=[]}add(e){return nR(this.subscriptions,e),()=>Zx(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xk=30,OY=t=>!isNaN(parseFloat(t));class NY{constructor(e,n={}){this.version="11.1.7",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Hl.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.canTrackVelocity=OY(this.current),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Hl.now()}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new rR);const r=this.events[e].add(n);return e==="change"?()=>{r(),vr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,xk);return s4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ff(t,e){return new NY(t,e)}function DY(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ff(n))}function UY(t,e){const n=Kx(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=qX(s[o]);DY(t,o,a)}}function FY({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function iR(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;const c=t.getValue("willChange");r&&(o=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const p in l){const m=t.getValue(p,(s=t.latestValues[p])!==null&&s!==void 0?s:null),g=l[p];if(g===void 0||d&&FY(d,p))continue;const y={delay:n,elapsed:0,...WA(o||{},p)};let _=!1;if(window.HandoffAppearAnimations){const w=t.getProps()[Sz];if(w){const E=window.HandoffAppearAnimations(w,p);E!==null&&(y.elapsed=E,_=!0)}}m.start(tR(p,m,g,t.shouldReduceMotion&&Ou.has(p)?{type:!1}:y,t,_));const v=m.animation;v&&(k_(c)&&(c.add(p),v.then(()=>c.remove(p))),u.push(v))}return a&&Promise.all(u).then(()=>{vr.update(()=>{a&&UY(t,a)})}),u}function NM(t,e,n={}){var r;const i=Kx(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(iR(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:p}=s;return BY(t,e,u+c,d,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function BY(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(zY).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(NM(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function zY(t,e){return t.sortNodePosition(e)}function VY(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>NM(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=NM(t,e,n);else{const i=typeof e=="function"?Kx(t,e,n.custom):e;r=Promise.all(iR(t,i,n))}return r.then(()=>{vr.postRender(()=>{t.notify("AnimationComplete",e)})})}const HY=[...IA].reverse(),jY=IA.length;function WY(t){return e=>Promise.all(e.map(({animation:n,options:r})=>VY(t,n,r)))}function GY(t){let e=WY(t);const n=XY();let r=!0;const i=l=>(c,u)=>{var d;const p=Kx(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(p){const{transition:m,transitionEnd:g,...y}=p;c={...c,...y,...g}}return c};function s(l){e=l(t)}function o(l){const c=t.getProps(),u=t.getVariantContext(!0)||{},d=[],p=new Set;let m={},g=1/0;for(let _=0;_<jY;_++){const v=HY[_],S=n[v],w=c[v]!==void 0?c[v]:u[v],E=Cm(w),R=v===l?S.isActive:null;R===!1&&(g=_);let A=w===u[v]&&w!==c[v]&&E;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),S.protectedKeys={...m},!S.isActive&&R===null||!w&&!S.prevProp||Xx(w)||typeof w=="boolean")continue;let L=$Y(S.prevProp,w)||v===l&&S.isActive&&!A&&E||_>g&&E,P=!1;const C=Array.isArray(w)?w:[w];let N=C.reduce(i(v),{});R===!1&&(N={});const{prevResolvedValues:H={}}=S,z={...H,...N},$=X=>{L=!0,p.has(X)&&(P=!0,p.delete(X)),S.needsAnimating[X]=!0;const q=t.getValue(X);q&&(q.liveStyle=!1)};for(const X in z){const q=N[X],fe=H[X];if(m.hasOwnProperty(X))continue;let k=!1;TM(q)&&TM(fe)?k=!Hz(q,fe):k=q!==fe,k?q!=null?$(X):p.add(X):q!==void 0&&p.has(X)?$(X):S.protectedKeys[X]=!0}S.prevProp=w,S.prevResolvedValues=N,S.isActive&&(m={...m,...N}),r&&t.blockInitialAnimation&&(L=!1),L&&(!A||P)&&d.push(...C.map(X=>({animation:X,options:{type:v}})))}if(p.size){const _={};p.forEach(v=>{const S=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),_[v]=S??null}),d.push({animation:_})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function $Y(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Hz(e,t):!1}function Sc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XY(){return{animate:Sc(!0),whileInView:Sc(),whileHover:Sc(),whileTap:Sc(),whileDrag:Sc(),whileFocus:Sc(),exit:Sc()}}class qY extends oc{constructor(e){super(e),e.animationState||(e.animationState=GY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Xx(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let YY=0;class KY extends oc{constructor(){super(...arguments),this.id=YY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const JY={animation:{Feature:qY},exit:{Feature:KY}},Sk=(t,e)=>Math.abs(t-e);function ZY(t,e){const n=Sk(t.x,e.x),r=Sk(t.y,e.y);return Math.sqrt(n**2+r**2)}class w4{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=q1(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=ZY(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:g}=d,{timestamp:y}=Hr;this.history.push({...g,timestamp:y});const{onStart:_,onMove:v}=this.handlers;p||(_&&_(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=X1(p,this.transformPagePoint),vr.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=q1(d.type==="pointercancel"?this.lastMoveEventInfo:X1(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,_),g&&g(d,_)},!Uz(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Yx(e),a=X1(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Hr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,q1(a,this.history)),this.removeListeners=Ta(Ma(this.contextWindow,"pointermove",this.handlePointerMove),Ma(this.contextWindow,"pointerup",this.handlePointerUp),Ma(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qo(this.updatePoint)}}function X1(t,e){return e?{point:e(t.point)}:t}function wk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function q1({point:t},e){return{point:t,delta:wk(t,b4(e)),offset:wk(t,QY(e)),velocity:eK(e,.1)}}function QY(t){return t[0]}function b4(t){return t[t.length-1]}function eK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=b4(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ca(e)));)n--;if(!r)return{x:0,y:0};const s=Wo(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function as(t){return t.max-t.min}function DM(t,e=0,n=.01){return Math.abs(t-e)<=n}function bk(t,e,n,r=.5){t.origin=r,t.originPoint=Un(e.min,e.max,t.origin),t.scale=as(n)/as(e),(DM(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Un(n.min,n.max,t.origin)-t.originPoint,(DM(t.translate)||isNaN(t.translate))&&(t.translate=0)}function qp(t,e,n,r){bk(t.x,e.x,n.x,r?r.originX:void 0),bk(t.y,e.y,n.y,r?r.originY:void 0)}function Ek(t,e,n){t.min=n.min+e.min,t.max=t.min+as(e)}function tK(t,e,n){Ek(t.x,e.x,n.x),Ek(t.y,e.y,n.y)}function Mk(t,e,n){t.min=e.min-n.min,t.max=t.min+as(e)}function Yp(t,e,n){Mk(t.x,e.x,n.x),Mk(t.y,e.y,n.y)}function nK(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Un(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Un(n,t,r.max):Math.min(t,n)),t}function Tk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function rK(t,{top:e,left:n,bottom:r,right:i}){return{x:Tk(t.x,n,i),y:Tk(t.y,e,r)}}function Ck(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function iK(t,e){return{x:Ck(t.x,e.x),y:Ck(t.y,e.y)}}function sK(t,e){let n=.5;const r=as(t),i=as(e);return i>r?n=Uf(e.min,e.max-r,t.min):r>i&&(n=Uf(t.min,t.max-i,e.min)),Yl(0,1,n)}function oK(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const UM=.35;function aK(t=UM){return t===!1?t=0:t===!0&&(t=UM),{x:Ak(t,"left","right"),y:Ak(t,"top","bottom")}}function Ak(t,e,n){return{min:Rk(t,e),max:Rk(t,n)}}function Rk(t,e){return typeof t=="number"?t:t[e]||0}const Pk=()=>({translate:0,scale:1,origin:0,originPoint:0}),sf=()=>({x:Pk(),y:Pk()}),Ik=()=>({min:0,max:0}),sr=()=>({x:Ik(),y:Ik()});function Ms(t){return[t("x"),t("y")]}function E4({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function lK({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cK(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Y1(t){return t===void 0||t===1}function FM({scale:t,scaleX:e,scaleY:n}){return!Y1(t)||!Y1(e)||!Y1(n)}function Fc(t){return FM(t)||M4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function M4(t){return Lk(t.x)||Lk(t.y)}function Lk(t){return t&&t!=="0%"}function O_(t,e,n){const r=t-n,i=e*r;return n+i}function kk(t,e,n,r,i){return i!==void 0&&(t=O_(t,i,r)),O_(t,n,r)+e}function BM(t,e=0,n=1,r,i){t.min=kk(t.min,e,n,r,i),t.max=kk(t.max,e,n,r,i)}function T4(t,{x:e,y:n}){BM(t.x,e.translate,e.scale,e.originPoint),BM(t.y,n.translate,n.scale,n.originPoint)}function uK(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&of(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,T4(t,o)),r&&Fc(s.latestValues)&&of(t,s.latestValues))}e.x=Ok(e.x),e.y=Ok(e.y)}function Ok(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function xl(t,e){t.min=t.min+e,t.max=t.max+e}function Nk(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Un(t.min,t.max,s);BM(t,e[n],e[r],o,e.scale)}const dK=["x","scaleX","originX"],fK=["y","scaleY","originY"];function of(t,e){Nk(t.x,e,dK),Nk(t.y,e,fK)}function C4(t,e){return E4(cK(t.getBoundingClientRect(),e))}function hK(t,e,n){const r=C4(t,n),{scroll:i}=e;return i&&(xl(r.x,i.offset.x),xl(r.y,i.offset.y)),r}const A4=({current:t})=>t?t.ownerDocument.defaultView:null,pK=new WeakMap;class mK{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=sr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Yx(u,"page").point)},s=(u,d)=>{const{drag:p,dragPropagation:m,onDragStart:g}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Bz(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ms(_=>{let v=this.getAxisMotionValue(_).get()||0;if(jo.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const w=S.layout.layoutBox[_];w&&(v=as(w)*(parseFloat(v)/100))}}this.originPoint[_]=v}),g&&g(u,d);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:g,onDrag:y}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:_}=d;if(m&&this.currentDirection===null){this.currentDirection=gK(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,_),this.updateAxis("y",d.point,_),this.visualElement.render(),y&&y(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Ms(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new w4(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:A4(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&s(e,n)}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ry(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=nK(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&nf(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=rK(i.layoutBox,n):this.constraints=!1,this.elastic=aK(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ms(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=oK(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!nf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=hK(r,i.root,this.visualElement.getTransformPagePoint());let o=iK(i.layout.layoutBox,s);if(n){const a=n(lK(o));this.hasMutatedConstraints=!!a,a&&(o=E4(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ms(u=>{if(!ry(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(tR(e,r,0,n,this.visualElement))}stopAnimation(){Ms(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ms(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ms(n=>{const{drag:r}=this.getProps();if(!ry(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Un(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!nf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ms(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=sK({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ms(o=>{if(!ry(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Un(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;pK.set(this.visualElement,this);const e=this.visualElement.current,n=Ma(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();nf(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Sa(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ms(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=UM,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ry(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function gK(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class vK extends oc{constructor(e){super(e),this.removeGroupControls=ai,this.removeListeners=ai,this.controls=new mK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ai}unmount(){this.removeGroupControls(),this.removeListeners()}}const Dk=t=>(e,n)=>{t&&t(e,n)};class yK extends oc{constructor(){super(...arguments),this.removePointerDownListener=ai}onPointerDown(e){this.session=new w4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:A4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Dk(e),onStart:Dk(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&i(s,o)}}}mount(){this.removePointerDownListener=Ma(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function _K(){const t=O.useContext(Gx);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=O.useId();return O.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const D0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Uk(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const rp={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(xt.test(t))t=parseFloat(t);else return t;const n=Uk(t,e.target.x),r=Uk(t,e.target.y);return`${n}% ${r}%`}},xK={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Kl.parse(t);if(i.length>5)return r;const s=Kl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Un(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class SK extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;EX(wK),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),D0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||vr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),PA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function R4(t){const[e,n]=_K(),r=O.useContext(kA);return U.jsx(SK,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(Ez),isPresent:e,safeToRemove:n})}const wK={borderRadius:{...rp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rp,borderTopRightRadius:rp,borderBottomLeftRadius:rp,borderBottomRightRadius:rp,boxShadow:xK},P4=["TopLeft","TopRight","BottomLeft","BottomRight"],bK=P4.length,Fk=t=>typeof t=="string"?parseFloat(t):t,Bk=t=>typeof t=="number"||xt.test(t);function EK(t,e,n,r,i,s){i?(t.opacity=Un(0,n.opacity!==void 0?n.opacity:1,MK(r)),t.opacityExit=Un(e.opacity!==void 0?e.opacity:1,0,TK(r))):s&&(t.opacity=Un(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<bK;o++){const a=`border${P4[o]}Radius`;let l=zk(e,a),c=zk(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Bk(l)===Bk(c)?(t[a]=Math.max(Un(Fk(l),Fk(c),r),0),(jo.test(c)||jo.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Un(e.rotate||0,n.rotate||0,r))}function zk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const MK=I4(0,.5,f4),TK=I4(.5,.95,ai);function I4(t,e,n){return r=>r<t?0:r>e?1:n(Uf(t,e,r))}function Vk(t,e){t.min=e.min,t.max=e.max}function ws(t,e){Vk(t.x,e.x),Vk(t.y,e.y)}function Hk(t,e,n,r,i){return t-=e,t=O_(t,1/n,r),i!==void 0&&(t=O_(t,1/i,r)),t}function CK(t,e=0,n=1,r=.5,i,s=t,o=t){if(jo.test(e)&&(e=parseFloat(e),e=Un(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Un(s.min,s.max,r);t===s&&(a-=e),t.min=Hk(t.min,e,n,a,i),t.max=Hk(t.max,e,n,a,i)}function jk(t,e,[n,r,i],s,o){CK(t,e[n],e[r],e[i],e.scale,s,o)}const AK=["x","scaleX","originX"],RK=["y","scaleY","originY"];function Wk(t,e,n,r){jk(t.x,e,AK,n?n.x:void 0,r?r.x:void 0),jk(t.y,e,RK,n?n.y:void 0,r?r.y:void 0)}function Gk(t){return t.translate===0&&t.scale===1}function L4(t){return Gk(t.x)&&Gk(t.y)}function PK(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function k4(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function $k(t){return as(t.x)/as(t.y)}class IK{constructor(){this.members=[]}add(e){nR(this.members,e),e.scheduleRender()}remove(e){if(Zx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Xk(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:p,skewX:m,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const LK=(t,e)=>t.depth-e.depth;class kK{constructor(){this.children=[],this.isDirty=!1}add(e){nR(this.children,e),this.isDirty=!0}remove(e){Zx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(LK),this.isDirty=!1,this.children.forEach(e)}}function OK(t,e){const n=Hl.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(qo(r),t(s-e))};return vr.read(r,!0),()=>qo(r)}function NK(t){window.MotionDebug&&window.MotionDebug.record(t)}function O4(t){return t instanceof SVGElement&&t.tagName!=="svg"}function sR(t,e,n){const r=mr(t)?t:Ff(t);return r.start(tR("",r,e,n)),r.animation}const K1=["","X","Y","Z"],DK={visibility:"hidden"},qk=1e3;let UK=0;const Bc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function J1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function N4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=UK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bc.totalNodes=Bc.resolvedTargetDeltas=Bc.recalculatedProjection=0,this.nodes.forEach(zK),this.nodes.forEach(GK),this.nodes.forEach($K),this.nodes.forEach(VK),NK(Bc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new kK)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rR),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=O4(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=OK(p,250),D0.hasAnimatedSinceResize&&(D0.hasAnimatedSinceResize=!1,this.nodes.forEach(Kk))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||JK,{onLayoutAnimationStart:_,onLayoutAnimationComplete:v}=u.getProps(),S=!this.targetLayout||!k4(this.targetLayout,g)||m,w=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const E={...WA(y,"layout"),onPlay:_,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||Kk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Yk);return}this.isUpdating||this.nodes.forEach(jK),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(WK),this.nodes.forEach(FK),this.nodes.forEach(BK),this.clearAllSnapshots();const a=Hl.now();Hr.delta=Yl(0,1e3/60,a-Hr.timestamp),Hr.timestamp=a,Hr.isProcessing=!0,z1.update.process(Hr),z1.preRender.process(Hr),z1.render.process(Hr),Hr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,PA.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(HK),this.sharedNodes.forEach(qK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=sr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!L4(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Fc(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),ZK(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return sr();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(xl(a.x,l.offset.x),xl(a.y,l.offset.y)),a}removeElementScroll(o){const a=sr();ws(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){ws(a,o);const{scroll:p}=this.root;p&&(xl(a.x,-p.offset.x),xl(a.y,-p.offset.y))}xl(a.x,u.offset.x),xl(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=sr();ws(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&of(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Fc(u.latestValues)&&of(l,u.latestValues)}return Fc(this.latestValues)&&of(l,this.latestValues),l}removeTransform(o){const a=sr();ws(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Fc(c.latestValues))continue;FM(c.latestValues)&&c.updateSnapshot();const u=sr(),d=c.measurePageBox();ws(u,d),Wk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Fc(this.latestValues)&&Wk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=Hr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sr(),this.relativeTargetOrigin=sr(),Yp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=sr(),this.targetWithTransforms=sr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ws(this.target,this.layout.layoutBox),T4(this.target,this.targetDelta)):ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sr(),this.relativeTargetOrigin=sr(),Yp(this.relativeTargetOrigin,this.target,m.target),ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||FM(this.parent.latestValues)||M4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Hr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ws(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;uK(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=sr());const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=sf(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=sf(),this.projectionDeltaWithTransform=sf());const y=this.projectionTransform;qp(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=Xk(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Bc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=sf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=sr(),m=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=m!==g,_=this.getStack(),v=!_||_.members.length<=1,S=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(KK));this.animationProgress=0;let w;this.mixTargetDelta=E=>{const R=E/1e3;Jk(d.x,o.x,R),Jk(d.y,o.y,R),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yp(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YK(this.relativeTarget,this.relativeTargetOrigin,p,R),w&&PK(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=sr()),ws(w,this.relativeTarget)),y&&(this.animationValues=u,EK(u,c,this.latestValues,R,S,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vr.update(()=>{D0.hasAnimatedSinceResize=!0,this.currentAnimation=sR(0,qk,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&D4(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||sr();const d=as(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=as(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}ws(a,l),of(a,u),qp(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IK),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&J1("z",o,c,this.animationValues);for(let u=0;u<K1.length;u++)J1(`rotate${K1[u]}`,o,c,this.animationValues),J1(`skew${K1[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return DK;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=O0(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=O0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fc(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=Xk(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y:g}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in A_){if(p[y]===void 0)continue;const{correct:_,applyTo:v}=A_[y],S=c.transform==="none"?p[y]:_(p[y],d);if(v){const w=v.length;for(let E=0;E<w;E++)c[v[E]]=S}else c[y]=S}return this.options.layoutId&&(c.pointerEvents=d===this?O0(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Yk),this.root.sharedNodes.clear()}}}function FK(t){t.updateLayout()}function BK(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Ms(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=as(p);p.min=r[d].min,p.max=p.min+m}):D4(s,n.layoutBox,r)&&Ms(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=as(r[d]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=sf();qp(a,r,n.layoutBox);const l=sf();o?qp(l,t.applyTransform(i,!0),n.measuredBox):qp(l,r,n.layoutBox);const c=!L4(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const g=sr();Yp(g,n.layoutBox,p.layoutBox);const y=sr();Yp(y,r,m.layoutBox),k4(g,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zK(t){Bc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function VK(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HK(t){t.clearSnapshot()}function Yk(t){t.clearMeasurements()}function jK(t){t.isLayoutDirty=!1}function WK(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Kk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function GK(t){t.resolveTargetDelta()}function $K(t){t.calcProjection()}function XK(t){t.resetSkewAndRotation()}function qK(t){t.removeLeadSnapshot()}function Jk(t,e,n){t.translate=Un(e.translate,0,n),t.scale=Un(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Zk(t,e,n,r){t.min=Un(e.min,n.min,r),t.max=Un(e.max,n.max,r)}function YK(t,e,n,r){Zk(t.x,e.x,n.x,r),Zk(t.y,e.y,n.y,r)}function KK(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const JK={duration:.45,ease:[.4,0,.1,1]},Qk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),eO=Qk("applewebkit/")&&!Qk("chrome/")?Math.round:ai;function tO(t){t.min=eO(t.min),t.max=eO(t.max)}function ZK(t){tO(t.x),tO(t.y)}function D4(t,e,n){return t==="position"||t==="preserve-aspect"&&!DM($k(e),$k(n),.2)}const QK=N4({attachResizeListener:(t,e)=>Sa(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Z1={current:void 0},U4=N4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Z1.current){const t=new QK({});t.mount(window),t.setOptions({layoutScroll:!0}),Z1.current=t}return Z1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),eJ={pan:{Feature:yK},drag:{Feature:vK,ProjectionNode:U4,MeasureLayout:R4}},zM={current:null},F4={current:!1};function tJ(){if(F4.current=!0,!!AA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zM.current=t.matches;t.addListener(e),e()}else zM.current=!1}function nJ(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(mr(s))t.addValue(i,s),k_(r)&&r.add(i);else if(mr(o))t.addValue(i,Ff(s,{owner:t})),k_(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Ff(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Rm=new WeakMap,rJ=[...Xz,ii,Kl],iJ=t=>rJ.find($z(t)),B4=Object.keys(Am),sJ=B4.length,nO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],oJ=LA.length;function z4(t){if(t)return t.options.allowProjection!==!1?t.projection:z4(t.parent)}class aJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.resolveKeyframes=(p,m,g,y)=>new this.KeyframeResolver(p,m,g,y,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$A,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>vr.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=qx(n),this.isVariantNode=bz(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const m=d[p];l[p]!==void 0&&mr(m)&&(m.set(l[p],!1),k_(u)&&u.add(p))}}mount(e){this.current=e,Rm.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),F4.current||tJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){var e;Rm.delete(this.current),this.projection&&this.projection.unmount(),qo(this.notifyUpdate),qo(this.render),this.valueSubscriptions.forEach(n=>n()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const n in this.events)this.events[n].clear();for(const n in this.features)(e=this.features[n])===null||e===void 0||e.unmount();this.current=null}bindToMotionValue(e,n){const r=Ou.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&vr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<sJ;l++){const c=B4[l],{isEnabled:u,Feature:d,ProjectionNode:p,MeasureLayout:m}=Am[c];p&&(o=p),u(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,z4(this.parent));const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&nf(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):sr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nO.length;r++){const i=nO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=nJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<oJ;r++){const i=LA[r],s=this.props[i];(Cm(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ff(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Wz(i)||jz(i))?i=parseFloat(i):!iJ(i)&&Kl.test(n)&&(i=t4(e,n)),this.setBaseTarget(e,mr(i)?i.get():i)),mr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=HA(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!mr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new rR),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class V4 extends aJ{constructor(){super(...arguments),this.KeyframeResolver=n4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function lJ(t){return window.getComputedStyle(t)}class H4 extends V4{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ou.has(n)){const r=qA(n);return r&&r.default||0}else{const r=lJ(e),i=(Cz(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return C4(e,n)}build(e,n,r,i){UA(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return VA(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){Lz(e,n,r,i)}}class j4 extends V4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ou.has(n)){const r=qA(n);return r&&r.default||0}return n=kz.has(n)?n:RA(n),e.getAttribute(n)}measureInstanceViewportBox(){return sr()}scrapeMotionValuesFromProps(e,n,r){return Nz(e,n,r)}build(e,n,r,i){BA(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){Oz(e,n,r,i)}mount(e){this.isSVGTag=zA(e.tagName),super.mount(e)}}const cJ=(t,e)=>OA(t)?new j4(e,{enableHardwareAcceleration:!1}):new H4(e,{allowProjection:t!==O.Fragment,enableHardwareAcceleration:!0}),uJ={layout:{ProjectionNode:U4,MeasureLayout:R4}},dJ={...JY,...fq,...eJ,...uJ},li=wX((t,e)=>QX(t,e,dJ,cJ));function W4(){const t=O.useRef(!1);return $x(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function fJ(){const t=W4(),[e,n]=O.useState(0),r=O.useCallback(()=>{t.current&&n(e+1)},[e]);return[O.useCallback(()=>vr.postRender(r),[r]),e]}class hJ extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pJ({children:t,isPresent:e}){const n=O.useId(),r=O.useRef(null),i=O.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=O.useContext(jx);return O.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),U.jsx(hJ,{isPresent:e,childRef:r,sizeRef:i,children:O.cloneElement(t,{ref:r})})}const Q1=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=jA(mJ),l=O.useId(),c=O.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?[Math.random()]:[n]);return O.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),O.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=U.jsx(pJ,{isPresent:n,children:t})),U.jsx(Gx.Provider,{value:c,children:t})};function mJ(){return new Map}function gJ(t){return O.useEffect(()=>()=>t(),[])}const zc=t=>t.key||"";function vJ(t,e){t.forEach(n=>{const r=zc(n);e.set(r,n)})}function yJ(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const _J=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=O.useContext(kA).forceRender||fJ()[0],l=W4(),c=yJ(t);let u=c;const d=O.useRef(new Map).current,p=O.useRef(u),m=O.useRef(new Map).current,g=O.useRef(!0);if($x(()=>{g.current=!1,vJ(c,m),p.current=u}),gJ(()=>{g.current=!0,m.clear(),d.clear()}),g.current)return U.jsx(U.Fragment,{children:u.map(S=>U.jsx(Q1,{isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o,children:S},zc(S)))});u=[...u];const y=p.current.map(zc),_=c.map(zc),v=y.length;for(let S=0;S<v;S++){const w=y[S];_.indexOf(w)===-1&&!d.has(w)&&d.set(w,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((S,w)=>{if(_.indexOf(w)!==-1)return;const E=m.get(w);if(!E)return;const R=y.indexOf(w);let A=S;if(!A){const M=()=>{d.delete(w);const L=Array.from(m.keys()).filter(P=>!_.includes(P));if(L.forEach(P=>m.delete(P)),p.current=c.filter(P=>{const C=zc(P);return C===w||L.includes(C)}),!d.size){if(l.current===!1)return;a(),r&&r()}};A=U.jsx(Q1,{isPresent:!1,onExitComplete:M,custom:e,presenceAffectsLayout:s,mode:o,children:E},zc(E)),d.set(w,A)}u.splice(R,0,A)}),u=u.map(S=>{const w=S.key;return d.has(w)?S:U.jsx(Q1,{isPresent:!0,presenceAffectsLayout:s,mode:o,children:S},zc(S))}),U.jsx(U.Fragment,{children:d.size?u:u.map(S=>O.cloneElement(S))})};function G4(t){const e=jA(()=>Ff(t)),{isStatic:n}=O.useContext(jx);if(n){const[,r]=O.useState(t);O.useEffect(()=>e.on("change",r),[])}return e}function xJ(t,e){const n=G4(e()),r=()=>n.set(e());return r(),$x(()=>{const i=()=>vr.preRender(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),qo(r)}}),n}function SJ(t,...e){const n=t.length;function r(){let i="";for(let s=0;s<n;s++){i+=t[s];const o=e[s];o&&(i+=mr(o)?o.get():o)}return i}return xJ(e.filter(mr),r)}function $4(t,e,n){var r;if(typeof t=="string"){let i=document;e&&(GA(!!e.current),i=e.current),n?((r=n[t])!==null&&r!==void 0||(n[t]=i.querySelectorAll(t)),t=n[t]):t=i.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}function wJ(t,e){let n;const r=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;n!==o&&t(o),n=o};return vr.update(r,!0),()=>qo(r)}const bJ=r4(()=>window.ScrollTimeline!==void 0);class X4{constructor(e){this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>{if(bJ()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),wJ(i=>{r.time=r.duration*i},e)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function EJ(t){return typeof t=="object"&&!Array.isArray(t)}function MJ(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=O4(t)?new j4(e,{enableHardwareAcceleration:!1}):new H4(e,{enableHardwareAcceleration:!0});n.mount(t),Rm.set(t,n)}function TJ(t,e=100){const n=YA({keyframes:[0,e],...t}),r=Math.min(y4(n),OM);return{type:"keyframes",ease:i=>n.next(r*i).value/e,duration:Wo(r)}}function rO(t,e,n,r){var i;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(i=r.get(e))!==null&&i!==void 0?i:t}const CJ=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function AJ(t,e){return c4(t)?t[CJ(0,t.length,e)]:t}function RJ(t,e,n){for(let r=0;r<t.length;r++){const i=t[r];i.at>e&&i.at<n&&(Zx(t,i),r--)}}function PJ(t,e,n,r,i,s){RJ(t,i,s);for(let o=0;o<e.length;o++)t.push({value:e[o],at:Un(i,s,r[o]),easing:AJ(n,o)})}function IJ(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const LJ="easeInOut";function kJ(t,{defaultTransition:e={},...n}={},r){const i=e.duration||.3,s=new Map,o=new Map,a={},l=new Map;let c=0,u=0,d=0;for(let p=0;p<t.length;p++){const m=t[p];if(typeof m=="string"){l.set(m,u);continue}else if(!Array.isArray(m)){l.set(m.name,rO(u,m.at,c,l));continue}let[g,y,_={}]=m;_.at!==void 0&&(u=rO(u,_.at,c,l));let v=0;const S=(w,E,R,A=0,M=0)=>{const L=OJ(w),{delay:P=0,times:C=v4(L),type:N="keyframes",...H}=E;let{ease:z=e.ease||"easeOut",duration:$}=E;const X=typeof P=="function"?P(A,M):P,q=L.length;if(q<=2&&N==="spring"){let G=100;if(q===2&&UJ(L)){const Pe=L[1]-L[0];G=Math.abs(Pe)}const ee={...H};$!==void 0&&(ee.duration=Ca($));const ae=TJ(ee,G);z=ae.ease,$=ae.duration}$??($=i);const fe=u+X,k=fe+$;C.length===1&&C[0]===0&&(C[1]=1);const W=C.length-L.length;W>0&&g4(C,W),L.length===1&&L.unshift(null),PJ(R,L,z,C,fe,k),v=Math.max(X+$,v),d=Math.max(k,d)};if(mr(g)){const w=iO(g,o);S(y,_,sO("default",w))}else{const w=$4(g,r,a),E=w.length;for(let R=0;R<E;R++){y=y,_=_;const A=w[R],M=iO(A,o);for(const L in y)S(y[L],NJ(_,L),sO(L,M),R,E)}}c=u,u+=v}return o.forEach((p,m)=>{for(const g in p){const y=p[g];y.sort(IJ);const _=[],v=[],S=[];for(let E=0;E<y.length;E++){const{at:R,value:A,easing:M}=y[E];_.push(A),v.push(Uf(0,d,R)),S.push(M||"easeOut")}v[0]!==0&&(v.unshift(0),_.unshift(_[0]),S.unshift(LJ)),v[v.length-1]!==1&&(v.push(1),_.push(null)),s.has(m)||s.set(m,{keyframes:{},transition:{}});const w=s.get(m);w.keyframes[g]=_,w.transition[g]={...e,duration:d,ease:S,times:v,...n}}}),s}function iO(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function sO(t,e){return e[t]||(e[t]=[]),e[t]}function OJ(t){return Array.isArray(t)?t:[t]}function NJ(t,e){return t[e]?{...t,...t[e]}:{...t}}const DJ=t=>typeof t=="number",UJ=t=>t.every(DJ);function q4(t,e,n,r){const i=$4(t,r),s=i.length,o=[];for(let a=0;a<s;a++){const l=i[a];Rm.has(l)||MJ(l);const c=Rm.get(l),u={...n};typeof u.delay=="function"&&(u.delay=u.delay(a,s)),o.push(...iR(c,{...e,transition:u},{}))}return new X4(o)}const FJ=t=>Array.isArray(t)&&Array.isArray(t[0]);function BJ(t,e,n){const r=[];return kJ(t,e,n).forEach(({keyframes:s,transition:o},a)=>{let l;mr(a)?l=sR(a,s.default,o.default):l=q4(a,s,o),r.push(l)}),new X4(r)}const zJ=t=>{function e(n,r,i){let s;return FJ(n)?s=BJ(n,r,t):EJ(r)?s=q4(n,r,i,t):s=sR(n,r,i),t&&t.animations.push(s),s}return e},VJ=zJ();/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jn(){return jn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jn.apply(this,arguments)}var or;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(or||(or={}));const oO="popstate";function HJ(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Pm("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Eu(i)}return WJ(e,n,null,t)}function Wt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jJ(){return Math.random().toString(36).substr(2,8)}function aO(t,e){return{usr:t.state,key:t.key,idx:e}}function Pm(t,e,n,r){return n===void 0&&(n=null),jn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wa(e):e,{state:n,key:e&&e.key||r||jJ()})}function Eu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WJ(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=or.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(jn({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=or.Pop;let _=u(),v=_==null?null:_-c;c=_,l&&l({action:a,location:y.location,delta:v})}function p(_,v){a=or.Push;let S=Pm(y.location,_,v);n&&n(S,_),c=u()+1;let w=aO(S,c),E=y.createHref(S);try{o.pushState(w,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(E)}s&&l&&l({action:a,location:y.location,delta:1})}function m(_,v){a=or.Replace;let S=Pm(y.location,_,v);n&&n(S,_),c=u();let w=aO(S,c),E=y.createHref(S);o.replaceState(w,"",E),s&&l&&l({action:a,location:y.location,delta:0})}function g(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof _=="string"?_:Eu(_);return S=S.replace(/ $/,"%20"),Wt(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let y={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(oO,d),l=_,()=>{i.removeEventListener(oO,d),l=null}},createHref(_){return e(i,_)},createURL:g,encodeLocation(_){let v=g(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(_){return o.go(_)}};return y}var Nn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nn||(Nn={}));const GJ=new Set(["lazy","caseSensitive","path","id","index","children"]);function $J(t){return t.index===!0}function VM(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Wt(i.index!==!0||!i.children,"Cannot specify children on an index route"),Wt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),$J(i)){let l=jn({},i,e(i),{id:a});return r[a]=l,l}else{let l=jn({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=VM(i.children,e,o,r)),l}})}function af(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Wa(e):e,i=ch(r.pathname||"/",n);if(i==null)return null;let s=Y4(t);qJ(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=oZ(i);o=rZ(s[a],l)}return o}function XJ(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Y4(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Wt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Aa([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Wt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Y4(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:tZ(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of K4(s.path))i(s,o,l)}),e}function K4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=K4(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function qJ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nZ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YJ=/^:[\w-]+$/,KJ=3,JJ=2,ZJ=1,QJ=10,eZ=-2,lO=t=>t==="*";function tZ(t,e){let n=t.split("/"),r=n.length;return n.some(lO)&&(r+=eZ),e&&(r+=JJ),n.filter(i=>!lO(i)).reduce((i,s)=>i+(YJ.test(s)?KJ:s===""?ZJ:QJ),r)}function nZ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rZ(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=iZ({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Aa([i,u.pathname]),pathnameBase:cZ(Aa([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Aa([i,u.pathnameBase]))}return s}function iZ(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=sZ(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[d];return m&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function sZ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function oZ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ch(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aZ(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wa(t):t;return{pathname:n?n.startsWith("/")?n:lZ(n,e):e,search:uZ(r),hash:dZ(i)}}function lZ(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function eb(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qx(t,e){let n=J4(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function eS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wa(t):(i=jn({},t),Wt(!i.pathname||!i.pathname.includes("?"),eb("?","pathname","search",i)),Wt(!i.pathname||!i.pathname.includes("#"),eb("#","pathname","hash",i)),Wt(!i.search||!i.search.includes("#"),eb("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=aZ(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Aa=t=>t.join("/").replace(/\/\/+/g,"/"),cZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uZ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dZ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class oR{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function aR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Z4=["post","put","patch","delete"],fZ=new Set(Z4),hZ=["get",...Z4],pZ=new Set(hZ),mZ=new Set([301,302,303,307,308]),gZ=new Set([307,308]),tb={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vZ={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ip={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},lR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yZ=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Q4="remix-router-transitions";function _Z(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Wt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let Y=t.detectErrorBoundary;i=ie=>({hasErrorBoundary:Y(ie)})}else i=yZ;let s={},o=VM(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||bZ,u=jn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),d=null,p=new Set,m=null,g=null,y=null,_=t.hydrationData!=null,v=af(o,t.history.location,l),S=null;if(v==null){let Y=Ts(404,{pathname:t.history.location.pathname}),{matches:ie,route:le}=yO(o);v=ie,S={[le.id]:Y}}let w,E=v.some(Y=>Y.route.lazy),R=v.some(Y=>Y.route.loader);if(E)w=!1;else if(!R)w=!0;else if(u.v7_partialHydration){let Y=t.hydrationData?t.hydrationData.loaderData:null,ie=t.hydrationData?t.hydrationData.errors:null,le=Re=>Re.route.loader?typeof Re.route.loader=="function"&&Re.route.loader.hydrate===!0?!1:Y&&Y[Re.route.id]!==void 0||ie&&ie[Re.route.id]!==void 0:!0;if(ie){let Re=v.findIndex(Ue=>ie[Ue.route.id]!==void 0);w=v.slice(0,Re+1).every(le)}else w=v.every(le)}else w=t.hydrationData!=null;let A,M={historyAction:t.history.action,location:t.history.location,matches:v,initialized:w,navigation:tb,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},L=or.Pop,P=!1,C,N=!1,H=new Map,z=null,$=!1,X=!1,q=[],fe=[],k=new Map,W=0,G=-1,ee=new Map,ae=new Set,Pe=new Map,re=new Map,ye=new Set,Ee=new Map,xe=new Map,it=!1;function dt(){if(d=t.history.listen(Y=>{let{action:ie,location:le,delta:Re}=Y;if(it){it=!1;return}Bf(xe.size===0||Re!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ue=Z({currentLocation:M.location,nextLocation:le,historyAction:ie});if(Ue&&Re!=null){it=!0,t.history.go(Re*-1),Mt(Ue,{state:"blocked",location:le,proceed(){Mt(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:le}),t.history.go(Re)},reset(){let Tt=new Map(M.blockers);Tt.set(Ue,ip),he({blockers:Tt})}});return}return Te(ie,le)}),n){NZ(e,H);let Y=()=>DZ(e,H);e.addEventListener("pagehide",Y),z=()=>e.removeEventListener("pagehide",Y)}return M.initialized||Te(or.Pop,M.location,{initialHydration:!0}),A}function te(){d&&d(),z&&z(),p.clear(),C&&C.abort(),M.fetchers.forEach((Y,ie)=>Oe(ie)),M.blockers.forEach((Y,ie)=>Sn(ie))}function ut(Y){return p.add(Y),()=>p.delete(Y)}function he(Y,ie){ie===void 0&&(ie={}),M=jn({},M,Y);let le=[],Re=[];u.v7_fetcherPersist&&M.fetchers.forEach((Ue,Tt)=>{Ue.state==="idle"&&(ye.has(Tt)?Re.push(Tt):le.push(Tt))}),[...p].forEach(Ue=>Ue(M,{deletedFetchers:Re,unstable_viewTransitionOpts:ie.viewTransitionOpts,unstable_flushSync:ie.flushSync===!0})),u.v7_fetcherPersist&&(le.forEach(Ue=>M.fetchers.delete(Ue)),Re.forEach(Ue=>Oe(Ue)))}function Se(Y,ie,le){var Re,Ue;let{flushSync:Tt}=le===void 0?{}:le,at=M.actionData!=null&&M.navigation.formMethod!=null&&no(M.navigation.formMethod)&&M.navigation.state==="loading"&&((Re=Y.state)==null?void 0:Re._isRedirect)!==!0,qe;ie.actionData?Object.keys(ie.actionData).length>0?qe=ie.actionData:qe=null:at?qe=M.actionData:qe=null;let bt=ie.loaderData?gO(M.loaderData,ie.loaderData,ie.matches||[],ie.errors):M.loaderData,gt=M.blockers;gt.size>0&&(gt=new Map(gt),gt.forEach((vt,yn)=>gt.set(yn,ip)));let Ln=P===!0||M.navigation.formMethod!=null&&no(M.navigation.formMethod)&&((Ue=Y.state)==null?void 0:Ue._isRedirect)!==!0;a&&(o=a,a=void 0),$||L===or.Pop||(L===or.Push?t.history.push(Y,Y.state):L===or.Replace&&t.history.replace(Y,Y.state));let wn;if(L===or.Pop){let vt=H.get(M.location.pathname);vt&&vt.has(Y.pathname)?wn={currentLocation:M.location,nextLocation:Y}:H.has(Y.pathname)&&(wn={currentLocation:Y,nextLocation:M.location})}else if(N){let vt=H.get(M.location.pathname);vt?vt.add(Y.pathname):(vt=new Set([Y.pathname]),H.set(M.location.pathname,vt)),wn={currentLocation:M.location,nextLocation:Y}}he(jn({},ie,{actionData:qe,loaderData:bt,historyAction:L,location:Y,initialized:!0,navigation:tb,revalidation:"idle",restoreScrollPosition:$t(Y,ie.matches||M.matches),preventScrollReset:Ln,blockers:gt}),{viewTransitionOpts:wn,flushSync:Tt===!0}),L=or.Pop,P=!1,N=!1,$=!1,X=!1,q=[],fe=[]}async function _e(Y,ie){if(typeof Y=="number"){t.history.go(Y);return}let le=HM(M.location,M.matches,l,u.v7_prependBasename,Y,u.v7_relativeSplatPath,ie==null?void 0:ie.fromRouteId,ie==null?void 0:ie.relative),{path:Re,submission:Ue,error:Tt}=cO(u.v7_normalizeFormMethod,!1,le,ie),at=M.location,qe=Pm(M.location,Re,ie&&ie.state);qe=jn({},qe,t.history.encodeLocation(qe));let bt=ie&&ie.replace!=null?ie.replace:void 0,gt=or.Push;bt===!0?gt=or.Replace:bt===!1||Ue!=null&&no(Ue.formMethod)&&Ue.formAction===M.location.pathname+M.location.search&&(gt=or.Replace);let Ln=ie&&"preventScrollReset"in ie?ie.preventScrollReset===!0:void 0,wn=(ie&&ie.unstable_flushSync)===!0,vt=Z({currentLocation:at,nextLocation:qe,historyAction:gt});if(vt){Mt(vt,{state:"blocked",location:qe,proceed(){Mt(vt,{state:"proceeding",proceed:void 0,reset:void 0,location:qe}),_e(Y,ie)},reset(){let yn=new Map(M.blockers);yn.set(vt,ip),he({blockers:yn})}});return}return await Te(gt,qe,{submission:Ue,pendingError:Tt,preventScrollReset:Ln,replace:ie&&ie.replace,enableViewTransition:ie&&ie.unstable_viewTransition,flushSync:wn})}function Le(){if(Qe(),he({revalidation:"loading"}),M.navigation.state!=="submitting"){if(M.navigation.state==="idle"){Te(M.historyAction,M.location,{startUninterruptedRevalidation:!0});return}Te(L||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation})}}async function Te(Y,ie,le){C&&C.abort(),C=null,L=Y,$=(le&&le.startUninterruptedRevalidation)===!0,Ge(M.location,M.matches),P=(le&&le.preventScrollReset)===!0,N=(le&&le.enableViewTransition)===!0;let Re=a||o,Ue=le&&le.overrideNavigation,Tt=af(Re,ie,l),at=(le&&le.flushSync)===!0;if(!Tt){let vt=Ts(404,{pathname:ie.pathname}),{matches:yn,route:Kn}=yO(Re);Ce(),Se(ie,{matches:yn,loaderData:{},errors:{[Kn.id]:vt}},{flushSync:at});return}if(M.initialized&&!X&&RZ(M.location,ie)&&!(le&&le.submission&&no(le.submission.formMethod))){Se(ie,{matches:Tt},{flushSync:at});return}C=new AbortController;let qe=ud(t.history,ie,C.signal,le&&le.submission),bt;if(le&&le.pendingError)bt=[Kp(Tt).route.id,{type:Nn.error,error:le.pendingError}];else if(le&&le.submission&&no(le.submission.formMethod)){let vt=await He(qe,ie,le.submission,Tt,{replace:le.replace,flushSync:at});if(vt.shortCircuited)return;bt=vt.pendingActionResult,Ue=nb(ie,le.submission),at=!1,qe=ud(t.history,qe.url,qe.signal)}let{shortCircuited:gt,loaderData:Ln,errors:wn}=await nt(qe,ie,Tt,Ue,le&&le.submission,le&&le.fetcherSubmission,le&&le.replace,le&&le.initialHydration===!0,at,bt);gt||(C=null,Se(ie,jn({matches:Tt},vO(bt),{loaderData:Ln,errors:wn})))}async function He(Y,ie,le,Re,Ue){Ue===void 0&&(Ue={}),Qe();let Tt=kZ(ie,le);he({navigation:Tt},{flushSync:Ue.flushSync===!0});let at,qe=WM(Re,ie);if(!qe.route.action&&!qe.route.lazy)at={type:Nn.error,error:Ts(405,{method:Y.method,pathname:ie.pathname,routeId:qe.route.id})};else if(at=(await pe("action",Y,[qe],Re))[0],Y.signal.aborted)return{shortCircuited:!0};if(Jc(at)){let bt;return Ue&&Ue.replace!=null?bt=Ue.replace:bt=hO(at.response.headers.get("Location"),new URL(Y.url),l)===M.location.pathname+M.location.search,await de(Y,at,{submission:le,replace:bt}),{shortCircuited:!0}}if(Kc(at))throw Ts(400,{type:"defer-action"});if(Ps(at)){let bt=Kp(Re,qe.route.id);return(Ue&&Ue.replace)!==!0&&(L=or.Push),{pendingActionResult:[bt.route.id,at]}}return{pendingActionResult:[qe.route.id,at]}}async function nt(Y,ie,le,Re,Ue,Tt,at,qe,bt,gt){let Ln=Re||nb(ie,Ue),wn=Ue||Tt||SO(Ln),vt=a||o,[yn,Kn]=uO(t.history,M,le,wn,ie,u.v7_partialHydration&&qe===!0,u.unstable_skipActionErrorRevalidation,X,q,fe,ye,Pe,ae,vt,l,gt);if(Ce(Ne=>!(le&&le.some(rt=>rt.route.id===Ne))||yn&&yn.some(rt=>rt.route.id===Ne)),G=++W,yn.length===0&&Kn.length===0){let Ne=Xe();return Se(ie,jn({matches:le,loaderData:{},errors:gt&&Ps(gt[1])?{[gt[0]]:gt[1].error}:null},vO(gt),Ne?{fetchers:new Map(M.fetchers)}:{}),{flushSync:bt}),{shortCircuited:!0}}if(!$&&(!u.v7_partialHydration||!qe)){Kn.forEach(rt=>{let lt=M.fetchers.get(rt.key),et=sp(void 0,lt?lt.data:void 0);M.fetchers.set(rt.key,et)});let Ne;gt&&!Ps(gt[1])?Ne={[gt[0]]:gt[1].data}:M.actionData&&(Object.keys(M.actionData).length===0?Ne=null:Ne=M.actionData),he(jn({navigation:Ln},Ne!==void 0?{actionData:Ne}:{},Kn.length>0?{fetchers:new Map(M.fetchers)}:{}),{flushSync:bt})}Kn.forEach(Ne=>{k.has(Ne.key)&&Et(Ne.key),Ne.controller&&k.set(Ne.key,Ne.controller)});let Zo=()=>Kn.forEach(Ne=>Et(Ne.key));C&&C.signal.addEventListener("abort",Zo);let{loaderResults:F,fetcherResults:ne}=await we(M.matches,le,yn,Kn,Y);if(Y.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Zo),Kn.forEach(Ne=>k.delete(Ne.key));let ue=_O([...F,...ne]);if(ue){if(ue.idx>=yn.length){let Ne=Kn[ue.idx-yn.length].key;ae.add(Ne)}return await de(Y,ue.result,{replace:at}),{shortCircuited:!0}}let{loaderData:oe,errors:se}=mO(M,le,yn,F,gt,Kn,ne,Ee);Ee.forEach((Ne,rt)=>{Ne.subscribe(lt=>{(lt||Ne.done)&&Ee.delete(rt)})}),u.v7_partialHydration&&qe&&M.errors&&Object.entries(M.errors).filter(Ne=>{let[rt]=Ne;return!yn.some(lt=>lt.route.id===rt)}).forEach(Ne=>{let[rt,lt]=Ne;se=Object.assign(se||{},{[rt]:lt})});let Be=Xe(),Ke=At(G),Ze=Be||Ke||Kn.length>0;return jn({loaderData:oe,errors:se},Ze?{fetchers:new Map(M.fetchers)}:{})}function B(Y,ie,le,Re){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");k.has(Y)&&Et(Y);let Ue=(Re&&Re.unstable_flushSync)===!0,Tt=a||o,at=HM(M.location,M.matches,l,u.v7_prependBasename,le,u.v7_relativeSplatPath,ie,Re==null?void 0:Re.relative),qe=af(Tt,at,l);if(!qe){Fe(Y,ie,Ts(404,{pathname:at}),{flushSync:Ue});return}let{path:bt,submission:gt,error:Ln}=cO(u.v7_normalizeFormMethod,!0,at,Re);if(Ln){Fe(Y,ie,Ln,{flushSync:Ue});return}let wn=WM(qe,bt);if(P=(Re&&Re.preventScrollReset)===!0,gt&&no(gt.formMethod)){D(Y,ie,bt,wn,qe,Ue,gt);return}Pe.set(Y,{routeId:ie,path:bt}),J(Y,ie,bt,wn,qe,Ue,gt)}async function D(Y,ie,le,Re,Ue,Tt,at){if(Qe(),Pe.delete(Y),!Re.route.action&&!Re.route.lazy){let et=Ts(405,{method:at.formMethod,pathname:le,routeId:ie});Fe(Y,ie,et,{flushSync:Tt});return}let qe=M.fetchers.get(Y);De(Y,OZ(at,qe),{flushSync:Tt});let bt=new AbortController,gt=ud(t.history,le,bt.signal,at);k.set(Y,bt);let Ln=W,vt=(await pe("action",gt,[Re],Ue))[0];if(gt.signal.aborted){k.get(Y)===bt&&k.delete(Y);return}if(u.v7_fetcherPersist&&ye.has(Y)){if(Jc(vt)||Ps(vt)){De(Y,gl(void 0));return}}else{if(Jc(vt))if(k.delete(Y),G>Ln){De(Y,gl(void 0));return}else return ae.add(Y),De(Y,sp(at)),de(gt,vt,{fetcherSubmission:at});if(Ps(vt)){Fe(Y,ie,vt.error);return}}if(Kc(vt))throw Ts(400,{type:"defer-action"});let yn=M.navigation.location||M.location,Kn=ud(t.history,yn,bt.signal),Zo=a||o,F=M.navigation.state!=="idle"?af(Zo,M.navigation.location,l):M.matches;Wt(F,"Didn't find any matches after fetcher action");let ne=++W;ee.set(Y,ne);let ue=sp(at,vt.data);M.fetchers.set(Y,ue);let[oe,se]=uO(t.history,M,F,at,yn,!1,u.unstable_skipActionErrorRevalidation,X,q,fe,ye,Pe,ae,Zo,l,[Re.route.id,vt]);se.filter(et=>et.key!==Y).forEach(et=>{let dn=et.key,Bn=M.fetchers.get(dn),Br=sp(void 0,Bn?Bn.data:void 0);M.fetchers.set(dn,Br),k.has(dn)&&Et(dn),et.controller&&k.set(dn,et.controller)}),he({fetchers:new Map(M.fetchers)});let Be=()=>se.forEach(et=>Et(et.key));bt.signal.addEventListener("abort",Be);let{loaderResults:Ke,fetcherResults:Ze}=await we(M.matches,F,oe,se,Kn);if(bt.signal.aborted)return;bt.signal.removeEventListener("abort",Be),ee.delete(Y),k.delete(Y),se.forEach(et=>k.delete(et.key));let Ne=_O([...Ke,...Ze]);if(Ne){if(Ne.idx>=oe.length){let et=se[Ne.idx-oe.length].key;ae.add(et)}return de(Kn,Ne.result)}let{loaderData:rt,errors:lt}=mO(M,M.matches,oe,Ke,void 0,se,Ze,Ee);if(M.fetchers.has(Y)){let et=gl(vt.data);M.fetchers.set(Y,et)}At(ne),M.navigation.state==="loading"&&ne>G?(Wt(L,"Expected pending action"),C&&C.abort(),Se(M.navigation.location,{matches:F,loaderData:rt,errors:lt,fetchers:new Map(M.fetchers)})):(he({errors:lt,loaderData:gO(M.loaderData,rt,F,lt),fetchers:new Map(M.fetchers)}),X=!1)}async function J(Y,ie,le,Re,Ue,Tt,at){let qe=M.fetchers.get(Y);De(Y,sp(at,qe?qe.data:void 0),{flushSync:Tt});let bt=new AbortController,gt=ud(t.history,le,bt.signal);k.set(Y,bt);let Ln=W,vt=(await pe("loader",gt,[Re],Ue))[0];if(Kc(vt)&&(vt=await rV(vt,gt.signal,!0)||vt),k.get(Y)===bt&&k.delete(Y),!gt.signal.aborted){if(ye.has(Y)){De(Y,gl(void 0));return}if(Jc(vt))if(G>Ln){De(Y,gl(void 0));return}else{ae.add(Y),await de(gt,vt);return}if(Ps(vt)){Fe(Y,ie,vt.error);return}Wt(!Kc(vt),"Unhandled fetcher deferred data"),De(Y,gl(vt.data))}}async function de(Y,ie,le){let{submission:Re,fetcherSubmission:Ue,replace:Tt}=le===void 0?{}:le;ie.response.headers.has("X-Remix-Revalidate")&&(X=!0);let at=ie.response.headers.get("Location");Wt(at,"Expected a Location header on the redirect Response"),at=hO(at,new URL(Y.url),l);let qe=Pm(M.location,at,{_isRedirect:!0});if(n){let yn=!1;if(ie.response.headers.has("X-Remix-Reload-Document"))yn=!0;else if(lR.test(at)){const Kn=t.history.createURL(at);yn=Kn.origin!==e.location.origin||ch(Kn.pathname,l)==null}if(yn){Tt?e.location.replace(at):e.location.assign(at);return}}C=null;let bt=Tt===!0?or.Replace:or.Push,{formMethod:gt,formAction:Ln,formEncType:wn}=M.navigation;!Re&&!Ue&&gt&&Ln&&wn&&(Re=SO(M.navigation));let vt=Re||Ue;if(gZ.has(ie.response.status)&&vt&&no(vt.formMethod))await Te(bt,qe,{submission:jn({},vt,{formAction:at}),preventScrollReset:P});else{let yn=nb(qe,Re);await Te(bt,qe,{overrideNavigation:yn,fetcherSubmission:Ue,preventScrollReset:P})}}async function pe(Y,ie,le,Re){try{let Ue=await EZ(c,Y,ie,le,Re,s,i);return await Promise.all(Ue.map((Tt,at)=>{if(PZ(Tt)){let qe=Tt.result;return{type:Nn.redirect,response:CZ(qe,ie,le[at].route.id,Re,l,u.v7_relativeSplatPath)}}return TZ(Tt)}))}catch(Ue){return le.map(()=>({type:Nn.error,error:Ue}))}}async function we(Y,ie,le,Re,Ue){let[Tt,...at]=await Promise.all([le.length?pe("loader",Ue,le,ie):[],...Re.map(qe=>{if(qe.matches&&qe.match&&qe.controller){let bt=ud(t.history,qe.path,qe.controller.signal);return pe("loader",bt,[qe.match],qe.matches).then(gt=>gt[0])}else return Promise.resolve({type:Nn.error,error:Ts(404,{pathname:qe.path})})})]);return await Promise.all([xO(Y,le,Tt,Tt.map(()=>Ue.signal),!1,M.loaderData),xO(Y,Re.map(qe=>qe.match),at,Re.map(qe=>qe.controller?qe.controller.signal:null),!0)]),{loaderResults:Tt,fetcherResults:at}}function Qe(){X=!0,q.push(...Ce()),Pe.forEach((Y,ie)=>{k.has(ie)&&(fe.push(ie),Et(ie))})}function De(Y,ie,le){le===void 0&&(le={}),M.fetchers.set(Y,ie),he({fetchers:new Map(M.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Fe(Y,ie,le,Re){Re===void 0&&(Re={});let Ue=Kp(M.matches,ie);Oe(Y),he({errors:{[Ue.route.id]:le},fetchers:new Map(M.fetchers)},{flushSync:(Re&&Re.flushSync)===!0})}function Ct(Y){return u.v7_fetcherPersist&&(re.set(Y,(re.get(Y)||0)+1),ye.has(Y)&&ye.delete(Y)),M.fetchers.get(Y)||vZ}function Oe(Y){let ie=M.fetchers.get(Y);k.has(Y)&&!(ie&&ie.state==="loading"&&ee.has(Y))&&Et(Y),Pe.delete(Y),ee.delete(Y),ae.delete(Y),ye.delete(Y),M.fetchers.delete(Y)}function st(Y){if(u.v7_fetcherPersist){let ie=(re.get(Y)||0)-1;ie<=0?(re.delete(Y),ye.add(Y)):re.set(Y,ie)}else Oe(Y);he({fetchers:new Map(M.fetchers)})}function Et(Y){let ie=k.get(Y);Wt(ie,"Expected fetch controller: "+Y),ie.abort(),k.delete(Y)}function ft(Y){for(let ie of Y){let le=Ct(ie),Re=gl(le.data);M.fetchers.set(ie,Re)}}function Xe(){let Y=[],ie=!1;for(let le of ae){let Re=M.fetchers.get(le);Wt(Re,"Expected fetcher: "+le),Re.state==="loading"&&(ae.delete(le),Y.push(le),ie=!0)}return ft(Y),ie}function At(Y){let ie=[];for(let[le,Re]of ee)if(Re<Y){let Ue=M.fetchers.get(le);Wt(Ue,"Expected fetcher: "+le),Ue.state==="loading"&&(Et(le),ee.delete(le),ie.push(le))}return ft(ie),ie.length>0}function zt(Y,ie){let le=M.blockers.get(Y)||ip;return xe.get(Y)!==ie&&xe.set(Y,ie),le}function Sn(Y){M.blockers.delete(Y),xe.delete(Y)}function Mt(Y,ie){let le=M.blockers.get(Y)||ip;Wt(le.state==="unblocked"&&ie.state==="blocked"||le.state==="blocked"&&ie.state==="blocked"||le.state==="blocked"&&ie.state==="proceeding"||le.state==="blocked"&&ie.state==="unblocked"||le.state==="proceeding"&&ie.state==="unblocked","Invalid blocker state transition: "+le.state+" -> "+ie.state);let Re=new Map(M.blockers);Re.set(Y,ie),he({blockers:Re})}function Z(Y){let{currentLocation:ie,nextLocation:le,historyAction:Re}=Y;if(xe.size===0)return;xe.size>1&&Bf(!1,"A router only supports one blocker at a time");let Ue=Array.from(xe.entries()),[Tt,at]=Ue[Ue.length-1],qe=M.blockers.get(Tt);if(!(qe&&qe.state==="proceeding")&&at({currentLocation:ie,nextLocation:le,historyAction:Re}))return Tt}function Ce(Y){let ie=[];return Ee.forEach((le,Re)=>{(!Y||Y(Re))&&(le.cancel(),ie.push(Re),Ee.delete(Re))}),ie}function be(Y,ie,le){if(m=Y,y=ie,g=le||null,!_&&M.navigation===tb){_=!0;let Re=$t(M.location,M.matches);Re!=null&&he({restoreScrollPosition:Re})}return()=>{m=null,y=null,g=null}}function ze(Y,ie){return g&&g(Y,ie.map(Re=>XJ(Re,M.loaderData)))||Y.key}function Ge(Y,ie){if(m&&y){let le=ze(Y,ie);m[le]=y()}}function $t(Y,ie){if(m){let le=ze(Y,ie),Re=m[le];if(typeof Re=="number")return Re}return null}function un(Y){s={},a=VM(Y,i,void 0,s)}return A={get basename(){return l},get future(){return u},get state(){return M},get routes(){return o},get window(){return e},initialize:dt,subscribe:ut,enableScrollRestoration:be,navigate:_e,fetch:B,revalidate:Le,createHref:Y=>t.history.createHref(Y),encodeLocation:Y=>t.history.encodeLocation(Y),getFetcher:Ct,deleteFetcher:st,dispose:te,getBlocker:zt,deleteBlocker:Sn,_internalFetchControllers:k,_internalActiveDeferreds:Ee,_internalSetRoutes:un},A}function xZ(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function HM(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=eS(i||".",Qx(l,s),ch(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!cR(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Aa([n,u.pathname])),Eu(u)}function cO(t,e,n,r){if(!r||!xZ(r))return{path:n};if(r.formMethod&&!LZ(r.formMethod))return{path:n,error:Ts(405,{method:r.formMethod})};let i=()=>({path:n,error:Ts(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=tV(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!no(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,g)=>{let[y,_]=g;return""+m+y+"="+_+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!no(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}Wt(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=jM(r.formData),c=r.formData;else if(r.body instanceof FormData)l=jM(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=pO(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=pO(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(no(u.formMethod))return{path:n,submission:u};let d=Wa(n);return e&&d.search&&cR(d.search)&&l.append("index",""),d.search="?"+l,{path:Eu(d),submission:u}}function SZ(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function uO(t,e,n,r,i,s,o,a,l,c,u,d,p,m,g,y){let _=y?Ps(y[1])?y[1].error:y[1].data:void 0,v=t.createURL(e.location),S=t.createURL(i),w=y&&Ps(y[1])?y[0]:void 0,E=w?SZ(n,w):n,R=y?y[1].statusCode:void 0,A=o&&R&&R>=400,M=E.filter((P,C)=>{let{route:N}=P;if(N.lazy)return!0;if(N.loader==null)return!1;if(s)return typeof N.loader!="function"||N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(wZ(e.loaderData,e.matches[C],P)||l.some($=>$===P.route.id))return!0;let H=e.matches[C],z=P;return dO(P,jn({currentUrl:v,currentParams:H.params,nextUrl:S,nextParams:z.params},r,{actionResult:_,unstable_actionStatus:R,defaultShouldRevalidate:A?!1:a||v.pathname+v.search===S.pathname+S.search||v.search!==S.search||eV(H,z)}))}),L=[];return d.forEach((P,C)=>{if(s||!n.some(X=>X.route.id===P.routeId)||u.has(C))return;let N=af(m,P.path,g);if(!N){L.push({key:C,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let H=e.fetchers.get(C),z=WM(N,P.path),$=!1;p.has(C)?$=!1:c.includes(C)?$=!0:H&&H.state!=="idle"&&H.data===void 0?$=a:$=dO(z,jn({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:n[n.length-1].params},r,{actionResult:_,unstable_actionStatus:R,defaultShouldRevalidate:A?!1:a})),$&&L.push({key:C,routeId:P.routeId,path:P.path,matches:N,match:z,controller:new AbortController})}),[M,L]}function wZ(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function eV(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function dO(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function fO(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Wt(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Bf(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!GJ.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,jn({},e(i),{lazy:void 0}))}function bZ(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function EZ(t,e,n,r,i,s,o,a){let l=r.reduce((d,p)=>d.add(p.route.id),new Set),c=new Set,u=await t({matches:i.map(d=>{let p=l.has(d.route.id);return jn({},d,{shouldLoad:p,resolve:g=>(c.add(d.route.id),p?MZ(e,n,d,s,o,g,a):Promise.resolve({type:Nn.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>Wt(c.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),u.filter((d,p)=>l.has(i[p].route.id))}async function MZ(t,e,n,r,i,s,o){let a,l,c=u=>{let d,p=new Promise((y,_)=>d=_);l=()=>d(),e.signal.addEventListener("abort",l);let m=y=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:o},...y!==void 0?[y]:[]),g;return s?g=s(y=>m(y)):g=(async()=>{try{return{type:"data",result:await m()}}catch(y){return{type:"error",result:y}}})(),Promise.race([g,p])};try{let u=n.route[t];if(n.route.lazy)if(u){let d,[p]=await Promise.all([c(u).catch(m=>{d=m}),fO(n.route,i,r)]);if(d!==void 0)throw d;a=p}else if(await fO(n.route,i,r),u=n.route[t],u)a=await c(u);else if(t==="action"){let d=new URL(e.url),p=d.pathname+d.search;throw Ts(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Nn.data,result:void 0};else if(u)a=await c(u);else{let d=new URL(e.url),p=d.pathname+d.search;throw Ts(404,{pathname:p})}Wt(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Nn.error,result:u}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function TZ(t){let{result:e,type:n,status:r}=t;if(nV(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Nn.error,error:a}}return n===Nn.error?{type:Nn.error,error:new oR(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Nn.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Nn.error)return{type:Nn.error,error:e,statusCode:aR(e)?e.status:r};if(IZ(e)){var i,s;return{type:Nn.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Nn.data,data:e,statusCode:r}}function CZ(t,e,n,r,i,s){let o=t.headers.get("Location");if(Wt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!lR.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=HM(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function hO(t,e,n){if(lR.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=ch(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ud(t,e,n,r){let i=t.createURL(tV(e)).toString(),s={signal:n};if(r&&no(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=jM(r.formData):s.body=r.formData}return new Request(i,s)}function jM(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function pO(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function AZ(t,e,n,r,i,s){let o={},a=null,l,c=!1,u={},d=r&&Ps(r[1])?r[1].error:void 0;return n.forEach((p,m)=>{let g=e[m].route.id;if(Wt(!Jc(p),"Cannot handle redirect results in processLoaderData"),Ps(p)){let y=p.error;if(d!==void 0&&(y=d,d=void 0),a=a||{},s)a[g]=y;else{let _=Kp(t,g);a[_.route.id]==null&&(a[_.route.id]=y)}o[g]=void 0,c||(c=!0,l=aR(p.error)?p.error.status:500),p.headers&&(u[g]=p.headers)}else Kc(p)?(i.set(g,p.deferredData),o[g]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(u[g]=p.headers)):(o[g]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(u[g]=p.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:u}}function mO(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=AZ(e,n,r,i,a,!1);for(let u=0;u<s.length;u++){let{key:d,match:p,controller:m}=s[u];Wt(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let g=o[u];if(!(m&&m.signal.aborted))if(Ps(g)){let y=Kp(t.matches,p==null?void 0:p.route.id);c&&c[y.route.id]||(c=jn({},c,{[y.route.id]:g.error})),t.fetchers.delete(d)}else if(Jc(g))Wt(!1,"Unhandled fetcher revalidation redirect");else if(Kc(g))Wt(!1,"Unhandled fetcher deferred data");else{let y=gl(g.data);t.fetchers.set(d,y)}}return{loaderData:l,errors:c}}function gO(t,e,n,r){let i=jn({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function vO(t){return t?Ps(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Kp(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function yO(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ts(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new oR(t||500,o,new Error(a),!0)}function _O(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Jc(n))return{result:n,idx:e}}}function tV(t){let e=typeof t=="string"?Wa(t):t;return Eu(jn({},e,{hash:""}))}function RZ(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function PZ(t){return nV(t.result)&&mZ.has(t.result.status)}function Kc(t){return t.type===Nn.deferred}function Ps(t){return t.type===Nn.error}function Jc(t){return(t&&t.type)===Nn.redirect}function IZ(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function nV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function LZ(t){return pZ.has(t.toLowerCase())}function no(t){return fZ.has(t.toLowerCase())}async function xO(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),u=c!=null&&!eV(c,l)&&(s&&s[l.route.id])!==void 0;if(Kc(a)&&(i||u)){let d=r[o];Wt(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await rV(a,d,i).then(p=>{p&&(n[o]=p||n[o])})}}}async function rV(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Nn.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Nn.error,error:i}}return{type:Nn.data,data:t.deferredData.data}}}function cR(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function WM(t,e){let n=typeof e=="string"?Wa(e).search:e.search;if(t[t.length-1].route.index&&cR(n||""))return t[t.length-1];let r=J4(t);return r[r.length-1]}function SO(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function nb(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kZ(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function sp(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function OZ(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function gl(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function NZ(t,e){try{let n=t.sessionStorage.getItem(Q4);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function DZ(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Q4,JSON.stringify(n))}catch(r){Bf(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Im.apply(this,arguments)}const tS=O.createContext(null),iV=O.createContext(null),ac=O.createContext(null),nS=O.createContext(null),Ko=O.createContext({outlet:null,matches:[],isDataRoute:!1}),sV=O.createContext(null);function UZ(t,e){let{relative:n}=e===void 0?{}:e;uh()||Wt(!1);let{basename:r,navigator:i}=O.useContext(ac),{hash:s,pathname:o,search:a}=cV(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Aa([r,o])),i.createHref({pathname:l,search:a,hash:s})}function uh(){return O.useContext(nS)!=null}function bg(){return uh()||Wt(!1),O.useContext(nS).location}function oV(t){O.useContext(ac).static||O.useLayoutEffect(t)}function aV(){let{isDataRoute:t}=O.useContext(Ko);return t?JZ():FZ()}function FZ(){uh()||Wt(!1);let t=O.useContext(tS),{basename:e,future:n,navigator:r}=O.useContext(ac),{matches:i}=O.useContext(Ko),{pathname:s}=bg(),o=JSON.stringify(Qx(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return oV(()=>{a.current=!0}),O.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=eS(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Aa([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const BZ=O.createContext(null);function zZ(t){let e=O.useContext(Ko).outlet;return e&&O.createElement(BZ.Provider,{value:t},e)}function lV(){let{matches:t}=O.useContext(Ko),e=t[t.length-1];return e?e.params:{}}function cV(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(ac),{matches:i}=O.useContext(Ko),{pathname:s}=bg(),o=JSON.stringify(Qx(i,r.v7_relativeSplatPath));return O.useMemo(()=>eS(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function VZ(t,e,n,r){uh()||Wt(!1);let{navigator:i}=O.useContext(ac),{matches:s}=O.useContext(Ko),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=bg(),u;if(e){var d;let _=typeof e=="string"?Wa(e):e;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||Wt(!1),u=_}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let _=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=af(t,{pathname:m}),y=$Z(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Aa([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Aa([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&y?O.createElement(nS.Provider,{value:{location:Im({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:or.Pop}},y):y}function HZ(){let t=KZ(),e=aR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const jZ=O.createElement(HZ,null);class WZ extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Ko.Provider,{value:this.props.routeContext},O.createElement(sV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GZ(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(tS);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Ko.Provider,{value:e},r)}function $Z(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Wt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:m}=n,g=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,p)=>{let m,g=!1,y=null,_=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||jZ,l&&(c<0&&p===0?(ZZ("route-fallback",!1),g=!0,_=null):c===p&&(g=!0,_=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),S=()=>{let w;return m?w=y:g?w=_:d.route.Component?w=O.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,O.createElement(GZ,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?O.createElement(WZ,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}var uV=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(uV||{}),N_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(N_||{});function XZ(t){let e=O.useContext(tS);return e||Wt(!1),e}function qZ(t){let e=O.useContext(iV);return e||Wt(!1),e}function YZ(t){let e=O.useContext(Ko);return e||Wt(!1),e}function dV(t){let e=YZ(),n=e.matches[e.matches.length-1];return n.route.id||Wt(!1),n.route.id}function KZ(){var t;let e=O.useContext(sV),n=qZ(N_.UseRouteError),r=dV(N_.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JZ(){let{router:t}=XZ(uV.UseNavigateStable),e=dV(N_.UseNavigateStable),n=O.useRef(!1);return oV(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Im({fromRouteId:e},s)))},[t,e])}const wO={};function ZZ(t,e,n){!e&&!wO[t]&&(wO[t]=!0)}function U0(t){let{to:e,replace:n,state:r,relative:i}=t;uh()||Wt(!1);let{future:s,static:o}=O.useContext(ac),{matches:a}=O.useContext(Ko),{pathname:l}=bg(),c=aV(),u=eS(e,Qx(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function QZ(t){return zZ(t.context)}function eQ(t){let{basename:e="/",children:n=null,location:r,navigationType:i=or.Pop,navigator:s,static:o=!1,future:a}=t;uh()&&Wt(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:Im({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Wa(r));let{pathname:u="/",search:d="",hash:p="",state:m=null,key:g="default"}=r,y=O.useMemo(()=>{let _=ch(u,l);return _==null?null:{location:{pathname:_,search:d,hash:p,state:m,key:g},navigationType:i}},[l,u,d,p,m,g,i]);return y==null?null:O.createElement(ac.Provider,{value:c},O.createElement(nS.Provider,{children:n,value:y}))}new Promise(()=>{});function tQ(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:O.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:O.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:O.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lm(){return Lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lm.apply(this,arguments)}function nQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rQ(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iQ(t,e){return t.button===0&&(!e||e==="_self")&&!rQ(t)}const sQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],oQ="6";try{window.__reactRouterVersion=oQ}catch{}function aQ(t,e){return _Z({basename:e==null?void 0:e.basename,future:Lm({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:HJ({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||lQ(),routes:t,mapRouteProperties:tQ,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy,window:e==null?void 0:e.window}).initialize()}function lQ(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Lm({},e,{errors:cQ(e.errors)})),e}function cQ(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new oR(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const uQ=O.createContext({isTransitioning:!1}),dQ=O.createContext(new Map),fQ="startTransition",bO=ME[fQ],hQ="flushSync",EO=O$[hQ];function pQ(t){bO?bO(t):t()}function op(t){EO?EO(t):t()}let mQ=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function gQ(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=O.useState(n.state),[o,a]=O.useState(),[l,c]=O.useState({isTransitioning:!1}),[u,d]=O.useState(),[p,m]=O.useState(),[g,y]=O.useState(),_=O.useRef(new Map),{v7_startTransition:v}=r||{},S=O.useCallback(M=>{v?pQ(M):M()},[v]),w=O.useCallback((M,L)=>{let{deletedFetchers:P,unstable_flushSync:C,unstable_viewTransitionOpts:N}=L;P.forEach(z=>_.current.delete(z)),M.fetchers.forEach((z,$)=>{z.data!==void 0&&_.current.set($,z.data)});let H=n.window==null||typeof n.window.document.startViewTransition!="function";if(!N||H){C?op(()=>s(M)):S(()=>s(M));return}if(C){op(()=>{p&&(u&&u.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let z=n.window.document.startViewTransition(()=>{op(()=>s(M))});z.finished.finally(()=>{op(()=>{d(void 0),m(void 0),a(void 0),c({isTransitioning:!1})})}),op(()=>m(z));return}p?(u&&u.resolve(),p.skipTransition(),y({state:M,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(a(M),c({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[n.window,p,u,_,S]);O.useLayoutEffect(()=>n.subscribe(w),[n,w]),O.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new mQ)},[l]),O.useEffect(()=>{if(u&&o&&n.window){let M=o,L=u.promise,P=n.window.document.startViewTransition(async()=>{S(()=>s(M)),await L});P.finished.finally(()=>{d(void 0),m(void 0),a(void 0),c({isTransitioning:!1})}),m(P)}},[S,o,u,n.window]),O.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,p,i.location,o]),O.useEffect(()=>{!l.isTransitioning&&g&&(a(g.state),c({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),y(void 0))},[l.isTransitioning,g]),O.useEffect(()=>{},[]);let E=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:M=>n.navigate(M),push:(M,L,P)=>n.navigate(M,{state:L,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(M,L,P)=>n.navigate(M,{replace:!0,state:L,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),R=n.basename||"/",A=O.useMemo(()=>({router:n,navigator:E,static:!1,basename:R}),[n,E,R]);return O.createElement(O.Fragment,null,O.createElement(tS.Provider,{value:A},O.createElement(iV.Provider,{value:i},O.createElement(dQ.Provider,{value:_.current},O.createElement(uQ.Provider,{value:l},O.createElement(eQ,{basename:R,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?O.createElement(vQ,{routes:n.routes,future:n.future,state:i}):e))))),null)}function vQ(t){let{routes:e,future:n,state:r}=t;return VZ(e,void 0,r,n)}const yQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_Q=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rS=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,p=nQ(e,sQ),{basename:m}=O.useContext(ac),g,y=!1;if(typeof c=="string"&&_Q.test(c)&&(g=c,yQ))try{let w=new URL(window.location.href),E=c.startsWith("//")?new URL(w.protocol+c):new URL(c),R=ch(E.pathname,m);E.origin===w.origin&&R!=null?c=R+E.search+E.hash:y=!0}catch{}let _=UZ(c,{relative:i}),v=xQ(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function S(w){r&&r(w),w.defaultPrevented||v(w)}return O.createElement("a",Lm({},p,{href:g||_,onClick:y||s?r:S,ref:n,target:l}))});var MO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(MO||(MO={}));var TO;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(TO||(TO={}));function xQ(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=aV(),c=bg(),u=cV(t,{relative:o});return O.useCallback(d=>{if(iQ(d,n)){d.preventDefault();let p=r!==void 0?r:Eu(c)===Eu(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}const uR="-";function SQ(t){const e=bQ(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(uR);return a[0]===""&&a.length!==1&&a.shift(),fV(a,e)||wQ(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function fV(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?fV(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(uR);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const CO=/^\[(.+)\]$/;function wQ(t){if(CO.test(t)){const e=CO.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function bQ(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return MQ(Object.entries(t.classGroups),n).forEach(([s,o])=>{GM(o,r,s,e)}),r}function GM(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:AO(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(EQ(i)){GM(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{GM(o,AO(e,s),n,r)})})}function AO(t,e){let n=t;return e.split(uR).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function EQ(t){return t.isThemeGetter}function MQ(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function TQ(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const hV="!";function CQ(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,u;for(let y=0;y<o.length;y++){let _=o[y];if(l===0){if(_===r&&(n||o.slice(y,y+i)===e)){a.push(o.slice(c,y)),c=y+i;continue}if(_==="/"){u=y;continue}}_==="["?l++:_==="]"&&l--}const d=a.length===0?o:o.substring(c),p=d.startsWith(hV),m=p?d.substring(1):d,g=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}}}function AQ(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function RQ(t){return{cache:TQ(t.cacheSize),splitModifiers:CQ(t),...SQ(t)}}const PQ=/\s+/;function IQ(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(PQ).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:u}=n(o);let d=r(u?c.substring(0,u):c),p=!!u;if(!d){if(!u)return{isTailwindClass:!1,originalClassName:o};if(d=r(c),!d)return{isTailwindClass:!1,originalClassName:o};p=!1}const m=AQ(a).join(":");return{isTailwindClass:!0,modifierId:l?m+hV:m,classGroupId:d,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,u=a+l;return s.has(u)?!1:(s.add(u),i(l,c).forEach(d=>s.add(a+d)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function LQ(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=pV(e))&&(r&&(r+=" "),r+=n);return r}function pV(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=pV(t[r]))&&(n&&(n+=" "),n+=e);return n}function kQ(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=RQ(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=IQ(l,n);return i(l,u),u}return function(){return s(LQ.apply(null,arguments))}}function An(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const mV=/^\[(?:([a-z-]+):)?(.+)\]$/i,OQ=/^\d+\/\d+$/,NQ=new Set(["px","full","screen"]),DQ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UQ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FQ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BQ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zQ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function sa(t){return Zc(t)||NQ.has(t)||OQ.test(t)}function sl(t){return dh(t,"length",qQ)}function Zc(t){return!!t&&!Number.isNaN(Number(t))}function iy(t){return dh(t,"number",Zc)}function ap(t){return!!t&&Number.isInteger(Number(t))}function VQ(t){return t.endsWith("%")&&Zc(t.slice(0,-1))}function Dt(t){return mV.test(t)}function ol(t){return DQ.test(t)}const HQ=new Set(["length","size","percentage"]);function jQ(t){return dh(t,HQ,gV)}function WQ(t){return dh(t,"position",gV)}const GQ=new Set(["image","url"]);function $Q(t){return dh(t,GQ,KQ)}function XQ(t){return dh(t,"",YQ)}function lp(){return!0}function dh(t,e,n){const r=mV.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function qQ(t){return UQ.test(t)&&!FQ.test(t)}function gV(){return!1}function YQ(t){return BQ.test(t)}function KQ(t){return zQ.test(t)}function JQ(){const t=An("colors"),e=An("spacing"),n=An("blur"),r=An("brightness"),i=An("borderColor"),s=An("borderRadius"),o=An("borderSpacing"),a=An("borderWidth"),l=An("contrast"),c=An("grayscale"),u=An("hueRotate"),d=An("invert"),p=An("gap"),m=An("gradientColorStops"),g=An("gradientColorStopPositions"),y=An("inset"),_=An("margin"),v=An("opacity"),S=An("padding"),w=An("saturate"),E=An("scale"),R=An("sepia"),A=An("skew"),M=An("space"),L=An("translate"),P=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Dt,e],H=()=>[Dt,e],z=()=>["",sa,sl],$=()=>["auto",Zc,Dt],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Dt],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[Zc,iy],ae=()=>[Zc,Dt];return{cacheSize:500,separator:":",theme:{colors:[lp],spacing:[sa,sl],blur:["none","",ol,Dt],brightness:ee(),borderColor:[t],borderRadius:["none","","full",ol,Dt],borderSpacing:H(),borderWidth:z(),contrast:ee(),grayscale:W(),hueRotate:ae(),invert:W(),gap:H(),gradientColorStops:[t],gradientColorStopPositions:[VQ,sl],inset:N(),margin:N(),opacity:ee(),padding:H(),saturate:ee(),scale:ee(),sepia:W(),skew:ae(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",Dt]}],container:["container"],columns:[{columns:[ol]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),Dt]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ap,Dt]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Dt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",ap,Dt]}],"grid-cols":[{"grid-cols":[lp]}],"col-start-end":[{col:["auto",{span:["full",ap,Dt]},Dt]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[lp]}],"row-start-end":[{row:["auto",{span:[ap,Dt]},Dt]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Dt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Dt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...k()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...k(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...k(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[M]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[M]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Dt,e]}],"min-w":[{"min-w":[Dt,e,"min","max","fit"]}],"max-w":[{"max-w":[Dt,e,"none","full","min","max","fit","prose",{screen:[ol]},ol]}],h:[{h:[Dt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Dt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Dt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Dt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ol,sl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",iy]}],"font-family":[{font:[lp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Dt]}],"line-clamp":[{"line-clamp":["none",Zc,iy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",sa,Dt]}],"list-image":[{"list-image":["none",Dt]}],"list-style-type":[{list:["none","disc","decimal",Dt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",sa,sl]}],"underline-offset":[{"underline-offset":["auto",sa,Dt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),WQ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jQ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$Q]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[sa,Dt]}],"outline-w":[{outline:[sa,sl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[sa,sl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ol,XQ]}],"shadow-color":[{shadow:[lp]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ol,Dt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Dt]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Dt]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Dt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[ap,Dt]}],"translate-x":[{"translate-x":[L]}],"translate-y":[{"translate-y":[L]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Dt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Dt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Dt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[sa,sl,iy]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const vV=kQ(JQ),ZQ=()=>U.jsx(U.Fragment,{children:U.jsxs("div",{className:"bg-zinc-950 py-20 text-zinc-200 selection:bg-zinc-600 w-screen h-screen flex items-center",children:[U.jsxs(li.div,{initial:{opacity:0,y:25},animate:{opacity:1,y:0},transition:{duration:1.25,ease:"easeInOut"},className:"relative z-10 mx-auto w-full max-w-xl p-4",children:[U.jsx(QQ,{}),U.jsx(eee,{})]}),U.jsx(nee,{})]})}),QQ=()=>U.jsxs("div",{children:[U.jsx(ree,{}),U.jsxs("div",{className:"mb-9 mt-6 space-y-1.5",children:[U.jsx("h1",{className:"text-2xl font-semibold",children:"Sign in to your account"}),U.jsxs("p",{className:"text-zinc-400",children:["Don't have an account?"," ",U.jsx(rS,{to:"/signup",className:"text-blue-400",children:"Create one."})]})]})]}),eee=()=>{const{login:t,loading:e,status:n}=ja(),[r,i]=O.useState(""),[s,o]=O.useState(""),[a,l]=O.useState(null);O.useEffect(()=>{n===400&&l("Invalid username or password")},[n]),O.useEffect(()=>{const u=()=>{const d=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${d}px`)};return window.addEventListener("resize",u),u(),()=>window.removeEventListener("resize",u)},[]);const c=async u=>{u.preventDefault(),l(null);try{await t(r,s)}catch(d){l(d.message)}};return U.jsxs("form",{onSubmit:c,children:[U.jsxs("div",{className:"mb-3",children:[U.jsx("label",{htmlFor:"username-input",className:"mb-1.5 block text-zinc-400",children:"Username"}),U.jsx("input",{id:"username-input",type:"text",placeholder:"your username",className:"w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-0 focus:ring-blue-700",value:r,onChange:u=>i(u.target.value),required:!0})]}),U.jsxs("div",{className:"mb-6",children:[U.jsxs("div",{className:"mb-1.5 flex items-end justify-between",children:[U.jsx("label",{htmlFor:"password-input",className:"block text-zinc-400",children:"Password"}),U.jsx("a",{href:"/request-password-reset",className:"text-sm text-blue-400",children:"Forgot?"})]}),U.jsx("input",{id:"password-input",type:"password",placeholder:"••••••••••••",className:"w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-0 focus:ring-blue-700",value:s,onChange:u=>o(u.target.value),required:!0})]}),a&&U.jsx("p",{className:"text-red-500",children:a}),U.jsx(tee,{type:"submit",className:"w-full",children:e?"Signing in...":"Sign in"}),U.jsx("button",{type:"button",onClick:()=>methodDoesNotExist(),children:"Break the world"}),";"]})},tee=({children:t,className:e,...n})=>U.jsx("button",{className:vV("rounded-md bg-gradient-to-br from-blue-400 to-blue-700 px-4 py-2 text-lg text-zinc-50 ring-2 ring-blue-500/50 ring-offset-2 ring-offset-zinc-950 transition-all hover:scale-[1.02] hover:ring-transparent active:scale-[0.98] active:ring-blue-500/70",e),...n,children:t}),nee=()=>U.jsx("div",{style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke-width='2' stroke='rgb(30 58 138 / 0.5)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e")`},className:"absolute right-0 top-0 z-0 size-[50vw]",children:U.jsx("div",{style:{backgroundImage:"radial-gradient(100% 100% at 100% 0%, rgba(9,9,11,0), rgba(9,9,11,1))"},className:"absolute inset-0"})}),ree=()=>U.jsx("img",{width:"99",height:"21",viewBox:"0 0 99 21",src:"./pushitt.png",alt:"Logo"}),iee=()=>{const{session:t}=ja();return t?U.jsx(U0,{to:"/home"}):U.jsxs("div",{className:"bg-zinc-950 py-20 text-zinc-200 selection:bg-zinc-600 w-screen h-screen flex items-center",children:[U.jsxs(li.div,{initial:{opacity:0,y:25},animate:{opacity:1,y:0},transition:{duration:1.25,ease:"easeInOut"},className:"relative z-10 mx-auto w-full max-w-xl p-4",children:[U.jsx(see,{}),U.jsx(oee,{})]}),U.jsx(lee,{})]})},see=()=>U.jsxs("div",{children:[U.jsx(cee,{}),U.jsxs("div",{className:"mb-9 mt-6 space-y-1.5",children:[U.jsx("h1",{className:"text-2xl font-semibold",children:"Create your account"}),U.jsxs("p",{className:"text-zinc-400",children:["Already have an account?"," ",U.jsx(rS,{to:"/signin",className:"text-blue-400",children:"Sign In!"})]})]})]}),oee=()=>{const{login:t,signUp:e}=ja(),[n,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(""),[u,d]=O.useState(null),[p,m]=O.useState(!1);O.useEffect(()=>{const y=()=>{const _=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${_}px`)};return window.addEventListener("resize",y),y(),()=>window.removeEventListener("resize",y)},[]);const g=async y=>{y.preventDefault(),d(null),m(!0),console.log("Signing up with:",{email:n,username:o,fullName:i,password:l});const _=async v=>{const S=await v.charAt(0).toUpperCase();try{if(!(await fetch("https://push-it-backend.vercel.app/profile-pic",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v,profilePic:`https://ui-avatars.com/api/?name=${S}&background=random&rounded=true&size=128&bold=true&color=fff`})})).ok)throw new Error("Profile picture upload failed")}catch(w){throw console.error("Profile picture upload error:",w),w}};try{await e(n,o,i,l);try{await _(o)}catch(v){d(v.message)}try{await t(o,l)}catch(v){d(v.message)}}catch(v){d(v.message)}m(!1)};return U.jsxs("form",{onSubmit:g,children:[U.jsxs("div",{className:"mb-3",children:[U.jsx("label",{htmlFor:"full-name-input",className:"mb-1.5 block text-zinc-400",children:"Full Name"}),U.jsx("input",{id:"full-name-input",type:"text",placeholder:"Enter your full name",className:"w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-0 focus:ring-blue-700",value:i,onChange:y=>s(y.target.value),required:!0})]}),U.jsxs("div",{className:"mb-3",children:[U.jsx("label",{htmlFor:"username-input",className:"mb-1.5 block text-zinc-400",children:"Username"}),U.jsx("input",{id:"username-input",type:"text",placeholder:"Enter a username",className:"w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-0 focus:ring-blue-700",value:o,onChange:y=>a(y.target.value),required:!0})]}),U.jsxs("div",{className:"mb-3",children:[U.jsx("label",{htmlFor:"email-input",className:"mb-1.5 block text-zinc-400",children:"Email"}),U.jsx("input",{id:"email-input",type:"email",placeholder:"your.email@provider.com",className:"w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-0 focus:ring-blue-700",value:n,onChange:y=>r(y.target.value),required:!0})]}),U.jsxs("div",{className:"mb-6",children:[U.jsx("label",{htmlFor:"password-input",className:"mb-1.5 block text-zinc-400",children:"Password"}),U.jsx("input",{id:"password-input",type:"password",placeholder:"••••••••••••",className:"w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-0 focus:ring-blue-700",value:l,onChange:y=>c(y.target.value),required:!0})]}),u&&U.jsx("p",{className:"text-red-500",children:u}),U.jsx(aee,{type:"submit",className:"w-full",children:p?"Signing Up...":"Sign Up!"})]})},aee=({children:t,className:e,...n})=>U.jsx("button",{className:vV("rounded-md bg-gradient-to-br from-blue-400 to-blue-700 px-4 py-2 text-lg text-zinc-50 ring-2 ring-blue-500/50 ring-offset-2 ring-offset-zinc-950 transition-all hover:scale-[1.02] hover:ring-transparent active:scale-[0.98] active:ring-blue-500/70",e),...n,children:t}),lee=()=>U.jsx("div",{style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke-width='2' stroke='rgb(30 58 138 / 0.5)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e")`},className:"absolute right-0 top-0 z-0 size-[50vw]",children:U.jsx("div",{style:{backgroundImage:"radial-gradient(100% 100% at 100% 0%, rgba(9,9,11,0), rgba(9,9,11,1))"},className:"absolute inset-0"})}),cee=()=>U.jsx("img",{width:"99",height:"21",viewBox:"0 0 99 21",src:"./pushitt.png",alt:"Logo"});var yV={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},RO=zo.createContext&&zo.createContext(yV),uee=["attr","size","title"];function dee(t,e){if(t==null)return{};var n=fee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function D_(){return D_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_.apply(this,arguments)}function PO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PO(Object(n),!0).forEach(function(r){hee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hee(t,e,n){return e=pee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pee(t){var e=mee(t,"string");return typeof e=="symbol"?e:String(e)}function mee(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _V(t){return t&&t.map((e,n)=>zo.createElement(e.tag,U_({key:n},e.attr),_V(e.child)))}function Nu(t){return e=>zo.createElement(gee,D_({attr:U_({},t.attr)},e),_V(t.child))}function gee(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=dee(t,uee),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),zo.createElement("svg",D_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:U_(U_({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&zo.createElement("title",null,s),t.children)};return RO!==void 0?zo.createElement(RO.Consumer,null,n=>e(n)):e(yV)}function vee(t){return Nu({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},child:[]}]})(t)}function yee(t){return Nu({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function _ee(t){return Nu({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(t)}const xV=O.createContext(),xee=({children:t})=>{const e=()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[n,r]=O.useState(e);O.useEffect(()=>{const s=window.document.documentElement;s.classList.remove(n==="light"?"dark":"light"),s.classList.add(n),localStorage.setItem("theme",n)},[n]);const i=()=>{r(s=>s==="light"?"dark":"light")};return U.jsx(xV.Provider,{value:{theme:n,toggleTheme:i},children:t})},Vs=()=>O.useContext(xV),See=({isOpen:t,onClose:e})=>{const{resendVerificationEmail:n,session:r}=ja(),[i,s]=O.useState(!1),[o,a]=O.useState(0),l=60,{is_verified:c}=Du();console.log(c);const u=async()=>{s(!0),a(l),await n(),alert("Verification email resent. Please check your inbox.");const p=setInterval(()=>{a(m=>m<=1?(clearInterval(p),s(!1),0):m-1)},1e3)},d=async()=>{localStorage.setItem("session",JSON.stringify({...r,user:{...r.user,is_verified:c}})),window.location.reload()};return t?U.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:U.jsxs("div",{className:`p-8 rounded-md w-96 max-w-full text-center 
        ${Vs().theme==="light"?"bg-white":"bg-dark"}
      `,children:[U.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Email Verification Required"}),U.jsx("p",{className:"mb-4",children:"Please verify your email to continue using the application."}),U.jsx("button",{type:"button",onClick:d,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Check Verification"}),U.jsx("button",{type:"button",onClick:()=>{localStorage.removeItem("selectedNav"),localStorage.removeItem("session"),window.location.reload()},className:"bg-red-500 text-white px-4 py-2 rounded ml-4",children:"Sign Out"}),U.jsx("button",{className:"bg-green-500 text-white px-1 py-2 rounded mt-2",onClick:u,disabled:i,children:i?`Resend in ${o}s`:"Resend Verification Email"})]})}):null},Du=()=>{const[t,e]=O.useState([]),{session:n}=ja(),[r,i]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(null),[c,u]=O.useState(""),[d,p]=O.useState(!1),[m,g]=O.useState(null);O.useEffect(()=>{},[m]);const y=O.useCallback(async()=>{o(!0);try{const v=await fetch("https://push-it-backend.vercel.app/current-user",{headers:{Authorization:`Bearer ${n.token}`}});if(g(v.status),!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const S=await v.json();i(S.username),u(S.fullname),p(S.is_verified)}catch(v){l(v),console.error("Error fetching signed-in user:",v.message)}finally{o(!1)}},[n]);O.useEffect(()=>{n!=null&&n.token&&y()},[y,n]);const _=O.useCallback(async()=>{try{const v=await fetch("https://push-it-backend.vercel.app/chats",{method:"GET",headers:{Authorization:`Bearer ${n.token}`}});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const S=await v.json();e(S)}catch(v){l(v),console.error("There was a problem fetching chats:",v)}},[n]);return O.useEffect(()=>{n!=null&&n.token&&_()},[_,n]),{chats:t,username:r,loading:s,error:a,fullName:c,setChats:e,is_verified:d,status:m}},dR=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(null),{session:i}=ja(),s=O.useCallback(async()=>{try{const o=await fetch("https://push-it-backend.vercel.app/user-profile",{method:"GET",headers:{Authorization:`Bearer ${i.token}`}});if(!o.ok)throw new Error("Failed to fetch user profile");const a=await o.json();e(a)}catch(o){r(o),console.error("Failed to fetch user:",o)}},[i]);return O.useEffect(()=>{s()},[s]),{userData:t,error:n}},wee=()=>{const[t,e]=O.useState(()=>{const l=localStorage.getItem("selectedNav");return l!==null?parseInt(l,10):0}),[n,r]=O.useState(null),{theme:i}=Vs(),{username:s}=Du(),{userData:o}=dR();O.useEffect(()=>{r(o.profile_pic)},[o]);const a=(l,c)=>{e(l),localStorage.setItem("selectedNav",l),window.location.href=c};return U.jsxs("nav",{className:`h-full w-fit p-4 flex flex-col items-center gap-2 ${i==="light"?"bg-gray-100":"bg-dark"}`,children:[U.jsx("img",{src:n||"default-profile-pic-url",alt:`${s}'s profile`,className:`w-10 h-10 rounded-full border-2 ${i==="light"?"border-gray-300":"border-dark-lighter"}`}),U.jsx(rb,{selected:t===0,id:0,onClick:()=>a(0,"/home"),children:U.jsx(vee,{})}),U.jsx(rb,{selected:t===1,id:1,onClick:()=>a(1,`/${s}`),children:U.jsx(_ee,{})}),U.jsx(rb,{selected:t===2,id:2,onClick:()=>{localStorage.removeItem("selectedNav"),localStorage.removeItem("session"),window.location.reload()},children:U.jsx(yee,{})})]})},rb=({children:t,selected:e,id:n,onClick:r})=>{const{theme:i}=Vs();return U.jsxs(li.button,{className:`p-3 text-xl rounded-md transition-colors relative ${i==="light"?"bg-gray-200 hover:bg-gray-300 text-black":"bg-gray-700 hover:bg-gray-600 text-white"}`,onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},children:[U.jsx("span",{className:"block relative z-10",children:t}),U.jsx(_J,{children:e&&U.jsx(li.span,{className:"absolute inset-0 rounded-md bg-indigo-600 z-0",initial:{scale:0},animate:{scale:1},exit:{scale:0}})})]})},bee=({isOpen:t,onClose:e})=>{const{theme:n}=Vs();return t?U.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:U.jsxs("div",{className:`p-8 rounded-md w-96 max-w-full text-center 
        ${n==="light"?"bg-white":"bg-dark"}
      `,children:[U.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Session Expired"}),U.jsx("p",{className:"mb-4",children:"Your session has expired. Please sign in again to continue using the application."}),U.jsx("button",{type:"button",onClick:()=>{localStorage.removeItem("selectedNav"),localStorage.removeItem("session"),e(),window.location.reload()},className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Sign In Again"})]})}):null},Eee=()=>{const{session:t}=ja(),{status:e}=Du(),[n,r]=O.useState(!1),[i,s]=O.useState(!1);O.useEffect(()=>{t!=null&&t.user&&!t.user.is_verified&&r(!0)},[t]),O.useEffect(()=>{e===403&&s(!0)},[e]);const o=()=>{r(!1)},a=()=>{s(!1),localStorage.removeItem("session"),window.location.reload()};return!t||!t.user?U.jsx("div",{children:"Loading..."}):U.jsxs(U.Fragment,{children:[U.jsxs("div",{className:"w-screen h-screen flex",children:[U.jsx("div",{className:"hidden md:flex",children:U.jsx(wee,{})}),U.jsx("div",{className:"flex-1",children:U.jsx(QZ,{})})]}),U.jsx(See,{isOpen:n,onClose:o}),U.jsx(bee,{isOpen:i,onClose:a})]})};function Mee(t){return Nu({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"},child:[]},{tag:"path",attr:{d:"M9 10h2v8H9zm4 0h2v8h-2z"},child:[]}]})(t)}const Tee=({id:t,title:e,usernames:n,setSelectedChat:r,setSelectedChatData:i,usersData:s,selectedChatId:o,setChats:a,onChatDelete:l})=>{const{theme:c}=Vs(),u=()=>{r(t),i({title:e,usernames:n})},d=t===o,p=async m=>{m.stopPropagation();try{if(!(await fetch("https://push-it-backend.vercel.app/delete-chat",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:Number(t)})})).ok)throw new Error("Failed to delete chat");a(y=>y.filter(_=>_.chat_id!==t)),l("Chat deleted successfully")}catch(g){console.error("Failed to delete chat:",g.message),l("Failed to delete chat")}};return U.jsxs("div",{className:`flex items-center p-3 mb-1 w-full rounded-md cursor-pointer transition-colors overflow-hidden border ${d?c==="light"?"bg-gray-200 border-gray-300":"bg-dark border-gray-400":c==="light"?"hover:bg-gray-200 border-gray-300":"hover:bg-dark border-gray-700"}`,onClick:u,children:[n.filter(m=>m.trim()!=="").map((m,g)=>{const y=s?s.find(v=>(v==null?void 0:v.username)===m):null,_=y?y.profile_pic:"default-profile-pic-url";return U.jsx("img",{src:_,alt:`${m}'s profile`,className:"w-10 h-10 rounded-full mr-3"},g)}),U.jsx("div",{className:"flex-grow",children:U.jsxs("div",{className:"flex justify-between",children:[U.jsx("p",{className:`font-semibold capitalize ${c==="light"?"text-black":"text-white"}`,children:e}),U.jsx(Mee,{onClick:p,className:"text-red-500 cursor-pointer"})]})})]})};function Mu(t){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(t)}function Cee(t,e){if(Mu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SV(t){var e=Cee(t,"string");return Mu(e)=="symbol"?e:e+""}function kp(t,e,n){return e=SV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IO(Object(n),!0).forEach(function(r){kp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aee(t){if(Array.isArray(t))return t}function Ree(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function $M(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wV(t,e){if(t){if(typeof t=="string")return $M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $M(t,e)}}function Pee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ra(t,e){return Aee(t)||Ree(t,e)||wV(t,e)||Pee()}function Iee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ga(t,e){if(t==null)return{};var n=Iee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var Lee=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function kee(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,s=t.defaultValue,o=s===void 0?null:s,a=t.inputValue,l=t.menuIsOpen,c=t.onChange,u=t.onInputChange,d=t.onMenuClose,p=t.onMenuOpen,m=t.value,g=Ga(t,Lee),y=O.useState(a!==void 0?a:n),_=Ra(y,2),v=_[0],S=_[1],w=O.useState(l!==void 0?l:i),E=Ra(w,2),R=E[0],A=E[1],M=O.useState(m!==void 0?m:o),L=Ra(M,2),P=L[0],C=L[1],N=O.useCallback(function(k,W){typeof c=="function"&&c(k,W),C(k)},[c]),H=O.useCallback(function(k,W){var G;typeof u=="function"&&(G=u(k,W)),S(G!==void 0?G:k)},[u]),z=O.useCallback(function(){typeof p=="function"&&p(),A(!0)},[p]),$=O.useCallback(function(){typeof d=="function"&&d(),A(!1)},[d]),X=a!==void 0?a:v,q=l!==void 0?l:R,fe=m!==void 0?m:P;return mt(mt({},g),{},{inputValue:X,menuIsOpen:q,onChange:N,onInputChange:H,onMenuClose:$,onMenuOpen:z,value:fe})}function St(){return St=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},St.apply(this,arguments)}function Oee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SV(r.key),r)}}function Nee(t,e,n){return e&&LO(t.prototype,e),n&&LO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function XM(t,e){return XM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XM(t,e)}function Dee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XM(t,e)}function F_(t){return F_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F_(t)}function bV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bV=function(){return!!t})()}function Uee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fee(t,e){if(e&&(Mu(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uee(t)}function Bee(t){var e=bV();return function(){var r=F_(t),i;if(e){var s=F_(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Fee(this,i)}}function zee(t){if(Array.isArray(t))return $M(t)}function Vee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fR(t){return zee(t)||Vee(t)||wV(t)||Hee()}function jee(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Wee(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Gee=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Wee(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=jee(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),ri="-ms-",B_="-moz-",ln="-webkit-",EV="comm",hR="rule",pR="decl",$ee="@import",MV="@keyframes",Xee="@layer",qee=Math.abs,iS=String.fromCharCode,Yee=Object.assign;function Kee(t,e){return jr(t,0)^45?(((e<<2^jr(t,0))<<2^jr(t,1))<<2^jr(t,2))<<2^jr(t,3):0}function TV(t){return t.trim()}function Jee(t,e){return(t=e.exec(t))?t[0]:t}function cn(t,e,n){return t.replace(e,n)}function qM(t,e){return t.indexOf(e)}function jr(t,e){return t.charCodeAt(e)|0}function km(t,e,n){return t.slice(e,n)}function Po(t){return t.length}function mR(t){return t.length}function sy(t,e){return e.push(t),t}function Zee(t,e){return t.map(e).join("")}var sS=1,zf=1,CV=0,Hi=0,fr=0,fh="";function oS(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:sS,column:zf,length:o,return:""}}function cp(t,e){return Yee(oS("",null,null,"",null,null,0),t,{length:-t.length},e)}function Qee(){return fr}function ete(){return fr=Hi>0?jr(fh,--Hi):0,zf--,fr===10&&(zf=1,sS--),fr}function is(){return fr=Hi<CV?jr(fh,Hi++):0,zf++,fr===10&&(zf=1,sS++),fr}function Go(){return jr(fh,Hi)}function F0(){return Hi}function Eg(t,e){return km(fh,t,e)}function Om(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function AV(t){return sS=zf=1,CV=Po(fh=t),Hi=0,[]}function RV(t){return fh="",t}function B0(t){return TV(Eg(Hi-1,YM(t===91?t+2:t===40?t+1:t)))}function tte(t){for(;(fr=Go())&&fr<33;)is();return Om(t)>2||Om(fr)>3?"":" "}function nte(t,e){for(;--e&&is()&&!(fr<48||fr>102||fr>57&&fr<65||fr>70&&fr<97););return Eg(t,F0()+(e<6&&Go()==32&&is()==32))}function YM(t){for(;is();)switch(fr){case t:return Hi;case 34:case 39:t!==34&&t!==39&&YM(fr);break;case 40:t===41&&YM(t);break;case 92:is();break}return Hi}function rte(t,e){for(;is()&&t+fr!==57;)if(t+fr===84&&Go()===47)break;return"/*"+Eg(e,Hi-1)+"*"+iS(t===47?t:is())}function ite(t){for(;!Om(Go());)is();return Eg(t,Hi)}function ste(t){return RV(z0("",null,null,null,[""],t=AV(t),0,[0],t))}function z0(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,p=0,m=0,g=0,y=1,_=1,v=1,S=0,w="",E=i,R=s,A=r,M=w;_;)switch(g=S,S=is()){case 40:if(g!=108&&jr(M,d-1)==58){qM(M+=cn(B0(S),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:M+=B0(S);break;case 9:case 10:case 13:case 32:M+=tte(g);break;case 92:M+=nte(F0()-1,7);continue;case 47:switch(Go()){case 42:case 47:sy(ote(rte(is(),F0()),e,n),l);break;default:M+="/"}break;case 123*y:a[c++]=Po(M)*v;case 125*y:case 59:case 0:switch(S){case 0:case 125:_=0;case 59+u:v==-1&&(M=cn(M,/\f/g,"")),m>0&&Po(M)-d&&sy(m>32?OO(M+";",r,n,d-1):OO(cn(M," ","")+";",r,n,d-2),l);break;case 59:M+=";";default:if(sy(A=kO(M,e,n,c,u,i,a,w,E=[],R=[],d),s),S===123)if(u===0)z0(M,e,A,A,E,s,d,a,R);else switch(p===99&&jr(M,3)===110?100:p){case 100:case 108:case 109:case 115:z0(t,A,A,r&&sy(kO(t,A,A,0,0,i,a,w,i,E=[],d),R),i,R,d,a,r?E:R);break;default:z0(M,A,A,A,[""],R,0,a,R)}}c=u=m=0,y=v=1,w=M="",d=o;break;case 58:d=1+Po(M),m=g;default:if(y<1){if(S==123)--y;else if(S==125&&y++==0&&ete()==125)continue}switch(M+=iS(S),S*y){case 38:v=u>0?1:(M+="\f",-1);break;case 44:a[c++]=(Po(M)-1)*v,v=1;break;case 64:Go()===45&&(M+=B0(is())),p=Go(),u=d=Po(w=M+=ite(F0())),S++;break;case 45:g===45&&Po(M)==2&&(y=0)}}return s}function kO(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,p=i===0?s:[""],m=mR(p),g=0,y=0,_=0;g<r;++g)for(var v=0,S=km(t,d+1,d=qee(y=o[g])),w=t;v<m;++v)(w=TV(y>0?p[v]+" "+S:cn(S,/&\f/g,p[v])))&&(l[_++]=w);return oS(t,e,n,i===0?hR:a,l,c,u)}function ote(t,e,n){return oS(t,e,n,EV,iS(Qee()),km(t,2,-2),0)}function OO(t,e,n,r){return oS(t,e,n,pR,km(t,0,r),km(t,r+1,-1),r)}function Ef(t,e){for(var n="",r=mR(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function ate(t,e,n,r){switch(t.type){case Xee:if(t.children.length)break;case $ee:case pR:return t.return=t.return||t.value;case EV:return"";case MV:return t.return=t.value+"{"+Ef(t.children,r)+"}";case hR:t.value=t.props.join(",")}return Po(n=Ef(t.children,r))?t.return=t.value+"{"+n+"}":""}function lte(t){var e=mR(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function cte(t){return function(e){e.root||(e=e.return)&&t(e)}}function ute(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var dte=function(e,n,r){for(var i=0,s=0;i=s,s=Go(),i===38&&s===12&&(n[r]=1),!Om(s);)is();return Eg(e,Hi)},fte=function(e,n){var r=-1,i=44;do switch(Om(i)){case 0:i===38&&Go()===12&&(n[r]=1),e[r]+=dte(Hi-1,n,r);break;case 2:e[r]+=B0(i);break;case 4:if(i===44){e[++r]=Go()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=iS(i)}while(i=is());return e},hte=function(e,n){return RV(fte(AV(e),n))},NO=new WeakMap,pte=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!NO.get(r))&&!i){NO.set(e,!0);for(var s=[],o=hte(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},mte=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function PV(t,e){switch(Kee(t,e)){case 5103:return ln+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ln+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ln+t+B_+t+ri+t+t;case 6828:case 4268:return ln+t+ri+t+t;case 6165:return ln+t+ri+"flex-"+t+t;case 5187:return ln+t+cn(t,/(\w+).+(:[^]+)/,ln+"box-$1$2"+ri+"flex-$1$2")+t;case 5443:return ln+t+ri+"flex-item-"+cn(t,/flex-|-self/,"")+t;case 4675:return ln+t+ri+"flex-line-pack"+cn(t,/align-content|flex-|-self/,"")+t;case 5548:return ln+t+ri+cn(t,"shrink","negative")+t;case 5292:return ln+t+ri+cn(t,"basis","preferred-size")+t;case 6060:return ln+"box-"+cn(t,"-grow","")+ln+t+ri+cn(t,"grow","positive")+t;case 4554:return ln+cn(t,/([^-])(transform)/g,"$1"+ln+"$2")+t;case 6187:return cn(cn(cn(t,/(zoom-|grab)/,ln+"$1"),/(image-set)/,ln+"$1"),t,"")+t;case 5495:case 3959:return cn(t,/(image-set\([^]*)/,ln+"$1$`$1");case 4968:return cn(cn(t,/(.+:)(flex-)?(.*)/,ln+"box-pack:$3"+ri+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ln+t+t;case 4095:case 3583:case 4068:case 2532:return cn(t,/(.+)-inline(.+)/,ln+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Po(t)-1-e>6)switch(jr(t,e+1)){case 109:if(jr(t,e+4)!==45)break;case 102:return cn(t,/(.+:)(.+)-([^]+)/,"$1"+ln+"$2-$3$1"+B_+(jr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~qM(t,"stretch")?PV(cn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(jr(t,e+1)!==115)break;case 6444:switch(jr(t,Po(t)-3-(~qM(t,"!important")&&10))){case 107:return cn(t,":",":"+ln)+t;case 101:return cn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ln+(jr(t,14)===45?"inline-":"")+"box$3$1"+ln+"$2$3$1"+ri+"$2box$3")+t}break;case 5936:switch(jr(t,e+11)){case 114:return ln+t+ri+cn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ln+t+ri+cn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ln+t+ri+cn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ln+t+ri+t+t}return t}var gte=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case pR:e.return=PV(e.value,e.length);break;case MV:return Ef([cp(e,{value:cn(e.value,"@","@"+ln)})],i);case hR:if(e.length)return Zee(e.props,function(s){switch(Jee(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ef([cp(e,{props:[cn(s,/:(read-\w+)/,":"+B_+"$1")]})],i);case"::placeholder":return Ef([cp(e,{props:[cn(s,/:(plac\w+)/,":"+ln+"input-$1")]}),cp(e,{props:[cn(s,/:(plac\w+)/,":"+B_+"$1")]}),cp(e,{props:[cn(s,/:(plac\w+)/,ri+"input-$1")]})],i)}return""})}},vte=[gte],yte=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var _=y.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=e.stylisPlugins||vte,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(y){for(var _=y.getAttribute("data-emotion").split(" "),v=1;v<_.length;v++)s[_[v]]=!0;a.push(y)});var l,c=[pte,mte];{var u,d=[ate,cte(function(y){u.insert(y)})],p=lte(c.concat(i,d)),m=function(_){return Ef(ste(_),p)};l=function(_,v,S,w){u=S,m(_?_+"{"+v.styles+"}":v.styles),w&&(g.inserted[v.name]=!0)}}var g={key:n,sheet:new Gee({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(a),g},IV={exports:{}},vn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fr=typeof Symbol=="function"&&Symbol.for,gR=Fr?Symbol.for("react.element"):60103,vR=Fr?Symbol.for("react.portal"):60106,aS=Fr?Symbol.for("react.fragment"):60107,lS=Fr?Symbol.for("react.strict_mode"):60108,cS=Fr?Symbol.for("react.profiler"):60114,uS=Fr?Symbol.for("react.provider"):60109,dS=Fr?Symbol.for("react.context"):60110,yR=Fr?Symbol.for("react.async_mode"):60111,fS=Fr?Symbol.for("react.concurrent_mode"):60111,hS=Fr?Symbol.for("react.forward_ref"):60112,pS=Fr?Symbol.for("react.suspense"):60113,_te=Fr?Symbol.for("react.suspense_list"):60120,mS=Fr?Symbol.for("react.memo"):60115,gS=Fr?Symbol.for("react.lazy"):60116,xte=Fr?Symbol.for("react.block"):60121,Ste=Fr?Symbol.for("react.fundamental"):60117,wte=Fr?Symbol.for("react.responder"):60118,bte=Fr?Symbol.for("react.scope"):60119;function fs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case gR:switch(t=t.type,t){case yR:case fS:case aS:case cS:case lS:case pS:return t;default:switch(t=t&&t.$$typeof,t){case dS:case hS:case gS:case mS:case uS:return t;default:return e}}case vR:return e}}}function LV(t){return fs(t)===fS}vn.AsyncMode=yR;vn.ConcurrentMode=fS;vn.ContextConsumer=dS;vn.ContextProvider=uS;vn.Element=gR;vn.ForwardRef=hS;vn.Fragment=aS;vn.Lazy=gS;vn.Memo=mS;vn.Portal=vR;vn.Profiler=cS;vn.StrictMode=lS;vn.Suspense=pS;vn.isAsyncMode=function(t){return LV(t)||fs(t)===yR};vn.isConcurrentMode=LV;vn.isContextConsumer=function(t){return fs(t)===dS};vn.isContextProvider=function(t){return fs(t)===uS};vn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===gR};vn.isForwardRef=function(t){return fs(t)===hS};vn.isFragment=function(t){return fs(t)===aS};vn.isLazy=function(t){return fs(t)===gS};vn.isMemo=function(t){return fs(t)===mS};vn.isPortal=function(t){return fs(t)===vR};vn.isProfiler=function(t){return fs(t)===cS};vn.isStrictMode=function(t){return fs(t)===lS};vn.isSuspense=function(t){return fs(t)===pS};vn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===aS||t===fS||t===cS||t===lS||t===pS||t===_te||typeof t=="object"&&t!==null&&(t.$$typeof===gS||t.$$typeof===mS||t.$$typeof===uS||t.$$typeof===dS||t.$$typeof===hS||t.$$typeof===Ste||t.$$typeof===wte||t.$$typeof===bte||t.$$typeof===xte)};vn.typeOf=fs;IV.exports=vn;var Ete=IV.exports,kV=Ete,Mte={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Tte={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OV={};OV[kV.ForwardRef]=Mte;OV[kV.Memo]=Tte;var Cte=!0;function Ate(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var NV=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Cte===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Rte=function(e,n,r){NV(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Pte(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ite={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Lte=/[A-Z]|^ms/g,kte=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DV=function(e){return e.charCodeAt(1)===45},DO=function(e){return e!=null&&typeof e!="boolean"},ib=ute(function(t){return DV(t)?t:t.replace(Lte,"-$&").toLowerCase()}),UO=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(kte,function(r,i,s){return Io={name:i,styles:s,next:Io},i})}return Ite[e]!==1&&!DV(e)&&typeof n=="number"&&n!==0?n+"px":n};function Nm(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Io={name:n.name,styles:n.styles,next:Io},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Io={name:r.name,styles:r.styles,next:Io},r=r.next;var i=n.styles+";";return i}return Ote(t,e,n)}case"function":{if(t!==void 0){var s=Io,o=n(t);return Io=s,Nm(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function Ote(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Nm(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":DO(o)&&(r+=ib(s)+":"+UO(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)DO(o[a])&&(r+=ib(s)+":"+UO(s,o[a])+";");else{var l=Nm(t,e,o);switch(s){case"animation":case"animationName":{r+=ib(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var FO=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Io,UV=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Io=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Nm(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Nm(r,n,e[a]),i&&(s+=o[a]);FO.lastIndex=0;for(var l="",c;(c=FO.exec(s))!==null;)l+="-"+c[1];var u=Pte(s)+l;return{name:u,styles:s,next:Io}},Nte=function(e){return e()},Dte=ME.useInsertionEffect?ME.useInsertionEffect:!1,Ute=Dte||Nte,_R={}.hasOwnProperty,FV=O.createContext(typeof HTMLElement<"u"?yte({key:"css"}):null);FV.Provider;var Fte=function(e){return O.forwardRef(function(n,r){var i=O.useContext(FV);return e(n,i,r)})},Bte=O.createContext({}),KM="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",zte=function(e,n){var r={};for(var i in n)_R.call(n,i)&&(r[i]=n[i]);return r[KM]=e,r},Vte=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return NV(n,r,i),Ute(function(){return Rte(n,r,i)}),null},Hte=Fte(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[KM],s=[r],o="";typeof t.className=="string"?o=Ate(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=UV(s,void 0,O.useContext(Bte));o+=e.key+"-"+a.name;var l={};for(var c in t)_R.call(t,c)&&c!=="css"&&c!==KM&&(l[c]=t[c]);return l.ref=n,l.className=o,O.createElement(O.Fragment,null,O.createElement(Vte,{cache:e,serialized:a,isStringTag:typeof i=="string"}),O.createElement(i,l))}),jte=Hte,ht=function(e,n){var r=arguments;if(n==null||!_R.call(n,"css"))return O.createElement.apply(void 0,r);var i=r.length,s=new Array(i);s[0]=jte,s[1]=zte(e,n);for(var o=2;o<i;o++)s[o]=r[o];return O.createElement.apply(null,s)};function xR(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return UV(e)}var Wte=function(){var e=xR.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Gte(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const $te=Math.min,Xte=Math.max,z_=Math.round,oy=Math.floor,V_=t=>({x:t,y:t});function qte(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function BV(t){return VV(t)?(t.nodeName||"").toLowerCase():"#document"}function fo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function zV(t){var e;return(e=(VV(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function VV(t){return t instanceof Node||t instanceof fo(t).Node}function JM(t){return t instanceof Element||t instanceof fo(t).Element}function SR(t){return t instanceof HTMLElement||t instanceof fo(t).HTMLElement}function BO(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fo(t).ShadowRoot}function HV(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=wR(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Yte(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kte(t){return["html","body","#document"].includes(BV(t))}function wR(t){return fo(t).getComputedStyle(t)}function Jte(t){if(BV(t)==="html")return t;const e=t.assignedSlot||t.parentNode||BO(t)&&t.host||zV(t);return BO(e)?e.host:e}function jV(t){const e=Jte(t);return Kte(e)?t.ownerDocument?t.ownerDocument.body:t.body:SR(e)&&HV(e)?e:jV(e)}function H_(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=jV(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=fo(i);return s?e.concat(o,o.visualViewport||[],HV(i)?i:[],o.frameElement&&n?H_(o.frameElement):[]):e.concat(i,H_(i,[],n))}function Zte(t){const e=wR(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=SR(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=z_(n)!==s||z_(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function bR(t){return JM(t)?t:t.contextElement}function sb(t){const e=bR(t);if(!SR(e))return V_(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Zte(e);let o=(s?z_(n.width):n.width)/r,a=(s?z_(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Qte=V_(0);function ene(t){const e=fo(t);return!Yte()||!e.visualViewport?Qte:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function tne(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==fo(t)?!1:e}function zO(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=bR(t);let o=V_(1);e&&(r?JM(r)&&(o=sb(r)):o=sb(t));const a=tne(s,n,r)?ene(s):V_(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const p=fo(s),m=r&&JM(r)?fo(r):r;let g=p,y=g.frameElement;for(;y&&r&&m!==g;){const _=sb(y),v=y.getBoundingClientRect(),S=wR(y),w=v.left+(y.clientLeft+parseFloat(S.paddingLeft))*_.x,E=v.top+(y.clientTop+parseFloat(S.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,d*=_.y,l+=w,c+=E,g=fo(y),y=g.frameElement}}return qte({width:u,height:d,x:l,y:c})}function nne(t,e){let n=null,r;const i=zV(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:p}=t.getBoundingClientRect();if(a||e(),!d||!p)return;const m=oy(u),g=oy(i.clientWidth-(c+d)),y=oy(i.clientHeight-(u+p)),_=oy(c),S={rootMargin:-m+"px "+-g+"px "+-y+"px "+-_+"px",threshold:Xte(0,$te(1,l))||1};let w=!0;function E(R){const A=R[0].intersectionRatio;if(A!==l){if(!w)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,S)}n.observe(t)}return o(!0),s}function rne(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=bR(t),u=i||s?[...c?H_(c):[],...H_(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?nne(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[S]=v;S&&S.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let g,y=l?zO(t):null;l&&_();function _(){const v=zO(t);y&&(v.x!==y.x||v.y!==y.y||v.width!==y.width||v.height!==y.height)&&n(),y=v,g=requestAnimationFrame(_)}return n(),()=>{var v;u.forEach(S=>{i&&S.removeEventListener("scroll",n),s&&S.removeEventListener("resize",n)}),d==null||d(),(v=m)==null||v.disconnect(),m=null,l&&cancelAnimationFrame(g)}}var ZM=O.useLayoutEffect,ine=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],j_=function(){};function sne(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function one(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=[].concat(r);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(sne(t,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var VO=function(e){return mne(e)?e.filter(Boolean):Mu(e)==="object"&&e!==null?[e]:[]},WV=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Ga(e,ine);return mt({},n)},nr=function(e,n,r){var i=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(n,e),className:i(r??{},o(n,e),a)}};function vS(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function ane(t){return vS(t)?window.innerHeight:t.clientHeight}function GV(t){return vS(t)?window.pageYOffset:t.scrollTop}function W_(t,e){if(vS(t)){window.scrollTo(0,e);return}t.scrollTop=e}function lne(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function cne(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function ay(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:j_,i=GV(t),s=e-i,o=10,a=0;function l(){a+=o;var c=cne(a,i,s,n);W_(t,c),a<n?window.requestAnimationFrame(l):r(t)}l()}function HO(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?W_(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&W_(t,Math.max(e.offsetTop-i,0))}function une(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function jO(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function dne(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var $V=!1,fne={get passive(){return $V=!0}},ly=typeof window<"u"?window:{};ly.addEventListener&&ly.removeEventListener&&(ly.addEventListener("p",j_,fne),ly.removeEventListener("p",j_,!1));var hne=$V;function pne(t){return t!=null}function mne(t){return Array.isArray(t)}function cy(t,e,n){return t?e:n}var gne=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s=Object.entries(e).filter(function(o){var a=Ra(o,1),l=a[0];return!r.includes(l)});return s.reduce(function(o,a){var l=Ra(a,2),c=l[0],u=l[1];return o[c]=u,o},{})},vne=["children","innerProps"],yne=["children","innerProps"];function _ne(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,s=t.shouldScroll,o=t.isFixedPosition,a=t.controlHeight,l=lne(n),c={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect(),d=u.height,p=n.getBoundingClientRect(),m=p.bottom,g=p.height,y=p.top,_=n.offsetParent.getBoundingClientRect(),v=_.top,S=o?window.innerHeight:ane(l),w=GV(l),E=parseInt(getComputedStyle(n).marginBottom,10),R=parseInt(getComputedStyle(n).marginTop,10),A=v-R,M=S-y,L=A+w,P=d-w-y,C=m-S+w+E,N=w+y-R,H=160;switch(i){case"auto":case"bottom":if(M>=g)return{placement:"bottom",maxHeight:e};if(P>=g&&!o)return s&&ay(l,C,H),{placement:"bottom",maxHeight:e};if(!o&&P>=r||o&&M>=r){s&&ay(l,C,H);var z=o?M-E:P-E;return{placement:"bottom",maxHeight:z}}if(i==="auto"||o){var $=e,X=o?A:L;return X>=r&&($=Math.min(X-E-a,e)),{placement:"top",maxHeight:$}}if(i==="bottom")return s&&W_(l,C),{placement:"bottom",maxHeight:e};break;case"top":if(A>=g)return{placement:"top",maxHeight:e};if(L>=g&&!o)return s&&ay(l,N,H),{placement:"top",maxHeight:e};if(!o&&L>=r||o&&A>=r){var q=e;return(!o&&L>=r||o&&A>=r)&&(q=o?A-R:L-R),s&&ay(l,N,H),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function xne(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var XV=function(e){return e==="auto"?"bottom":e},Sne=function(e,n){var r,i=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return mt((r={label:"menu"},kp(r,xne(i),"100%"),kp(r,"position","absolute"),kp(r,"width","100%"),kp(r,"zIndex",1),r),n?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},qV=O.createContext(null),wne=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=O.useContext(qV)||{},u=c.setPortalPlacement,d=O.useRef(null),p=O.useState(i),m=Ra(p,2),g=m[0],y=m[1],_=O.useState(null),v=Ra(_,2),S=v[0],w=v[1],E=l.spacing.controlHeight;return ZM(function(){var R=d.current;if(R){var A=o==="fixed",M=a&&!A,L=_ne({maxHeight:i,menuEl:R,minHeight:r,placement:s,shouldScroll:M,isFixedPosition:A,controlHeight:E});y(L.maxHeight),w(L.placement),u==null||u(L.placement)}},[i,s,o,a,r,u,E]),n({ref:d,placerProps:mt(mt({},e),{},{placement:S||XV(s),maxHeight:g})})},bne=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return ht("div",St({},nr(e,"menu",{menu:!0}),{ref:r},i),n)},Ene=bne,Mne=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return mt({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},Tne=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,s=e.isMulti;return ht("div",St({},nr(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},r),n)},YV=function(e,n){var r=e.theme,i=r.spacing.baseUnit,s=r.colors;return mt({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Cne=YV,Ane=YV,Rne=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,s=Ga(e,vne);return ht("div",St({},nr(mt(mt({},s),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},Pne=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,s=Ga(e,yne);return ht("div",St({},nr(mt(mt({},s),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},Ine=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},Lne=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=O.useRef(null),c=O.useRef(null),u=O.useState(XV(o)),d=Ra(u,2),p=d[0],m=d[1],g=O.useMemo(function(){return{setPortalPlacement:m}},[]),y=O.useState(null),_=Ra(y,2),v=_[0],S=_[1],w=O.useCallback(function(){if(i){var M=une(i),L=a==="fixed"?0:window.pageYOffset,P=M[p]+L;(P!==(v==null?void 0:v.offset)||M.left!==(v==null?void 0:v.rect.left)||M.width!==(v==null?void 0:v.rect.width))&&S({offset:P,rect:M})}},[i,a,p,v==null?void 0:v.offset,v==null?void 0:v.rect.left,v==null?void 0:v.rect.width]);ZM(function(){w()},[w]);var E=O.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=rne(i,l.current,w,{elementResize:"ResizeObserver"in window}))},[i,w]);ZM(function(){E()},[E]);var R=O.useCallback(function(M){l.current=M,E()},[E]);if(!n&&a!=="fixed"||!v)return null;var A=ht("div",St({ref:R},nr(mt(mt({},e),{},{offset:v.offset,position:a,rect:v.rect}),"menuPortal",{"menu-portal":!0}),s),r);return ht(qV.Provider,{value:g},n?Dx.createPortal(A,n):A)},kne=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},One=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,s=e.isRtl;return ht("div",St({},nr(e,"container",{"--is-disabled":i,"--is-rtl":s}),r),n)},Nne=function(e,n){var r=e.theme.spacing,i=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return mt({alignItems:"center",display:i&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},Dne=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,s=e.hasValue;return ht("div",St({},nr(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),r),n)},Une=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Fne=function(e){var n=e.children,r=e.innerProps;return ht("div",St({},nr(e,"indicatorsContainer",{indicators:!0}),r),n)},WO,Bne=["size"],zne=["innerProps","isRtl","size"],Vne={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},KV=function(e){var n=e.size,r=Ga(e,Bne);return ht("svg",St({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Vne},r))},ER=function(e){return ht(KV,St({size:20},e),ht("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},JV=function(e){return ht(KV,St({size:20},e),ht("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ZV=function(e,n){var r=e.isFocused,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return mt({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?o.neutral60:o.neutral20,padding:s*2,":hover":{color:r?o.neutral80:o.neutral40}})},Hne=ZV,jne=function(e){var n=e.children,r=e.innerProps;return ht("div",St({},nr(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||ht(JV,null))},Wne=ZV,Gne=function(e){var n=e.children,r=e.innerProps;return ht("div",St({},nr(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||ht(ER,null))},$ne=function(e,n){var r=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,o=i.colors;return mt({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},Xne=function(e){var n=e.innerProps;return ht("span",St({},n,nr(e,"indicatorSeparator",{"indicator-separator":!0})))},qne=Wte(WO||(WO=Gte([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Yne=function(e,n){var r=e.isFocused,i=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return mt({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?o.neutral60:o.neutral20,padding:a*2})},ob=function(e){var n=e.delay,r=e.offset;return ht("span",{css:xR({animation:"".concat(qne," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Kne=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,s=i===void 0?4:i,o=Ga(e,zne);return ht("div",St({},nr(mt(mt({},o),{},{innerProps:n,isRtl:r,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),ht(ob,{delay:0,offset:r}),ht(ob,{delay:160,offset:!0}),ht(ob,{delay:320,offset:!r}))},Jne=function(e,n){var r=e.isDisabled,i=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return mt({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?o.neutral5:o.neutral0,borderColor:r?o.neutral10:i?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:i?o.primary:o.neutral30}})},Zne=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return ht("div",St({ref:s},nr(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":a}),o,{"aria-disabled":r||void 0}),n)},Qne=Zne,ere=["data"],tre=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},nre=function(e){var n=e.children,r=e.cx,i=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return ht("div",St({},nr(e,"group",{group:!0}),l),ht(o,St({},a,{selectProps:d,theme:u,getStyles:i,getClassNames:s,cx:r}),c),ht("div",null,n))},rre=function(e,n){var r=e.theme,i=r.colors,s=r.spacing;return mt({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},ire=function(e){var n=WV(e);n.data;var r=Ga(n,ere);return ht("div",St({},nr(e,"groupHeading",{"group-heading":!0}),r))},sre=nre,ore=["innerRef","isDisabled","isHidden","inputClassName"],are=function(e,n){var r=e.isDisabled,i=e.value,s=e.theme,o=s.spacing,a=s.colors;return mt(mt({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},lre),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},QV={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},lre={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":mt({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},QV)},cre=function(e){return mt({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},QV)},ure=function(e){var n=e.cx,r=e.value,i=WV(e),s=i.innerRef,o=i.isDisabled,a=i.isHidden,l=i.inputClassName,c=Ga(i,ore);return ht("div",St({},nr(e,"input",{"input-container":!0}),{"data-value":r||""}),ht("input",St({className:n({input:!0},l),ref:s,style:cre(a),disabled:o},c)))},dre=ure,fre=function(e,n){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors;return mt({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},hre=function(e,n){var r=e.theme,i=r.borderRadius,s=r.colors,o=e.cropWithEllipsis;return mt({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},pre=function(e,n){var r=e.theme,i=r.spacing,s=r.borderRadius,o=r.colors,a=e.isFocused;return mt({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},e5=function(e){var n=e.children,r=e.innerProps;return ht("div",r,n)},mre=e5,gre=e5;function vre(t){var e=t.children,n=t.innerProps;return ht("div",St({role:"button"},n),e||ht(ER,{size:14}))}var yre=function(e){var n=e.children,r=e.components,i=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return ht(c,{data:i,innerProps:mt(mt({},nr(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},ht(u,{data:i,innerProps:mt({},nr(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),ht(d,{data:i,innerProps:mt(mt({},nr(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:l}))},_re=yre,xre=function(e,n){var r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return mt({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?l.primary:i?l.primary25:"transparent",color:r?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:s?l.primary:l.primary50}})},Sre=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return ht("div",St({},nr(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":s}),{ref:o,"aria-disabled":r},a),n)},wre=Sre,bre=function(e,n){var r=e.theme,i=r.spacing,s=r.colors;return mt({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},Ere=function(e){var n=e.children,r=e.innerProps;return ht("div",St({},nr(e,"placeholder",{placeholder:!0}),r),n)},Mre=Ere,Tre=function(e,n){var r=e.isDisabled,i=e.theme,s=i.spacing,o=i.colors;return mt({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},Cre=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return ht("div",St({},nr(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},Are=Cre,Rre={ClearIndicator:Gne,Control:Qne,DropdownIndicator:jne,DownChevron:JV,CrossIcon:ER,Group:sre,GroupHeading:ire,IndicatorsContainer:Fne,IndicatorSeparator:Xne,Input:dre,LoadingIndicator:Kne,Menu:Ene,MenuList:Tne,MenuPortal:Lne,LoadingMessage:Pne,NoOptionsMessage:Rne,MultiValue:_re,MultiValueContainer:mre,MultiValueLabel:gre,MultiValueRemove:vre,Option:wre,Placeholder:Mre,SelectContainer:One,SingleValue:Are,ValueContainer:Dne},Pre=function(e){return mt(mt({},Rre),e.components)},GO=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ire(t,e){return!!(t===e||GO(t)&&GO(e))}function Lre(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Ire(t[n],e[n]))return!1;return!0}function kre(t,e){e===void 0&&(e=Lre);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var Ore={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Nre=function(e){return ht("span",St({css:Ore},e))},$O=Nre,Dre={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,s=e.context,o=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(y,_){return y&&y.length?"".concat(y.indexOf(_)+1," of ").concat(y.length):""};if(n==="value"&&a)return"value ".concat(o," focused, ").concat(d(a,r),".");if(n==="menu"&&u){var p=l?" disabled":"",m="".concat(c?" selected":"").concat(p);return"".concat(o).concat(m,", ").concat(d(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},Ure=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,d=l.ariaLiveMessages,p=l.getOptionLabel,m=l.inputValue,g=l.isMulti,y=l.isOptionDisabled,_=l.isSearchable,v=l.menuIsOpen,S=l.options,w=l.screenReaderStatus,E=l.tabSelectsValue,R=l.isLoading,A=l["aria-label"],M=l["aria-live"],L=O.useMemo(function(){return mt(mt({},Dre),d||{})},[d]),P=O.useMemo(function(){var X="";if(n&&L.onChange){var q=n.option,fe=n.options,k=n.removedValue,W=n.removedValues,G=n.value,ee=function(it){return Array.isArray(it)?null:it},ae=k||q||ee(G),Pe=ae?p(ae):"",re=fe||W||void 0,ye=re?re.map(p):[],Ee=mt({isDisabled:ae&&y(ae,a),label:Pe,labels:ye},n);X=L.onChange(Ee)}return X},[n,L,y,a,p]),C=O.useMemo(function(){var X="",q=r||i,fe=!!(r&&a&&a.includes(r));if(q&&L.onFocus){var k={focused:q,label:p(q),isDisabled:y(q,a),isSelected:fe,options:s,context:q===r?"menu":"value",selectValue:a,isAppleDevice:u};X=L.onFocus(k)}return X},[r,i,p,y,L,s,a,u]),N=O.useMemo(function(){var X="";if(v&&S.length&&!R&&L.onFilter){var q=w({count:s.length});X=L.onFilter({inputValue:m,resultsMessage:q})}return X},[s,m,v,L,S,w,R]),H=(n==null?void 0:n.action)==="initial-input-focus",z=O.useMemo(function(){var X="";if(L.guidance){var q=i?"value":v?"menu":"input";X=L.guidance({"aria-label":A,context:q,isDisabled:r&&y(r,a),isMulti:g,isSearchable:_,tabSelectsValue:E,isInitialFocus:H})}return X},[A,r,i,g,y,_,v,L,a,E,H]),$=ht(O.Fragment,null,ht("span",{id:"aria-selection"},P),ht("span",{id:"aria-focused"},C),ht("span",{id:"aria-results"},N),ht("span",{id:"aria-guidance"},z));return ht(O.Fragment,null,ht($O,{id:c},H&&$),ht($O,{"aria-live":M,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!H&&$))},Fre=Ure,QM=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Bre=new RegExp("["+QM.map(function(t){return t.letters}).join("")+"]","g"),t5={};for(var ab=0;ab<QM.length;ab++)for(var lb=QM[ab],cb=0;cb<lb.letters.length;cb++)t5[lb.letters[cb]]=lb.base;var n5=function(e){return e.replace(Bre,function(n){return t5[n]})},zre=kre(n5),XO=function(e){return e.replace(/^\s+|\s+$/g,"")},Vre=function(e){return"".concat(e.label," ").concat(e.value)},Hre=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=mt({ignoreCase:!0,ignoreAccents:!0,stringify:Vre,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,o=i.ignoreAccents,a=i.stringify,l=i.trim,c=i.matchFrom,u=l?XO(r):r,d=l?XO(a(n)):a(n);return s&&(u=u.toLowerCase(),d=d.toLowerCase()),o&&(u=zre(u),d=n5(d)),c==="start"?d.substr(0,u.length)===u:d.indexOf(u)>-1}},jre=["innerRef"];function Wre(t){var e=t.innerRef,n=Ga(t,jre),r=gne(n,"onExited","in","enter","exit","appear");return ht("input",St({ref:e},r,{css:xR({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Gre=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function $re(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,s=t.onTopLeave,o=O.useRef(!1),a=O.useRef(!1),l=O.useRef(0),c=O.useRef(null),u=O.useCallback(function(_,v){if(c.current!==null){var S=c.current,w=S.scrollTop,E=S.scrollHeight,R=S.clientHeight,A=c.current,M=v>0,L=E-R-w,P=!1;L>v&&o.current&&(r&&r(_),o.current=!1),M&&a.current&&(s&&s(_),a.current=!1),M&&v>L?(n&&!o.current&&n(_),A.scrollTop=E,P=!0,o.current=!0):!M&&-v>w&&(i&&!a.current&&i(_),A.scrollTop=0,P=!0,a.current=!0),P&&Gre(_)}},[n,r,i,s]),d=O.useCallback(function(_){u(_,_.deltaY)},[u]),p=O.useCallback(function(_){l.current=_.changedTouches[0].clientY},[]),m=O.useCallback(function(_){var v=l.current-_.changedTouches[0].clientY;u(_,v)},[u]),g=O.useCallback(function(_){if(_){var v=hne?{passive:!1}:!1;_.addEventListener("wheel",d,v),_.addEventListener("touchstart",p,v),_.addEventListener("touchmove",m,v)}},[m,p,d]),y=O.useCallback(function(_){_&&(_.removeEventListener("wheel",d,!1),_.removeEventListener("touchstart",p,!1),_.removeEventListener("touchmove",m,!1))},[m,p,d]);return O.useEffect(function(){if(e){var _=c.current;return g(_),function(){y(_)}}},[e,g,y]),function(_){c.current=_}}var qO=["boxSizing","height","overflow","paddingRight","position"],YO={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function KO(t){t.preventDefault()}function JO(t){t.stopPropagation()}function ZO(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function QO(){return"ontouchstart"in window||navigator.maxTouchPoints}var eN=!!(typeof window<"u"&&window.document&&window.document.createElement),up=0,dd={capture:!1,passive:!1};function Xre(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=O.useRef({}),s=O.useRef(null),o=O.useCallback(function(l){if(eN){var c=document.body,u=c&&c.style;if(r&&qO.forEach(function(g){var y=u&&u[g];i.current[g]=y}),r&&up<1){var d=parseInt(i.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,m=window.innerWidth-p+d||0;Object.keys(YO).forEach(function(g){var y=YO[g];u&&(u[g]=y)}),u&&(u.paddingRight="".concat(m,"px"))}c&&QO()&&(c.addEventListener("touchmove",KO,dd),l&&(l.addEventListener("touchstart",ZO,dd),l.addEventListener("touchmove",JO,dd))),up+=1}},[r]),a=O.useCallback(function(l){if(eN){var c=document.body,u=c&&c.style;up=Math.max(up-1,0),r&&up<1&&qO.forEach(function(d){var p=i.current[d];u&&(u[d]=p)}),c&&QO()&&(c.removeEventListener("touchmove",KO,dd),l&&(l.removeEventListener("touchstart",ZO,dd),l.removeEventListener("touchmove",JO,dd)))}},[r]);return O.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var qre=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},Yre={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Kre(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,s=t.onBottomArrive,o=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,c=$re({isEnabled:i,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),u=Xre({isEnabled:n}),d=function(m){c(m),u(m)};return ht(O.Fragment,null,n&&ht("div",{onClick:qre,css:Yre}),e(d))}var Jre={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Zre=function(e){var n=e.name,r=e.onFocus;return ht("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Jre,value:"",onChange:function(){}})},Qre=Zre;function MR(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function eie(){return MR(/^iPhone/i)}function r5(){return MR(/^Mac/i)}function tie(){return MR(/^iPad/i)||r5()&&navigator.maxTouchPoints>1}function nie(){return eie()||tie()}function rie(){return r5()||nie()}var iie=function(e){return e.label},sie=function(e){return e.label},oie=function(e){return e.value},aie=function(e){return!!e.isDisabled},lie={clearIndicator:Wne,container:kne,control:Jne,dropdownIndicator:Hne,group:tre,groupHeading:rre,indicatorsContainer:Une,indicatorSeparator:$ne,input:are,loadingIndicator:Yne,loadingMessage:Ane,menu:Sne,menuList:Mne,menuPortal:Ine,multiValue:fre,multiValueLabel:hre,multiValueRemove:pre,noOptionsMessage:Cne,option:xre,placeholder:bre,singleValue:Tre,valueContainer:Nne},cie={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},uie=4,i5=4,die=38,fie=i5*2,hie={baseUnit:i5,controlHeight:die,menuGutter:fie},ub={borderRadius:uie,colors:cie,spacing:hie},pie={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:jO(),captureMenuScroll:!jO(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Hre(),formatGroupLabel:iie,getOptionLabel:sie,getOptionValue:oie,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:aie,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!dne(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function tN(t,e,n,r){var i=a5(t,e,n),s=l5(t,e,n),o=o5(t,e),a=G_(t,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:o,value:a,index:r}}function V0(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(o,a){return tN(t,o,e,a)}).filter(function(o){return rN(t,o)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var s=tN(t,n,e,r);return rN(t,s)?s:void 0}).filter(pne)}function s5(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,fR(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function nN(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,fR(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function mie(t,e){return s5(V0(t,e))}function rN(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,s=e.isSelected,o=e.label,a=e.value;return(!u5(t)||!s)&&c5(t,{label:o,value:a,data:i},r)}function gie(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var s=e.indexOf(n);if(s>-1)return n;if(i<e.length)return e[i]}return null}function vie(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var db=function(e,n){var r,i=(r=e.find(function(s){return s.data===n}))===null||r===void 0?void 0:r.id;return i||null},o5=function(e,n){return e.getOptionLabel(n)},G_=function(e,n){return e.getOptionValue(n)};function a5(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function l5(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=G_(t,e);return n.some(function(i){return G_(t,i)===r})}function c5(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var u5=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},yie=1,d5=function(t){Dee(n,t);var e=Bee(n);function n(r){var i;if(Oee(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=rie(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var u=i.props,d=u.onChange,p=u.name;c.name=p,i.ariaOnChange(l,c),d(l,c)},i.setValue=function(l,c,u){var d=i.props,p=d.closeMenuOnSelect,m=d.isMulti,g=d.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:g}),p&&(i.setState({inputIsHiddenAfterUpdate:!m}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:u})},i.selectOption=function(l){var c=i.props,u=c.blurInputOnSelect,d=c.isMulti,p=c.name,m=i.state.selectValue,g=d&&i.isOptionSelected(l,m),y=i.isOptionDisabled(l,m);if(g){var _=i.getOptionValue(l);i.setValue(m.filter(function(v){return i.getOptionValue(v)!==_}),"deselect-option",l)}else if(!y)d?i.setValue([].concat(fR(m),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:p});return}u&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,u=i.state.selectValue,d=i.getOptionValue(l),p=u.filter(function(g){return i.getOptionValue(g)!==d}),m=cy(c,p,p[0]||null);i.onChange(m,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(cy(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,u=c[c.length-1],d=c.slice(0,c.length-1),p=cy(l,d,d[0]||null);i.onChange(p,{action:"pop-value",removedValue:u})},i.getFocusedOptionId=function(l){return db(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return nN(V0(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return one.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return o5(i.props,l)},i.getOptionValue=function(l){return G_(i.props,l)},i.getStyles=function(l,c){var u=i.props.unstyled,d=lie[l](c,u);d.boxSizing="border-box";var p=i.props.styles[l];return p?p(d,c):d},i.getClassNames=function(l,c){var u,d;return(u=(d=i.props.classNames)[l])===null||u===void 0?void 0:u.call(d,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return Pre(i.props)},i.buildCategorizedOptions=function(){return V0(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return s5(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:mt({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,u=c.isMulti,d=c.menuIsOpen;i.focusInput(),d?(i.setState({inputIsHiddenAfterUpdate:!u}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&vS(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,u=c&&c.item(0);u&&(i.initialTouchX=u.clientX,i.initialTouchY=u.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,u=c&&c.item(0);if(u){var d=Math.abs(u.clientX-i.initialTouchX),p=Math.abs(u.clientY-i.initialTouchY),m=5;i.userIsDragging=d>m||p>m}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,u=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(u,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),u=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:u>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return u5(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,u=c.isMulti,d=c.backspaceRemovesValue,p=c.escapeClearsValue,m=c.inputValue,g=c.isClearable,y=c.isDisabled,_=c.menuIsOpen,v=c.onKeyDown,S=c.tabSelectsValue,w=c.openMenuOnFocus,E=i.state,R=E.focusedOption,A=E.focusedValue,M=E.selectValue;if(!y&&!(typeof v=="function"&&(v(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!u||m)return;i.focusValue("previous");break;case"ArrowRight":if(!u||m)return;i.focusValue("next");break;case"Delete":case"Backspace":if(m)return;if(A)i.removeValue(A);else{if(!d)return;u?i.popValue():g&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!_||!S||!R||w&&i.isOptionSelected(R,M))return;i.selectOption(R);break;case"Enter":if(l.keyCode===229)break;if(_){if(!R||i.isComposing)return;i.selectOption(R);break}return;case"Escape":_?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:m}),i.onMenuClose()):g&&p&&i.clearValue();break;case" ":if(m)return;if(!_){i.openMenu("first");break}if(!R)return;i.selectOption(R);break;case"ArrowUp":_?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":_?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!_)return;i.focusOption("pageup");break;case"PageDown":if(!_)return;i.focusOption("pagedown");break;case"Home":if(!_)return;i.focusOption("first");break;case"End":if(!_)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++yie),i.state.selectValue=VO(r.value),r.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),o=i.buildFocusableOptions(),a=o.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=o[a],i.state.focusedOptionId=db(s,o[a])}return i}return Nee(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&HO(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&i.isDisabled||l&&a&&!i.menuIsOpen)&&this.focusInput(),l&&o&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(HO(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,c=this.buildFocusableOptions(),u=i==="first"?0:c.length-1;if(!this.props.isMulti){var d=c.indexOf(a[0]);d>-1&&(u=d)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u],focusedOptionId:this.getFocusedOptionId(c[u])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var c=o.length-1,u=-1;if(o.length){switch(i){case"previous":l===0?u=0:l===-1?u=c:u=l-1;break;case"next":l>-1&&l<c&&(u=l+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,c=a.indexOf(o);o||(c=-1),i==="up"?l=c>0?c-1:a.length-1:i==="down"?l=(c+1)%a.length:i==="pageup"?(l=c-s,l<0&&(l=0)):i==="pagedown"?(l=c+s,l>a.length-1&&(l=a.length-1)):i==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(a[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(ub):mt(mt({},ub),this.props.theme):ub}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,c=this.selectOption,u=this.setValue,d=this.props,p=d.isMulti,m=d.isRtl,g=d.options,y=this.hasValue();return{clearValue:i,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:y,isMulti:p,isRtl:m,options:g,selectOption:c,selectProps:d,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,o=i.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(i,s){return a5(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return l5(this.props,i,s)}},{key:"filterOption",value:function(i,s){return c5(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,o=i.isSearchable,a=i.inputId,l=i.inputValue,c=i.tabIndex,u=i.form,d=i.menuIsOpen,p=i.required,m=this.getComponents(),g=m.Input,y=this.state,_=y.inputIsHidden,v=y.ariaSelection,S=this.commonProps,w=a||this.getElementId("input"),E=mt(mt(mt({"aria-autocomplete":"list","aria-expanded":d,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},d&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(v==null?void 0:v.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?O.createElement(g,St({},S,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:s,isHidden:_,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:l},E)):O.createElement(Wre,St({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:j_,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:u,value:""},E))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,c=s.MultiValueRemove,u=s.SingleValue,d=s.Placeholder,p=this.commonProps,m=this.props,g=m.controlShouldRenderValue,y=m.isDisabled,_=m.isMulti,v=m.inputValue,S=m.placeholder,w=this.state,E=w.selectValue,R=w.focusedValue,A=w.isFocused;if(!this.hasValue()||!g)return v?null:O.createElement(d,St({},p,{key:"placeholder",isDisabled:y,isFocused:A,innerProps:{id:this.getElementId("placeholder")}}),S);if(_)return E.map(function(L,P){var C=L===R,N="".concat(i.getOptionLabel(L),"-").concat(i.getOptionValue(L));return O.createElement(o,St({},p,{components:{Container:a,Label:l,Remove:c},isFocused:C,isDisabled:y,key:N,index:P,removeProps:{onClick:function(){return i.removeValue(L)},onTouchEnd:function(){return i.removeValue(L)},onMouseDown:function(z){z.preventDefault()}},data:L}),i.formatOptionLabel(L,"value"))});if(v)return null;var M=E[0];return O.createElement(u,St({},p,{data:M,isDisabled:y}),this.formatOptionLabel(M,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||c)return null;var d={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(s,St({},o,{innerProps:d,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,c=a.isLoading,u=this.state.isFocused;if(!s||!c)return null;var d={"aria-hidden":"true"};return O.createElement(s,St({},o,{innerProps:d,isDisabled:l,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,o=i.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return O.createElement(o,St({},a,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(s,St({},o,{innerProps:c,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,c=s.MenuList,u=s.MenuPortal,d=s.LoadingMessage,p=s.NoOptionsMessage,m=s.Option,g=this.commonProps,y=this.state.focusedOption,_=this.props,v=_.captureMenuScroll,S=_.inputValue,w=_.isLoading,E=_.loadingMessage,R=_.minMenuHeight,A=_.maxMenuHeight,M=_.menuIsOpen,L=_.menuPlacement,P=_.menuPosition,C=_.menuPortalTarget,N=_.menuShouldBlockScroll,H=_.menuShouldScrollIntoView,z=_.noOptionsMessage,$=_.onMenuScrollToTop,X=_.onMenuScrollToBottom;if(!M)return null;var q=function(Pe,re){var ye=Pe.type,Ee=Pe.data,xe=Pe.isDisabled,it=Pe.isSelected,dt=Pe.label,te=Pe.value,ut=y===Ee,he=xe?void 0:function(){return i.onOptionHover(Ee)},Se=xe?void 0:function(){return i.selectOption(Ee)},_e="".concat(i.getElementId("option"),"-").concat(re),Le={id:_e,onClick:Se,onMouseMove:he,onMouseOver:he,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:it};return O.createElement(m,St({},g,{innerProps:Le,data:Ee,isDisabled:xe,isSelected:it,key:_e,label:dt,type:ye,value:te,isFocused:ut,innerRef:ut?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Pe.data,"menu"))},fe;if(this.hasOptions())fe=this.getCategorizedOptions().map(function(ae){if(ae.type==="group"){var Pe=ae.data,re=ae.options,ye=ae.index,Ee="".concat(i.getElementId("group"),"-").concat(ye),xe="".concat(Ee,"-heading");return O.createElement(o,St({},g,{key:Ee,data:Pe,options:re,Heading:a,headingProps:{id:xe,data:ae.data},label:i.formatGroupLabel(ae.data)}),ae.options.map(function(it){return q(it,"".concat(ye,"-").concat(it.index))}))}else if(ae.type==="option")return q(ae,"".concat(ae.index))});else if(w){var k=E({inputValue:S});if(k===null)return null;fe=O.createElement(d,g,k)}else{var W=z({inputValue:S});if(W===null)return null;fe=O.createElement(p,g,W)}var G={minMenuHeight:R,maxMenuHeight:A,menuPlacement:L,menuPosition:P,menuShouldScrollIntoView:H},ee=O.createElement(wne,St({},g,G),function(ae){var Pe=ae.ref,re=ae.placerProps,ye=re.placement,Ee=re.maxHeight;return O.createElement(l,St({},g,G,{innerRef:Pe,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:w,placement:ye}),O.createElement(Kre,{captureEnabled:v,onTopArrive:$,onBottomArrive:X,lockEnabled:N},function(xe){return O.createElement(c,St({},g,{innerRef:function(dt){i.getMenuListRef(dt),xe(dt)},innerProps:{role:"listbox","aria-multiselectable":g.isMulti,id:i.getElementId("listbox")},isLoading:w,maxHeight:Ee,focusedOption:y}),fe)}))});return C||P==="fixed"?O.createElement(u,St({},g,{appendTo:C,controlElement:this.controlRef,menuPlacement:L,menuPosition:P}),ee):ee}},{key:"renderFormField",value:function(){var i=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,c=s.name,u=s.required,d=this.state.selectValue;if(u&&!this.hasValue()&&!a)return O.createElement(Qre,{name:c,onFocus:this.onValueInputFocus});if(!(!c||a))if(l)if(o){var p=d.map(function(y){return i.getOptionValue(y)}).join(o);return O.createElement("input",{name:c,type:"hidden",value:p})}else{var m=d.length>0?d.map(function(y,_){return O.createElement("input",{key:"i-".concat(_),name:c,type:"hidden",value:i.getOptionValue(y)})}):O.createElement("input",{name:c,type:"hidden",value:""});return O.createElement("div",null,m)}else{var g=d[0]?this.getOptionValue(d[0]):"";return O.createElement("input",{name:c,type:"hidden",value:g})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,c=s.isFocused,u=s.selectValue,d=this.getFocusableOptions();return O.createElement(Fre,St({},i,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:c,selectValue:u,focusableOptions:d,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,o=i.IndicatorsContainer,a=i.SelectContainer,l=i.ValueContainer,c=this.props,u=c.className,d=c.id,p=c.isDisabled,m=c.menuIsOpen,g=this.state.isFocused,y=this.commonProps=this.getCommonProps();return O.createElement(a,St({},y,{className:u,innerProps:{id:d,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:g}),this.renderLiveRegion(),O.createElement(s,St({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:g,menuIsOpen:m}),O.createElement(l,St({},y,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),O.createElement(o,St({},y,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,u=s.isFocused,d=s.prevWasFocused,p=s.instancePrefix,m=i.options,g=i.value,y=i.menuIsOpen,_=i.inputValue,v=i.isMulti,S=VO(g),w={};if(o&&(g!==o.value||m!==o.options||y!==o.menuIsOpen||_!==o.inputValue)){var E=y?mie(i,S):[],R=y?nN(V0(i,S),"".concat(p,"-option")):[],A=a?gie(s,S):null,M=vie(s,E),L=db(R,M);w={selectValue:S,focusedOption:M,focusedOptionId:L,focusableOptionsWithIds:R,focusedValue:A,clearFocusValueOnUpdate:!1}}var P=l!=null&&i!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},C=c,N=u&&d;return u&&!N&&(C={value:cy(v,S,S[0]||null),options:S,action:"initial-input-focus"},N=!d),(c==null?void 0:c.action)==="initial-input-focus"&&(C=null),mt(mt(mt({},w),P),{},{prevProps:i,ariaSelection:C,prevWasFocused:N})}}]),n}(O.Component);d5.defaultProps=pie;var _ie=O.forwardRef(function(t,e){var n=kee(t);return O.createElement(d5,St({ref:e},n))}),xie=_ie;const Sie=()=>{const[t,e]=O.useState(!1),[n,r]=O.useState([]),{username:i}=Du(),[s,o]=O.useState({chat_name:"",is_group:!1,chat_members:[]}),a=O.useCallback(async()=>{try{const u=await fetch("https://push-it-backend.vercel.app/usernames",{method:"GET"}),d=await u.json();if(u.ok)r(d.map(p=>p.username));else throw new Error(d.error||"Failed to fetch usernames")}catch(u){console.log(u.message)}},[]);return O.useEffect(()=>{a()},[a]),{loading:t,handleCreateChat:async u=>{u.preventDefault(),e(!0);const d=JSON.stringify({chat_name:s.chat_name,is_group:s.is_group,user_names:[i,...s.chat_members]});try{const p=await fetch("https://push-it-backend.vercel.app/add-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:d}),m=await p.json();if(!p.ok)throw new Error(m.error||"Failed to create chat")}catch(p){console.log(p.message)}finally{e(!1),window.location.reload()}},chatData:s,handleInputChange:(u,d)=>{o(p=>({...p,[u]:d}))},usernames:n,username:i}},f5=()=>{const{theme:t}=Vs();Du();const{loading:e,usernames:n,chatData:r,handleInputChange:i,handleCreateChat:s}=Sie();return U.jsx("div",{className:"p-4",children:U.jsx(wie,{loading:e,handleCreateChat:s,chatData:r,handleInputChange:i,usernames:n,theme:t})})},wie=({loading:t,handleCreateChat:e,chatData:n,handleInputChange:r,usernames:i,theme:s})=>{const o=O.useMemo(()=>i.map(c=>({value:c,label:c})),[i]),a=O.useMemo(()=>n.chat_members.map(c=>({value:c,label:c})),[n.chat_members]),l=O.useCallback(c=>{const u=c?c.map(d=>d.value):[];r("chat_members",u)},[r]);return U.jsxs("div",{className:`p-4 rounded-md shadow-md w-full ${s==="light"?"bg-white":"bg-dark"}`,children:[U.jsx("h3",{className:`text-2xl font-semibold mb-4 ${s==="light"?"text-black":"text-white"}`,children:"Create a New Chat"}),U.jsxs("form",{onSubmit:e,className:"space-y-4",children:[U.jsx("input",{className:`w-full p-2 rounded-md focus:outline-none ${s==="light"?"bg-gray-100 border-gray-300":"bg-dark-lighter border-dark-lighter"}`,type:"text",name:"chat_name",value:n.chat_name,placeholder:"Chat Name",required:!0,onChange:c=>r("chat_name",c.target.value)}),U.jsxs("select",{className:`w-full p-2 rounded-md focus:outline-none ${s==="light"?"bg-gray-100 border-gray-300":"bg-dark-lighter border-dark-lighter"}`,name:"is_group",value:n.is_group,onChange:c=>r("is_group",c.target.value),required:!0,children:[U.jsx("option",{value:!1,children:"One On One"}),U.jsx("option",{value:!0,children:"Group Chat"})]}),U.jsx(xie,{isMulti:!0,options:o,value:a,onChange:l,placeholder:"Select Members",styles:{control:c=>({...c,backgroundColor:s==="light"?"#f5f5f5":"#2c2c2c",borderRadius:"11px",border:`2px solid ${s==="light"?"#ccc":"#444"}`,padding:"5px",":hover":{border:`2px solid ${s==="light"?"#000":"#fff"}`},color:s==="light"?"#000":"#fff"}),option:(c,u)=>({...c,backgroundColor:u.isFocused?s==="light"?"#38f092":"#444":"transparent",color:(u.isFocused,s==="light"?"#000":"#fff")}),multiValue:c=>({...c,backgroundColor:s==="light"?"rgba(100, 100, 100, 0.1)":"rgba(100, 100, 100, 0.5)"}),multiValueLabel:c=>({...c,color:s==="light"?"#000":"#fff"}),multiValueRemove:c=>({...c,color:"#e3342f",":hover":{backgroundColor:"#e3342f",color:"#fff"}}),placeholder:c=>({...c,color:s==="light"?"#000":"#fff"}),menu:c=>({...c,backgroundColor:s==="light"?"#fff":"#333",borderRadius:"10px"})},classNamePrefix:"react-select"}),U.jsxs("div",{className:"flex gap-5 items-center mt-5",children:[U.jsx("button",{type:"button",className:`w-full p-3 rounded-md text-xl ${s==="light"?"bg-gray-200 text-gray-800":"bg-dark-lighter text-white"} hover:bg-opacity-80 transition-opacity`,children:"Go Back"}),U.jsx("button",{type:"submit",disabled:t,className:`w-full p-3 rounded-md text-xl ${s==="light"?"bg-blue-500 text-white":"bg-blue-700 text-white"} hover:bg-opacity-80 transition-opacity`,children:t?"Creating ...":"Create Chat"})]})]})]})},iN=({selected:t,setSelectedChat:e,setSelectedChatData:n,userData:r,usersData:i})=>{const{chats:s,loading:o,error:a,setChats:l}=Du(),[c,u]=O.useState(null),[d,p]=O.useState("");O.useEffect(()=>{if(!o&&!a&&s.length>0){const y=s[0];e(y.chat_id),n(y),u(y.chat_id)}},[o,a,s,e,n]);const m=O.useMemo(()=>{switch(t){case"Ones":return s.filter(y=>!y.is_group);case"Groups":return s.filter(y=>y.is_group);default:return s}},[t,s]),g=y=>{p(y),setTimeout(()=>{p("")},5e3)};return o?U.jsx("p",{children:"Loading..."}):a?U.jsxs("p",{children:["Error: ",a.message]}):U.jsxs("div",{className:"flex flex-col w-full",children:[d&&U.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded relative flex items-center space-x-4",role:"alert",children:[U.jsxs("div",{className:"flex items-center justify-between",children:[U.jsx("svg",{className:"w-6 h-6 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1zm4.768 9.14c.0878-.1004.1546-.21726.1966-.34383.0419-.12657.0581-.26026.0477-.39319-.0105-.13293-.0475-.26242-.1087-.38085-.0613-.11844-.1456-.22342-.2481-.30879-.1024-.08536-.2209-.14938-.3484-.18828s-.2616-.0519-.3942-.03823c-.1327.01366-.2612.05372-.3782.1178-.1169.06409-.2198.15091-.3027.25537L12.243 15.482 9.993 13.257c-.1886-.1822-.4412-.283-.7034-.2807s-.51301.1075-.69842.2929-.29058.4362-.29285.6984c-.00228.2622.09851.5148.28067.7034l3 3c.0983.0982.2159.1748.3454.2251.1295.0502.2681.0729.4069.0665.1387-.0063.2747-.0414.3991-.1032.1244-.0617.2347-.1487.3236-.2554z",clipRule:"evenodd"})}),U.jsx("span",{children:d})]}),U.jsx("button",{type:"button",className:"close",onClick:()=>p(""),children:U.jsx("svg",{className:"w-6 h-6 text-gray-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:U.jsx("path",{fillRule:"evenodd",d:"M10 8.586l4.95-4.95a1 1 0 011.414 0l1.414 1.414a1 1 0 010 1.414L12.828 10l4.95 4.95a1 1 0 010 1.414l-1.414 1.414a1 1 0 01-1.414 0L10 12.828l-4.95 4.95a1 1 0 01-1.414 0L2.222 15.95a1 1 0 010-1.414L7.172 10 2.222 5.05a1 1 0 010-1.414l1.414-1.414a1 1 0 011.414 0L10 8.586z",clipRule:"evenodd"})})})]}),t==="Add Chat"?U.jsx(f5,{userData:r}):m.length===0?U.jsx("p",{children:"No chats created."}):m.map(y=>U.jsx(Tee,{title:y.chat_name,id:y.chat_id,usernames:y.user_names,setSelectedChat:_=>{e(_),u(_)},setSelectedChatData:n,userData:r,usersData:i,selectedChatId:c,chats:s,setChats:l,onChatDelete:g},y.chat_id))]})},bie="modulepreload",Eie=function(t){return"/"+t},sN={},Vf=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(n.map(l=>{if(l=Eie(l),l in sN)return;sN[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!r)for(let m=s.length-1;m>=0;m--){const g=s[m];if(g.href===l&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":bie,c||(p.as="script",p.crossOrigin=""),p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Mie=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Vf(()=>Promise.resolve().then(()=>Mg),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class TR extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Tie extends TR{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cie extends TR{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Aie extends TR{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var eT;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(eT||(eT={}));var Rie=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class Pie{constructor(e,{headers:n={},customFetch:r,region:i=eT.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Mie(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Rie(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(g=>{throw new Tie(g)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Cie(u);if(!u.ok)throw new Aie(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield u.json():p==="application/octet-stream"?m=yield u.blob():p==="text/event-stream"?m=u:p==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(i){return{data:null,error:i}}})}}var Iie=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hf=Iie();const Lie=Hf.fetch,CR=Hf.fetch.bind(Hf),h5=Hf.Headers,kie=Hf.Request,Oie=Hf.Response,Mg=Object.freeze(Object.defineProperty({__proto__:null,Headers:h5,Request:kie,Response:Oie,default:CR,fetch:Lie},Symbol.toStringTag,{value:"Module"}));class Nie extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class Die{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=CR:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,d=null,p=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const v=await s.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=v:u=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&_&&_.length>1&&(d=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,p=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await s.text();try{c=JSON.parse(y),Array.isArray(c)&&s.status===404&&(u=[],c=null,p=200,m="OK")}catch{s.status===404&&y===""?(p=204,m="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,p=200,m="OK"),c&&this.shouldThrowOnError)throw new Nie(c)}return{error:c,data:u,count:d,status:p,statusText:m}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}}class Uie extends Die{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class zd extends Uie{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}}class Fie{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new zd({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new zd({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new zd({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new zd({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new zd({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Bie="1.15.2",zie={"X-Client-Info":`postgrest-js/${Bie}`};class AR{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},zie),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new Fie(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new AR(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new zd({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}const Vie="2.9.4",Hie={"X-Client-Info":`realtime-js/${Vie}`},jie="1.0.0",p5=1e4,Wie=1e3;var Mf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Mf||(Mf={}));var Zi;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Zi||(Zi={}));var ro;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ro||(ro={}));var tT;(function(t){t.websocket="websocket"})(tT||(tT={}));var Wc;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Wc||(Wc={}));class m5{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Gie{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class fb{constructor(e,n,r={},i=p5){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var oN;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(oN||(oN={}));class Jp{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jp.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Jp.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Jp.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const p=u.map(_=>_.presence_ref),m=d.map(_=>_.presence_ref),g=u.filter(_=>m.indexOf(_.presence_ref)<0),y=d.filter(_=>p.indexOf(_.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(m=>m.presence_ref),p=u.filter(m=>d.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var En;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(En||(En={}));const aN=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=$ie(o,t,e,i),s),{})},$ie=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?g5(s,o):nT(o)},g5=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Kie(e,n)}switch(t){case En.bool:return Xie(e);case En.float4:case En.float8:case En.int2:case En.int4:case En.int8:case En.numeric:case En.oid:return qie(e);case En.json:case En.jsonb:return Yie(e);case En.timestamp:return Jie(e);case En.abstime:case En.date:case En.daterange:case En.int4range:case En.int8range:case En.money:case En.reltime:case En.text:case En.time:case En.timestamptz:case En.timetz:case En.tsrange:case En.tstzrange:return nT(e);default:return nT(e)}},nT=t=>t,Xie=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},qie=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Yie=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Kie=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>g5(e,a))}return t},Jie=t=>typeof t=="string"?t.replace(" ","T"):t;var lN;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(lN||(lN={}));var cN;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes"})(cN||(cN={}));var uN;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(uN||(uN={}));class RR{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Zi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new fb(this,ro.join,this.params,this.timeout),this.rejoinTimer=new m5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zi.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Zi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ro.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Jp(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,p=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,m=[];for(let g=0;g<p;g++){const y=d[g],{filter:{event:_,schema:v,table:S,filter:w}}=y,E=c&&c[g];if(E&&E.event===_&&E.schema===v&&E.table===S&&E.filter===w)m.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a={method:"POST",headers:{apikey:(r=this.socket.apiKey)!==null&&r!==void 0?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Zi.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ro.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new fb(this,ro.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fb(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ro;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var g,y,_;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(y=m.filter)===null||y===void 0?void 0:y.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,y,_,v,S,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,R=(g=m.filter)===null||g===void 0?void 0:g.event;return E&&((y=n.ids)===null||y===void 0?void 0:y.includes(E))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const E=(S=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return E==="*"||E===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:y,table:_,commit_timestamp:v,type:S,errors:w}=g;p=Object.assign(Object.assign({},{schema:y,table:_,commit_timestamp:v,eventType:S,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(p,r)})}_isClosed(){return this.state===Zi.closed}_isJoined(){return this.state===Zi.joined}_isJoining(){return this.state===Zi.joining}_isLeaving(){return this.state===Zi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&RR.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ro.close,{},e)}_onError(e){this._on(ro.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=aN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=aN(e.columns,e.old_record)),n}}const Zie=()=>{},Qie=typeof WebSocket<"u";class ese{constructor(e,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Hie,this.params={},this.timeout=p5,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Zie,this.conn=null,this.sendBuffer=[],this.serializer=new Gie,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Vf(()=>Promise.resolve().then(()=>Mg),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${tT.websocket}`,n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new m5(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Qie){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new tse(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Vf(()=>import("./browser-CEIGxlTy.js").then(e=>e.b),[]).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Mf.connecting:return Wc.Connecting;case Mf.open:return Wc.Open;case Mf.closing:return Wc.Closing;default:return Wc.Closed}}isConnected(){return this.connectionState()===Wc.Open}channel(e,n={config:{}}){const r=new RR(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(ro.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:jie}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ro.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Wie,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class tse{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Mf.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class PR extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function si(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class nse extends PR{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dN extends PR{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var rse=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const v5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Vf(()=>Promise.resolve().then(()=>Mg),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},ise=()=>rse(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vf(()=>Promise.resolve().then(()=>Mg),void 0)).Response:Response});var hh=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const hb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sse=(t,e)=>hh(void 0,void 0,void 0,function*(){const n=yield ise();t instanceof n?t.json().then(r=>{e(new nse(hb(r),t.status||500))}).catch(r=>{e(new dN(hb(r),r))}):e(new dN(hb(t),t))}),ose=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function yS(t,e,n,r,i,s){return hh(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,ose(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>sse(l,a))})})}function rT(t,e,n,r){return hh(this,void 0,void 0,function*(){return yS(t,"GET",e,n,r)})}function Sl(t,e,n,r,i){return hh(this,void 0,void 0,function*(){return yS(t,"POST",e,r,i,n)})}function ase(t,e,n,r,i){return hh(this,void 0,void 0,function*(){return yS(t,"PUT",e,r,i,n)})}function y5(t,e,n,r,i){return hh(this,void 0,void 0,function*(){return yS(t,"DELETE",e,r,i,n)})}var bs=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const lse={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cse{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=v5(i)}uploadOrUpdate(e,n,r,i){return bs(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},fN),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(n),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield u.json();return u.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(si(s))return{data:null,error:s};throw s}})}upload(e,n,r){return bs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return bs(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:fN.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),p=yield d.json();return d.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(si(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return bs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=yield Sl(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new PR("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(n){if(si(n))return{data:null,error:n};throw n}})}update(e,n,r){return bs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n){return bs(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers}),error:null}}catch(r){if(si(r))return{data:null,error:r};throw r}})}copy(e,n){return bs(this,void 0,void 0,function*(){try{return{data:{path:(yield Sl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(r){if(si(r))return{data:null,error:r};throw r}})}createSignedUrl(e,n,r){return bs(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Sl(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(si(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return bs(this,void 0,void 0,function*(){try{const i=yield Sl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(si(i))return{data:null,error:i};throw i}})}download(e,n){return bs(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield rT(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(si(a))return{data:null,error:a};throw a}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return bs(this,void 0,void 0,function*(){try{return{data:yield y5(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(si(n))return{data:null,error:n};throw n}})}list(e,n,r){return bs(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},lse),n),{prefix:e||""});return{data:yield Sl(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(si(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const use="2.5.5",dse={"X-Client-Info":`storage-js/${use}`};var fd=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class fse{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},dse),n),this.fetch=v5(r)}listBuckets(){return fd(this,void 0,void 0,function*(){try{return{data:yield rT(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(si(e))return{data:null,error:e};throw e}})}getBucket(e){return fd(this,void 0,void 0,function*(){try{return{data:yield rT(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(si(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return fd(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(si(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return fd(this,void 0,void 0,function*(){try{return{data:yield ase(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(si(r))return{data:null,error:r};throw r}})}emptyBucket(e){return fd(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(si(n))return{data:null,error:n};throw n}})}deleteBucket(e){return fd(this,void 0,void 0,function*(){try{return{data:yield y5(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(si(n))return{data:null,error:n};throw n}})}}class hse extends fse{constructor(e,n={},r){super(e,n,r)}from(e){return new cse(this.url,this.headers,e,this.fetch)}}const pse="2.42.7";let Op="";typeof Deno<"u"?Op="deno":typeof document<"u"?Op="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Op="react-native":Op="node";const mse={"X-Client-Info":`supabase-js-${Op}/${pse}`},gse={headers:mse},vse={schema:"public"},yse={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_se={};var xse=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Sse=t=>{let e;return t?e=t:typeof fetch>"u"?e=CR:e=fetch,(...n)=>e(...n)},wse=()=>typeof Headers>"u"?h5:Headers,bse=(t,e,n)=>{const r=Sse(n),i=wse();return(s,o)=>xse(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};function Ese(t){return t.replace(/\/$/,"")}function Mse(t,e){const{db:n,auth:r,realtime:i,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}const _5="2.64.1",Tse="http://localhost:9999",Cse="supabase.auth.token",Ase={"X-Client-Info":`gotrue-js/${_5}`},hN=10,iT="X-Supabase-Api-Version",x5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Rse(t){return Math.round(Date.now()/1e3)+t}function Pse(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Js=()=>typeof document<"u",wc={tested:!1,writable:!1},Zp=()=>{if(!Js())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wc.tested)return wc.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),wc.tested=!0,wc.writable=!0}catch{wc.tested=!0,wc.writable=!1}return wc.writable};function pb(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const S5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Vf(()=>Promise.resolve().then(()=>Mg),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Ise=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",w5=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},uy=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},mb=async(t,e)=>{await t.removeItem(e)};function Lse(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,o,a,l,c,u=0;for(t=t.replace("-","+").replace("_","/");u<t.length;)o=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),c=e.indexOf(t.charAt(u++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),c!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class _S{constructor(){this.promise=new _S.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}_S.promiseConstructor=Promise;function pN(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(Lse(r))}async function kse(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ose(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Nse(t){return("0"+t.toString(16)).substr(-2)}function Dse(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Nse).join("")}async function Use(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function Fse(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bse(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Use(t);return Fse(n)}async function hd(t,e,n=!1){const r=Dse();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await w5(t,`${e}-code-verifier`,i);const s=await Bse(r);return[s,r===s?"plain":"s256"]}const zse=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Vse(t){const e=t.headers.get(iT);if(!e||!e.match(zse))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class IR extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function qt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Hse extends IR{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function jse(t){return qt(t)&&t.name==="AuthApiError"}class b5 extends IR{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Uu extends IR{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class bc extends Uu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class gb extends Uu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dy extends Uu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fy extends Uu{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mN extends Uu{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sT extends Uu{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function vb(t){return qt(t)&&t.name==="AuthRetryableFetchError"}class gN extends Uu{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var Wse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Vc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gse=[502,503,504];async function vN(t){var e;if(!Ise(t))throw new sT(Vc(t),0);if(Gse.includes(t.status))throw new sT(Vc(t),t.status);let n;try{n=await t.json()}catch(s){throw new b5(Vc(s),s)}let r;const i=Vse(t);if(i&&i.getTime()>=x5["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new gN(Vc(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new gN(Vc(n),t.status,n.weak_password.reasons);throw new Hse(Vc(n),t.status||500,r)}const $se=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Jt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[iT]||(s[iT]=x5["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Xse(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Xse(t,e,n,r,i,s){const o=$se(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new sT(Vc(l),0)}if(a.ok||await vN(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await vN(l)}}function vl(t){var e;let n=null;Jse(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Rse(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function yN(t){const e=vl(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Pl(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function qse(t){return{data:t,error:null}}function Yse(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=Wse(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Kse(t){return t}function Jse(t){return t.access_token&&t.refresh_token&&t.expires_in}var Zse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Qse{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=S5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Jt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pl})}catch(r){if(qt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Zse(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Yse,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(qt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Jt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Pl})}catch(n){if(qt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Kse});if(u.error)throw u.error;const d=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);c[`${_}Page`]=y}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(qt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Jt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Pl})}catch(n){if(qt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Jt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Pl})}catch(r){if(qt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pl})}catch(r){if(qt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Jt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(qt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Jt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}}}const eoe={getItem:t=>Zp()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Zp()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Zp()&&globalThis.localStorage.removeItem(t)}};function _N(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function toe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pd={debug:!!(globalThis&&Zp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class E5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class noe extends E5{}async function roe(t,e,n){pd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),pd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){pd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{pd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw pd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new noe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(pd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}toe();const ioe={url:Tse,storageKey:Cse,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ase,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},dp=30*1e3,xN=3;async function SN(t,e,n){return await n()}class Dm{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dm.nextInstanceID,Dm.nextInstanceID+=1,this.instanceID>0&&Js()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},ioe),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Qse({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=S5(i.fetch),this.lock=i.lock||SN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Js()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=roe:this.lock=SN,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Zp()?this.storage=eoe:(this.memoryStorage={},this.storage=_N(this.memoryStorage)):(this.memoryStorage={},this.storage=_N(this.memoryStorage)),Js()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_5}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Js()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return qt(e)?{error:e}:{error:new b5("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{await this._removeSession();const s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:vl}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(qt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{await this._removeSession();let s;if("email"in e){const{email:u,password:d,options:p}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await hd(this.storage,this.storageKey)),s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:d,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:g},xform:vl})}else if("phone"in e){const{phone:u,password:d,options:p}=e;s=await Jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:vl})}else throw new dy("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(qt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yN})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:yN})}else throw new dy("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gb}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(qt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await uy(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/"),{data:s,error:o}=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:vl});return await mb(this.storage,`${this.storageKey}-code-verifier`),o?{data:{user:null,session:null,redirectType:null},error:o}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new gb}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}async signInWithIdToken(e){await this._removeSession();try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vl}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new gb}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(qt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await hd(this.storage,this.storageKey));const{error:d}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new dy("You must provide either an email or phone number.")}catch(a){if(qt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:vl});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(qt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{await this._removeSession();let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await hd(this.storage,this.storageKey)),await Jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:qse})}catch(s){if(qt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new bc;const{error:i}=await Jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(qt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Jt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new dy("You must provide either an email or phone number and a type")}catch(n){if(qt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await uy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r)return this.storage.isServer&&(e=new Proxy(e,{get(a,l,c){return l==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(a,l,c)}})),{data:{session:e},error:null};const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Pl}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bc}:await Jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Pl})})}catch(n){if(qt(n))return{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new bc;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await hd(this.storage,this.storageKey));const{data:c,error:u}=await Jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Pl});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(qt(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return pN(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bc;const n=Date.now()/1e3;let r=n,i=!0,s=null;const o=pN(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(qt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new bc;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(qt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Js())throw new fy("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new fy("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new mN("Not a valid PKCE flow url.");const n=pb(window.location.href);if(e){if(!n.code)throw new mN("No code detected.");const{data:S,error:w}=await this._exchangeCodeForSession(n.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new fy(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=n;if(!s||!a||!o||!c)throw new fy("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let p=u+d;l&&(p=parseInt(l));const m=p-u;m*1e3<=dp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=p-d;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",g,p,u);const{data:y,error:_}=await this._getUser(s);if(_)throw _;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:p,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:n.type},error:null}}catch(n){if(qt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=pb(window.location.href);return!!(Js()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=pb(window.location.href),n=await uy(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(jse(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await mb(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const n=Pse(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await hd(this.storage,this.storageKey,!0));try{return await Jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(qt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Jt(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Js()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(qt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Jt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(qt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ose(async i=>(i>0&&await kse(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vl})),(i,s)=>{const o=200*Math.pow(2,i);return s&&vb(s)&&Date.now()+o-r<dp})}catch(r){if(this._debug(n,"error",r),qt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Js()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await uy(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+hN;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${hN}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),vb(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new bc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new _S;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new bc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),qt(s)){const o={session:null,error:s};return vb(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),await w5(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await mb(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Js()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/dp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${dp}ms, refresh threshold is ${xN} ticks`),i<=xN&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof E5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Js()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await hd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Jt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qt(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:a,error:l}=await Jt(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(qt(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await Jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(qt(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Dm.nextInstanceID=0;const soe=Dm;class ooe extends soe{constructor(e){super(e)}}var aoe=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class loe{constructor(e,n,r){var i,s,o,a,l,c,u,d;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const p=Ese(e);this.realtimeUrl=`${p}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${p}/auth/v1`,this.storageUrl=`${p}/storage/v1`,this.functionsUrl=`${p}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g={db:vse,realtime:_se,auth:Object.assign(Object.assign({},yse),{storageKey:m}),global:gse},y=Mse(r??{},g);this.storageKey=(s=(i=y.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=y.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=y.auth)!==null&&l!==void 0?l:{},this.headers,(c=y.global)===null||c===void 0?void 0:c.fetch),this.fetch=bse(n,this._getAccessToken.bind(this),(u=y.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new AR(`${p}/rest/v1`,{headers:this.headers,schema:(d=y.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Pie(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new hse(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return aoe(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,debug:a},l,c){var u;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ooe({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,debug:a,fetch:c,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(e){return new ese(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const coe=(t,e,n)=>new loe(t,e,n),uoe="https://culprtwibjtsfvuvbeor.supabase.co",doe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN1bHBydHdpYmp0c2Z2dXZiZW9yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTQwNzk4NjgsImV4cCI6MjAyOTY1NTg2OH0.5u7ZKhAZST7p1VA-j7wykSs9sv0Bna_2_Z-cH7mlfAE",$_=coe(uoe,doe);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Tg="164",foe={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},hoe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},M5=0,oT=1,T5=2,poe=3,C5=0,xS=1,Qp=2,eo=3,Da=0,wi=1,No=2,Pa=0,lu=1,X_=2,aT=3,lT=4,A5=5,Il=100,R5=101,P5=102,I5=103,L5=104,k5=200,O5=201,N5=202,D5=203,q_=204,Y_=205,U5=206,F5=207,B5=208,z5=209,V5=210,H5=211,j5=212,W5=213,G5=214,$5=0,X5=1,q5=2,Um=3,Y5=4,K5=5,J5=6,Z5=7,Cg=0,Q5=1,eH=2,$o=0,tH=1,nH=2,rH=3,LR=4,iH=5,sH=6,oH=7,cT="attached",aH="detached",SS=300,Ua=301,Jl=302,Fm=303,Bm=304,ph=306,zm=1e3,ks=1001,Vm=1002,Or=1003,kR=1004,moe=1004,lf=1005,goe=1005,pr=1006,em=1007,voe=1007,Uo=1008,yoe=1008,Yo=1009,lH=1010,cH=1011,OR=1012,NR=1013,Tu=1014,Os=1015,Ag=1016,DR=1017,UR=1018,mh=1020,uH=35902,dH=1021,fH=1022,Ni=1023,hH=1024,pH=1025,cu=1026,jf=1027,FR=1028,BR=1029,mH=1030,zR=1031,VR=1033,H0=33776,j0=33777,W0=33778,G0=33779,uT=35840,dT=35841,fT=35842,hT=35843,pT=36196,mT=37492,gT=37496,vT=37808,yT=37809,_T=37810,xT=37811,ST=37812,wT=37813,bT=37814,ET=37815,MT=37816,TT=37817,CT=37818,AT=37819,RT=37820,PT=37821,$0=36492,IT=36494,LT=36495,gH=36283,kT=36284,OT=36285,NT=36286,vH=2200,yH=2201,_H=2202,Hm=2300,jm=2301,X0=2302,Qc=2400,eu=2401,Wm=2402,wS=2500,HR=2501,_oe=0,xoe=1,Soe=2,xH=3200,SH=3201,lc=0,wH=1,va="",Cs="srgb",$a="srgb-linear",bS="display-p3",Rg="display-p3-linear",Gm="linear",Mn="srgb",$m="rec709",Xm="p3",woe=0,Hc=7680,boe=7681,Eoe=7682,Moe=7683,Toe=34055,Coe=34056,Aoe=5386,Roe=512,Poe=513,Ioe=514,Loe=515,koe=516,Ooe=517,Noe=518,DT=519,bH=512,EH=513,MH=514,jR=515,TH=516,CH=517,AH=518,RH=519,qm=35044,Doe=35048,Uoe=35040,Foe=35045,Boe=35049,zoe=35041,Voe=35046,Hoe=35050,joe=35042,Woe="100",UT="300 es",Fo=2e3,Ym=2001;class Xa{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const ei=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let wN=1234567;const uu=Math.PI/180,Wf=180/Math.PI;function ss(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ei[t&255]+ei[t>>8&255]+ei[t>>16&255]+ei[t>>24&255]+"-"+ei[e&255]+ei[e>>8&255]+"-"+ei[e>>16&15|64]+ei[e>>24&255]+"-"+ei[n&63|128]+ei[n>>8&255]+"-"+ei[n>>16&255]+ei[n>>24&255]+ei[r&255]+ei[r>>8&255]+ei[r>>16&255]+ei[r>>24&255]).toLowerCase()}function tr(t,e,n){return Math.max(e,Math.min(n,t))}function WR(t,e){return(t%e+e)%e}function Goe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function $oe(t,e,n){return t!==e?(n-t)/(e-t):0}function tm(t,e,n){return(1-n)*t+n*e}function Xoe(t,e,n,r){return tm(t,e,1-Math.exp(-n*r))}function qoe(t,e=1){return e-Math.abs(WR(t,e*2)-e)}function Yoe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Koe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Joe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Zoe(t,e){return t+Math.random()*(e-t)}function Qoe(t){return t*(.5-Math.random())}function eae(t){t!==void 0&&(wN=t);let e=wN+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function tae(t){return t*uu}function nae(t){return t*Wf}function rae(t){return(t&t-1)===0&&t!==0}function iae(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function sae(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function oae(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*d,l*p,a*c);break;case"YZY":t.set(l*p,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*p,a*u,a*c);break;case"XZX":t.set(a*u,l*g,l*m,a*c);break;case"YXY":t.set(l*m,a*u,l*g,a*c);break;case"ZYZ":t.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function _i(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function kt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const aae={DEG2RAD:uu,RAD2DEG:Wf,generateUUID:ss,clamp:tr,euclideanModulo:WR,mapLinear:Goe,inverseLerp:$oe,lerp:tm,damp:Xoe,pingpong:qoe,smoothstep:Yoe,smootherstep:Koe,randInt:Joe,randFloat:Zoe,randFloatSpread:Qoe,seededRandom:eae,degToRad:tae,radToDeg:nae,isPowerOfTwo:rae,ceilPowerOfTwo:iae,floorPowerOfTwo:sae,setQuaternionFromProperEuler:oae,normalize:kt,denormalize:_i};class Me{constructor(e=0,n=0){Me.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(tr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lt{constructor(e,n,r,i,s,o,a,l,c){Lt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],p=r[2],m=r[5],g=r[8],y=i[0],_=i[3],v=i[6],S=i[1],w=i[4],E=i[7],R=i[2],A=i[5],M=i[8];return s[0]=o*y+a*S+l*R,s[3]=o*_+a*w+l*A,s[6]=o*v+a*E+l*M,s[1]=c*y+u*S+d*R,s[4]=c*_+u*w+d*A,s[7]=c*v+u*E+d*M,s[2]=p*y+m*S+g*R,s[5]=p*_+m*w+g*A,s[8]=p*v+m*E+g*M,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,p=a*l-u*s,m=c*s-o*l,g=n*d+r*p+i*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return e[0]=d*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=p*y,e[4]=(u*n-i*l)*y,e[5]=(i*s-a*n)*y,e[6]=m*y,e[7]=(r*l-c*n)*y,e[8]=(o*n-r*s)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(yb.makeScale(e,n)),this}rotate(e){return this.premultiply(yb.makeRotation(-e)),this}translate(e,n){return this.premultiply(yb.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const yb=new Lt;function PH(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const lae={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function cf(t,e){return new lae[t](e)}function Km(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function IH(){const t=Km("canvas");return t.style.display="block",t}const bN={};function LH(t){t in bN||(bN[t]=!0,console.warn(t))}const EN=new Lt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),MN=new Lt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),hy={[$a]:{transfer:Gm,primaries:$m,toReference:t=>t,fromReference:t=>t},[Cs]:{transfer:Mn,primaries:$m,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Rg]:{transfer:Gm,primaries:Xm,toReference:t=>t.applyMatrix3(MN),fromReference:t=>t.applyMatrix3(EN)},[bS]:{transfer:Mn,primaries:Xm,toReference:t=>t.convertSRGBToLinear().applyMatrix3(MN),fromReference:t=>t.applyMatrix3(EN).convertLinearToSRGB()}},cae=new Set([$a,Rg]),hn={enabled:!0,_workingColorSpace:$a,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!cae.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=hy[e].toReference,i=hy[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return hy[t].primaries},getTransfer:function(t){return t===va?Gm:hy[t].transfer}};function Tf(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function _b(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let md;class kH{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{md===void 0&&(md=Km("canvas")),md.width=e.width,md.height=e.height;const r=md.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=md}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Km("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Tf(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Tf(n[r]/255)*255):n[r]=Tf(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let uae=0;class tu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:uae++}),this.uuid=ss(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(xb(i[o].image)):s.push(xb(i[o]))}else s=xb(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function xb(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?kH.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let dae=0;class Xn extends Xa{constructor(e=Xn.DEFAULT_IMAGE,n=Xn.DEFAULT_MAPPING,r=ks,i=ks,s=pr,o=Uo,a=Ni,l=Yo,c=Xn.DEFAULT_ANISOTROPY,u=va){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dae++}),this.uuid=ss(),this.name="",this.source=new tu(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==SS)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zm:e.x=e.x-Math.floor(e.x);break;case ks:e.x=e.x<0?0:1;break;case Vm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zm:e.y=e.y-Math.floor(e.y);break;case ks:e.y=e.y<0?0:1;break;case Vm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Xn.DEFAULT_IMAGE=null;Xn.DEFAULT_MAPPING=SS;Xn.DEFAULT_ANISOTROPY=1;class pn{constructor(e=0,n=0,r=0,i=1){pn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],g=l[9],y=l[2],_=l[6],v=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-y)<.01&&Math.abs(g-_)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+y)<.1&&Math.abs(g+_)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,E=(m+1)/2,R=(v+1)/2,A=(u+p)/4,M=(d+y)/4,L=(g+_)/4;return w>E&&w>R?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=A/r,s=M/r):E>R?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=A/i,s=L/i):R<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(R),r=M/s,i=L/s),this.set(r,i,s,n),this}let S=Math.sqrt((_-g)*(_-g)+(d-y)*(d-y)+(p-u)*(p-u));return Math.abs(S)<.001&&(S=1),this.x=(_-g)/S,this.y=(d-y)/S,this.z=(p-u)/S,this.w=Math.acos((c+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class OH extends Xa{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new pn(0,0,e,n),this.scissorTest=!1,this.viewport=new pn(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:pr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Xn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new tu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class mo extends OH{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class ES extends Xn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Or,this.minFilter=Or,this.wrapR=ks,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fae extends mo{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ES(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class GR extends Xn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Or,this.minFilter=Or,this.wrapR=ks,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hae extends mo{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new GR(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class zi{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],g=s[o+2],y=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=g,e[n+3]=y;return}if(d!==y||l!==p||c!==m||u!==g){let _=1-a;const v=l*p+c*m+u*g+d*y,S=v>=0?1:-1,w=1-v*v;if(w>Number.EPSILON){const R=Math.sqrt(w),A=Math.atan2(R,v*S);_=Math.sin(_*A)/R,a=Math.sin(a*A)/R}const E=a*S;if(l=l*_+p*E,c=c*_+m*E,u=u*_+g*E,d=d*_+y*E,_===1-a){const R=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=R,c*=R,u*=R,d*=R}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[n]=a*g+u*d+l*m-c*p,e[n+1]=l*g+u*p+c*d-a*m,e[n+2]=c*g+u*m+a*p-l*d,e[n+3]=u*g-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"YXZ":this._x=p*u*d+c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"ZXY":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d-p*m*g;break;case"ZYX":this._x=p*u*d-c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d+p*m*g;break;case"YZX":this._x=p*u*d+c*m*g,this._y=c*m*d+p*u*g,this._z=c*u*g-p*m*d,this._w=c*u*d-p*m*g;break;case"XZY":this._x=p*u*d-c*m*g,this._y=c*m*d-p*u*g,this._z=c*u*g+p*m*d,this._w=c*u*d+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(tr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,p=Math.sin(n*u)/c;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class V{constructor(e=0,n=0,r=0){V.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(TN.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(TN.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),d=2*(s*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Sb.copy(this).projectOnVector(e),this.sub(Sb)}reflect(e){return this.sub(Sb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(tr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Sb=new V,TN=new zi;class bi{constructor(e=new V(1/0,1/0,1/0),n=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(qs.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(qs.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=qs.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,qs):qs.fromBufferAttribute(s,o),qs.applyMatrix4(e.matrixWorld),this.expandByPoint(qs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),py.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),py.copy(r.boundingBox)),py.applyMatrix4(e.matrixWorld),this.union(py)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,qs),qs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fp),my.subVectors(this.max,fp),gd.subVectors(e.a,fp),vd.subVectors(e.b,fp),yd.subVectors(e.c,fp),al.subVectors(vd,gd),ll.subVectors(yd,vd),Ec.subVectors(gd,yd);let n=[0,-al.z,al.y,0,-ll.z,ll.y,0,-Ec.z,Ec.y,al.z,0,-al.x,ll.z,0,-ll.x,Ec.z,0,-Ec.x,-al.y,al.x,0,-ll.y,ll.x,0,-Ec.y,Ec.x,0];return!wb(n,gd,vd,yd,my)||(n=[1,0,0,0,1,0,0,0,1],!wb(n,gd,vd,yd,my))?!1:(gy.crossVectors(al,ll),n=[gy.x,gy.y,gy.z],wb(n,gd,vd,yd,my))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(qs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oa=[new V,new V,new V,new V,new V,new V,new V,new V],qs=new V,py=new bi,gd=new V,vd=new V,yd=new V,al=new V,ll=new V,Ec=new V,fp=new V,my=new V,gy=new V,Mc=new V;function wb(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Mc.fromArray(t,s);const a=i.x*Math.abs(Mc.x)+i.y*Math.abs(Mc.y)+i.z*Math.abs(Mc.z),l=e.dot(Mc),c=n.dot(Mc),u=r.dot(Mc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const pae=new bi,hp=new V,bb=new V;class ci{constructor(e=new V,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):pae.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hp.subVectors(e,this.center);const n=hp.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(hp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hp.copy(e.center).add(bb)),this.expandByPoint(hp.copy(e.center).sub(bb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const aa=new V,Eb=new V,vy=new V,cl=new V,Mb=new V,yy=new V,Tb=new V;class gh{constructor(e=new V,n=new V(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,aa)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=aa.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(aa.copy(this.origin).addScaledVector(this.direction,n),aa.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){Eb.copy(e).add(n).multiplyScalar(.5),vy.copy(n).sub(e).normalize(),cl.copy(this.origin).sub(Eb);const s=e.distanceTo(n)*.5,o=-this.direction.dot(vy),a=cl.dot(this.direction),l=-cl.dot(vy),c=cl.lengthSq(),u=Math.abs(1-o*o);let d,p,m,g;if(u>0)if(d=o*l-a,p=o*a-l,g=s*u,d>=0)if(p>=-g)if(p<=g){const y=1/u;d*=y,p*=y,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-g?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=g?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(Eb).addScaledVector(vy,p),m}intersectSphere(e,n){aa.subVectors(e.center,this.origin);const r=aa.dot(this.direction),i=aa.dot(aa)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,aa)!==null}intersectTriangle(e,n,r,i,s){Mb.subVectors(n,e),yy.subVectors(r,e),Tb.crossVectors(Mb,yy);let o=this.direction.dot(Tb),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;cl.subVectors(this.origin,e);const l=a*this.direction.dot(yy.crossVectors(cl,yy));if(l<0)return null;const c=a*this.direction.dot(Mb.cross(cl));if(c<0||l+c>o)return null;const u=-a*cl.dot(Tb);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wt{constructor(e,n,r,i,s,o,a,l,c,u,d,p,m,g,y,_){wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,d,p,m,g,y,_)}set(e,n,r,i,s,o,a,l,c,u,d,p,m,g,y,_){const v=this.elements;return v[0]=e,v[4]=n,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=p,v[3]=m,v[7]=g,v[11]=y,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wt().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/_d.setFromMatrixColumn(e,0).length(),s=1/_d.setFromMatrixColumn(e,1).length(),o=1/_d.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*d,g=a*u,y=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=m+g*c,n[5]=p-y*c,n[9]=-a*l,n[2]=y-p*c,n[6]=g+m*c,n[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*d,g=c*u,y=c*d;n[0]=p+y*a,n[4]=g*a-m,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=m*a-g,n[6]=y+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*d,g=c*u,y=c*d;n[0]=p-y*a,n[4]=-o*d,n[8]=g+m*a,n[1]=m+g*a,n[5]=o*u,n[9]=y-p*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*d,g=a*u,y=a*d;n[0]=l*u,n[4]=g*c-m,n[8]=p*c+y,n[1]=l*d,n[5]=y*c+p,n[9]=m*c-g,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,g=a*l,y=a*c;n[0]=l*u,n[4]=y-p*d,n[8]=g*d+m,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=m*d+g,n[10]=p-y*d}else if(e.order==="XZY"){const p=o*l,m=o*c,g=a*l,y=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=p*d+y,n[5]=o*u,n[9]=m*d-g,n[2]=g*d-m,n[6]=a*u,n[10]=y*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mae,e,gae)}lookAt(e,n,r){const i=this.elements;return Yi.subVectors(e,n),Yi.lengthSq()===0&&(Yi.z=1),Yi.normalize(),ul.crossVectors(r,Yi),ul.lengthSq()===0&&(Math.abs(r.z)===1?Yi.x+=1e-4:Yi.z+=1e-4,Yi.normalize(),ul.crossVectors(r,Yi)),ul.normalize(),_y.crossVectors(Yi,ul),i[0]=ul.x,i[4]=_y.x,i[8]=Yi.x,i[1]=ul.y,i[5]=_y.y,i[9]=Yi.y,i[2]=ul.z,i[6]=_y.z,i[10]=Yi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],p=r[9],m=r[13],g=r[2],y=r[6],_=r[10],v=r[14],S=r[3],w=r[7],E=r[11],R=r[15],A=i[0],M=i[4],L=i[8],P=i[12],C=i[1],N=i[5],H=i[9],z=i[13],$=i[2],X=i[6],q=i[10],fe=i[14],k=i[3],W=i[7],G=i[11],ee=i[15];return s[0]=o*A+a*C+l*$+c*k,s[4]=o*M+a*N+l*X+c*W,s[8]=o*L+a*H+l*q+c*G,s[12]=o*P+a*z+l*fe+c*ee,s[1]=u*A+d*C+p*$+m*k,s[5]=u*M+d*N+p*X+m*W,s[9]=u*L+d*H+p*q+m*G,s[13]=u*P+d*z+p*fe+m*ee,s[2]=g*A+y*C+_*$+v*k,s[6]=g*M+y*N+_*X+v*W,s[10]=g*L+y*H+_*q+v*G,s[14]=g*P+y*z+_*fe+v*ee,s[3]=S*A+w*C+E*$+R*k,s[7]=S*M+w*N+E*X+R*W,s[11]=S*L+w*H+E*q+R*G,s[15]=S*P+w*z+E*fe+R*ee,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14],g=e[3],y=e[7],_=e[11],v=e[15];return g*(+s*l*d-i*c*d-s*a*p+r*c*p+i*a*m-r*l*m)+y*(+n*l*m-n*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+_*(+n*c*d-n*a*m-s*o*d+r*o*m+s*a*u-r*c*u)+v*(-i*a*u-n*l*d+n*a*p+i*o*d-r*o*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],g=e[12],y=e[13],_=e[14],v=e[15],S=d*_*c-y*p*c+y*l*m-a*_*m-d*l*v+a*p*v,w=g*p*c-u*_*c-g*l*m+o*_*m+u*l*v-o*p*v,E=u*y*c-g*d*c+g*a*m-o*y*m-u*a*v+o*d*v,R=g*d*l-u*y*l-g*a*p+o*y*p+u*a*_-o*d*_,A=n*S+r*w+i*E+s*R;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/A;return e[0]=S*M,e[1]=(y*p*s-d*_*s-y*i*m+r*_*m+d*i*v-r*p*v)*M,e[2]=(a*_*s-y*l*s+y*i*c-r*_*c-a*i*v+r*l*v)*M,e[3]=(d*l*s-a*p*s-d*i*c+r*p*c+a*i*m-r*l*m)*M,e[4]=w*M,e[5]=(u*_*s-g*p*s+g*i*m-n*_*m-u*i*v+n*p*v)*M,e[6]=(g*l*s-o*_*s-g*i*c+n*_*c+o*i*v-n*l*v)*M,e[7]=(o*p*s-u*l*s+u*i*c-n*p*c-o*i*m+n*l*m)*M,e[8]=E*M,e[9]=(g*d*s-u*y*s-g*r*m+n*y*m+u*r*v-n*d*v)*M,e[10]=(o*y*s-g*a*s+g*r*c-n*y*c-o*r*v+n*a*v)*M,e[11]=(u*a*s-o*d*s-u*r*c+n*d*c+o*r*m-n*a*m)*M,e[12]=R*M,e[13]=(u*y*i-g*d*i+g*r*p-n*y*p-u*r*_+n*d*_)*M,e[14]=(g*a*i-o*y*i-g*r*l+n*y*l+o*r*_-n*a*_)*M,e[15]=(o*d*i-u*a*i+u*r*l-n*d*l-o*r*p+n*a*p)*M,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,d=a+a,p=s*c,m=s*u,g=s*d,y=o*u,_=o*d,v=a*d,S=l*c,w=l*u,E=l*d,R=r.x,A=r.y,M=r.z;return i[0]=(1-(y+v))*R,i[1]=(m+E)*R,i[2]=(g-w)*R,i[3]=0,i[4]=(m-E)*A,i[5]=(1-(p+v))*A,i[6]=(_+S)*A,i[7]=0,i[8]=(g+w)*M,i[9]=(_-S)*M,i[10]=(1-(p+y))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=_d.set(i[0],i[1],i[2]).length();const o=_d.set(i[4],i[5],i[6]).length(),a=_d.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ys.copy(this);const c=1/s,u=1/o,d=1/a;return Ys.elements[0]*=c,Ys.elements[1]*=c,Ys.elements[2]*=c,Ys.elements[4]*=u,Ys.elements[5]*=u,Ys.elements[6]*=u,Ys.elements[8]*=d,Ys.elements[9]*=d,Ys.elements[10]*=d,n.setFromRotationMatrix(Ys),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Fo){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),p=(r+i)/(r-i);let m,g;if(a===Fo)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===Ym)m=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Fo){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(o-s),p=(n+e)*c,m=(r+i)*u;let g,y;if(a===Fo)g=(o+s)*d,y=-2*d;else if(a===Ym)g=s*d,y=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const _d=new V,Ys=new wt,mae=new V(0,0,0),gae=new V(1,1,1),ul=new V,_y=new V,Yi=new V,CN=new wt,AN=new zi;class ls{constructor(e=0,n=0,r=0,i=ls.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(tr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-tr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(tr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-tr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(tr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-tr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return CN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(CN,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return AN.setFromEuler(this),this.setFromQuaternion(AN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ls.DEFAULT_ORDER="XYZ";class du{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vae=0;const RN=new V,xd=new zi,la=new wt,xy=new V,pp=new V,yae=new V,_ae=new zi,PN=new V(1,0,0),IN=new V(0,1,0),LN=new V(0,0,1),kN={type:"added"},xae={type:"removed"},Sd={type:"childadded",child:null},Cb={type:"childremoved",child:null};class on extends Xa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vae++}),this.uuid=ss(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=on.DEFAULT_UP.clone();const e=new V,n=new ls,r=new zi,i=new V(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new wt},normalMatrix:{value:new Lt}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=on.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=on.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new du,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return xd.setFromAxisAngle(e,n),this.quaternion.multiply(xd),this}rotateOnWorldAxis(e,n){return xd.setFromAxisAngle(e,n),this.quaternion.premultiply(xd),this}rotateX(e){return this.rotateOnAxis(PN,e)}rotateY(e){return this.rotateOnAxis(IN,e)}rotateZ(e){return this.rotateOnAxis(LN,e)}translateOnAxis(e,n){return RN.copy(e).applyQuaternion(this.quaternion),this.position.add(RN.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(PN,e)}translateY(e){return this.translateOnAxis(IN,e)}translateZ(e){return this.translateOnAxis(LN,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(la.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?xy.copy(e):xy.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),pp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?la.lookAt(pp,xy,this.up):la.lookAt(xy,pp,this.up),this.quaternion.setFromRotationMatrix(la),i&&(la.extractRotation(i.matrixWorld),xd.setFromRotationMatrix(la),this.quaternion.premultiply(xd.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(kN),Sd.child=e,this.dispatchEvent(Sd),Sd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(xae),Cb.child=e,this.dispatchEvent(Cb),Cb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),la.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),la.multiply(e.parent.matrixWorld)),e.applyMatrix4(la),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(kN),Sd.child=e,this.dispatchEvent(Sd),Sd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,e,yae),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pp,_ae,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}on.DEFAULT_UP=new V(0,1,0);on.DEFAULT_MATRIX_AUTO_UPDATE=!0;on.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ks=new V,ca=new V,Ab=new V,ua=new V,wd=new V,bd=new V,ON=new V,Rb=new V,Pb=new V,Ib=new V;class es{constructor(e=new V,n=new V,r=new V){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ks.subVectors(e,n),i.cross(Ks);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ks.subVectors(i,n),ca.subVectors(r,n),Ab.subVectors(e,n);const o=Ks.dot(Ks),a=Ks.dot(ca),l=Ks.dot(Ab),c=ca.dot(ca),u=ca.dot(Ab),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(c*l-a*u)*p,g=(o*u-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,ua)===null?!1:ua.x>=0&&ua.y>=0&&ua.x+ua.y<=1}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,ua)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ua.x),l.addScaledVector(o,ua.y),l.addScaledVector(a,ua.z),l)}static isFrontFacing(e,n,r,i){return Ks.subVectors(r,n),ca.subVectors(e,n),Ks.cross(ca).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ks.subVectors(this.c,this.b),ca.subVectors(this.a,this.b),Ks.cross(ca).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return es.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return es.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return es.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return es.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return es.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;wd.subVectors(i,r),bd.subVectors(s,r),Rb.subVectors(e,r);const l=wd.dot(Rb),c=bd.dot(Rb);if(l<=0&&c<=0)return n.copy(r);Pb.subVectors(e,i);const u=wd.dot(Pb),d=bd.dot(Pb);if(u>=0&&d<=u)return n.copy(i);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(wd,o);Ib.subVectors(e,s);const m=wd.dot(Ib),g=bd.dot(Ib);if(g>=0&&m<=g)return n.copy(s);const y=m*c-l*g;if(y<=0&&c>=0&&g<=0)return a=c/(c-g),n.copy(r).addScaledVector(bd,a);const _=u*g-m*d;if(_<=0&&d-u>=0&&m-g>=0)return ON.subVectors(s,i),a=(d-u)/(d-u+(m-g)),n.copy(i).addScaledVector(ON,a);const v=1/(_+y+p);return o=y*v,a=p*v,n.copy(r).addScaledVector(wd,o).addScaledVector(bd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const NH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},dl={h:0,s:0,l:0},Sy={h:0,s:0,l:0};function Lb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class $e{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Cs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,hn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=hn.workingColorSpace){return this.r=e,this.g=n,this.b=r,hn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=hn.workingColorSpace){if(e=WR(e,1),n=tr(n,0,1),r=tr(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=Lb(o,s,e+1/3),this.g=Lb(o,s,e),this.b=Lb(o,s,e-1/3)}return hn.toWorkingColorSpace(this,i),this}setStyle(e,n=Cs){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Cs){const r=NH[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Tf(e.r),this.g=Tf(e.g),this.b=Tf(e.b),this}copyLinearToSRGB(e){return this.r=_b(e.r),this.g=_b(e.g),this.b=_b(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Cs){return hn.fromWorkingColorSpace(ti.copy(this),e),Math.round(tr(ti.r*255,0,255))*65536+Math.round(tr(ti.g*255,0,255))*256+Math.round(tr(ti.b*255,0,255))}getHexString(e=Cs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=hn.workingColorSpace){hn.fromWorkingColorSpace(ti.copy(this),n);const r=ti.r,i=ti.g,s=ti.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=hn.workingColorSpace){return hn.fromWorkingColorSpace(ti.copy(this),n),e.r=ti.r,e.g=ti.g,e.b=ti.b,e}getStyle(e=Cs){hn.fromWorkingColorSpace(ti.copy(this),e);const n=ti.r,r=ti.g,i=ti.b;return e!==Cs?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(dl),this.setHSL(dl.h+e,dl.s+n,dl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(dl),e.getHSL(Sy);const r=tm(dl.h,Sy.h,n),i=tm(dl.s,Sy.s,n),s=tm(dl.l,Sy.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ti=new $e;$e.NAMES=NH;let Sae=0;class $r extends Xa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Sae++}),this.uuid=ss(),this.name="",this.type="Material",this.blending=lu,this.side=Da,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=q_,this.blendDst=Y_,this.blendEquation=Il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $e(0,0,0),this.blendAlpha=0,this.depthFunc=Um,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=DT,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hc,this.stencilZFail=Hc,this.stencilZPass=Hc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==lu&&(r.blending=this.blending),this.side!==Da&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==q_&&(r.blendSrc=this.blendSrc),this.blendDst!==Y_&&(r.blendDst=this.blendDst),this.blendEquation!==Il&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Um&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==DT&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Hc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Hc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Hc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class cc extends $r{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.combine=Cg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ya=wae();function wae(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ii(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=tr(t,-65504,65504),ya.floatView[0]=t;const e=ya.uint32View[0],n=e>>23&511;return ya.baseTable[n]+((e&8388607)>>ya.shiftTable[n])}function Np(t){const e=t>>10;return ya.uint32View[0]=ya.mantissaTable[ya.offsetTable[e]+(t&1023)]+ya.exponentTable[e],ya.floatView[0]}const bae={toHalfFloat:Ii,fromHalfFloat:Np},dr=new V,wy=new Me;class gn{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=qm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Os,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return LH("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)wy.fromBufferAttribute(this,n),wy.applyMatrix3(e),this.setXY(n,wy.x,wy.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)dr.fromBufferAttribute(this,n),dr.applyMatrix3(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)dr.fromBufferAttribute(this,n),dr.applyMatrix4(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)dr.fromBufferAttribute(this,n),dr.applyNormalMatrix(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)dr.fromBufferAttribute(this,n),dr.transformDirection(e),this.setXYZ(n,dr.x,dr.y,dr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=_i(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=kt(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=_i(n,this.array)),n}setX(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=_i(n,this.array)),n}setY(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=_i(n,this.array)),n}setZ(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=_i(n,this.array)),n}setW(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qm&&(e.usage=this.usage),e}}class Eae extends gn{constructor(e,n,r){super(new Int8Array(e),n,r)}}class Mae extends gn{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class Tae extends gn{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Cae extends gn{constructor(e,n,r){super(new Int16Array(e),n,r)}}class $R extends gn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Aae extends gn{constructor(e,n,r){super(new Int32Array(e),n,r)}}class XR extends gn{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Rae extends gn{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Np(this.array[e*this.itemSize]);return this.normalized&&(n=_i(n,this.array)),n}setX(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize]=Ii(n),this}getY(e){let n=Np(this.array[e*this.itemSize+1]);return this.normalized&&(n=_i(n,this.array)),n}setY(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize+1]=Ii(n),this}getZ(e){let n=Np(this.array[e*this.itemSize+2]);return this.normalized&&(n=_i(n,this.array)),n}setZ(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize+2]=Ii(n),this}getW(e){let n=Np(this.array[e*this.itemSize+3]);return this.normalized&&(n=_i(n,this.array)),n}setW(e,n){return this.normalized&&(n=kt(n,this.array)),this.array[e*this.itemSize+3]=Ii(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array)),this.array[e+0]=Ii(n),this.array[e+1]=Ii(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.array[e+0]=Ii(n),this.array[e+1]=Ii(r),this.array[e+2]=Ii(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.array[e+0]=Ii(n),this.array[e+1]=Ii(r),this.array[e+2]=Ii(i),this.array[e+3]=Ii(s),this}}class tt extends gn{constructor(e,n,r){super(new Float32Array(e),n,r)}}let Pae=0;const Es=new wt,kb=new on,Ed=new V,Ki=new bi,mp=new bi,Rr=new V;class Ft extends Xa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Pae++}),this.uuid=ss(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(PH(e)?XR:$R)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Lt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Es.makeRotationFromQuaternion(e),this.applyMatrix4(Es),this}rotateX(e){return Es.makeRotationX(e),this.applyMatrix4(Es),this}rotateY(e){return Es.makeRotationY(e),this.applyMatrix4(Es),this}rotateZ(e){return Es.makeRotationZ(e),this.applyMatrix4(Es),this}translate(e,n,r){return Es.makeTranslation(e,n,r),this.applyMatrix4(Es),this}scale(e,n,r){return Es.makeScale(e,n,r),this.applyMatrix4(Es),this}lookAt(e){return kb.lookAt(e),kb.updateMatrix(),this.applyMatrix4(kb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ed).negate(),this.translate(Ed.x,Ed.y,Ed.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new tt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Ki.setFromBufferAttribute(s),this.morphTargetsRelative?(Rr.addVectors(this.boundingBox.min,Ki.min),this.boundingBox.expandByPoint(Rr),Rr.addVectors(this.boundingBox.max,Ki.max),this.boundingBox.expandByPoint(Rr)):(this.boundingBox.expandByPoint(Ki.min),this.boundingBox.expandByPoint(Ki.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ci);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new V,1/0);return}if(e){const r=this.boundingSphere.center;if(Ki.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];mp.setFromBufferAttribute(a),this.morphTargetsRelative?(Rr.addVectors(Ki.min,mp.min),Ki.expandByPoint(Rr),Rr.addVectors(Ki.max,mp.max),Ki.expandByPoint(Rr)):(Ki.expandByPoint(mp.min),Ki.expandByPoint(mp.max))}Ki.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Rr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Rr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Rr.fromBufferAttribute(a,c),l&&(Ed.fromBufferAttribute(e,c),Rr.add(Ed)),i=Math.max(i,r.distanceToSquared(Rr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new gn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<r.count;L++)a[L]=new V,l[L]=new V;const c=new V,u=new V,d=new V,p=new Me,m=new Me,g=new Me,y=new V,_=new V;function v(L,P,C){c.fromBufferAttribute(r,L),u.fromBufferAttribute(r,P),d.fromBufferAttribute(r,C),p.fromBufferAttribute(s,L),m.fromBufferAttribute(s,P),g.fromBufferAttribute(s,C),u.sub(c),d.sub(c),m.sub(p),g.sub(p);const N=1/(m.x*g.y-g.x*m.y);isFinite(N)&&(y.copy(u).multiplyScalar(g.y).addScaledVector(d,-m.y).multiplyScalar(N),_.copy(d).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(N),a[L].add(y),a[P].add(y),a[C].add(y),l[L].add(_),l[P].add(_),l[C].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let L=0,P=S.length;L<P;++L){const C=S[L],N=C.start,H=C.count;for(let z=N,$=N+H;z<$;z+=3)v(e.getX(z+0),e.getX(z+1),e.getX(z+2))}const w=new V,E=new V,R=new V,A=new V;function M(L){R.fromBufferAttribute(i,L),A.copy(R);const P=a[L];w.copy(P),w.sub(R.multiplyScalar(R.dot(P))).normalize(),E.crossVectors(A,P);const N=E.dot(l[L])<0?-1:1;o.setXYZW(L,w.x,w.y,w.z,N)}for(let L=0,P=S.length;L<P;++L){const C=S[L],N=C.start,H=C.count;for(let z=N,$=N+H;z<$;z+=3)M(e.getX(z+0)),M(e.getX(z+1)),M(e.getX(z+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new gn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new V,s=new V,o=new V,a=new V,l=new V,c=new V,u=new V,d=new V;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),y=e.getX(p+1),_=e.getX(p+2);i.fromBufferAttribute(n,g),s.fromBufferAttribute(n,y),o.fromBufferAttribute(n,_),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,_),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Rr.fromBufferAttribute(e,n),Rr.normalize(),e.setXYZ(n,Rr.x,Rr.y,Rr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let y=0,_=l.length;y<_;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*u;for(let v=0;v<u;v++)p[g++]=c[m++]}return new gn(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Ft,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const p=c[u],m=e(p,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const NN=new wt,Tc=new gh,by=new ci,DN=new V,Md=new V,Td=new V,Cd=new V,Ob=new V,Ey=new V,My=new Me,Ty=new Me,Cy=new Me,UN=new V,FN=new V,BN=new V,Ay=new V,Ry=new V;class gr extends on{constructor(e=new Ft,n=new cc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Ey.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(Ob.fromBufferAttribute(d,e),o?Ey.addScaledVector(Ob,u):Ey.addScaledVector(Ob.sub(n),u))}n.add(Ey)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),by.copy(r.boundingSphere),by.applyMatrix4(s),Tc.copy(e.ray).recast(e.near),!(by.containsPoint(Tc.origin)===!1&&(Tc.intersectSphere(by,DN)===null||Tc.origin.distanceToSquared(DN)>(e.far-e.near)**2))&&(NN.copy(s).invert(),Tc.copy(e.ray).applyMatrix4(NN),!(r.boundingBox!==null&&Tc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Tc)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,y=p.length;g<y;g++){const _=p[g],v=o[_.materialIndex],S=Math.max(_.start,m.start),w=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let E=S,R=w;E<R;E+=3){const A=a.getX(E),M=a.getX(E+1),L=a.getX(E+2);i=Py(this,v,e,r,c,u,d,A,M,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,n.push(i))}}else{const g=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let _=g,v=y;_<v;_+=3){const S=a.getX(_),w=a.getX(_+1),E=a.getX(_+2);i=Py(this,o,e,r,c,u,d,S,w,E),i&&(i.faceIndex=Math.floor(_/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,y=p.length;g<y;g++){const _=p[g],v=o[_.materialIndex],S=Math.max(_.start,m.start),w=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let E=S,R=w;E<R;E+=3){const A=E,M=E+1,L=E+2;i=Py(this,v,e,r,c,u,d,A,M,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=_.materialIndex,n.push(i))}}else{const g=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let _=g,v=y;_<v;_+=3){const S=_,w=_+1,E=_+2;i=Py(this,o,e,r,c,u,d,S,w,E),i&&(i.faceIndex=Math.floor(_/3),n.push(i))}}}}function Iae(t,e,n,r,i,s,o,a){let l;if(e.side===wi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Da,a),l===null)return null;Ry.copy(a),Ry.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Ry);return c<n.near||c>n.far?null:{distance:c,point:Ry.clone(),object:t}}function Py(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,Md),t.getVertexPosition(l,Td),t.getVertexPosition(c,Cd);const u=Iae(t,e,n,r,Md,Td,Cd,Ay);if(u){i&&(My.fromBufferAttribute(i,a),Ty.fromBufferAttribute(i,l),Cy.fromBufferAttribute(i,c),u.uv=es.getInterpolation(Ay,Md,Td,Cd,My,Ty,Cy,new Me)),s&&(My.fromBufferAttribute(s,a),Ty.fromBufferAttribute(s,l),Cy.fromBufferAttribute(s,c),u.uv1=es.getInterpolation(Ay,Md,Td,Cd,My,Ty,Cy,new Me)),o&&(UN.fromBufferAttribute(o,a),FN.fromBufferAttribute(o,l),BN.fromBufferAttribute(o,c),u.normal=es.getInterpolation(Ay,Md,Td,Cd,UN,FN,BN,new V),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new V,materialIndex:0};es.getNormal(Md,Td,Cd,d.normal),u.face=d}return u}class Fu extends Ft{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let p=0,m=0;g("z","y","x",-1,-1,r,n,e,o,s,0),g("z","y","x",1,-1,r,n,-e,o,s,1),g("x","z","y",1,1,e,r,n,i,o,2),g("x","z","y",1,-1,e,r,-n,i,o,3),g("x","y","z",1,-1,e,n,r,i,s,4),g("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new tt(c,3)),this.setAttribute("normal",new tt(u,3)),this.setAttribute("uv",new tt(d,2));function g(y,_,v,S,w,E,R,A,M,L,P){const C=E/M,N=R/L,H=E/2,z=R/2,$=A/2,X=M+1,q=L+1;let fe=0,k=0;const W=new V;for(let G=0;G<q;G++){const ee=G*N-z;for(let ae=0;ae<X;ae++){const Pe=ae*C-H;W[y]=Pe*S,W[_]=ee*w,W[v]=$,c.push(W.x,W.y,W.z),W[y]=0,W[_]=0,W[v]=A>0?1:-1,u.push(W.x,W.y,W.z),d.push(ae/M),d.push(1-G/L),fe+=1}}for(let G=0;G<L;G++)for(let ee=0;ee<M;ee++){const ae=p+ee+X*G,Pe=p+ee+X*(G+1),re=p+(ee+1)+X*(G+1),ye=p+(ee+1)+X*G;l.push(ae,Pe,ye),l.push(Pe,re,ye),k+=6}a.addGroup(m,k,P),m+=k,p+=fe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gf(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function gi(t){const e={};for(let n=0;n<t.length;n++){const r=Gf(t[n]);for(const i in r)e[i]=r[i]}return e}function Lae(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function DH(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:hn.workingColorSpace}const UH={clone:Gf,merge:gi};var kae=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Oae=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Bs extends $r{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kae,this.fragmentShader=Oae,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gf(e.uniforms),this.uniformsGroups=Lae(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Pg extends on{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt,this.projectionMatrixInverse=new wt,this.coordinateSystem=Fo}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const fl=new V,zN=new Me,VN=new Me;class kr extends Pg{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Wf*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(uu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Wf*2*Math.atan(Math.tan(uu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){fl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(fl.x,fl.y).multiplyScalar(-e/fl.z),fl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(fl.x,fl.y).multiplyScalar(-e/fl.z)}getViewSize(e,n){return this.getViewBounds(e,zN,VN),n.subVectors(VN,zN)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(uu*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Ad=-90,Rd=1;class FH extends on{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new kr(Ad,Rd,e,n);i.layers=this.layers,this.add(i);const s=new kr(Ad,Rd,e,n);s.layers=this.layers,this.add(s);const o=new kr(Ad,Rd,e,n);o.layers=this.layers,this.add(o);const a=new kr(Ad,Rd,e,n);a.layers=this.layers,this.add(a);const l=new kr(Ad,Rd,e,n);l.layers=this.layers,this.add(l);const c=new kr(Ad,Rd,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Fo)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Ym)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,p,m),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class Ig extends Xn{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Ua,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class BH extends mo{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Ig(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:pr}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Fu(5,5,5),s=new Bs({name:"CubemapFromEquirect",uniforms:Gf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:wi,blending:Pa});s.uniforms.tEquirect.value=n;const o=new gr(i,s),a=n.minFilter;return n.minFilter===Uo&&(n.minFilter=pr),new FH(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const Nb=new V,Nae=new V,Dae=new Lt;class wl{constructor(e=new V(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=Nb.subVectors(r,n).cross(Nae.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(Nb),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Dae.getNormalMatrix(e),i=this.coplanarPoint(Nb).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Cc=new ci,Iy=new V;class Lg{constructor(e=new wl,n=new wl,r=new wl,i=new wl,s=new wl,o=new wl){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Fo){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],p=i[7],m=i[8],g=i[9],y=i[10],_=i[11],v=i[12],S=i[13],w=i[14],E=i[15];if(r[0].setComponents(l-s,p-c,_-m,E-v).normalize(),r[1].setComponents(l+s,p+c,_+m,E+v).normalize(),r[2].setComponents(l+o,p+u,_+g,E+S).normalize(),r[3].setComponents(l-o,p-u,_-g,E-S).normalize(),r[4].setComponents(l-a,p-d,_-y,E-w).normalize(),n===Fo)r[5].setComponents(l+a,p+d,_+y,E+w).normalize();else if(n===Ym)r[5].setComponents(a,d,y,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Cc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Cc.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Cc)}intersectsSprite(e){return Cc.center.set(0,0,0),Cc.radius=.7071067811865476,Cc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Cc)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Iy.x=i.normal.x>0?e.max.x:e.min.x,Iy.y=i.normal.y>0?e.max.y:e.min.y,Iy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Iy)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function zH(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function Uae(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=t.SHORT;else if(c instanceof Uint32Array)m=t.UNSIGNED_INT;else if(c instanceof Int32Array)m=t.INT;else if(c instanceof Int8Array)m=t.BYTE;else if(c instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l._updateRange,p=l.updateRanges;if(t.bindBuffer(c,a),d.count===-1&&p.length===0&&t.bufferSubData(c,0,u),p.length!==0){for(let m=0,g=p.length;m<g;m++){const y=p[m];t.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}d.count!==-1&&(t.bufferSubData(c,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}class vh extends Ft{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,p=n/l,m=[],g=[],y=[],_=[];for(let v=0;v<u;v++){const S=v*p-o;for(let w=0;w<c;w++){const E=w*d-s;g.push(E,-S,0),y.push(0,0,1),_.push(w/a),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let S=0;S<a;S++){const w=S+c*v,E=S+c*(v+1),R=S+1+c*(v+1),A=S+1+c*v;m.push(w,E,A),m.push(E,R,A)}this.setIndex(m),this.setAttribute("position",new tt(g,3)),this.setAttribute("normal",new tt(y,3)),this.setAttribute("uv",new tt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vh(e.width,e.height,e.widthSegments,e.heightSegments)}}var Fae=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Bae=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zae=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Vae=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Hae=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,jae=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Wae=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Gae=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$ae=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Xae=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,qae=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Yae=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Kae=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Jae=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Zae=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Qae=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ele=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,tle=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,nle=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rle=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ile=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sle=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ole=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ale=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,lle=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cle=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ule=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,dle=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,fle=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,hle=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ple="gl_FragColor = linearToOutputTexel( gl_FragColor );",mle=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,gle=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vle=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,yle=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_le=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xle=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Sle=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wle=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ble=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ele=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Mle=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Tle=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Cle=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ale=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Rle=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Ple=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ile=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Lle=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,kle=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ole=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Nle=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Dle=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ule=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Fle=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ble=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,zle=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Vle=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Hle=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jle=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Wle=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Gle=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$le=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Xle=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qle=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Yle=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Kle=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Jle=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Zle=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Qle=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ece=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,tce=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,nce=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rce=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ice=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sce=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,oce=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ace=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,lce=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,cce=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,uce=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,dce=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,fce=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,hce=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,pce=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mce=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,gce=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,vce=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,yce=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_ce=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,xce=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Sce=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,wce=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,bce=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ece=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Mce=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Tce=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Cce=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ace=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rce=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Pce=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ice=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Lce=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,kce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Oce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Nce=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Dce=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Uce=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Fce=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zce=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Vce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hce=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jce=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Wce=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Gce=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$ce=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Xce=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qce=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Yce=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Kce=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Jce=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Zce=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qce=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eue=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tue=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,nue=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rue=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,iue=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,sue=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oue=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aue=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,lue=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cue=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uue=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,due=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hue=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pue=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mue=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ut={alphahash_fragment:Fae,alphahash_pars_fragment:Bae,alphamap_fragment:zae,alphamap_pars_fragment:Vae,alphatest_fragment:Hae,alphatest_pars_fragment:jae,aomap_fragment:Wae,aomap_pars_fragment:Gae,batching_pars_vertex:$ae,batching_vertex:Xae,begin_vertex:qae,beginnormal_vertex:Yae,bsdfs:Kae,iridescence_fragment:Jae,bumpmap_pars_fragment:Zae,clipping_planes_fragment:Qae,clipping_planes_pars_fragment:ele,clipping_planes_pars_vertex:tle,clipping_planes_vertex:nle,color_fragment:rle,color_pars_fragment:ile,color_pars_vertex:sle,color_vertex:ole,common:ale,cube_uv_reflection_fragment:lle,defaultnormal_vertex:cle,displacementmap_pars_vertex:ule,displacementmap_vertex:dle,emissivemap_fragment:fle,emissivemap_pars_fragment:hle,colorspace_fragment:ple,colorspace_pars_fragment:mle,envmap_fragment:gle,envmap_common_pars_fragment:vle,envmap_pars_fragment:yle,envmap_pars_vertex:_le,envmap_physical_pars_fragment:Ple,envmap_vertex:xle,fog_vertex:Sle,fog_pars_vertex:wle,fog_fragment:ble,fog_pars_fragment:Ele,gradientmap_pars_fragment:Mle,lightmap_pars_fragment:Tle,lights_lambert_fragment:Cle,lights_lambert_pars_fragment:Ale,lights_pars_begin:Rle,lights_toon_fragment:Ile,lights_toon_pars_fragment:Lle,lights_phong_fragment:kle,lights_phong_pars_fragment:Ole,lights_physical_fragment:Nle,lights_physical_pars_fragment:Dle,lights_fragment_begin:Ule,lights_fragment_maps:Fle,lights_fragment_end:Ble,logdepthbuf_fragment:zle,logdepthbuf_pars_fragment:Vle,logdepthbuf_pars_vertex:Hle,logdepthbuf_vertex:jle,map_fragment:Wle,map_pars_fragment:Gle,map_particle_fragment:$le,map_particle_pars_fragment:Xle,metalnessmap_fragment:qle,metalnessmap_pars_fragment:Yle,morphinstance_vertex:Kle,morphcolor_vertex:Jle,morphnormal_vertex:Zle,morphtarget_pars_vertex:Qle,morphtarget_vertex:ece,normal_fragment_begin:tce,normal_fragment_maps:nce,normal_pars_fragment:rce,normal_pars_vertex:ice,normal_vertex:sce,normalmap_pars_fragment:oce,clearcoat_normal_fragment_begin:ace,clearcoat_normal_fragment_maps:lce,clearcoat_pars_fragment:cce,iridescence_pars_fragment:uce,opaque_fragment:dce,packing:fce,premultiplied_alpha_fragment:hce,project_vertex:pce,dithering_fragment:mce,dithering_pars_fragment:gce,roughnessmap_fragment:vce,roughnessmap_pars_fragment:yce,shadowmap_pars_fragment:_ce,shadowmap_pars_vertex:xce,shadowmap_vertex:Sce,shadowmask_pars_fragment:wce,skinbase_vertex:bce,skinning_pars_vertex:Ece,skinning_vertex:Mce,skinnormal_vertex:Tce,specularmap_fragment:Cce,specularmap_pars_fragment:Ace,tonemapping_fragment:Rce,tonemapping_pars_fragment:Pce,transmission_fragment:Ice,transmission_pars_fragment:Lce,uv_pars_fragment:kce,uv_pars_vertex:Oce,uv_vertex:Nce,worldpos_vertex:Dce,background_vert:Uce,background_frag:Fce,backgroundCube_vert:Bce,backgroundCube_frag:zce,cube_vert:Vce,cube_frag:Hce,depth_vert:jce,depth_frag:Wce,distanceRGBA_vert:Gce,distanceRGBA_frag:$ce,equirect_vert:Xce,equirect_frag:qce,linedashed_vert:Yce,linedashed_frag:Kce,meshbasic_vert:Jce,meshbasic_frag:Zce,meshlambert_vert:Qce,meshlambert_frag:eue,meshmatcap_vert:tue,meshmatcap_frag:nue,meshnormal_vert:rue,meshnormal_frag:iue,meshphong_vert:sue,meshphong_frag:oue,meshphysical_vert:aue,meshphysical_frag:lue,meshtoon_vert:cue,meshtoon_frag:uue,points_vert:due,points_frag:fue,shadow_vert:hue,shadow_frag:pue,sprite_vert:mue,sprite_frag:gue},Ve={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Lt}},envmap:{envMap:{value:null},envMapRotation:{value:new Lt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Lt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Lt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Lt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Lt},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Lt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Lt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Lt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Lt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0},uvTransform:{value:new Lt}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}}},so={basic:{uniforms:gi([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.fog]),vertexShader:Ut.meshbasic_vert,fragmentShader:Ut.meshbasic_frag},lambert:{uniforms:gi([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new $e(0)}}]),vertexShader:Ut.meshlambert_vert,fragmentShader:Ut.meshlambert_frag},phong:{uniforms:gi([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:Ut.meshphong_vert,fragmentShader:Ut.meshphong_frag},standard:{uniforms:gi([Ve.common,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.roughnessmap,Ve.metalnessmap,Ve.fog,Ve.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag},toon:{uniforms:gi([Ve.common,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.gradientmap,Ve.fog,Ve.lights,{emissive:{value:new $e(0)}}]),vertexShader:Ut.meshtoon_vert,fragmentShader:Ut.meshtoon_frag},matcap:{uniforms:gi([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,{matcap:{value:null}}]),vertexShader:Ut.meshmatcap_vert,fragmentShader:Ut.meshmatcap_frag},points:{uniforms:gi([Ve.points,Ve.fog]),vertexShader:Ut.points_vert,fragmentShader:Ut.points_frag},dashed:{uniforms:gi([Ve.common,Ve.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ut.linedashed_vert,fragmentShader:Ut.linedashed_frag},depth:{uniforms:gi([Ve.common,Ve.displacementmap]),vertexShader:Ut.depth_vert,fragmentShader:Ut.depth_frag},normal:{uniforms:gi([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,{opacity:{value:1}}]),vertexShader:Ut.meshnormal_vert,fragmentShader:Ut.meshnormal_frag},sprite:{uniforms:gi([Ve.sprite,Ve.fog]),vertexShader:Ut.sprite_vert,fragmentShader:Ut.sprite_frag},background:{uniforms:{uvTransform:{value:new Lt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ut.background_vert,fragmentShader:Ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Lt}},vertexShader:Ut.backgroundCube_vert,fragmentShader:Ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ut.cube_vert,fragmentShader:Ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ut.equirect_vert,fragmentShader:Ut.equirect_frag},distanceRGBA:{uniforms:gi([Ve.common,Ve.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ut.distanceRGBA_vert,fragmentShader:Ut.distanceRGBA_frag},shadow:{uniforms:gi([Ve.lights,Ve.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:Ut.shadow_vert,fragmentShader:Ut.shadow_frag}};so.physical={uniforms:gi([so.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Lt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Lt},clearcoatNormalScale:{value:new Me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Lt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Lt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Lt},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Lt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Lt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Lt},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Lt},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Lt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Lt},anisotropyVector:{value:new Me},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Lt}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag};const Ly={r:0,b:0,g:0},Ac=new ls,vue=new wt;function yue(t,e,n,r,i,s,o){const a=new $e(0);let l=s===!0?0:1,c,u,d=null,p=0,m=null;function g(S){let w=S.isScene===!0?S.background:null;return w&&w.isTexture&&(w=(S.backgroundBlurriness>0?n:e).get(w)),w}function y(S){let w=!1;const E=g(S);E===null?v(a,l):E&&E.isColor&&(v(E,1),w=!0);const R=t.xr.getEnvironmentBlendMode();R==="additive"?r.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||w)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil)}function _(S,w){const E=g(w);E&&(E.isCubeTexture||E.mapping===ph)?(u===void 0&&(u=new gr(new Fu(1,1,1),new Bs({name:"BackgroundCubeMaterial",uniforms:Gf(so.backgroundCube.uniforms),vertexShader:so.backgroundCube.vertexShader,fragmentShader:so.backgroundCube.fragmentShader,side:wi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(R,A,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Ac.copy(w.backgroundRotation),Ac.x*=-1,Ac.y*=-1,Ac.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Ac.y*=-1,Ac.z*=-1),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(vue.makeRotationFromEuler(Ac)),u.material.toneMapped=hn.getTransfer(E.colorSpace)!==Mn,(d!==E||p!==E.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=E,p=E.version,m=t.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new gr(new vh(2,2),new Bs({name:"BackgroundMaterial",uniforms:Gf(so.background.uniforms),vertexShader:so.background.vertexShader,fragmentShader:so.background.fragmentShader,side:Da,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.toneMapped=hn.getTransfer(E.colorSpace)!==Mn,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(d!==E||p!==E.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,d=E,p=E.version,m=t.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function v(S,w){S.getRGB(Ly,DH(t)),r.buffers.color.setClear(Ly.r,Ly.g,Ly.b,w,o)}return{getClearColor:function(){return a},setClearColor:function(S,w=1){a.set(S),l=w,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,v(a,l)},render:y,addToRenderList:_}}function _ue(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(C,N,H,z,$){let X=!1;const q=d(z,H,N);s!==q&&(s=q,c(s.object)),X=m(C,z,H,$),X&&g(C,z,H,$),$!==null&&e.update($,t.ELEMENT_ARRAY_BUFFER),(X||o)&&(o=!1,E(C,N,H,z),$!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function l(){return t.createVertexArray()}function c(C){return t.bindVertexArray(C)}function u(C){return t.deleteVertexArray(C)}function d(C,N,H){const z=H.wireframe===!0;let $=r[C.id];$===void 0&&($={},r[C.id]=$);let X=$[N.id];X===void 0&&(X={},$[N.id]=X);let q=X[z];return q===void 0&&(q=p(l()),X[z]=q),q}function p(C){const N=[],H=[],z=[];for(let $=0;$<n;$++)N[$]=0,H[$]=0,z[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:H,attributeDivisors:z,object:C,attributes:{},index:null}}function m(C,N,H,z){const $=s.attributes,X=N.attributes;let q=0;const fe=H.getAttributes();for(const k in fe)if(fe[k].location>=0){const G=$[k];let ee=X[k];if(ee===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(ee=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(ee=C.instanceColor)),G===void 0||G.attribute!==ee||ee&&G.data!==ee.data)return!0;q++}return s.attributesNum!==q||s.index!==z}function g(C,N,H,z){const $={},X=N.attributes;let q=0;const fe=H.getAttributes();for(const k in fe)if(fe[k].location>=0){let G=X[k];G===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(G=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(G=C.instanceColor));const ee={};ee.attribute=G,G&&G.data&&(ee.data=G.data),$[k]=ee,q++}s.attributes=$,s.attributesNum=q,s.index=z}function y(){const C=s.newAttributes;for(let N=0,H=C.length;N<H;N++)C[N]=0}function _(C){v(C,0)}function v(C,N){const H=s.newAttributes,z=s.enabledAttributes,$=s.attributeDivisors;H[C]=1,z[C]===0&&(t.enableVertexAttribArray(C),z[C]=1),$[C]!==N&&(t.vertexAttribDivisor(C,N),$[C]=N)}function S(){const C=s.newAttributes,N=s.enabledAttributes;for(let H=0,z=N.length;H<z;H++)N[H]!==C[H]&&(t.disableVertexAttribArray(H),N[H]=0)}function w(C,N,H,z,$,X,q){q===!0?t.vertexAttribIPointer(C,N,H,$,X):t.vertexAttribPointer(C,N,H,z,$,X)}function E(C,N,H,z){y();const $=z.attributes,X=H.getAttributes(),q=N.defaultAttributeValues;for(const fe in X){const k=X[fe];if(k.location>=0){let W=$[fe];if(W===void 0&&(fe==="instanceMatrix"&&C.instanceMatrix&&(W=C.instanceMatrix),fe==="instanceColor"&&C.instanceColor&&(W=C.instanceColor)),W!==void 0){const G=W.normalized,ee=W.itemSize,ae=e.get(W);if(ae===void 0)continue;const Pe=ae.buffer,re=ae.type,ye=ae.bytesPerElement,Ee=re===t.INT||re===t.UNSIGNED_INT||W.gpuType===NR;if(W.isInterleavedBufferAttribute){const xe=W.data,it=xe.stride,dt=W.offset;if(xe.isInstancedInterleavedBuffer){for(let te=0;te<k.locationSize;te++)v(k.location+te,xe.meshPerAttribute);C.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let te=0;te<k.locationSize;te++)_(k.location+te);t.bindBuffer(t.ARRAY_BUFFER,Pe);for(let te=0;te<k.locationSize;te++)w(k.location+te,ee/k.locationSize,re,G,it*ye,(dt+ee/k.locationSize*te)*ye,Ee)}else{if(W.isInstancedBufferAttribute){for(let xe=0;xe<k.locationSize;xe++)v(k.location+xe,W.meshPerAttribute);C.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let xe=0;xe<k.locationSize;xe++)_(k.location+xe);t.bindBuffer(t.ARRAY_BUFFER,Pe);for(let xe=0;xe<k.locationSize;xe++)w(k.location+xe,ee/k.locationSize,re,G,ee*ye,ee/k.locationSize*xe*ye,Ee)}}else if(q!==void 0){const G=q[fe];if(G!==void 0)switch(G.length){case 2:t.vertexAttrib2fv(k.location,G);break;case 3:t.vertexAttrib3fv(k.location,G);break;case 4:t.vertexAttrib4fv(k.location,G);break;default:t.vertexAttrib1fv(k.location,G)}}}}S()}function R(){L();for(const C in r){const N=r[C];for(const H in N){const z=N[H];for(const $ in z)u(z[$].object),delete z[$];delete N[H]}delete r[C]}}function A(C){if(r[C.id]===void 0)return;const N=r[C.id];for(const H in N){const z=N[H];for(const $ in z)u(z[$].object),delete z[$];delete N[H]}delete r[C.id]}function M(C){for(const N in r){const H=r[N];if(H[C.id]===void 0)continue;const z=H[C.id];for(const $ in z)u(z[$].object),delete z[$];delete H[C.id]}}function L(){P(),o=!0,s!==i&&(s=i,c(s.object))}function P(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:L,resetDefaultState:P,dispose:R,releaseStatesOfGeometry:A,releaseStatesOfProgram:M,initAttributes:y,enableAttribute:_,disableUnusedAttributes:S}}function xue(t,e,n){let r;function i(c){r=c}function s(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function o(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let m=0;m<d;m++)this.render(c[m],u[m]);else{p.multiDrawArraysWEBGL(r,c,0,u,0,d);let m=0;for(let g=0;g<d;g++)m+=u[g];n.update(m,r,1)}}function l(c,u,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<c.length;g++)o(c[g],u[g],p[g]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,d);let g=0;for(let y=0;y<d;y++)g+=u[y];for(let y=0;y<p.length;y++)n.update(g,r,p[y])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Sue(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(A){return!(A!==Ni&&r.convert(A)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(A){const M=A===Ag&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==Yo&&r.convert(A)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==Os&&!M)}function l(A){if(A==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_TEXTURE_SIZE),y=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),_=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),S=t.getParameter(t.MAX_VARYING_VECTORS),w=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),E=m>0,R=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:g,maxCubemapSize:y,maxAttributes:_,maxVertexUniforms:v,maxVaryings:S,maxFragmentUniforms:w,vertexTextures:E,maxSamples:R}}function wue(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new wl,a=new Lt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){n=u(d,p,0)},this.setState=function(d,p,m){const g=d.clippingPlanes,y=d.clipIntersection,_=d.clipShadows,v=t.get(d);if(!i||g===null||g.length===0||s&&!_)s?u(null):c();else{const S=s?0:r,w=S*4;let E=v.clippingState||null;l.value=E,E=u(g,p,w,m);for(let R=0;R!==w;++R)E[R]=n[R];v.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,p,m,g){const y=d!==null?d.length:0;let _=null;if(y!==0){if(_=l.value,g!==!0||_===null){const v=m+y*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(_===null||_.length<v)&&(_=new Float32Array(v));for(let w=0,E=m;w!==y;++w,E+=4)o.copy(d[w]).applyMatrix4(S,a),o.normal.toArray(_,E),_[E+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,_}}function bue(t){let e=new WeakMap;function n(o,a){return a===Fm?o.mapping=Ua:a===Bm&&(o.mapping=Jl),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Fm||a===Bm)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new BH(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class kg extends Pg{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const uf=4,HN=[.125,.215,.35,.446,.526,.582],Gc=20,Db=new kg,jN=new $e;let Ub=null,Fb=0,Bb=0,zb=!1;const jc=(1+Math.sqrt(5))/2,Pd=1/jc,WN=[new V(-jc,Pd,0),new V(jc,Pd,0),new V(-Pd,0,jc),new V(Pd,0,jc),new V(0,jc,-Pd),new V(0,jc,Pd),new V(-1,1,-1),new V(1,1,-1),new V(-1,1,1),new V(1,1,1)];class FT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Ub=this._renderer.getRenderTarget(),Fb=this._renderer.getActiveCubeFace(),Bb=this._renderer.getActiveMipmapLevel(),zb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$N(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ub,Fb,Bb),this._renderer.xr.enabled=zb,e.scissorTest=!1,ky(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ua||e.mapping===Jl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ub=this._renderer.getRenderTarget(),Fb=this._renderer.getActiveCubeFace(),Bb=this._renderer.getActiveMipmapLevel(),zb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:pr,minFilter:pr,generateMipmaps:!1,type:Ag,format:Ni,colorSpace:$a,depthBuffer:!1},i=GN(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=GN(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Eue(s)),this._blurMaterial=Mue(s,e,n)}return i}_compileMaterial(e){const n=new gr(this._lodPlanes[0],e);this._renderer.compile(n,Db)}_sceneToCubeUV(e,n,r,i){const a=new kr(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(jN),u.toneMapping=$o,u.autoClear=!1;const m=new cc({name:"PMREM.Background",side:wi,depthWrite:!1,depthTest:!1}),g=new gr(new Fu,m);let y=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,y=!0):(m.color.copy(jN),y=!0);for(let v=0;v<6;v++){const S=v%3;S===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):S===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const w=this._cubeSize;ky(i,S*w,v>2?w:0,w,w),u.setRenderTarget(i),y&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=_}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Ua||e.mapping===Jl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=XN()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$N());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new gr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;ky(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,Db)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=WN[(i-s-1)%WN.length];this._blur(e,s-1,s,o,a)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new gr(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Gc-1),y=s/g,_=isFinite(s)?1+Math.floor(u*y):Gc;_>Gc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Gc}`);const v=[];let S=0;for(let M=0;M<Gc;++M){const L=M/y,P=Math.exp(-L*L/2);v.push(P),M===0?S+=P:M<_&&(S+=2*P)}for(let M=0;M<v.length;M++)v[M]=v[M]/S;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=v,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=g,p.mipInt.value=w-r;const E=this._sizeLods[i],R=3*E*(i>w-uf?i-w+uf:0),A=4*(this._cubeSize-E);ky(n,R,A,3*E,2*E),l.setRenderTarget(n),l.render(d,Db)}}function Eue(t){const e=[],n=[],r=[];let i=t;const s=t-uf+1+HN.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-uf?l=HN[o-t+uf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,g=6,y=3,_=2,v=1,S=new Float32Array(y*g*m),w=new Float32Array(_*g*m),E=new Float32Array(v*g*m);for(let A=0;A<m;A++){const M=A%3*2/3-1,L=A>2?0:-1,P=[M,L,0,M+2/3,L,0,M+2/3,L+1,0,M,L,0,M+2/3,L+1,0,M,L+1,0];S.set(P,y*g*A),w.set(p,_*g*A);const C=[A,A,A,A,A,A];E.set(C,v*g*A)}const R=new Ft;R.setAttribute("position",new gn(S,y)),R.setAttribute("uv",new gn(w,_)),R.setAttribute("faceIndex",new gn(E,v)),e.push(R),i>uf&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function GN(t,e,n){const r=new mo(t,e,n);return r.texture.mapping=ph,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ky(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Mue(t,e,n){const r=new Float32Array(Gc),i=new V(0,1,0);return new Bs({name:"SphericalGaussianBlur",defines:{n:Gc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:qR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Pa,depthTest:!1,depthWrite:!1})}function $N(){return new Bs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Pa,depthTest:!1,depthWrite:!1})}function XN(){return new Bs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Pa,depthTest:!1,depthWrite:!1})}function qR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Tue(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Fm||l===Bm,u=l===Ua||l===Jl;if(c||u){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return n===null&&(n=new FT(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(n===null&&(n=new FT(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Cue(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Aue(t,e,n,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);for(const g in p.morphAttributes){const y=p.morphAttributes[g];for(let _=0,v=y.length;_<v;_++)e.remove(y[_])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const g in p)e.update(p[g],t.ARRAY_BUFFER);const m=d.morphAttributes;for(const g in m){const y=m[g];for(let _=0,v=y.length;_<v;_++)e.update(y[_],t.ARRAY_BUFFER)}}function c(d){const p=[],m=d.index,g=d.attributes.position;let y=0;if(m!==null){const S=m.array;y=m.version;for(let w=0,E=S.length;w<E;w+=3){const R=S[w+0],A=S[w+1],M=S[w+2];p.push(R,A,A,M,M,R)}}else if(g!==void 0){const S=g.array;y=g.version;for(let w=0,E=S.length/3-1;w<E;w+=3){const R=w+0,A=w+1,M=w+2;p.push(R,A,A,M,M,R)}}else return;const _=new(PH(p)?XR:$R)(p,1);_.version=y;const v=s.get(d);v&&e.remove(v),s.set(d,_)}function u(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function Rue(t,e,n){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){t.drawElements(r,m,s,p*o),n.update(m,r,1)}function c(p,m,g){g!==0&&(t.drawElementsInstanced(r,m,s,p*o,g),n.update(m,r,g))}function u(p,m,g){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<g;_++)this.render(p[_]/o,m[_]);else{y.multiDrawElementsWEBGL(r,m,0,s,p,0,g);let _=0;for(let v=0;v<g;v++)_+=m[v];n.update(_,r,1)}}function d(p,m,g,y){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let v=0;v<p.length;v++)c(p[v]/o,m[v],y[v]);else{_.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,y,0,g);let v=0;for(let S=0;S<g;S++)v+=m[S];for(let S=0;S<y.length;S++)n.update(v,r,y[S])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Pue(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Iue(t,e,n){const r=new WeakMap,i=new pn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==d){let P=function(){M.dispose(),r.delete(a),a.removeEventListener("dispose",P)};p!==void 0&&p.texture.dispose();const m=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let w=0;m===!0&&(w=1),g===!0&&(w=2),y===!0&&(w=3);let E=a.attributes.position.count*w,R=1;E>e.maxTextureSize&&(R=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const A=new Float32Array(E*R*4*d),M=new ES(A,E,R,d);M.type=Os,M.needsUpdate=!0;const L=w*4;for(let C=0;C<d;C++){const N=_[C],H=v[C],z=S[C],$=E*R*4*C;for(let X=0;X<N.count;X++){const q=X*L;m===!0&&(i.fromBufferAttribute(N,X),A[$+q+0]=i.x,A[$+q+1]=i.y,A[$+q+2]=i.z,A[$+q+3]=0),g===!0&&(i.fromBufferAttribute(H,X),A[$+q+4]=i.x,A[$+q+5]=i.y,A[$+q+6]=i.z,A[$+q+7]=0),y===!0&&(i.fromBufferAttribute(z,X),A[$+q+8]=i.x,A[$+q+9]=i.y,A[$+q+10]=i.z,A[$+q+11]=z.itemSize===4?i.w:1)}}p={count:d,texture:M,size:new Me(E,R)},r.set(a,p),a.addEventListener("dispose",P)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let m=0;for(let y=0;y<c.length;y++)m+=c[y];const g=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(t,"morphTargetBaseInfluence",g),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:s}}function Lue(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class YR extends Xn{constructor(e,n,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:cu,u!==cu&&u!==jf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===cu&&(r=Tu),r===void 0&&u===jf&&(r=mh),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Or,this.minFilter=l!==void 0?l:Or,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const VH=new Xn,HH=new YR(1,1);HH.compareFunction=jR;const jH=new ES,WH=new GR,GH=new Ig,qN=[],YN=[],KN=new Float32Array(16),JN=new Float32Array(9),ZN=new Float32Array(4);function yh(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=qN[i];if(s===void 0&&(s=new Float32Array(i),qN[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Er(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Mr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function MS(t,e){let n=YN[e];n===void 0&&(n=new Int32Array(e),YN[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function kue(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Oue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Er(n,e))return;t.uniform2fv(this.addr,e),Mr(n,e)}}function Nue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Er(n,e))return;t.uniform3fv(this.addr,e),Mr(n,e)}}function Due(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Er(n,e))return;t.uniform4fv(this.addr,e),Mr(n,e)}}function Uue(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Er(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Mr(n,e)}else{if(Er(n,r))return;ZN.set(r),t.uniformMatrix2fv(this.addr,!1,ZN),Mr(n,r)}}function Fue(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Er(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Mr(n,e)}else{if(Er(n,r))return;JN.set(r),t.uniformMatrix3fv(this.addr,!1,JN),Mr(n,r)}}function Bue(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Er(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Mr(n,e)}else{if(Er(n,r))return;KN.set(r),t.uniformMatrix4fv(this.addr,!1,KN),Mr(n,r)}}function zue(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Vue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Er(n,e))return;t.uniform2iv(this.addr,e),Mr(n,e)}}function Hue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Er(n,e))return;t.uniform3iv(this.addr,e),Mr(n,e)}}function jue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Er(n,e))return;t.uniform4iv(this.addr,e),Mr(n,e)}}function Wue(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Gue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Er(n,e))return;t.uniform2uiv(this.addr,e),Mr(n,e)}}function $ue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Er(n,e))return;t.uniform3uiv(this.addr,e),Mr(n,e)}}function Xue(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Er(n,e))return;t.uniform4uiv(this.addr,e),Mr(n,e)}}function que(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?HH:VH;n.setTexture2D(e||s,i)}function Yue(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||WH,i)}function Kue(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||GH,i)}function Jue(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||jH,i)}function Zue(t){switch(t){case 5126:return kue;case 35664:return Oue;case 35665:return Nue;case 35666:return Due;case 35674:return Uue;case 35675:return Fue;case 35676:return Bue;case 5124:case 35670:return zue;case 35667:case 35671:return Vue;case 35668:case 35672:return Hue;case 35669:case 35673:return jue;case 5125:return Wue;case 36294:return Gue;case 36295:return $ue;case 36296:return Xue;case 35678:case 36198:case 36298:case 36306:case 35682:return que;case 35679:case 36299:case 36307:return Yue;case 35680:case 36300:case 36308:case 36293:return Kue;case 36289:case 36303:case 36311:case 36292:return Jue}}function Que(t,e){t.uniform1fv(this.addr,e)}function ede(t,e){const n=yh(e,this.size,2);t.uniform2fv(this.addr,n)}function tde(t,e){const n=yh(e,this.size,3);t.uniform3fv(this.addr,n)}function nde(t,e){const n=yh(e,this.size,4);t.uniform4fv(this.addr,n)}function rde(t,e){const n=yh(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ide(t,e){const n=yh(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function sde(t,e){const n=yh(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ode(t,e){t.uniform1iv(this.addr,e)}function ade(t,e){t.uniform2iv(this.addr,e)}function lde(t,e){t.uniform3iv(this.addr,e)}function cde(t,e){t.uniform4iv(this.addr,e)}function ude(t,e){t.uniform1uiv(this.addr,e)}function dde(t,e){t.uniform2uiv(this.addr,e)}function fde(t,e){t.uniform3uiv(this.addr,e)}function hde(t,e){t.uniform4uiv(this.addr,e)}function pde(t,e,n){const r=this.cache,i=e.length,s=MS(n,i);Er(r,s)||(t.uniform1iv(this.addr,s),Mr(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||VH,s[o])}function mde(t,e,n){const r=this.cache,i=e.length,s=MS(n,i);Er(r,s)||(t.uniform1iv(this.addr,s),Mr(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||WH,s[o])}function gde(t,e,n){const r=this.cache,i=e.length,s=MS(n,i);Er(r,s)||(t.uniform1iv(this.addr,s),Mr(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||GH,s[o])}function vde(t,e,n){const r=this.cache,i=e.length,s=MS(n,i);Er(r,s)||(t.uniform1iv(this.addr,s),Mr(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||jH,s[o])}function yde(t){switch(t){case 5126:return Que;case 35664:return ede;case 35665:return tde;case 35666:return nde;case 35674:return rde;case 35675:return ide;case 35676:return sde;case 5124:case 35670:return ode;case 35667:case 35671:return ade;case 35668:case 35672:return lde;case 35669:case 35673:return cde;case 5125:return ude;case 36294:return dde;case 36295:return fde;case 36296:return hde;case 35678:case 36198:case 36298:case 36306:case 35682:return pde;case 35679:case 36299:case 36307:return mde;case 35680:case 36300:case 36308:case 36293:return gde;case 36289:case 36303:case 36311:case 36292:return vde}}class _de{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Zue(n.type)}}class xde{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=yde(n.type)}}class Sde{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const Vb=/(\w+)(\])?(\[|\.)?/g;function QN(t,e){t.seq.push(e),t.map[e.id]=e}function wde(t,e,n){const r=t.name,i=r.length;for(Vb.lastIndex=0;;){const s=Vb.exec(r),o=Vb.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){QN(n,c===void 0?new _de(a,t,e):new xde(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new Sde(a),QN(n,d)),n=d}}}class q0{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);wde(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function eD(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const bde=37297;let Ede=0;function Mde(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function Tde(t){const e=hn.getPrimaries(hn.workingColorSpace),n=hn.getPrimaries(t);let r;switch(e===n?r="":e===Xm&&n===$m?r="LinearDisplayP3ToLinearSRGB":e===$m&&n===Xm&&(r="LinearSRGBToLinearDisplayP3"),t){case $a:case Rg:return[r,"LinearTransferOETF"];case Cs:case bS:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function tD(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+Mde(t.getShaderSource(e),o)}else return i}function Cde(t,e){const n=Tde(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Ade(t,e){let n;switch(e){case tH:n="Linear";break;case nH:n="Reinhard";break;case rH:n="OptimizedCineon";break;case LR:n="ACESFilmic";break;case sH:n="AgX";break;case oH:n="Neutral";break;case iH:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Rde(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Dp).join(`
`)}function Pde(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Ide(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Dp(t){return t!==""}function nD(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rD(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Lde=/^[ \t]*#include +<([\w\d./]+)>/gm;function BT(t){return t.replace(Lde,Ode)}const kde=new Map;function Ode(t,e){let n=Ut[e];if(n===void 0){const r=kde.get(e);if(r!==void 0)n=Ut[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return BT(n)}const Nde=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iD(t){return t.replace(Nde,Dde)}function Dde(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function sD(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ude(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===xS?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Qp?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===eo&&(e="SHADOWMAP_TYPE_VSM"),e}function Fde(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Ua:case Jl:e="ENVMAP_TYPE_CUBE";break;case ph:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Bde(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Jl:e="ENVMAP_MODE_REFRACTION";break}return e}function zde(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Cg:e="ENVMAP_BLENDING_MULTIPLY";break;case Q5:e="ENVMAP_BLENDING_MIX";break;case eH:e="ENVMAP_BLENDING_ADD";break}return e}function Vde(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Hde(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Ude(n),c=Fde(n),u=Bde(n),d=zde(n),p=Vde(n),m=Rde(n),g=Pde(s),y=i.createProgram();let _,v,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Dp).join(`
`),_.length>0&&(_+=`
`),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g].filter(Dp).join(`
`),v.length>0&&(v+=`
`)):(_=[sD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Dp).join(`
`),v=[sD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==$o?"#define TONE_MAPPING":"",n.toneMapping!==$o?Ut.tonemapping_pars_fragment:"",n.toneMapping!==$o?Ade("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ut.colorspace_pars_fragment,Cde("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Dp).join(`
`)),o=BT(o),o=nD(o,n),o=rD(o,n),a=BT(a),a=nD(a,n),a=rD(a,n),o=iD(o),a=iD(a),n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,_=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",n.glslVersion===UT?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===UT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const w=S+_+o,E=S+v+a,R=eD(i,i.VERTEX_SHADER,w),A=eD(i,i.FRAGMENT_SHADER,E);i.attachShader(y,R),i.attachShader(y,A),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function M(N){if(t.debug.checkShaderErrors){const H=i.getProgramInfoLog(y).trim(),z=i.getShaderInfoLog(R).trim(),$=i.getShaderInfoLog(A).trim();let X=!0,q=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(X=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,y,R,A);else{const fe=tD(i,R,"vertex"),k=tD(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+H+`
`+fe+`
`+k)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(z===""||$==="")&&(q=!1);q&&(N.diagnostics={runnable:X,programLog:H,vertexShader:{log:z,prefix:_},fragmentShader:{log:$,prefix:v}})}i.deleteShader(R),i.deleteShader(A),L=new q0(i,y),P=Ide(i,y)}let L;this.getUniforms=function(){return L===void 0&&M(this),L};let P;this.getAttributes=function(){return P===void 0&&M(this),P};let C=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=i.getProgramParameter(y,bde)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Ede++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=R,this.fragmentShader=A,this}let jde=0;class Wde{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Gde(e),n.set(e,r)),r}}class Gde{constructor(e){this.id=jde++,this.code=e,this.usedTimes=0}}function $de(t,e,n,r,i,s,o){const a=new du,l=new Wde,c=new Set,u=[],d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(P){return c.add(P),P===0?"uv":`uv${P}`}function _(P,C,N,H,z){const $=H.fog,X=z.geometry,q=P.isMeshStandardMaterial?H.environment:null,fe=(P.isMeshStandardMaterial?n:e).get(P.envMap||q),k=fe&&fe.mapping===ph?fe.image.height:null,W=g[P.type];P.precision!==null&&(m=i.getMaxPrecision(P.precision),m!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",m,"instead."));const G=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,ee=G!==void 0?G.length:0;let ae=0;X.morphAttributes.position!==void 0&&(ae=1),X.morphAttributes.normal!==void 0&&(ae=2),X.morphAttributes.color!==void 0&&(ae=3);let Pe,re,ye,Ee;if(W){const le=so[W];Pe=le.vertexShader,re=le.fragmentShader}else Pe=P.vertexShader,re=P.fragmentShader,l.update(P),ye=l.getVertexShaderID(P),Ee=l.getFragmentShaderID(P);const xe=t.getRenderTarget(),it=z.isInstancedMesh===!0,dt=z.isBatchedMesh===!0,te=!!P.map,ut=!!P.matcap,he=!!fe,Se=!!P.aoMap,_e=!!P.lightMap,Le=!!P.bumpMap,Te=!!P.normalMap,He=!!P.displacementMap,nt=!!P.emissiveMap,B=!!P.metalnessMap,D=!!P.roughnessMap,J=P.anisotropy>0,de=P.clearcoat>0,pe=P.dispersion>0,we=P.iridescence>0,Qe=P.sheen>0,De=P.transmission>0,Fe=J&&!!P.anisotropyMap,Ct=de&&!!P.clearcoatMap,Oe=de&&!!P.clearcoatNormalMap,st=de&&!!P.clearcoatRoughnessMap,Et=we&&!!P.iridescenceMap,ft=we&&!!P.iridescenceThicknessMap,Xe=Qe&&!!P.sheenColorMap,At=Qe&&!!P.sheenRoughnessMap,zt=!!P.specularMap,Sn=!!P.specularColorMap,Mt=!!P.specularIntensityMap,Z=De&&!!P.transmissionMap,Ce=De&&!!P.thicknessMap,be=!!P.gradientMap,ze=!!P.alphaMap,Ge=P.alphaTest>0,$t=!!P.alphaHash,un=!!P.extensions;let Y=$o;P.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(Y=t.toneMapping);const ie={shaderID:W,shaderType:P.type,shaderName:P.name,vertexShader:Pe,fragmentShader:re,defines:P.defines,customVertexShaderID:ye,customFragmentShaderID:Ee,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:m,batching:dt,instancing:it,instancingColor:it&&z.instanceColor!==null,instancingMorph:it&&z.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:xe===null?t.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:$a,alphaToCoverage:!!P.alphaToCoverage,map:te,matcap:ut,envMap:he,envMapMode:he&&fe.mapping,envMapCubeUVHeight:k,aoMap:Se,lightMap:_e,bumpMap:Le,normalMap:Te,displacementMap:p&&He,emissiveMap:nt,normalMapObjectSpace:Te&&P.normalMapType===wH,normalMapTangentSpace:Te&&P.normalMapType===lc,metalnessMap:B,roughnessMap:D,anisotropy:J,anisotropyMap:Fe,clearcoat:de,clearcoatMap:Ct,clearcoatNormalMap:Oe,clearcoatRoughnessMap:st,dispersion:pe,iridescence:we,iridescenceMap:Et,iridescenceThicknessMap:ft,sheen:Qe,sheenColorMap:Xe,sheenRoughnessMap:At,specularMap:zt,specularColorMap:Sn,specularIntensityMap:Mt,transmission:De,transmissionMap:Z,thicknessMap:Ce,gradientMap:be,opaque:P.transparent===!1&&P.blending===lu&&P.alphaToCoverage===!1,alphaMap:ze,alphaTest:Ge,alphaHash:$t,combine:P.combine,mapUv:te&&y(P.map.channel),aoMapUv:Se&&y(P.aoMap.channel),lightMapUv:_e&&y(P.lightMap.channel),bumpMapUv:Le&&y(P.bumpMap.channel),normalMapUv:Te&&y(P.normalMap.channel),displacementMapUv:He&&y(P.displacementMap.channel),emissiveMapUv:nt&&y(P.emissiveMap.channel),metalnessMapUv:B&&y(P.metalnessMap.channel),roughnessMapUv:D&&y(P.roughnessMap.channel),anisotropyMapUv:Fe&&y(P.anisotropyMap.channel),clearcoatMapUv:Ct&&y(P.clearcoatMap.channel),clearcoatNormalMapUv:Oe&&y(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:st&&y(P.clearcoatRoughnessMap.channel),iridescenceMapUv:Et&&y(P.iridescenceMap.channel),iridescenceThicknessMapUv:ft&&y(P.iridescenceThicknessMap.channel),sheenColorMapUv:Xe&&y(P.sheenColorMap.channel),sheenRoughnessMapUv:At&&y(P.sheenRoughnessMap.channel),specularMapUv:zt&&y(P.specularMap.channel),specularColorMapUv:Sn&&y(P.specularColorMap.channel),specularIntensityMapUv:Mt&&y(P.specularIntensityMap.channel),transmissionMapUv:Z&&y(P.transmissionMap.channel),thicknessMapUv:Ce&&y(P.thicknessMap.channel),alphaMapUv:ze&&y(P.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(Te||J),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:z.isPoints===!0&&!!X.attributes.uv&&(te||ze),fog:!!$,useFog:P.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:z.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:ae,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:t.shadowMap.enabled&&N.length>0,shadowMapType:t.shadowMap.type,toneMapping:Y,useLegacyLights:t._useLegacyLights,decodeVideoTexture:te&&P.map.isVideoTexture===!0&&hn.getTransfer(P.map.colorSpace)===Mn,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===No,flipSided:P.side===wi,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:un&&P.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:un&&P.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return ie.vertexUv1s=c.has(1),ie.vertexUv2s=c.has(2),ie.vertexUv3s=c.has(3),c.clear(),ie}function v(P){const C=[];if(P.shaderID?C.push(P.shaderID):(C.push(P.customVertexShaderID),C.push(P.customFragmentShaderID)),P.defines!==void 0)for(const N in P.defines)C.push(N),C.push(P.defines[N]);return P.isRawShaderMaterial===!1&&(S(C,P),w(C,P),C.push(t.outputColorSpace)),C.push(P.customProgramCacheKey),C.join()}function S(P,C){P.push(C.precision),P.push(C.outputColorSpace),P.push(C.envMapMode),P.push(C.envMapCubeUVHeight),P.push(C.mapUv),P.push(C.alphaMapUv),P.push(C.lightMapUv),P.push(C.aoMapUv),P.push(C.bumpMapUv),P.push(C.normalMapUv),P.push(C.displacementMapUv),P.push(C.emissiveMapUv),P.push(C.metalnessMapUv),P.push(C.roughnessMapUv),P.push(C.anisotropyMapUv),P.push(C.clearcoatMapUv),P.push(C.clearcoatNormalMapUv),P.push(C.clearcoatRoughnessMapUv),P.push(C.iridescenceMapUv),P.push(C.iridescenceThicknessMapUv),P.push(C.sheenColorMapUv),P.push(C.sheenRoughnessMapUv),P.push(C.specularMapUv),P.push(C.specularColorMapUv),P.push(C.specularIntensityMapUv),P.push(C.transmissionMapUv),P.push(C.thicknessMapUv),P.push(C.combine),P.push(C.fogExp2),P.push(C.sizeAttenuation),P.push(C.morphTargetsCount),P.push(C.morphAttributeCount),P.push(C.numDirLights),P.push(C.numPointLights),P.push(C.numSpotLights),P.push(C.numSpotLightMaps),P.push(C.numHemiLights),P.push(C.numRectAreaLights),P.push(C.numDirLightShadows),P.push(C.numPointLightShadows),P.push(C.numSpotLightShadows),P.push(C.numSpotLightShadowsWithMaps),P.push(C.numLightProbes),P.push(C.shadowMapType),P.push(C.toneMapping),P.push(C.numClippingPlanes),P.push(C.numClipIntersection),P.push(C.depthPacking)}function w(P,C){a.disableAll(),C.supportsVertexTextures&&a.enable(0),C.instancing&&a.enable(1),C.instancingColor&&a.enable(2),C.instancingMorph&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),C.dispersion&&a.enable(20),P.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),C.alphaToCoverage&&a.enable(20),P.push(a.mask)}function E(P){const C=g[P.type];let N;if(C){const H=so[C];N=UH.clone(H.uniforms)}else N=P.uniforms;return N}function R(P,C){let N;for(let H=0,z=u.length;H<z;H++){const $=u[H];if($.cacheKey===C){N=$,++N.usedTimes;break}}return N===void 0&&(N=new Hde(t,C,P,s),u.push(N)),N}function A(P){if(--P.usedTimes===0){const C=u.indexOf(P);u[C]=u[u.length-1],u.pop(),P.destroy()}}function M(P){l.remove(P)}function L(){l.dispose()}return{getParameters:_,getProgramCacheKey:v,getUniforms:E,acquireProgram:R,releaseProgram:A,releaseShaderCache:M,programs:u,dispose:L}}function Xde(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function qde(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function oD(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function aD(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,p,m,g,y,_){let v=t[e];return v===void 0?(v={id:d.id,object:d,geometry:p,material:m,groupOrder:g,renderOrder:d.renderOrder,z:y,group:_},t[e]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=m,v.groupOrder=g,v.renderOrder=d.renderOrder,v.z=y,v.group=_),e++,v}function a(d,p,m,g,y,_){const v=o(d,p,m,g,y,_);m.transmission>0?r.push(v):m.transparent===!0?i.push(v):n.push(v)}function l(d,p,m,g,y,_){const v=o(d,p,m,g,y,_);m.transmission>0?r.unshift(v):m.transparent===!0?i.unshift(v):n.unshift(v)}function c(d,p){n.length>1&&n.sort(d||qde),r.length>1&&r.sort(p||oD),i.length>1&&i.sort(p||oD)}function u(){for(let d=e,p=t.length;d<p;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Yde(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new aD,t.set(r,[o])):i>=s.length?(o=new aD,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Kde(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new V,color:new $e};break;case"SpotLight":n={position:new V,direction:new V,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new V,color:new $e,distance:0,decay:0};break;case"HemisphereLight":n={direction:new V,skyColor:new $e,groundColor:new $e};break;case"RectAreaLight":n={color:new $e,position:new V,halfWidth:new V,halfHeight:new V};break}return t[e.id]=n,n}}}function Jde(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Zde=0;function Qde(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function efe(t){const e=new Kde,n=Jde(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new V);const i=new V,s=new wt,o=new wt;function a(c,u){let d=0,p=0,m=0;for(let N=0;N<9;N++)r.probe[N].set(0,0,0);let g=0,y=0,_=0,v=0,S=0,w=0,E=0,R=0,A=0,M=0,L=0;c.sort(Qde);const P=u===!0?Math.PI:1;for(let N=0,H=c.length;N<H;N++){const z=c[N],$=z.color,X=z.intensity,q=z.distance,fe=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)d+=$.r*X*P,p+=$.g*X*P,m+=$.b*X*P;else if(z.isLightProbe){for(let k=0;k<9;k++)r.probe[k].addScaledVector(z.sh.coefficients[k],X);L++}else if(z.isDirectionalLight){const k=e.get(z);if(k.color.copy(z.color).multiplyScalar(z.intensity*P),z.castShadow){const W=z.shadow,G=n.get(z);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,r.directionalShadow[g]=G,r.directionalShadowMap[g]=fe,r.directionalShadowMatrix[g]=z.shadow.matrix,w++}r.directional[g]=k,g++}else if(z.isSpotLight){const k=e.get(z);k.position.setFromMatrixPosition(z.matrixWorld),k.color.copy($).multiplyScalar(X*P),k.distance=q,k.coneCos=Math.cos(z.angle),k.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),k.decay=z.decay,r.spot[_]=k;const W=z.shadow;if(z.map&&(r.spotLightMap[A]=z.map,A++,W.updateMatrices(z),z.castShadow&&M++),r.spotLightMatrix[_]=W.matrix,z.castShadow){const G=n.get(z);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,r.spotShadow[_]=G,r.spotShadowMap[_]=fe,R++}_++}else if(z.isRectAreaLight){const k=e.get(z);k.color.copy($).multiplyScalar(X),k.halfWidth.set(z.width*.5,0,0),k.halfHeight.set(0,z.height*.5,0),r.rectArea[v]=k,v++}else if(z.isPointLight){const k=e.get(z);if(k.color.copy(z.color).multiplyScalar(z.intensity*P),k.distance=z.distance,k.decay=z.decay,z.castShadow){const W=z.shadow,G=n.get(z);G.shadowBias=W.bias,G.shadowNormalBias=W.normalBias,G.shadowRadius=W.radius,G.shadowMapSize=W.mapSize,G.shadowCameraNear=W.camera.near,G.shadowCameraFar=W.camera.far,r.pointShadow[y]=G,r.pointShadowMap[y]=fe,r.pointShadowMatrix[y]=z.shadow.matrix,E++}r.point[y]=k,y++}else if(z.isHemisphereLight){const k=e.get(z);k.skyColor.copy(z.color).multiplyScalar(X*P),k.groundColor.copy(z.groundColor).multiplyScalar(X*P),r.hemi[S]=k,S++}}v>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ve.LTC_FLOAT_1,r.rectAreaLTC2=Ve.LTC_FLOAT_2):(r.rectAreaLTC1=Ve.LTC_HALF_1,r.rectAreaLTC2=Ve.LTC_HALF_2)),r.ambient[0]=d,r.ambient[1]=p,r.ambient[2]=m;const C=r.hash;(C.directionalLength!==g||C.pointLength!==y||C.spotLength!==_||C.rectAreaLength!==v||C.hemiLength!==S||C.numDirectionalShadows!==w||C.numPointShadows!==E||C.numSpotShadows!==R||C.numSpotMaps!==A||C.numLightProbes!==L)&&(r.directional.length=g,r.spot.length=_,r.rectArea.length=v,r.point.length=y,r.hemi.length=S,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=R,r.spotShadowMap.length=R,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=R+A-M,r.spotLightMap.length=A,r.numSpotLightShadowsWithMaps=M,r.numLightProbes=L,C.directionalLength=g,C.pointLength=y,C.spotLength=_,C.rectAreaLength=v,C.hemiLength=S,C.numDirectionalShadows=w,C.numPointShadows=E,C.numSpotShadows=R,C.numSpotMaps=A,C.numLightProbes=L,r.version=Zde++)}function l(c,u){let d=0,p=0,m=0,g=0,y=0;const _=u.matrixWorldInverse;for(let v=0,S=c.length;v<S;v++){const w=c[v];if(w.isDirectionalLight){const E=r.directional[d];E.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(_),d++}else if(w.isSpotLight){const E=r.spot[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(_),E.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(_),m++}else if(w.isRectAreaLight){const E=r.rectArea[g];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(_),o.identity(),s.copy(w.matrixWorld),s.premultiply(_),o.extractRotation(s),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),g++}else if(w.isPointLight){const E=r.point[p];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(_),p++}else if(w.isHemisphereLight){const E=r.hemi[y];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(_),y++}}}return{setup:a,setupView:l,state:r}}function lD(t){const e=new efe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function o(u){r.push(u)}function a(u){e.setup(n,u)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function tfe(t){let e=new WeakMap;function n(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new lD(t),e.set(i,[a])):s>=o.length?(a=new lD(t),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:n,dispose:r}}class KR extends $r{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class JR extends $r{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const nfe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,rfe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ife(t,e,n){let r=new Lg;const i=new Me,s=new Me,o=new pn,a=new KR({depthPacking:SH}),l=new JR,c={},u=n.maxTextureSize,d={[Da]:wi,[wi]:Da,[No]:No},p=new Bs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:nfe,fragmentShader:rfe}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new Ft;g.setAttribute("position",new gn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new gr(g,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xS;let v=this.type;this.render=function(A,M,L){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||A.length===0)return;const P=t.getRenderTarget(),C=t.getActiveCubeFace(),N=t.getActiveMipmapLevel(),H=t.state;H.setBlending(Pa),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const z=v!==eo&&this.type===eo,$=v===eo&&this.type!==eo;for(let X=0,q=A.length;X<q;X++){const fe=A[X],k=fe.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",fe,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;i.copy(k.mapSize);const W=k.getFrameExtents();if(i.multiply(W),s.copy(k.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/W.x),i.x=s.x*W.x,k.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/W.y),i.y=s.y*W.y,k.mapSize.y=s.y)),k.map===null||z===!0||$===!0){const ee=this.type!==eo?{minFilter:Or,magFilter:Or}:{};k.map!==null&&k.map.dispose(),k.map=new mo(i.x,i.y,ee),k.map.texture.name=fe.name+".shadowMap",k.camera.updateProjectionMatrix()}t.setRenderTarget(k.map),t.clear();const G=k.getViewportCount();for(let ee=0;ee<G;ee++){const ae=k.getViewport(ee);o.set(s.x*ae.x,s.y*ae.y,s.x*ae.z,s.y*ae.w),H.viewport(o),k.updateMatrices(fe,ee),r=k.getFrustum(),E(M,L,k.camera,fe,this.type)}k.isPointLightShadow!==!0&&this.type===eo&&S(k,L),k.needsUpdate=!1}v=this.type,_.needsUpdate=!1,t.setRenderTarget(P,C,N)};function S(A,M){const L=e.update(y);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new mo(i.x,i.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,t.setRenderTarget(A.mapPass),t.clear(),t.renderBufferDirect(M,null,L,p,y,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,t.setRenderTarget(A.map),t.clear(),t.renderBufferDirect(M,null,L,m,y,null)}function w(A,M,L,P){let C=null;const N=L.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(N!==void 0)C=N;else if(C=L.isPointLight===!0?l:a,t.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const H=C.uuid,z=M.uuid;let $=c[H];$===void 0&&($={},c[H]=$);let X=$[z];X===void 0&&(X=C.clone(),$[z]=X,M.addEventListener("dispose",R)),C=X}if(C.visible=M.visible,C.wireframe=M.wireframe,P===eo?C.side=M.shadowSide!==null?M.shadowSide:M.side:C.side=M.shadowSide!==null?M.shadowSide:d[M.side],C.alphaMap=M.alphaMap,C.alphaTest=M.alphaTest,C.map=M.map,C.clipShadows=M.clipShadows,C.clippingPlanes=M.clippingPlanes,C.clipIntersection=M.clipIntersection,C.displacementMap=M.displacementMap,C.displacementScale=M.displacementScale,C.displacementBias=M.displacementBias,C.wireframeLinewidth=M.wireframeLinewidth,C.linewidth=M.linewidth,L.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const H=t.properties.get(C);H.light=L}return C}function E(A,M,L,P,C){if(A.visible===!1)return;if(A.layers.test(M.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&C===eo)&&(!A.frustumCulled||r.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,A.matrixWorld);const z=e.update(A),$=A.material;if(Array.isArray($)){const X=z.groups;for(let q=0,fe=X.length;q<fe;q++){const k=X[q],W=$[k.materialIndex];if(W&&W.visible){const G=w(A,W,P,C);A.onBeforeShadow(t,A,M,L,z,G,k),t.renderBufferDirect(L,null,z,G,A,k),A.onAfterShadow(t,A,M,L,z,G,k)}}}else if($.visible){const X=w(A,$,P,C);A.onBeforeShadow(t,A,M,L,z,X,null),t.renderBufferDirect(L,null,z,X,A,null),A.onAfterShadow(t,A,M,L,z,X,null)}}const H=A.children;for(let z=0,$=H.length;z<$;z++)E(H[z],M,L,P,C)}function R(A){A.target.removeEventListener("dispose",R);for(const L in c){const P=c[L],C=A.target.uuid;C in P&&(P[C].dispose(),delete P[C])}}}function sfe(t){function e(){let Z=!1;const Ce=new pn;let be=null;const ze=new pn(0,0,0,0);return{setMask:function(Ge){be!==Ge&&!Z&&(t.colorMask(Ge,Ge,Ge,Ge),be=Ge)},setLocked:function(Ge){Z=Ge},setClear:function(Ge,$t,un,Y,ie){ie===!0&&(Ge*=Y,$t*=Y,un*=Y),Ce.set(Ge,$t,un,Y),ze.equals(Ce)===!1&&(t.clearColor(Ge,$t,un,Y),ze.copy(Ce))},reset:function(){Z=!1,be=null,ze.set(-1,0,0,0)}}}function n(){let Z=!1,Ce=null,be=null,ze=null;return{setTest:function(Ge){Ge?Ee(t.DEPTH_TEST):xe(t.DEPTH_TEST)},setMask:function(Ge){Ce!==Ge&&!Z&&(t.depthMask(Ge),Ce=Ge)},setFunc:function(Ge){if(be!==Ge){switch(Ge){case $5:t.depthFunc(t.NEVER);break;case X5:t.depthFunc(t.ALWAYS);break;case q5:t.depthFunc(t.LESS);break;case Um:t.depthFunc(t.LEQUAL);break;case Y5:t.depthFunc(t.EQUAL);break;case K5:t.depthFunc(t.GEQUAL);break;case J5:t.depthFunc(t.GREATER);break;case Z5:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}be=Ge}},setLocked:function(Ge){Z=Ge},setClear:function(Ge){ze!==Ge&&(t.clearDepth(Ge),ze=Ge)},reset:function(){Z=!1,Ce=null,be=null,ze=null}}}function r(){let Z=!1,Ce=null,be=null,ze=null,Ge=null,$t=null,un=null,Y=null,ie=null;return{setTest:function(le){Z||(le?Ee(t.STENCIL_TEST):xe(t.STENCIL_TEST))},setMask:function(le){Ce!==le&&!Z&&(t.stencilMask(le),Ce=le)},setFunc:function(le,Re,Ue){(be!==le||ze!==Re||Ge!==Ue)&&(t.stencilFunc(le,Re,Ue),be=le,ze=Re,Ge=Ue)},setOp:function(le,Re,Ue){($t!==le||un!==Re||Y!==Ue)&&(t.stencilOp(le,Re,Ue),$t=le,un=Re,Y=Ue)},setLocked:function(le){Z=le},setClear:function(le){ie!==le&&(t.clearStencil(le),ie=le)},reset:function(){Z=!1,Ce=null,be=null,ze=null,Ge=null,$t=null,un=null,Y=null,ie=null}}}const i=new e,s=new n,o=new r,a=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,p=[],m=null,g=!1,y=null,_=null,v=null,S=null,w=null,E=null,R=null,A=new $e(0,0,0),M=0,L=!1,P=null,C=null,N=null,H=null,z=null;const $=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,q=0;const fe=t.getParameter(t.VERSION);fe.indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL (\d)/.exec(fe)[1]),X=q>=1):fe.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES (\d)/.exec(fe)[1]),X=q>=2);let k=null,W={};const G=t.getParameter(t.SCISSOR_BOX),ee=t.getParameter(t.VIEWPORT),ae=new pn().fromArray(G),Pe=new pn().fromArray(ee);function re(Z,Ce,be,ze){const Ge=new Uint8Array(4),$t=t.createTexture();t.bindTexture(Z,$t),t.texParameteri(Z,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Z,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let un=0;un<be;un++)Z===t.TEXTURE_3D||Z===t.TEXTURE_2D_ARRAY?t.texImage3D(Ce,0,t.RGBA,1,1,ze,0,t.RGBA,t.UNSIGNED_BYTE,Ge):t.texImage2D(Ce+un,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Ge);return $t}const ye={};ye[t.TEXTURE_2D]=re(t.TEXTURE_2D,t.TEXTURE_2D,1),ye[t.TEXTURE_CUBE_MAP]=re(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ye[t.TEXTURE_2D_ARRAY]=re(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ye[t.TEXTURE_3D]=re(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ee(t.DEPTH_TEST),s.setFunc(Um),Le(!1),Te(oT),Ee(t.CULL_FACE),Se(Pa);function Ee(Z){c[Z]!==!0&&(t.enable(Z),c[Z]=!0)}function xe(Z){c[Z]!==!1&&(t.disable(Z),c[Z]=!1)}function it(Z,Ce){return u[Z]!==Ce?(t.bindFramebuffer(Z,Ce),u[Z]=Ce,Z===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=Ce),Z===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=Ce),!0):!1}function dt(Z,Ce){let be=p,ze=!1;if(Z){be=d.get(Ce),be===void 0&&(be=[],d.set(Ce,be));const Ge=Z.textures;if(be.length!==Ge.length||be[0]!==t.COLOR_ATTACHMENT0){for(let $t=0,un=Ge.length;$t<un;$t++)be[$t]=t.COLOR_ATTACHMENT0+$t;be.length=Ge.length,ze=!0}}else be[0]!==t.BACK&&(be[0]=t.BACK,ze=!0);ze&&t.drawBuffers(be)}function te(Z){return m!==Z?(t.useProgram(Z),m=Z,!0):!1}const ut={[Il]:t.FUNC_ADD,[R5]:t.FUNC_SUBTRACT,[P5]:t.FUNC_REVERSE_SUBTRACT};ut[I5]=t.MIN,ut[L5]=t.MAX;const he={[k5]:t.ZERO,[O5]:t.ONE,[N5]:t.SRC_COLOR,[q_]:t.SRC_ALPHA,[V5]:t.SRC_ALPHA_SATURATE,[B5]:t.DST_COLOR,[U5]:t.DST_ALPHA,[D5]:t.ONE_MINUS_SRC_COLOR,[Y_]:t.ONE_MINUS_SRC_ALPHA,[z5]:t.ONE_MINUS_DST_COLOR,[F5]:t.ONE_MINUS_DST_ALPHA,[H5]:t.CONSTANT_COLOR,[j5]:t.ONE_MINUS_CONSTANT_COLOR,[W5]:t.CONSTANT_ALPHA,[G5]:t.ONE_MINUS_CONSTANT_ALPHA};function Se(Z,Ce,be,ze,Ge,$t,un,Y,ie,le){if(Z===Pa){g===!0&&(xe(t.BLEND),g=!1);return}if(g===!1&&(Ee(t.BLEND),g=!0),Z!==A5){if(Z!==y||le!==L){if((_!==Il||w!==Il)&&(t.blendEquation(t.FUNC_ADD),_=Il,w=Il),le)switch(Z){case lu:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case X_:t.blendFunc(t.ONE,t.ONE);break;case aT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case lT:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case lu:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case X_:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case aT:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case lT:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}v=null,S=null,E=null,R=null,A.set(0,0,0),M=0,y=Z,L=le}return}Ge=Ge||Ce,$t=$t||be,un=un||ze,(Ce!==_||Ge!==w)&&(t.blendEquationSeparate(ut[Ce],ut[Ge]),_=Ce,w=Ge),(be!==v||ze!==S||$t!==E||un!==R)&&(t.blendFuncSeparate(he[be],he[ze],he[$t],he[un]),v=be,S=ze,E=$t,R=un),(Y.equals(A)===!1||ie!==M)&&(t.blendColor(Y.r,Y.g,Y.b,ie),A.copy(Y),M=ie),y=Z,L=!1}function _e(Z,Ce){Z.side===No?xe(t.CULL_FACE):Ee(t.CULL_FACE);let be=Z.side===wi;Ce&&(be=!be),Le(be),Z.blending===lu&&Z.transparent===!1?Se(Pa):Se(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),s.setFunc(Z.depthFunc),s.setTest(Z.depthTest),s.setMask(Z.depthWrite),i.setMask(Z.colorWrite);const ze=Z.stencilWrite;o.setTest(ze),ze&&(o.setMask(Z.stencilWriteMask),o.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),o.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),nt(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?Ee(t.SAMPLE_ALPHA_TO_COVERAGE):xe(t.SAMPLE_ALPHA_TO_COVERAGE)}function Le(Z){P!==Z&&(Z?t.frontFace(t.CW):t.frontFace(t.CCW),P=Z)}function Te(Z){Z!==M5?(Ee(t.CULL_FACE),Z!==C&&(Z===oT?t.cullFace(t.BACK):Z===T5?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):xe(t.CULL_FACE),C=Z}function He(Z){Z!==N&&(X&&t.lineWidth(Z),N=Z)}function nt(Z,Ce,be){Z?(Ee(t.POLYGON_OFFSET_FILL),(H!==Ce||z!==be)&&(t.polygonOffset(Ce,be),H=Ce,z=be)):xe(t.POLYGON_OFFSET_FILL)}function B(Z){Z?Ee(t.SCISSOR_TEST):xe(t.SCISSOR_TEST)}function D(Z){Z===void 0&&(Z=t.TEXTURE0+$-1),k!==Z&&(t.activeTexture(Z),k=Z)}function J(Z,Ce,be){be===void 0&&(k===null?be=t.TEXTURE0+$-1:be=k);let ze=W[be];ze===void 0&&(ze={type:void 0,texture:void 0},W[be]=ze),(ze.type!==Z||ze.texture!==Ce)&&(k!==be&&(t.activeTexture(be),k=be),t.bindTexture(Z,Ce||ye[Z]),ze.type=Z,ze.texture=Ce)}function de(){const Z=W[k];Z!==void 0&&Z.type!==void 0&&(t.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function pe(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function we(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Qe(){try{t.texSubImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function De(){try{t.texSubImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Fe(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ct(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Oe(){try{t.texStorage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function st(){try{t.texStorage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Et(){try{t.texImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ft(){try{t.texImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Xe(Z){ae.equals(Z)===!1&&(t.scissor(Z.x,Z.y,Z.z,Z.w),ae.copy(Z))}function At(Z){Pe.equals(Z)===!1&&(t.viewport(Z.x,Z.y,Z.z,Z.w),Pe.copy(Z))}function zt(Z,Ce){let be=l.get(Ce);be===void 0&&(be=new WeakMap,l.set(Ce,be));let ze=be.get(Z);ze===void 0&&(ze=t.getUniformBlockIndex(Ce,Z.name),be.set(Z,ze))}function Sn(Z,Ce){const ze=l.get(Ce).get(Z);a.get(Ce)!==ze&&(t.uniformBlockBinding(Ce,ze,Z.__bindingPointIndex),a.set(Ce,ze))}function Mt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},k=null,W={},u={},d=new WeakMap,p=[],m=null,g=!1,y=null,_=null,v=null,S=null,w=null,E=null,R=null,A=new $e(0,0,0),M=0,L=!1,P=null,C=null,N=null,H=null,z=null,ae.set(0,0,t.canvas.width,t.canvas.height),Pe.set(0,0,t.canvas.width,t.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Ee,disable:xe,bindFramebuffer:it,drawBuffers:dt,useProgram:te,setBlending:Se,setMaterial:_e,setFlipSided:Le,setCullFace:Te,setLineWidth:He,setPolygonOffset:nt,setScissorTest:B,activeTexture:D,bindTexture:J,unbindTexture:de,compressedTexImage2D:pe,compressedTexImage3D:we,texImage2D:Et,texImage3D:ft,updateUBOMapping:zt,uniformBlockBinding:Sn,texStorage2D:Oe,texStorage3D:st,texSubImage2D:Qe,texSubImage3D:De,compressedTexSubImage2D:Fe,compressedTexSubImage3D:Ct,scissor:Xe,viewport:At,reset:Mt}}function ofe(t,e,n,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Me,u=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(B,D){return m?new OffscreenCanvas(B,D):Km("canvas")}function y(B,D,J){let de=1;const pe=nt(B);if((pe.width>J||pe.height>J)&&(de=J/Math.max(pe.width,pe.height)),de<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const we=Math.floor(de*pe.width),Qe=Math.floor(de*pe.height);d===void 0&&(d=g(we,Qe));const De=D?g(we,Qe):d;return De.width=we,De.height=Qe,De.getContext("2d").drawImage(B,0,0,we,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+we+"x"+Qe+")."),De}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),B;return B}function _(B){return B.generateMipmaps&&B.minFilter!==Or&&B.minFilter!==pr}function v(B){t.generateMipmap(B)}function S(B,D,J,de,pe=!1){if(B!==null){if(t[B]!==void 0)return t[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let we=D;if(D===t.RED&&(J===t.FLOAT&&(we=t.R32F),J===t.HALF_FLOAT&&(we=t.R16F),J===t.UNSIGNED_BYTE&&(we=t.R8)),D===t.RED_INTEGER&&(J===t.UNSIGNED_BYTE&&(we=t.R8UI),J===t.UNSIGNED_SHORT&&(we=t.R16UI),J===t.UNSIGNED_INT&&(we=t.R32UI),J===t.BYTE&&(we=t.R8I),J===t.SHORT&&(we=t.R16I),J===t.INT&&(we=t.R32I)),D===t.RG&&(J===t.FLOAT&&(we=t.RG32F),J===t.HALF_FLOAT&&(we=t.RG16F),J===t.UNSIGNED_BYTE&&(we=t.RG8)),D===t.RG_INTEGER&&(J===t.UNSIGNED_BYTE&&(we=t.RG8UI),J===t.UNSIGNED_SHORT&&(we=t.RG16UI),J===t.UNSIGNED_INT&&(we=t.RG32UI),J===t.BYTE&&(we=t.RG8I),J===t.SHORT&&(we=t.RG16I),J===t.INT&&(we=t.RG32I)),D===t.RGB&&J===t.UNSIGNED_INT_5_9_9_9_REV&&(we=t.RGB9_E5),D===t.RGBA){const Qe=pe?Gm:hn.getTransfer(de);J===t.FLOAT&&(we=t.RGBA32F),J===t.HALF_FLOAT&&(we=t.RGBA16F),J===t.UNSIGNED_BYTE&&(we=Qe===Mn?t.SRGB8_ALPHA8:t.RGBA8),J===t.UNSIGNED_SHORT_4_4_4_4&&(we=t.RGBA4),J===t.UNSIGNED_SHORT_5_5_5_1&&(we=t.RGB5_A1)}return(we===t.R16F||we===t.R32F||we===t.RG16F||we===t.RG32F||we===t.RGBA16F||we===t.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function w(B,D){return _(B)===!0||B.isFramebufferTexture&&B.minFilter!==Or&&B.minFilter!==pr?Math.log2(Math.max(D.width,D.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?D.mipmaps.length:1}function E(B){const D=B.target;D.removeEventListener("dispose",E),A(D),D.isVideoTexture&&u.delete(D)}function R(B){const D=B.target;D.removeEventListener("dispose",R),L(D)}function A(B){const D=r.get(B);if(D.__webglInit===void 0)return;const J=B.source,de=p.get(J);if(de){const pe=de[D.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&M(B),Object.keys(de).length===0&&p.delete(J)}r.remove(B)}function M(B){const D=r.get(B);t.deleteTexture(D.__webglTexture);const J=B.source,de=p.get(J);delete de[D.__cacheKey],o.memory.textures--}function L(B){const D=r.get(B);if(B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(D.__webglFramebuffer[de]))for(let pe=0;pe<D.__webglFramebuffer[de].length;pe++)t.deleteFramebuffer(D.__webglFramebuffer[de][pe]);else t.deleteFramebuffer(D.__webglFramebuffer[de]);D.__webglDepthbuffer&&t.deleteRenderbuffer(D.__webglDepthbuffer[de])}else{if(Array.isArray(D.__webglFramebuffer))for(let de=0;de<D.__webglFramebuffer.length;de++)t.deleteFramebuffer(D.__webglFramebuffer[de]);else t.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&t.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&t.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let de=0;de<D.__webglColorRenderbuffer.length;de++)D.__webglColorRenderbuffer[de]&&t.deleteRenderbuffer(D.__webglColorRenderbuffer[de]);D.__webglDepthRenderbuffer&&t.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const J=B.textures;for(let de=0,pe=J.length;de<pe;de++){const we=r.get(J[de]);we.__webglTexture&&(t.deleteTexture(we.__webglTexture),o.memory.textures--),r.remove(J[de])}r.remove(B)}let P=0;function C(){P=0}function N(){const B=P;return B>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+i.maxTextures),P+=1,B}function H(B){const D=[];return D.push(B.wrapS),D.push(B.wrapT),D.push(B.wrapR||0),D.push(B.magFilter),D.push(B.minFilter),D.push(B.anisotropy),D.push(B.internalFormat),D.push(B.format),D.push(B.type),D.push(B.generateMipmaps),D.push(B.premultiplyAlpha),D.push(B.flipY),D.push(B.unpackAlignment),D.push(B.colorSpace),D.join()}function z(B,D){const J=r.get(B);if(B.isVideoTexture&&Te(B),B.isRenderTargetTexture===!1&&B.version>0&&J.__version!==B.version){const de=B.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ae(J,B,D);return}}n.bindTexture(t.TEXTURE_2D,J.__webglTexture,t.TEXTURE0+D)}function $(B,D){const J=r.get(B);if(B.version>0&&J.__version!==B.version){ae(J,B,D);return}n.bindTexture(t.TEXTURE_2D_ARRAY,J.__webglTexture,t.TEXTURE0+D)}function X(B,D){const J=r.get(B);if(B.version>0&&J.__version!==B.version){ae(J,B,D);return}n.bindTexture(t.TEXTURE_3D,J.__webglTexture,t.TEXTURE0+D)}function q(B,D){const J=r.get(B);if(B.version>0&&J.__version!==B.version){Pe(J,B,D);return}n.bindTexture(t.TEXTURE_CUBE_MAP,J.__webglTexture,t.TEXTURE0+D)}const fe={[zm]:t.REPEAT,[ks]:t.CLAMP_TO_EDGE,[Vm]:t.MIRRORED_REPEAT},k={[Or]:t.NEAREST,[kR]:t.NEAREST_MIPMAP_NEAREST,[lf]:t.NEAREST_MIPMAP_LINEAR,[pr]:t.LINEAR,[em]:t.LINEAR_MIPMAP_NEAREST,[Uo]:t.LINEAR_MIPMAP_LINEAR},W={[bH]:t.NEVER,[RH]:t.ALWAYS,[EH]:t.LESS,[jR]:t.LEQUAL,[MH]:t.EQUAL,[AH]:t.GEQUAL,[TH]:t.GREATER,[CH]:t.NOTEQUAL};function G(B,D){if(D.type===Os&&e.has("OES_texture_float_linear")===!1&&(D.magFilter===pr||D.magFilter===em||D.magFilter===lf||D.magFilter===Uo||D.minFilter===pr||D.minFilter===em||D.minFilter===lf||D.minFilter===Uo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(B,t.TEXTURE_WRAP_S,fe[D.wrapS]),t.texParameteri(B,t.TEXTURE_WRAP_T,fe[D.wrapT]),(B===t.TEXTURE_3D||B===t.TEXTURE_2D_ARRAY)&&t.texParameteri(B,t.TEXTURE_WRAP_R,fe[D.wrapR]),t.texParameteri(B,t.TEXTURE_MAG_FILTER,k[D.magFilter]),t.texParameteri(B,t.TEXTURE_MIN_FILTER,k[D.minFilter]),D.compareFunction&&(t.texParameteri(B,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(B,t.TEXTURE_COMPARE_FUNC,W[D.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(D.magFilter===Or||D.minFilter!==lf&&D.minFilter!==Uo||D.type===Os&&e.has("OES_texture_float_linear")===!1)return;if(D.anisotropy>1||r.get(D).__currentAnisotropy){const J=e.get("EXT_texture_filter_anisotropic");t.texParameterf(B,J.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),r.get(D).__currentAnisotropy=D.anisotropy}}}function ee(B,D){let J=!1;B.__webglInit===void 0&&(B.__webglInit=!0,D.addEventListener("dispose",E));const de=D.source;let pe=p.get(de);pe===void 0&&(pe={},p.set(de,pe));const we=H(D);if(we!==B.__cacheKey){pe[we]===void 0&&(pe[we]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,J=!0),pe[we].usedTimes++;const Qe=pe[B.__cacheKey];Qe!==void 0&&(pe[B.__cacheKey].usedTimes--,Qe.usedTimes===0&&M(D)),B.__cacheKey=we,B.__webglTexture=pe[we].texture}return J}function ae(B,D,J){let de=t.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(de=t.TEXTURE_2D_ARRAY),D.isData3DTexture&&(de=t.TEXTURE_3D);const pe=ee(B,D),we=D.source;n.bindTexture(de,B.__webglTexture,t.TEXTURE0+J);const Qe=r.get(we);if(we.version!==Qe.__version||pe===!0){n.activeTexture(t.TEXTURE0+J);const De=hn.getPrimaries(hn.workingColorSpace),Fe=D.colorSpace===va?null:hn.getPrimaries(D.colorSpace),Ct=D.colorSpace===va||De===Fe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let Oe=y(D.image,!1,i.maxTextureSize);Oe=He(D,Oe);const st=s.convert(D.format,D.colorSpace),Et=s.convert(D.type);let ft=S(D.internalFormat,st,Et,D.colorSpace,D.isVideoTexture);G(de,D);let Xe;const At=D.mipmaps,zt=D.isVideoTexture!==!0,Sn=Qe.__version===void 0||pe===!0,Mt=we.dataReady,Z=w(D,Oe);if(D.isDepthTexture)ft=t.DEPTH_COMPONENT16,D.type===Os?ft=t.DEPTH_COMPONENT32F:D.type===Tu?ft=t.DEPTH_COMPONENT24:D.type===mh&&(ft=t.DEPTH24_STENCIL8),Sn&&(zt?n.texStorage2D(t.TEXTURE_2D,1,ft,Oe.width,Oe.height):n.texImage2D(t.TEXTURE_2D,0,ft,Oe.width,Oe.height,0,st,Et,null));else if(D.isDataTexture)if(At.length>0){zt&&Sn&&n.texStorage2D(t.TEXTURE_2D,Z,ft,At[0].width,At[0].height);for(let Ce=0,be=At.length;Ce<be;Ce++)Xe=At[Ce],zt?Mt&&n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,Xe.width,Xe.height,st,Et,Xe.data):n.texImage2D(t.TEXTURE_2D,Ce,ft,Xe.width,Xe.height,0,st,Et,Xe.data);D.generateMipmaps=!1}else zt?(Sn&&n.texStorage2D(t.TEXTURE_2D,Z,ft,Oe.width,Oe.height),Mt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Oe.width,Oe.height,st,Et,Oe.data)):n.texImage2D(t.TEXTURE_2D,0,ft,Oe.width,Oe.height,0,st,Et,Oe.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){zt&&Sn&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Z,ft,At[0].width,At[0].height,Oe.depth);for(let Ce=0,be=At.length;Ce<be;Ce++)Xe=At[Ce],D.format!==Ni?st!==null?zt?Mt&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ce,0,0,0,Xe.width,Xe.height,Oe.depth,st,Xe.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ce,ft,Xe.width,Xe.height,Oe.depth,0,Xe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zt?Mt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ce,0,0,0,Xe.width,Xe.height,Oe.depth,st,Et,Xe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ce,ft,Xe.width,Xe.height,Oe.depth,0,st,Et,Xe.data)}else{zt&&Sn&&n.texStorage2D(t.TEXTURE_2D,Z,ft,At[0].width,At[0].height);for(let Ce=0,be=At.length;Ce<be;Ce++)Xe=At[Ce],D.format!==Ni?st!==null?zt?Mt&&n.compressedTexSubImage2D(t.TEXTURE_2D,Ce,0,0,Xe.width,Xe.height,st,Xe.data):n.compressedTexImage2D(t.TEXTURE_2D,Ce,ft,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):zt?Mt&&n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,Xe.width,Xe.height,st,Et,Xe.data):n.texImage2D(t.TEXTURE_2D,Ce,ft,Xe.width,Xe.height,0,st,Et,Xe.data)}else if(D.isDataArrayTexture)zt?(Sn&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Z,ft,Oe.width,Oe.height,Oe.depth),Mt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,st,Et,Oe.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,ft,Oe.width,Oe.height,Oe.depth,0,st,Et,Oe.data);else if(D.isData3DTexture)zt?(Sn&&n.texStorage3D(t.TEXTURE_3D,Z,ft,Oe.width,Oe.height,Oe.depth),Mt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,st,Et,Oe.data)):n.texImage3D(t.TEXTURE_3D,0,ft,Oe.width,Oe.height,Oe.depth,0,st,Et,Oe.data);else if(D.isFramebufferTexture){if(Sn)if(zt)n.texStorage2D(t.TEXTURE_2D,Z,ft,Oe.width,Oe.height);else{let Ce=Oe.width,be=Oe.height;for(let ze=0;ze<Z;ze++)n.texImage2D(t.TEXTURE_2D,ze,ft,Ce,be,0,st,Et,null),Ce>>=1,be>>=1}}else if(At.length>0){if(zt&&Sn){const Ce=nt(At[0]);n.texStorage2D(t.TEXTURE_2D,Z,ft,Ce.width,Ce.height)}for(let Ce=0,be=At.length;Ce<be;Ce++)Xe=At[Ce],zt?Mt&&n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,st,Et,Xe):n.texImage2D(t.TEXTURE_2D,Ce,ft,st,Et,Xe);D.generateMipmaps=!1}else if(zt){if(Sn){const Ce=nt(Oe);n.texStorage2D(t.TEXTURE_2D,Z,ft,Ce.width,Ce.height)}Mt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,st,Et,Oe)}else n.texImage2D(t.TEXTURE_2D,0,ft,st,Et,Oe);_(D)&&v(de),Qe.__version=we.version,D.onUpdate&&D.onUpdate(D)}B.__version=D.version}function Pe(B,D,J){if(D.image.length!==6)return;const de=ee(B,D),pe=D.source;n.bindTexture(t.TEXTURE_CUBE_MAP,B.__webglTexture,t.TEXTURE0+J);const we=r.get(pe);if(pe.version!==we.__version||de===!0){n.activeTexture(t.TEXTURE0+J);const Qe=hn.getPrimaries(hn.workingColorSpace),De=D.colorSpace===va?null:hn.getPrimaries(D.colorSpace),Fe=D.colorSpace===va||Qe===De?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,D.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,D.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const Ct=D.isCompressedTexture||D.image[0].isCompressedTexture,Oe=D.image[0]&&D.image[0].isDataTexture,st=[];for(let be=0;be<6;be++)!Ct&&!Oe?st[be]=y(D.image[be],!0,i.maxCubemapSize):st[be]=Oe?D.image[be].image:D.image[be],st[be]=He(D,st[be]);const Et=st[0],ft=s.convert(D.format,D.colorSpace),Xe=s.convert(D.type),At=S(D.internalFormat,ft,Xe,D.colorSpace),zt=D.isVideoTexture!==!0,Sn=we.__version===void 0||de===!0,Mt=pe.dataReady;let Z=w(D,Et);G(t.TEXTURE_CUBE_MAP,D);let Ce;if(Ct){zt&&Sn&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Z,At,Et.width,Et.height);for(let be=0;be<6;be++){Ce=st[be].mipmaps;for(let ze=0;ze<Ce.length;ze++){const Ge=Ce[ze];D.format!==Ni?ft!==null?zt?Mt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,0,0,Ge.width,Ge.height,ft,Ge.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,At,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):zt?Mt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,0,0,Ge.width,Ge.height,ft,Xe,Ge.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze,At,Ge.width,Ge.height,0,ft,Xe,Ge.data)}}}else{if(Ce=D.mipmaps,zt&&Sn){Ce.length>0&&Z++;const be=nt(st[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Z,At,be.width,be.height)}for(let be=0;be<6;be++)if(Oe){zt?Mt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,0,0,st[be].width,st[be].height,ft,Xe,st[be].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,At,st[be].width,st[be].height,0,ft,Xe,st[be].data);for(let ze=0;ze<Ce.length;ze++){const $t=Ce[ze].image[be].image;zt?Mt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,0,0,$t.width,$t.height,ft,Xe,$t.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,At,$t.width,$t.height,0,ft,Xe,$t.data)}}else{zt?Mt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,0,0,ft,Xe,st[be]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,0,At,ft,Xe,st[be]);for(let ze=0;ze<Ce.length;ze++){const Ge=Ce[ze];zt?Mt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,0,0,ft,Xe,Ge.image[be]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+be,ze+1,At,ft,Xe,Ge.image[be])}}}_(D)&&v(t.TEXTURE_CUBE_MAP),we.__version=pe.version,D.onUpdate&&D.onUpdate(D)}B.__version=D.version}function re(B,D,J,de,pe,we){const Qe=s.convert(J.format,J.colorSpace),De=s.convert(J.type),Fe=S(J.internalFormat,Qe,De,J.colorSpace);if(!r.get(D).__hasExternalTextures){const Oe=Math.max(1,D.width>>we),st=Math.max(1,D.height>>we);pe===t.TEXTURE_3D||pe===t.TEXTURE_2D_ARRAY?n.texImage3D(pe,we,Fe,Oe,st,D.depth,0,Qe,De,null):n.texImage2D(pe,we,Fe,Oe,st,0,Qe,De,null)}n.bindFramebuffer(t.FRAMEBUFFER,B),Le(D)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,de,pe,r.get(J).__webglTexture,0,_e(D)):(pe===t.TEXTURE_2D||pe>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&pe<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,de,pe,r.get(J).__webglTexture,we),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ye(B,D,J){if(t.bindRenderbuffer(t.RENDERBUFFER,B),D.depthBuffer&&!D.stencilBuffer){let de=t.DEPTH_COMPONENT24;if(J||Le(D)){const pe=D.depthTexture;pe&&pe.isDepthTexture&&(pe.type===Os?de=t.DEPTH_COMPONENT32F:pe.type===Tu&&(de=t.DEPTH_COMPONENT24));const we=_e(D);Le(D)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,we,de,D.width,D.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,we,de,D.width,D.height)}else t.renderbufferStorage(t.RENDERBUFFER,de,D.width,D.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,B)}else if(D.depthBuffer&&D.stencilBuffer){const de=_e(D);J&&Le(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,de,t.DEPTH24_STENCIL8,D.width,D.height):Le(D)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,de,t.DEPTH24_STENCIL8,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,D.width,D.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,B)}else{const de=D.textures;for(let pe=0;pe<de.length;pe++){const we=de[pe],Qe=s.convert(we.format,we.colorSpace),De=s.convert(we.type),Fe=S(we.internalFormat,Qe,De,we.colorSpace),Ct=_e(D);J&&Le(D)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ct,Fe,D.width,D.height):Le(D)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ct,Fe,D.width,D.height):t.renderbufferStorage(t.RENDERBUFFER,Fe,D.width,D.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ee(B,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,B),!(D.depthTexture&&D.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),z(D.depthTexture,0);const de=r.get(D.depthTexture).__webglTexture,pe=_e(D);if(D.depthTexture.format===cu)Le(D)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0,pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0);else if(D.depthTexture.format===jf)Le(D)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0,pe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0);else throw new Error("Unknown depthTexture format")}function xe(B){const D=r.get(B),J=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture&&!D.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");Ee(D.__webglFramebuffer,B)}else if(J){D.__webglDepthbuffer=[];for(let de=0;de<6;de++)n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer[de]),D.__webglDepthbuffer[de]=t.createRenderbuffer(),ye(D.__webglDepthbuffer[de],B,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=t.createRenderbuffer(),ye(D.__webglDepthbuffer,B,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function it(B,D,J){const de=r.get(B);D!==void 0&&re(de.__webglFramebuffer,B,B.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),J!==void 0&&xe(B)}function dt(B){const D=B.texture,J=r.get(B),de=r.get(D);B.addEventListener("dispose",R);const pe=B.textures,we=B.isWebGLCubeRenderTarget===!0,Qe=pe.length>1;if(Qe||(de.__webglTexture===void 0&&(de.__webglTexture=t.createTexture()),de.__version=D.version,o.memory.textures++),we){J.__webglFramebuffer=[];for(let De=0;De<6;De++)if(D.mipmaps&&D.mipmaps.length>0){J.__webglFramebuffer[De]=[];for(let Fe=0;Fe<D.mipmaps.length;Fe++)J.__webglFramebuffer[De][Fe]=t.createFramebuffer()}else J.__webglFramebuffer[De]=t.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){J.__webglFramebuffer=[];for(let De=0;De<D.mipmaps.length;De++)J.__webglFramebuffer[De]=t.createFramebuffer()}else J.__webglFramebuffer=t.createFramebuffer();if(Qe)for(let De=0,Fe=pe.length;De<Fe;De++){const Ct=r.get(pe[De]);Ct.__webglTexture===void 0&&(Ct.__webglTexture=t.createTexture(),o.memory.textures++)}if(B.samples>0&&Le(B)===!1){J.__webglMultisampledFramebuffer=t.createFramebuffer(),J.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,J.__webglMultisampledFramebuffer);for(let De=0;De<pe.length;De++){const Fe=pe[De];J.__webglColorRenderbuffer[De]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,J.__webglColorRenderbuffer[De]);const Ct=s.convert(Fe.format,Fe.colorSpace),Oe=s.convert(Fe.type),st=S(Fe.internalFormat,Ct,Oe,Fe.colorSpace,B.isXRRenderTarget===!0),Et=_e(B);t.renderbufferStorageMultisample(t.RENDERBUFFER,Et,st,B.width,B.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+De,t.RENDERBUFFER,J.__webglColorRenderbuffer[De])}t.bindRenderbuffer(t.RENDERBUFFER,null),B.depthBuffer&&(J.__webglDepthRenderbuffer=t.createRenderbuffer(),ye(J.__webglDepthRenderbuffer,B,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(we){n.bindTexture(t.TEXTURE_CUBE_MAP,de.__webglTexture),G(t.TEXTURE_CUBE_MAP,D);for(let De=0;De<6;De++)if(D.mipmaps&&D.mipmaps.length>0)for(let Fe=0;Fe<D.mipmaps.length;Fe++)re(J.__webglFramebuffer[De][Fe],B,D,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Fe);else re(J.__webglFramebuffer[De],B,D,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+De,0);_(D)&&v(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Qe){for(let De=0,Fe=pe.length;De<Fe;De++){const Ct=pe[De],Oe=r.get(Ct);n.bindTexture(t.TEXTURE_2D,Oe.__webglTexture),G(t.TEXTURE_2D,Ct),re(J.__webglFramebuffer,B,Ct,t.COLOR_ATTACHMENT0+De,t.TEXTURE_2D,0),_(Ct)&&v(t.TEXTURE_2D)}n.unbindTexture()}else{let De=t.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(De=B.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(De,de.__webglTexture),G(De,D),D.mipmaps&&D.mipmaps.length>0)for(let Fe=0;Fe<D.mipmaps.length;Fe++)re(J.__webglFramebuffer[Fe],B,D,t.COLOR_ATTACHMENT0,De,Fe);else re(J.__webglFramebuffer,B,D,t.COLOR_ATTACHMENT0,De,0);_(D)&&v(De),n.unbindTexture()}B.depthBuffer&&xe(B)}function te(B){const D=B.textures;for(let J=0,de=D.length;J<de;J++){const pe=D[J];if(_(pe)){const we=B.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Qe=r.get(pe).__webglTexture;n.bindTexture(we,Qe),v(we),n.unbindTexture()}}}const ut=[],he=[];function Se(B){if(B.samples>0){if(Le(B)===!1){const D=B.textures,J=B.width,de=B.height;let pe=t.COLOR_BUFFER_BIT;const we=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Qe=r.get(B),De=D.length>1;if(De)for(let Fe=0;Fe<D.length;Fe++)n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer);for(let Fe=0;Fe<D.length;Fe++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(pe|=t.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(pe|=t.STENCIL_BUFFER_BIT)),De){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Qe.__webglColorRenderbuffer[Fe]);const Ct=r.get(D[Fe]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ct,0)}t.blitFramebuffer(0,0,J,de,0,0,J,de,pe,t.NEAREST),l===!0&&(ut.length=0,he.length=0,ut.push(t.COLOR_ATTACHMENT0+Fe),B.depthBuffer&&B.resolveDepthBuffer===!1&&(ut.push(we),he.push(we),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,he)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ut))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),De)for(let Fe=0;Fe<D.length;Fe++){n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.RENDERBUFFER,Qe.__webglColorRenderbuffer[Fe]);const Ct=r.get(D[Fe]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Qe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Fe,t.TEXTURE_2D,Ct,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const D=B.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[D])}}}function _e(B){return Math.min(i.maxSamples,B.samples)}function Le(B){const D=r.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&D.__useRenderToTexture!==!1}function Te(B){const D=o.render.frame;u.get(B)!==D&&(u.set(B,D),B.update())}function He(B,D){const J=B.colorSpace,de=B.format,pe=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||J!==$a&&J!==va&&(hn.getTransfer(J)===Mn?(de!==Ni||pe!==Yo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",J)),D}function nt(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(c.width=B.naturalWidth||B.width,c.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(c.width=B.displayWidth,c.height=B.displayHeight):(c.width=B.width,c.height=B.height),c}this.allocateTextureUnit=N,this.resetTextureUnits=C,this.setTexture2D=z,this.setTexture2DArray=$,this.setTexture3D=X,this.setTextureCube=q,this.rebindTextures=it,this.setupRenderTarget=dt,this.updateRenderTargetMipmap=te,this.updateMultisampleRenderTarget=Se,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=re,this.useMultisampledRTT=Le}function $H(t,e){function n(r,i=va){let s;const o=hn.getTransfer(i);if(r===Yo)return t.UNSIGNED_BYTE;if(r===DR)return t.UNSIGNED_SHORT_4_4_4_4;if(r===UR)return t.UNSIGNED_SHORT_5_5_5_1;if(r===uH)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===lH)return t.BYTE;if(r===cH)return t.SHORT;if(r===OR)return t.UNSIGNED_SHORT;if(r===NR)return t.INT;if(r===Tu)return t.UNSIGNED_INT;if(r===Os)return t.FLOAT;if(r===Ag)return t.HALF_FLOAT;if(r===dH)return t.ALPHA;if(r===fH)return t.RGB;if(r===Ni)return t.RGBA;if(r===hH)return t.LUMINANCE;if(r===pH)return t.LUMINANCE_ALPHA;if(r===cu)return t.DEPTH_COMPONENT;if(r===jf)return t.DEPTH_STENCIL;if(r===FR)return t.RED;if(r===BR)return t.RED_INTEGER;if(r===mH)return t.RG;if(r===zR)return t.RG_INTEGER;if(r===VR)return t.RGBA_INTEGER;if(r===H0||r===j0||r===W0||r===G0)if(o===Mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===H0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===j0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===W0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===G0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===H0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===j0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===W0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===G0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===uT||r===dT||r===fT||r===hT)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===uT)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===dT)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===fT)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===hT)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===pT||r===mT||r===gT)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===pT||r===mT)return o===Mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===gT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===vT||r===yT||r===_T||r===xT||r===ST||r===wT||r===bT||r===ET||r===MT||r===TT||r===CT||r===AT||r===RT||r===PT)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===vT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===yT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===_T)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===xT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===ST)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===wT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===bT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===ET)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===MT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===TT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===CT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===AT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===RT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===PT)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===$0||r===IT||r===LT)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===$0)return o===Mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===IT)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===LT)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===gH||r===kT||r===OT||r===NT)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===$0)return s.COMPRESSED_RED_RGTC1_EXT;if(r===kT)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===OT)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===NT)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===mh?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}class XH extends kr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class df extends on{constructor(){super(),this.isGroup=!0,this.type="Group"}}const afe={type:"move"};class Hb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new df,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new df,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new df,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const _=n.getJointPose(y,r),v=this._getHandJoint(c,y);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=_.radius),v.visible=_!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(afe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new df;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const lfe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,cfe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ufe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Xn,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new Bs({vertexShader:lfe,fragmentShader:cfe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new gr(new vh(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class dfe extends Xa{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,g=null;const y=new ufe,_=n.getContextAttributes();let v=null,S=null;const w=[],E=[],R=new Me;let A=null;const M=new kr;M.layers.enable(1),M.viewport=new pn;const L=new kr;L.layers.enable(2),L.viewport=new pn;const P=[M,L],C=new XH;C.layers.enable(1),C.layers.enable(2);let N=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let ye=w[re];return ye===void 0&&(ye=new Hb,w[re]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(re){let ye=w[re];return ye===void 0&&(ye=new Hb,w[re]=ye),ye.getGripSpace()},this.getHand=function(re){let ye=w[re];return ye===void 0&&(ye=new Hb,w[re]=ye),ye.getHandSpace()};function z(re){const ye=E.indexOf(re.inputSource);if(ye===-1)return;const Ee=w[ye];Ee!==void 0&&(Ee.update(re.inputSource,re.frame,c||o),Ee.dispatchEvent({type:re.type,data:re.inputSource}))}function $(){i.removeEventListener("select",z),i.removeEventListener("selectstart",z),i.removeEventListener("selectend",z),i.removeEventListener("squeeze",z),i.removeEventListener("squeezestart",z),i.removeEventListener("squeezeend",z),i.removeEventListener("end",$),i.removeEventListener("inputsourceschange",X);for(let re=0;re<w.length;re++){const ye=E[re];ye!==null&&(E[re]=null,w[re].disconnect(ye))}N=null,H=null,y.reset(),e.setRenderTarget(v),m=null,p=null,d=null,i=null,S=null,Pe.stop(),r.isPresenting=!1,e.setPixelRatio(A),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){a=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(re){c=re},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",z),i.addEventListener("selectstart",z),i.addEventListener("selectend",z),i.addEventListener("squeeze",z),i.addEventListener("squeezestart",z),i.addEventListener("squeezeend",z),i.addEventListener("end",$),i.addEventListener("inputsourceschange",X),_.xrCompatible!==!0&&await n.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(R),i.renderState.layers===void 0){const ye={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,ye),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new mo(m.framebufferWidth,m.framebufferHeight,{format:Ni,type:Yo,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let ye=null,Ee=null,xe=null;_.depth&&(xe=_.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ye=_.stencil?jf:cu,Ee=_.stencil?mh:Tu);const it={colorFormat:n.RGBA8,depthFormat:xe,scaleFactor:s};d=new XRWebGLBinding(i,n),p=d.createProjectionLayer(it),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new mo(p.textureWidth,p.textureHeight,{format:Ni,type:Yo,depthTexture:new YR(p.textureWidth,p.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Pe.setContext(i),Pe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function X(re){for(let ye=0;ye<re.removed.length;ye++){const Ee=re.removed[ye],xe=E.indexOf(Ee);xe>=0&&(E[xe]=null,w[xe].disconnect(Ee))}for(let ye=0;ye<re.added.length;ye++){const Ee=re.added[ye];let xe=E.indexOf(Ee);if(xe===-1){for(let dt=0;dt<w.length;dt++)if(dt>=E.length){E.push(Ee),xe=dt;break}else if(E[dt]===null){E[dt]=Ee,xe=dt;break}if(xe===-1)break}const it=w[xe];it&&it.connect(Ee)}}const q=new V,fe=new V;function k(re,ye,Ee){q.setFromMatrixPosition(ye.matrixWorld),fe.setFromMatrixPosition(Ee.matrixWorld);const xe=q.distanceTo(fe),it=ye.projectionMatrix.elements,dt=Ee.projectionMatrix.elements,te=it[14]/(it[10]-1),ut=it[14]/(it[10]+1),he=(it[9]+1)/it[5],Se=(it[9]-1)/it[5],_e=(it[8]-1)/it[0],Le=(dt[8]+1)/dt[0],Te=te*_e,He=te*Le,nt=xe/(-_e+Le),B=nt*-_e;ye.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(B),re.translateZ(nt),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const D=te+nt,J=ut+nt,de=Te-B,pe=He+(xe-B),we=he*ut/J*D,Qe=Se*ut/J*D;re.projectionMatrix.makePerspective(de,pe,we,Qe,D,J),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}function W(re,ye){ye===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(ye.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;y.texture!==null&&(re.near=y.depthNear,re.far=y.depthFar),C.near=L.near=M.near=re.near,C.far=L.far=M.far=re.far,(N!==C.near||H!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),N=C.near,H=C.far,M.near=N,M.far=H,L.near=N,L.far=H,M.updateProjectionMatrix(),L.updateProjectionMatrix(),re.updateProjectionMatrix());const ye=re.parent,Ee=C.cameras;W(C,ye);for(let xe=0;xe<Ee.length;xe++)W(Ee[xe],ye);Ee.length===2?k(C,M,L):C.projectionMatrix.copy(M.projectionMatrix),G(re,C,ye)};function G(re,ye,Ee){Ee===null?re.matrix.copy(ye.matrixWorld):(re.matrix.copy(Ee.matrixWorld),re.matrix.invert(),re.matrix.multiply(ye.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(ye.projectionMatrix),re.projectionMatrixInverse.copy(ye.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=Wf*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(re){l=re,p!==null&&(p.fixedFoveation=re),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=re)},this.hasDepthSensing=function(){return y.texture!==null};let ee=null;function ae(re,ye){if(u=ye.getViewerPose(c||o),g=ye,u!==null){const Ee=u.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let xe=!1;Ee.length!==C.cameras.length&&(C.cameras.length=0,xe=!0);for(let dt=0;dt<Ee.length;dt++){const te=Ee[dt];let ut=null;if(m!==null)ut=m.getViewport(te);else{const Se=d.getViewSubImage(p,te);ut=Se.viewport,dt===0&&(e.setRenderTargetTextures(S,Se.colorTexture,p.ignoreDepthValues?void 0:Se.depthStencilTexture),e.setRenderTarget(S))}let he=P[dt];he===void 0&&(he=new kr,he.layers.enable(dt),he.viewport=new pn,P[dt]=he),he.matrix.fromArray(te.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(te.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(ut.x,ut.y,ut.width,ut.height),dt===0&&(C.matrix.copy(he.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),xe===!0&&C.cameras.push(he)}const it=i.enabledFeatures;if(it&&it.includes("depth-sensing")){const dt=d.getDepthInformation(Ee[0]);dt&&dt.isValid&&dt.texture&&y.init(e,dt,i.renderState)}}for(let Ee=0;Ee<w.length;Ee++){const xe=E[Ee],it=w[Ee];xe!==null&&it!==void 0&&it.update(xe,ye,c||o)}y.render(e,C),ee&&ee(re,ye),ye.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ye}),g=null}const Pe=new zH;Pe.setAnimationLoop(ae),this.setAnimationLoop=function(re){ee=re},this.dispose=function(){}}}const Rc=new ls,ffe=new wt;function hfe(t,e){function n(_,v){_.matrixAutoUpdate===!0&&_.updateMatrix(),v.value.copy(_.matrix)}function r(_,v){v.color.getRGB(_.fogColor.value,DH(t)),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function i(_,v,S,w,E){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(_,v):v.isMeshToonMaterial?(s(_,v),d(_,v)):v.isMeshPhongMaterial?(s(_,v),u(_,v)):v.isMeshStandardMaterial?(s(_,v),p(_,v),v.isMeshPhysicalMaterial&&m(_,v,E)):v.isMeshMatcapMaterial?(s(_,v),g(_,v)):v.isMeshDepthMaterial?s(_,v):v.isMeshDistanceMaterial?(s(_,v),y(_,v)):v.isMeshNormalMaterial?s(_,v):v.isLineBasicMaterial?(o(_,v),v.isLineDashedMaterial&&a(_,v)):v.isPointsMaterial?l(_,v,S,w):v.isSpriteMaterial?c(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map,n(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,n(v.alphaMap,_.alphaMapTransform)),v.bumpMap&&(_.bumpMap.value=v.bumpMap,n(v.bumpMap,_.bumpMapTransform),_.bumpScale.value=v.bumpScale,v.side===wi&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,n(v.normalMap,_.normalMapTransform),_.normalScale.value.copy(v.normalScale),v.side===wi&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,n(v.displacementMap,_.displacementMapTransform),_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,_.emissiveMapTransform)),v.specularMap&&(_.specularMap.value=v.specularMap,n(v.specularMap,_.specularMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const S=e.get(v),w=S.envMap,E=S.envMapRotation;if(w&&(_.envMap.value=w,Rc.copy(E),Rc.x*=-1,Rc.y*=-1,Rc.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Rc.y*=-1,Rc.z*=-1),_.envMapRotation.value.setFromMatrix4(ffe.makeRotationFromEuler(Rc)),_.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap){_.lightMap.value=v.lightMap;const R=t._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=v.lightMapIntensity*R,n(v.lightMap,_.lightMapTransform)}v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,_.aoMapTransform))}function o(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,v.map&&(_.map.value=v.map,n(v.map,_.mapTransform))}function a(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function l(_,v,S,w){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*S,_.scale.value=w*.5,v.map&&(_.map.value=v.map,n(v.map,_.uvTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,n(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function c(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map,n(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,n(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function u(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4)}function d(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap)}function p(_,v){_.metalness.value=v.metalness,v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,_.metalnessMapTransform)),_.roughness.value=v.roughness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,_.roughnessMapTransform)),v.envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function m(_,v,S){_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,_.sheenColorMapTransform)),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,_.sheenRoughnessMapTransform))),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,_.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(_.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===wi&&_.clearcoatNormalScale.value.negate())),v.dispersion>0&&(_.dispersion.value=v.dispersion),v.iridescence>0&&(_.iridescence.value=v.iridescence,_.iridescenceIOR.value=v.iridescenceIOR,_.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(_.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,_.iridescenceMapTransform)),v.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=S.texture,_.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,_.transmissionMapTransform)),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(_.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(_.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,_.specularColorMapTransform)),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,v){v.matcap&&(_.matcap.value=v.matcap)}function y(_,v){const S=e.get(v).light;_.referencePosition.value.setFromMatrixPosition(S.matrixWorld),_.nearDistance.value=S.shadow.camera.near,_.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function pfe(t,e,n,r){let i={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,w){const E=w.program;r.uniformBlockBinding(S,E)}function c(S,w){let E=i[S.id];E===void 0&&(g(S),E=u(S),i[S.id]=E,S.addEventListener("dispose",_));const R=w.program;r.updateUBOMapping(S,R);const A=e.render.frame;s[S.id]!==A&&(p(S),s[S.id]=A)}function u(S){const w=d();S.__bindingPointIndex=w;const E=t.createBuffer(),R=S.__size,A=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,R,A),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,E),E}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const w=i[S.id],E=S.uniforms,R=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let A=0,M=E.length;A<M;A++){const L=Array.isArray(E[A])?E[A]:[E[A]];for(let P=0,C=L.length;P<C;P++){const N=L[P];if(m(N,A,P,R)===!0){const H=N.__offset,z=Array.isArray(N.value)?N.value:[N.value];let $=0;for(let X=0;X<z.length;X++){const q=z[X],fe=y(q);typeof q=="number"||typeof q=="boolean"?(N.__data[0]=q,t.bufferSubData(t.UNIFORM_BUFFER,H+$,N.__data)):q.isMatrix3?(N.__data[0]=q.elements[0],N.__data[1]=q.elements[1],N.__data[2]=q.elements[2],N.__data[3]=0,N.__data[4]=q.elements[3],N.__data[5]=q.elements[4],N.__data[6]=q.elements[5],N.__data[7]=0,N.__data[8]=q.elements[6],N.__data[9]=q.elements[7],N.__data[10]=q.elements[8],N.__data[11]=0):(q.toArray(N.__data,$),$+=fe.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,H,N.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(S,w,E,R){const A=S.value,M=w+"_"+E;if(R[M]===void 0)return typeof A=="number"||typeof A=="boolean"?R[M]=A:R[M]=A.clone(),!0;{const L=R[M];if(typeof A=="number"||typeof A=="boolean"){if(L!==A)return R[M]=A,!0}else if(L.equals(A)===!1)return L.copy(A),!0}return!1}function g(S){const w=S.uniforms;let E=0;const R=16;for(let M=0,L=w.length;M<L;M++){const P=Array.isArray(w[M])?w[M]:[w[M]];for(let C=0,N=P.length;C<N;C++){const H=P[C],z=Array.isArray(H.value)?H.value:[H.value];for(let $=0,X=z.length;$<X;$++){const q=z[$],fe=y(q),k=E%R;k!==0&&R-k<fe.boundary&&(E+=R-k),H.__data=new Float32Array(fe.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=E,E+=fe.storage}}}const A=E%R;return A>0&&(E+=R-A),S.__size=E,S.__cache={},this}function y(S){const w={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(w.boundary=4,w.storage=4):S.isVector2?(w.boundary=8,w.storage=8):S.isVector3||S.isColor?(w.boundary=16,w.storage=12):S.isVector4?(w.boundary=16,w.storage=16):S.isMatrix3?(w.boundary=48,w.storage=48):S.isMatrix4?(w.boundary=64,w.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),w}function _(S){const w=S.target;w.removeEventListener("dispose",_);const E=o.indexOf(w.__bindingPointIndex);o.splice(E,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function v(){for(const S in i)t.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:c,dispose:v}}class qH{constructor(e={}){const{canvas:n=IH(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let y=null,_=null;const v=[],S=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Cs,this._useLegacyLights=!1,this.toneMapping=$o,this.toneMappingExposure=1;const w=this;let E=!1,R=0,A=0,M=null,L=-1,P=null;const C=new pn,N=new pn;let H=null;const z=new $e(0);let $=0,X=n.width,q=n.height,fe=1,k=null,W=null;const G=new pn(0,0,X,q),ee=new pn(0,0,X,q);let ae=!1;const Pe=new Lg;let re=!1,ye=!1;const Ee=new wt,xe=new V,it={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function dt(){return M===null?fe:1}let te=r;function ut(F,ne){return n.getContext(F,ne)}try{const F={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Tg}`),n.addEventListener("webglcontextlost",Z,!1),n.addEventListener("webglcontextrestored",Ce,!1),n.addEventListener("webglcontextcreationerror",be,!1),te===null){const ne="webgl2";if(te=ut(ne,F),te===null)throw ut(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let he,Se,_e,Le,Te,He,nt,B,D,J,de,pe,we,Qe,De,Fe,Ct,Oe,st,Et,ft,Xe,At,zt;function Sn(){he=new Cue(te),he.init(),Xe=new $H(te,he),Se=new Sue(te,he,e,Xe),_e=new sfe(te),Le=new Pue(te),Te=new Xde,He=new ofe(te,he,_e,Te,Se,Xe,Le),nt=new bue(w),B=new Tue(w),D=new Uae(te),At=new _ue(te,D),J=new Aue(te,D,Le,At),de=new Lue(te,J,D,Le),st=new Iue(te,Se,He),Fe=new wue(Te),pe=new $de(w,nt,B,he,Se,At,Fe),we=new hfe(w,Te),Qe=new Yde,De=new tfe(he),Oe=new yue(w,nt,B,_e,de,p,l),Ct=new ife(w,de,Se),zt=new pfe(te,Le,Se,_e),Et=new xue(te,he,Le),ft=new Rue(te,he,Le),Le.programs=pe.programs,w.capabilities=Se,w.extensions=he,w.properties=Te,w.renderLists=Qe,w.shadowMap=Ct,w.state=_e,w.info=Le}Sn();const Mt=new dfe(w,te);this.xr=Mt,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const F=he.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=he.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(F){F!==void 0&&(fe=F,this.setSize(X,q,!1))},this.getSize=function(F){return F.set(X,q)},this.setSize=function(F,ne,ue=!0){if(Mt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=F,q=ne,n.width=Math.floor(F*fe),n.height=Math.floor(ne*fe),ue===!0&&(n.style.width=F+"px",n.style.height=ne+"px"),this.setViewport(0,0,F,ne)},this.getDrawingBufferSize=function(F){return F.set(X*fe,q*fe).floor()},this.setDrawingBufferSize=function(F,ne,ue){X=F,q=ne,fe=ue,n.width=Math.floor(F*ue),n.height=Math.floor(ne*ue),this.setViewport(0,0,F,ne)},this.getCurrentViewport=function(F){return F.copy(C)},this.getViewport=function(F){return F.copy(G)},this.setViewport=function(F,ne,ue,oe){F.isVector4?G.set(F.x,F.y,F.z,F.w):G.set(F,ne,ue,oe),_e.viewport(C.copy(G).multiplyScalar(fe).round())},this.getScissor=function(F){return F.copy(ee)},this.setScissor=function(F,ne,ue,oe){F.isVector4?ee.set(F.x,F.y,F.z,F.w):ee.set(F,ne,ue,oe),_e.scissor(N.copy(ee).multiplyScalar(fe).round())},this.getScissorTest=function(){return ae},this.setScissorTest=function(F){_e.setScissorTest(ae=F)},this.setOpaqueSort=function(F){k=F},this.setTransparentSort=function(F){W=F},this.getClearColor=function(F){return F.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(F=!0,ne=!0,ue=!0){let oe=0;if(F){let se=!1;if(M!==null){const Be=M.texture.format;se=Be===VR||Be===zR||Be===BR}if(se){const Be=M.texture.type,Ke=Be===Yo||Be===Tu||Be===OR||Be===mh||Be===DR||Be===UR,Ze=Oe.getClearColor(),Ne=Oe.getClearAlpha(),rt=Ze.r,lt=Ze.g,et=Ze.b;Ke?(m[0]=rt,m[1]=lt,m[2]=et,m[3]=Ne,te.clearBufferuiv(te.COLOR,0,m)):(g[0]=rt,g[1]=lt,g[2]=et,g[3]=Ne,te.clearBufferiv(te.COLOR,0,g))}else oe|=te.COLOR_BUFFER_BIT}ne&&(oe|=te.DEPTH_BUFFER_BIT),ue&&(oe|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Z,!1),n.removeEventListener("webglcontextrestored",Ce,!1),n.removeEventListener("webglcontextcreationerror",be,!1),Qe.dispose(),De.dispose(),Te.dispose(),nt.dispose(),B.dispose(),de.dispose(),At.dispose(),zt.dispose(),pe.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",le),Mt.removeEventListener("sessionend",Re),Ue.stop()};function Z(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ce(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const F=Le.autoReset,ne=Ct.enabled,ue=Ct.autoUpdate,oe=Ct.needsUpdate,se=Ct.type;Sn(),Le.autoReset=F,Ct.enabled=ne,Ct.autoUpdate=ue,Ct.needsUpdate=oe,Ct.type=se}function be(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function ze(F){const ne=F.target;ne.removeEventListener("dispose",ze),Ge(ne)}function Ge(F){$t(F),Te.remove(F)}function $t(F){const ne=Te.get(F).programs;ne!==void 0&&(ne.forEach(function(ue){pe.releaseProgram(ue)}),F.isShaderMaterial&&pe.releaseShaderCache(F))}this.renderBufferDirect=function(F,ne,ue,oe,se,Be){ne===null&&(ne=it);const Ke=se.isMesh&&se.matrixWorld.determinant()<0,Ze=yn(F,ne,ue,oe,se);_e.setMaterial(oe,Ke);let Ne=ue.index,rt=1;if(oe.wireframe===!0){if(Ne=J.getWireframeAttribute(ue),Ne===void 0)return;rt=2}const lt=ue.drawRange,et=ue.attributes.position;let dn=lt.start*rt,Bn=(lt.start+lt.count)*rt;Be!==null&&(dn=Math.max(dn,Be.start*rt),Bn=Math.min(Bn,(Be.start+Be.count)*rt)),Ne!==null?(dn=Math.max(dn,0),Bn=Math.min(Bn,Ne.count)):et!=null&&(dn=Math.max(dn,0),Bn=Math.min(Bn,et.count));const Br=Bn-dn;if(Br<0||Br===1/0)return;At.setup(se,oe,Ze,ue,Ne);let Wi,Xt=Et;if(Ne!==null&&(Wi=D.get(Ne),Xt=ft,Xt.setIndex(Wi)),se.isMesh)oe.wireframe===!0?(_e.setLineWidth(oe.wireframeLinewidth*dt()),Xt.setMode(te.LINES)):Xt.setMode(te.TRIANGLES);else if(se.isLine){let yt=oe.linewidth;yt===void 0&&(yt=1),_e.setLineWidth(yt*dt()),se.isLineSegments?Xt.setMode(te.LINES):se.isLineLoop?Xt.setMode(te.LINE_LOOP):Xt.setMode(te.LINE_STRIP)}else se.isPoints?Xt.setMode(te.POINTS):se.isSprite&&Xt.setMode(te.TRIANGLES);if(se.isBatchedMesh)se._multiDrawInstances!==null?Xt.renderMultiDrawInstances(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount,se._multiDrawInstances):Xt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else if(se.isInstancedMesh)Xt.renderInstances(dn,Br,se.count);else if(ue.isInstancedBufferGeometry){const yt=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,an=Math.min(ue.instanceCount,yt);Xt.renderInstances(dn,Br,an)}else Xt.render(dn,Br)};function un(F,ne,ue){F.transparent===!0&&F.side===No&&F.forceSinglePass===!1?(F.side=wi,F.needsUpdate=!0,Ln(F,ne,ue),F.side=Da,F.needsUpdate=!0,Ln(F,ne,ue),F.side=No):Ln(F,ne,ue)}this.compile=function(F,ne,ue=null){ue===null&&(ue=F),_=De.get(ue),_.init(ne),S.push(_),ue.traverseVisible(function(se){se.isLight&&se.layers.test(ne.layers)&&(_.pushLight(se),se.castShadow&&_.pushShadow(se))}),F!==ue&&F.traverseVisible(function(se){se.isLight&&se.layers.test(ne.layers)&&(_.pushLight(se),se.castShadow&&_.pushShadow(se))}),_.setupLights(w._useLegacyLights);const oe=new Set;return F.traverse(function(se){const Be=se.material;if(Be)if(Array.isArray(Be))for(let Ke=0;Ke<Be.length;Ke++){const Ze=Be[Ke];un(Ze,ue,se),oe.add(Ze)}else un(Be,ue,se),oe.add(Be)}),S.pop(),_=null,oe},this.compileAsync=function(F,ne,ue=null){const oe=this.compile(F,ne,ue);return new Promise(se=>{function Be(){if(oe.forEach(function(Ke){Te.get(Ke).currentProgram.isReady()&&oe.delete(Ke)}),oe.size===0){se(F);return}setTimeout(Be,10)}he.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let Y=null;function ie(F){Y&&Y(F)}function le(){Ue.stop()}function Re(){Ue.start()}const Ue=new zH;Ue.setAnimationLoop(ie),typeof self<"u"&&Ue.setContext(self),this.setAnimationLoop=function(F){Y=F,Mt.setAnimationLoop(F),F===null?Ue.stop():Ue.start()},Mt.addEventListener("sessionstart",le),Mt.addEventListener("sessionend",Re),this.render=function(F,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Mt.enabled===!0&&Mt.isPresenting===!0&&(Mt.cameraAutoUpdate===!0&&Mt.updateCamera(ne),ne=Mt.getCamera()),F.isScene===!0&&F.onBeforeRender(w,F,ne,M),_=De.get(F,S.length),_.init(ne),S.push(_),Ee.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),Pe.setFromProjectionMatrix(Ee),ye=this.localClippingEnabled,re=Fe.init(this.clippingPlanes,ye),y=Qe.get(F,v.length),y.init(),v.push(y),Tt(F,ne,0,w.sortObjects),y.finish(),w.sortObjects===!0&&y.sort(k,W);const ue=Mt.enabled===!1||Mt.isPresenting===!1||Mt.hasDepthSensing()===!1;ue&&Oe.addToRenderList(y,F),this.info.render.frame++,re===!0&&Fe.beginShadows();const oe=_.state.shadowsArray;Ct.render(oe,F,ne),re===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();const se=y.opaque,Be=y.transmissive;if(_.setupLights(w._useLegacyLights),ne.isArrayCamera){const Ke=ne.cameras;if(Be.length>0)for(let Ze=0,Ne=Ke.length;Ze<Ne;Ze++){const rt=Ke[Ze];qe(se,Be,F,rt)}ue&&Oe.render(F);for(let Ze=0,Ne=Ke.length;Ze<Ne;Ze++){const rt=Ke[Ze];at(y,F,rt,rt.viewport)}}else Be.length>0&&qe(se,Be,F,ne),ue&&Oe.render(F),at(y,F,ne);M!==null&&(He.updateMultisampleRenderTarget(M),He.updateRenderTargetMipmap(M)),F.isScene===!0&&F.onAfterRender(w,F,ne),At.resetDefaultState(),L=-1,P=null,S.pop(),S.length>0?(_=S[S.length-1],re===!0&&Fe.setGlobalState(w.clippingPlanes,_.state.camera)):_=null,v.pop(),v.length>0?y=v[v.length-1]:y=null};function Tt(F,ne,ue,oe){if(F.visible===!1)return;if(F.layers.test(ne.layers)){if(F.isGroup)ue=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(ne);else if(F.isLight)_.pushLight(F),F.castShadow&&_.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||Pe.intersectsSprite(F)){oe&&xe.setFromMatrixPosition(F.matrixWorld).applyMatrix4(Ee);const Ke=de.update(F),Ze=F.material;Ze.visible&&y.push(F,Ke,Ze,ue,xe.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||Pe.intersectsObject(F))){const Ke=de.update(F),Ze=F.material;if(oe&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),xe.copy(F.boundingSphere.center)):(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),xe.copy(Ke.boundingSphere.center)),xe.applyMatrix4(F.matrixWorld).applyMatrix4(Ee)),Array.isArray(Ze)){const Ne=Ke.groups;for(let rt=0,lt=Ne.length;rt<lt;rt++){const et=Ne[rt],dn=Ze[et.materialIndex];dn&&dn.visible&&y.push(F,Ke,dn,ue,xe.z,et)}}else Ze.visible&&y.push(F,Ke,Ze,ue,xe.z,null)}}const Be=F.children;for(let Ke=0,Ze=Be.length;Ke<Ze;Ke++)Tt(Be[Ke],ne,ue,oe)}function at(F,ne,ue,oe){const se=F.opaque,Be=F.transmissive,Ke=F.transparent;_.setupLightsView(ue),re===!0&&Fe.setGlobalState(w.clippingPlanes,ue),oe&&_e.viewport(C.copy(oe)),se.length>0&&bt(se,ne,ue),Be.length>0&&bt(Be,ne,ue),Ke.length>0&&bt(Ke,ne,ue),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1)}function qe(F,ne,ue,oe){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[oe.id]===void 0&&(_.state.transmissionRenderTarget[oe.id]=new mo(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")||he.has("EXT_color_buffer_float")?Ag:Yo,minFilter:Uo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const Be=_.state.transmissionRenderTarget[oe.id],Ke=oe.viewport||C;Be.setSize(Ke.z,Ke.w);const Ze=w.getRenderTarget();w.setRenderTarget(Be),w.getClearColor(z),$=w.getClearAlpha(),$<1&&w.setClearColor(16777215,.5),w.clear();const Ne=w.toneMapping;w.toneMapping=$o;const rt=oe.viewport;if(oe.viewport!==void 0&&(oe.viewport=void 0),_.setupLightsView(oe),re===!0&&Fe.setGlobalState(w.clippingPlanes,oe),bt(F,ue,oe),He.updateMultisampleRenderTarget(Be),He.updateRenderTargetMipmap(Be),he.has("WEBGL_multisampled_render_to_texture")===!1){let lt=!1;for(let et=0,dn=ne.length;et<dn;et++){const Bn=ne[et],Br=Bn.object,Wi=Bn.geometry,Xt=Bn.material,yt=Bn.group;if(Xt.side===No&&Br.layers.test(oe.layers)){const an=Xt.side;Xt.side=wi,Xt.needsUpdate=!0,gt(Br,ue,oe,Wi,Xt,yt),Xt.side=an,Xt.needsUpdate=!0,lt=!0}}lt===!0&&(He.updateMultisampleRenderTarget(Be),He.updateRenderTargetMipmap(Be))}w.setRenderTarget(Ze),w.setClearColor(z,$),rt!==void 0&&(oe.viewport=rt),w.toneMapping=Ne}function bt(F,ne,ue){const oe=ne.isScene===!0?ne.overrideMaterial:null;for(let se=0,Be=F.length;se<Be;se++){const Ke=F[se],Ze=Ke.object,Ne=Ke.geometry,rt=oe===null?Ke.material:oe,lt=Ke.group;Ze.layers.test(ue.layers)&&gt(Ze,ne,ue,Ne,rt,lt)}}function gt(F,ne,ue,oe,se,Be){F.onBeforeRender(w,ne,ue,oe,se,Be),F.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),se.onBeforeRender(w,ne,ue,oe,F,Be),se.transparent===!0&&se.side===No&&se.forceSinglePass===!1?(se.side=wi,se.needsUpdate=!0,w.renderBufferDirect(ue,ne,oe,se,F,Be),se.side=Da,se.needsUpdate=!0,w.renderBufferDirect(ue,ne,oe,se,F,Be),se.side=No):w.renderBufferDirect(ue,ne,oe,se,F,Be),F.onAfterRender(w,ne,ue,oe,se,Be)}function Ln(F,ne,ue){ne.isScene!==!0&&(ne=it);const oe=Te.get(F),se=_.state.lights,Be=_.state.shadowsArray,Ke=se.state.version,Ze=pe.getParameters(F,se.state,Be,ne,ue),Ne=pe.getProgramCacheKey(Ze);let rt=oe.programs;oe.environment=F.isMeshStandardMaterial?ne.environment:null,oe.fog=ne.fog,oe.envMap=(F.isMeshStandardMaterial?B:nt).get(F.envMap||oe.environment),oe.envMapRotation=oe.environment!==null&&F.envMap===null?ne.environmentRotation:F.envMapRotation,rt===void 0&&(F.addEventListener("dispose",ze),rt=new Map,oe.programs=rt);let lt=rt.get(Ne);if(lt!==void 0){if(oe.currentProgram===lt&&oe.lightsStateVersion===Ke)return vt(F,Ze),lt}else Ze.uniforms=pe.getUniforms(F),F.onBuild(ue,Ze,w),F.onBeforeCompile(Ze,w),lt=pe.acquireProgram(Ze,Ne),rt.set(Ne,lt),oe.uniforms=Ze.uniforms;const et=oe.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(et.clippingPlanes=Fe.uniform),vt(F,Ze),oe.needsLights=Zo(F),oe.lightsStateVersion=Ke,oe.needsLights&&(et.ambientLightColor.value=se.state.ambient,et.lightProbe.value=se.state.probe,et.directionalLights.value=se.state.directional,et.directionalLightShadows.value=se.state.directionalShadow,et.spotLights.value=se.state.spot,et.spotLightShadows.value=se.state.spotShadow,et.rectAreaLights.value=se.state.rectArea,et.ltc_1.value=se.state.rectAreaLTC1,et.ltc_2.value=se.state.rectAreaLTC2,et.pointLights.value=se.state.point,et.pointLightShadows.value=se.state.pointShadow,et.hemisphereLights.value=se.state.hemi,et.directionalShadowMap.value=se.state.directionalShadowMap,et.directionalShadowMatrix.value=se.state.directionalShadowMatrix,et.spotShadowMap.value=se.state.spotShadowMap,et.spotLightMatrix.value=se.state.spotLightMatrix,et.spotLightMap.value=se.state.spotLightMap,et.pointShadowMap.value=se.state.pointShadowMap,et.pointShadowMatrix.value=se.state.pointShadowMatrix),oe.currentProgram=lt,oe.uniformsList=null,lt}function wn(F){if(F.uniformsList===null){const ne=F.currentProgram.getUniforms();F.uniformsList=q0.seqWithValue(ne.seq,F.uniforms)}return F.uniformsList}function vt(F,ne){const ue=Te.get(F);ue.outputColorSpace=ne.outputColorSpace,ue.batching=ne.batching,ue.instancing=ne.instancing,ue.instancingColor=ne.instancingColor,ue.instancingMorph=ne.instancingMorph,ue.skinning=ne.skinning,ue.morphTargets=ne.morphTargets,ue.morphNormals=ne.morphNormals,ue.morphColors=ne.morphColors,ue.morphTargetsCount=ne.morphTargetsCount,ue.numClippingPlanes=ne.numClippingPlanes,ue.numIntersection=ne.numClipIntersection,ue.vertexAlphas=ne.vertexAlphas,ue.vertexTangents=ne.vertexTangents,ue.toneMapping=ne.toneMapping}function yn(F,ne,ue,oe,se){ne.isScene!==!0&&(ne=it),He.resetTextureUnits();const Be=ne.fog,Ke=oe.isMeshStandardMaterial?ne.environment:null,Ze=M===null?w.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:$a,Ne=(oe.isMeshStandardMaterial?B:nt).get(oe.envMap||Ke),rt=oe.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,lt=!!ue.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),et=!!ue.morphAttributes.position,dn=!!ue.morphAttributes.normal,Bn=!!ue.morphAttributes.color;let Br=$o;oe.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Br=w.toneMapping);const Wi=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Xt=Wi!==void 0?Wi.length:0,yt=Te.get(oe),an=_.state.lights;if(re===!0&&(ye===!0||F!==P)){const fi=F===P&&oe.id===L;Fe.setState(oe,F,fi)}let _t=!1;oe.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==an.state.version||yt.outputColorSpace!==Ze||se.isBatchedMesh&&yt.batching===!1||!se.isBatchedMesh&&yt.batching===!0||se.isInstancedMesh&&yt.instancing===!1||!se.isInstancedMesh&&yt.instancing===!0||se.isSkinnedMesh&&yt.skinning===!1||!se.isSkinnedMesh&&yt.skinning===!0||se.isInstancedMesh&&yt.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&yt.instancingColor===!1&&se.instanceColor!==null||se.isInstancedMesh&&yt.instancingMorph===!0&&se.morphTexture===null||se.isInstancedMesh&&yt.instancingMorph===!1&&se.morphTexture!==null||yt.envMap!==Ne||oe.fog===!0&&yt.fog!==Be||yt.numClippingPlanes!==void 0&&(yt.numClippingPlanes!==Fe.numPlanes||yt.numIntersection!==Fe.numIntersection)||yt.vertexAlphas!==rt||yt.vertexTangents!==lt||yt.morphTargets!==et||yt.morphNormals!==dn||yt.morphColors!==Bn||yt.toneMapping!==Br||yt.morphTargetsCount!==Xt)&&(_t=!0):(_t=!0,yt.__version=oe.version);let Xr=yt.currentProgram;_t===!0&&(Xr=Ln(oe,ne,se));let yr=!1,lr=!1,js=!1;const zn=Xr.getUniforms(),Vn=yt.uniforms;if(_e.useProgram(Xr.program)&&(yr=!0,lr=!0,js=!0),oe.id!==L&&(L=oe.id,lr=!0),yr||P!==F){zn.setValue(te,"projectionMatrix",F.projectionMatrix),zn.setValue(te,"viewMatrix",F.matrixWorldInverse);const fi=zn.map.cameraPosition;fi!==void 0&&fi.setValue(te,xe.setFromMatrixPosition(F.matrixWorld)),Se.logarithmicDepthBuffer&&zn.setValue(te,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&zn.setValue(te,"isOrthographic",F.isOrthographicCamera===!0),P!==F&&(P=F,lr=!0,js=!0)}if(se.isSkinnedMesh){zn.setOptional(te,se,"bindMatrix"),zn.setOptional(te,se,"bindMatrixInverse");const fi=se.skeleton;fi&&(fi.boneTexture===null&&fi.computeBoneTexture(),zn.setValue(te,"boneTexture",fi.boneTexture,He))}se.isBatchedMesh&&(zn.setOptional(te,se,"batchingTexture"),zn.setValue(te,"batchingTexture",se._matricesTexture,He));const qa=ue.morphAttributes;if((qa.position!==void 0||qa.normal!==void 0||qa.color!==void 0)&&st.update(se,ue,Xr),(lr||yt.receiveShadow!==se.receiveShadow)&&(yt.receiveShadow=se.receiveShadow,zn.setValue(te,"receiveShadow",se.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(Vn.envMap.value=Ne,Vn.flipEnvMap.value=Ne.isCubeTexture&&Ne.isRenderTargetTexture===!1?-1:1),oe.isMeshStandardMaterial&&oe.envMap===null&&ne.environment!==null&&(Vn.envMapIntensity.value=ne.environmentIntensity),lr&&(zn.setValue(te,"toneMappingExposure",w.toneMappingExposure),yt.needsLights&&Kn(Vn,js),Be&&oe.fog===!0&&we.refreshFogUniforms(Vn,Be),we.refreshMaterialUniforms(Vn,oe,fe,q,_.state.transmissionRenderTarget[F.id]),q0.upload(te,wn(yt),Vn,He)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(q0.upload(te,wn(yt),Vn,He),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&zn.setValue(te,"center",se.center),zn.setValue(te,"modelViewMatrix",se.modelViewMatrix),zn.setValue(te,"normalMatrix",se.normalMatrix),zn.setValue(te,"modelMatrix",se.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const fi=oe.uniformsGroups;for(let Yu=0,Ku=fi.length;Yu<Ku;Yu++){const Ah=fi[Yu];zt.update(Ah,Xr),zt.bind(Ah,Xr)}}return Xr}function Kn(F,ne){F.ambientLightColor.needsUpdate=ne,F.lightProbe.needsUpdate=ne,F.directionalLights.needsUpdate=ne,F.directionalLightShadows.needsUpdate=ne,F.pointLights.needsUpdate=ne,F.pointLightShadows.needsUpdate=ne,F.spotLights.needsUpdate=ne,F.spotLightShadows.needsUpdate=ne,F.rectAreaLights.needsUpdate=ne,F.hemisphereLights.needsUpdate=ne}function Zo(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(F,ne,ue){Te.get(F.texture).__webglTexture=ne,Te.get(F.depthTexture).__webglTexture=ue;const oe=Te.get(F);oe.__hasExternalTextures=!0,oe.__autoAllocateDepthBuffer=ue===void 0,oe.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(F,ne){const ue=Te.get(F);ue.__webglFramebuffer=ne,ue.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(F,ne=0,ue=0){M=F,R=ne,A=ue;let oe=!0,se=null,Be=!1,Ke=!1;if(F){const Ne=Te.get(F);Ne.__useDefaultFramebuffer!==void 0?(_e.bindFramebuffer(te.FRAMEBUFFER,null),oe=!1):Ne.__webglFramebuffer===void 0?He.setupRenderTarget(F):Ne.__hasExternalTextures&&He.rebindTextures(F,Te.get(F.texture).__webglTexture,Te.get(F.depthTexture).__webglTexture);const rt=F.texture;(rt.isData3DTexture||rt.isDataArrayTexture||rt.isCompressedArrayTexture)&&(Ke=!0);const lt=Te.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(lt[ne])?se=lt[ne][ue]:se=lt[ne],Be=!0):F.samples>0&&He.useMultisampledRTT(F)===!1?se=Te.get(F).__webglMultisampledFramebuffer:Array.isArray(lt)?se=lt[ue]:se=lt,C.copy(F.viewport),N.copy(F.scissor),H=F.scissorTest}else C.copy(G).multiplyScalar(fe).floor(),N.copy(ee).multiplyScalar(fe).floor(),H=ae;if(_e.bindFramebuffer(te.FRAMEBUFFER,se)&&oe&&_e.drawBuffers(F,se),_e.viewport(C),_e.scissor(N),_e.setScissorTest(H),Be){const Ne=Te.get(F.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+ne,Ne.__webglTexture,ue)}else if(Ke){const Ne=Te.get(F.texture),rt=ne||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ne.__webglTexture,ue||0,rt)}L=-1},this.readRenderTargetPixels=function(F,ne,ue,oe,se,Be,Ke){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ze=Te.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Ke!==void 0&&(Ze=Ze[Ke]),Ze){_e.bindFramebuffer(te.FRAMEBUFFER,Ze);try{const Ne=F.texture,rt=Ne.format,lt=Ne.type;if(!Se.textureFormatReadable(rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Se.textureTypeReadable(lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=F.width-oe&&ue>=0&&ue<=F.height-se&&te.readPixels(ne,ue,oe,se,Xe.convert(rt),Xe.convert(lt),Be)}finally{const Ne=M!==null?Te.get(M).__webglFramebuffer:null;_e.bindFramebuffer(te.FRAMEBUFFER,Ne)}}},this.copyFramebufferToTexture=function(F,ne,ue=0){const oe=Math.pow(2,-ue),se=Math.floor(ne.image.width*oe),Be=Math.floor(ne.image.height*oe);He.setTexture2D(ne,0),te.copyTexSubImage2D(te.TEXTURE_2D,ue,0,0,F.x,F.y,se,Be),_e.unbindTexture()},this.copyTextureToTexture=function(F,ne,ue,oe=0){const se=ne.image.width,Be=ne.image.height,Ke=Xe.convert(ue.format),Ze=Xe.convert(ue.type);He.setTexture2D(ue,0),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,ue.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,ue.unpackAlignment),ne.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,oe,F.x,F.y,se,Be,Ke,Ze,ne.image.data):ne.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,oe,F.x,F.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Ke,ne.mipmaps[0].data):te.texSubImage2D(te.TEXTURE_2D,oe,F.x,F.y,Ke,Ze,ne.image),oe===0&&ue.generateMipmaps&&te.generateMipmap(te.TEXTURE_2D),_e.unbindTexture()},this.copyTextureToTexture3D=function(F,ne,ue,oe,se=0){const Be=F.max.x-F.min.x,Ke=F.max.y-F.min.y,Ze=F.max.z-F.min.z,Ne=Xe.convert(oe.format),rt=Xe.convert(oe.type);let lt;if(oe.isData3DTexture)He.setTexture3D(oe,0),lt=te.TEXTURE_3D;else if(oe.isDataArrayTexture||oe.isCompressedArrayTexture)He.setTexture2DArray(oe,0),lt=te.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,oe.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,oe.unpackAlignment);const et=te.getParameter(te.UNPACK_ROW_LENGTH),dn=te.getParameter(te.UNPACK_IMAGE_HEIGHT),Bn=te.getParameter(te.UNPACK_SKIP_PIXELS),Br=te.getParameter(te.UNPACK_SKIP_ROWS),Wi=te.getParameter(te.UNPACK_SKIP_IMAGES),Xt=ue.isCompressedTexture?ue.mipmaps[se]:ue.image;te.pixelStorei(te.UNPACK_ROW_LENGTH,Xt.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Xt.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,F.min.x),te.pixelStorei(te.UNPACK_SKIP_ROWS,F.min.y),te.pixelStorei(te.UNPACK_SKIP_IMAGES,F.min.z),ue.isDataTexture||ue.isData3DTexture?te.texSubImage3D(lt,se,ne.x,ne.y,ne.z,Be,Ke,Ze,Ne,rt,Xt.data):oe.isCompressedArrayTexture?te.compressedTexSubImage3D(lt,se,ne.x,ne.y,ne.z,Be,Ke,Ze,Ne,Xt.data):te.texSubImage3D(lt,se,ne.x,ne.y,ne.z,Be,Ke,Ze,Ne,rt,Xt),te.pixelStorei(te.UNPACK_ROW_LENGTH,et),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,dn),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Bn),te.pixelStorei(te.UNPACK_SKIP_ROWS,Br),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Wi),se===0&&oe.generateMipmaps&&te.generateMipmap(lt),_e.unbindTexture()},this.initTexture=function(F){F.isCubeTexture?He.setTextureCube(F,0):F.isData3DTexture?He.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?He.setTexture2DArray(F,0):He.setTexture2D(F,0),_e.unbindTexture()},this.resetState=function(){R=0,A=0,M=null,_e.reset(),At.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Fo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===bS?"display-p3":"srgb",n.unpackColorSpace=hn.workingColorSpace===Rg?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class TS{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new $e(e),this.density=n}clone(){return new TS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class CS{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new $e(e),this.near=n,this.far=r}clone(){return new CS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class K_ extends on{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ls,this.environmentIntensity=1,this.environmentRotation=new ls,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class AS{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=qm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ss()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return LH("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ss()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ss()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const mi=new V;class Cu{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)mi.fromBufferAttribute(this,n),mi.applyMatrix4(e),this.setXYZ(n,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)mi.fromBufferAttribute(this,n),mi.applyNormalMatrix(e),this.setXYZ(n,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)mi.fromBufferAttribute(this,n),mi.transformDirection(e),this.setXYZ(n,mi.x,mi.y,mi.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=_i(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=kt(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=kt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=kt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=kt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=kt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=_i(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=_i(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=_i(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=_i(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array),i=kt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=kt(n,this.array),r=kt(r,this.array),i=kt(i,this.array),s=kt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new gn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ZR extends $r{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Id;const gp=new V,Ld=new V,kd=new V,Od=new Me,vp=new Me,YH=new wt,Oy=new V,yp=new V,Ny=new V,cD=new Me,jb=new Me,uD=new Me;class KH extends on{constructor(e=new ZR){if(super(),this.isSprite=!0,this.type="Sprite",Id===void 0){Id=new Ft;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new AS(n,5);Id.setIndex([0,1,2,0,2,3]),Id.setAttribute("position",new Cu(r,3,0,!1)),Id.setAttribute("uv",new Cu(r,2,3,!1))}this.geometry=Id,this.material=e,this.center=new Me(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ld.setFromMatrixScale(this.matrixWorld),YH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),kd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ld.multiplyScalar(-kd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Dy(Oy.set(-.5,-.5,0),kd,o,Ld,i,s),Dy(yp.set(.5,-.5,0),kd,o,Ld,i,s),Dy(Ny.set(.5,.5,0),kd,o,Ld,i,s),cD.set(0,0),jb.set(1,0),uD.set(1,1);let a=e.ray.intersectTriangle(Oy,yp,Ny,!1,gp);if(a===null&&(Dy(yp.set(-.5,.5,0),kd,o,Ld,i,s),jb.set(0,1),a=e.ray.intersectTriangle(Oy,Ny,yp,!1,gp),a===null))return;const l=e.ray.origin.distanceTo(gp);l<e.near||l>e.far||n.push({distance:l,point:gp.clone(),uv:es.getInterpolation(gp,Oy,yp,Ny,cD,jb,uD,new Me),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Dy(t,e,n,r,i,s){Od.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(vp.x=s*Od.x-i*Od.y,vp.y=i*Od.x+s*Od.y):vp.copy(Od),t.copy(e),t.x+=vp.x,t.y+=vp.y,t.applyMatrix4(YH)}const Uy=new V,dD=new V;class JH extends on{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){Uy.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Uy);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Uy.setFromMatrixPosition(e.matrixWorld),dD.setFromMatrixPosition(this.matrixWorld);const r=Uy.distanceTo(dD)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const fD=new V,hD=new pn,pD=new pn,mfe=new V,mD=new wt,Fy=new V,Wb=new ci,gD=new wt,Gb=new gh;class ZH extends gr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=cT,this.bindMatrix=new wt,this.bindMatrixInverse=new wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new bi),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Fy),this.boundingBox.expandByPoint(Fy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ci),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Fy),this.boundingSphere.expandByPoint(Fy)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Wb.copy(this.boundingSphere),Wb.applyMatrix4(i),e.ray.intersectsSphere(Wb)!==!1&&(gD.copy(i).invert(),Gb.copy(e.ray).applyMatrix4(gD),!(this.boundingBox!==null&&Gb.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,Gb)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new pn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===cT?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===aH?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;hD.fromBufferAttribute(i.attributes.skinIndex,e),pD.fromBufferAttribute(i.attributes.skinWeight,e),fD.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=pD.getComponent(s);if(o!==0){const a=hD.getComponent(s);mD.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(mfe.copy(fD).applyMatrix4(mD),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class QR extends on{constructor(){super(),this.isBone=!0,this.type="Bone"}}class jl extends Xn{constructor(e=null,n=1,r=1,i,s,o,a,l,c=Or,u=Or,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vD=new wt,gfe=new wt;class RS{constructor(e=[],n=[]){this.uuid=ss(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new wt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:gfe;vD.multiplyMatrices(a,n[s]),vD.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new RS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new jl(n,e,e,Ni,Os);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new QR),this.bones.push(o),this.boneInverses.push(new wt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class $f extends gn{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Nd=new wt,yD=new wt,By=[],_D=new bi,vfe=new wt,_p=new gr,xp=new ci;class QH extends gr{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new $f(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,vfe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new bi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Nd),_D.copy(e.boundingBox).applyMatrix4(Nd),this.boundingBox.union(_D)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new ci),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Nd),xp.copy(e.boundingSphere).applyMatrix4(Nd),this.boundingSphere.union(xp)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(_p.geometry=this.geometry,_p.material=this.material,_p.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xp.copy(this.boundingSphere),xp.applyMatrix4(r),e.ray.intersectsSphere(xp)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Nd),yD.multiplyMatrices(r,Nd),_p.matrixWorld=yD,_p.raycast(e,By);for(let o=0,a=By.length;o<a;o++){const l=By[o];l.instanceId=s,l.object=this,n.push(l)}By.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new $f(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new jl(new Float32Array(i*this.count),i,this.count,FR,Os));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function yfe(t,e){return t.z-e.z}function _fe(t,e){return e.z-t.z}class xfe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const Dd="batchId",hl=new wt,xD=new wt,Sfe=new wt,SD=new wt,$b=new Lg,zy=new bi,Pc=new ci,Sp=new V,Xb=new xfe,ni=new gr,Vy=[];function wfe(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class ej extends gr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Ft,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new jl(n,e,e,Ni,Os);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:d}=l,p=new c.constructor(r*u),m=new gn(p,u,d);n.setAttribute(a,m)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new gn(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(Dd,new gn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Dd))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Dd}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===Dd)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bi);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,hl),this.getBoundingBoxAt(i,zy).applyMatrix4(hl),n.union(zy))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ci);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,hl),this.getBoundingSphereAt(i,Pc).applyMatrix4(hl),n.union(Pc))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,p=this._active,m=this._matricesTexture,g=this._matricesTexture.image.data;d.push(!0),p.push(!0);const y=this._geometryCount;this._geometryCount++,Sfe.toArray(g,y*16),m.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new bi,sphereInitialized:!1,sphere:new ci});const _=this.geometry.getAttribute(Dd);for(let v=0;v<i.vertexCount;v++)_.setX(i.vertexStart+v,y);return _.needsUpdate=!0,this.setGeometryAt(y,e),y}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in r.attributes){if(m===Dd)continue;const g=n.getAttribute(m),y=r.getAttribute(m);wfe(g,y,l);const _=g.itemSize;for(let v=g.count,S=c;v<S;v++){const w=l+v;for(let E=0;E<_;E++)y.setComponent(w,E,0)}y.needsUpdate=!0,y.addUpdateRange(l*_,c*_)}if(i){const m=a.indexStart;for(let g=0;g<o.count;g++)s.setX(m+g,l+o.getX(g));for(let g=o.count,y=a.indexCount;g<y;g++)s.setX(m+g,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],p=n.getAttribute("position");return d.count=i?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,n){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=n,e}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,d=c.start+c.count;u<d;u++){let p=u;a&&(p=a.getX(p)),s.expandByPoint(Sp.fromBufferAttribute(l,p))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,zy),zy.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let d=c.start,p=c.start+c.count;d<p;d++){let m=d;a&&(m=a.getX(m)),Sp.fromBufferAttribute(l,m),u=Math.max(u,s.center.distanceToSquared(Sp))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;ni.material=this.material,ni.geometry.index=l.index,ni.geometry.attributes=l.attributes,ni.geometry.boundingBox===null&&(ni.geometry.boundingBox=new bi),ni.geometry.boundingSphere===null&&(ni.geometry.boundingSphere=new ci);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];ni.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,ni.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,ni.geometry.boundingBox),this.getBoundingSphereAt(c,ni.geometry.boundingSphere),ni.raycast(e,Vy);for(let d=0,p=Vy.length;d<p;d++){const m=Vy[d];m.object=this,m.batchId=c,n.push(m)}Vy.length=0}ni.material=null,ni.geometry.index=null,ni.geometry.attributes={},ni.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,u=this._multiDrawStarts,d=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(SD.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),$b.setFromProjectionMatrix(SD,e.coordinateSystem));let g=0;if(this.sortObjects){xD.copy(this.matrixWorld).invert(),Sp.setFromMatrixPosition(r.matrixWorld).applyMatrix4(xD);for(let v=0,S=c.length;v<S;v++)if(c[v]&&l[v]){this.getMatrixAt(v,hl),this.getBoundingSphereAt(v,Pc).applyMatrix4(hl);let w=!1;if(m&&(w=!$b.intersectsSphere(Pc)),!w){const E=Sp.distanceTo(Pc.center);Xb.push(p[v],E)}}const y=Xb.list,_=this.customSort;_===null?y.sort(s.transparent?_fe:yfe):_.call(this,y,r);for(let v=0,S=y.length;v<S;v++){const w=y[v];u[g]=w.start*a,d[g]=w.count,g++}Xb.reset()}else for(let y=0,_=c.length;y<_;y++)if(c[y]&&l[y]){let v=!1;if(m&&(this.getMatrixAt(y,hl),this.getBoundingSphereAt(y,Pc).applyMatrix4(hl),v=!$b.intersectsSphere(Pc)),!v){const S=p[y];u[g]=S.start*a,d[g]=S.count,g++}}this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Ci extends $r{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $e(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const J_=new V,Z_=new V,wD=new wt,wp=new gh,Hy=new ci,qb=new V,bD=new V;class Zl extends on{constructor(e=new Ft,n=new Ci){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)J_.fromBufferAttribute(n,i-1),Z_.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=J_.distanceTo(Z_);e.setAttribute("lineDistance",new tt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Hy.copy(r.boundingSphere),Hy.applyMatrix4(i),Hy.radius+=s,e.ray.intersectsSphere(Hy)===!1)return;wD.copy(i).invert(),wp.copy(e.ray).applyMatrix4(wD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const m=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let y=m,_=g-1;y<_;y+=c){const v=u.getX(y),S=u.getX(y+1),w=jy(this,e,wp,l,v,S);w&&n.push(w)}if(this.isLineLoop){const y=u.getX(g-1),_=u.getX(m),v=jy(this,e,wp,l,y,_);v&&n.push(v)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let y=m,_=g-1;y<_;y+=c){const v=jy(this,e,wp,l,y,y+1);v&&n.push(v)}if(this.isLineLoop){const y=jy(this,e,wp,l,g-1,m);y&&n.push(y)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function jy(t,e,n,r,i,s){const o=t.geometry.attributes.position;if(J_.fromBufferAttribute(o,i),Z_.fromBufferAttribute(o,s),n.distanceSqToSegment(J_,Z_,qb,bD)>r)return;qb.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(qb);if(!(l<e.near||l>e.far))return{distance:l,point:bD.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,object:t}}const ED=new V,MD=new V;class Jo extends Zl{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)ED.fromBufferAttribute(n,i),MD.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ED.distanceTo(MD);e.setAttribute("lineDistance",new tt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class tj extends Zl{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class eP extends $r{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const TD=new wt,zT=new gh,Wy=new ci,Gy=new V;class nj extends on{constructor(e=new Ft,n=new eP){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Wy.copy(r.boundingSphere),Wy.applyMatrix4(i),Wy.radius+=s,e.ray.intersectsSphere(Wy)===!1)return;TD.copy(i).invert(),zT.copy(e.ray).applyMatrix4(TD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=p,y=m;g<y;g++){const _=c.getX(g);Gy.fromBufferAttribute(d,_),CD(Gy,_,l,i,e,n,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let g=p,y=m;g<y;g++)Gy.fromBufferAttribute(d,g),CD(Gy,g,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function CD(t,e,n,r,i,s,o){const a=zT.distanceSqToPoint(t);if(a<n){const l=new V;zT.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class bfe extends Xn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:pr,this.magFilter=s!==void 0?s:pr,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Efe extends Xn{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Or,this.minFilter=Or,this.generateMipmaps=!1,this.needsUpdate=!0}}class PS extends Xn{constructor(e,n,r,i,s,o,a,l,c,u,d,p){super(null,o,a,l,c,u,i,s,d,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Mfe extends PS{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ks}}class Tfe extends PS{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Ua),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Cfe extends Xn{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class vo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new Me:new V);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new V,i=[],s=[],o=[],a=new V,l=new wt;for(let m=0;m<=e;m++){const g=m/e;i[m]=this.getTangentAt(g,new V)}s[0]=new V,o[0]=new V;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(tr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(tr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],m*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class IS extends vo{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Me){const r=n,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*d+this.aX,c=p*d+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class rj extends IS{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function tP(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+d)+(l-a)/d;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const $y=new V,Yb=new tP,Kb=new tP,Jb=new tP;class ij extends vo{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new V){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:($y.subVectors(i[0],i[1]).add(i[0]),c=$y);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:($y.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=$y),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(u),m);y<1e-4&&(y=1),g<1e-4&&(g=y),_<1e-4&&(_=y),Yb.initNonuniformCatmullRom(c.x,d.x,p.x,u.x,g,y,_),Kb.initNonuniformCatmullRom(c.y,d.y,p.y,u.y,g,y,_),Jb.initNonuniformCatmullRom(c.z,d.z,p.z,u.z,g,y,_)}else this.curveType==="catmullrom"&&(Yb.initCatmullRom(c.x,d.x,p.x,u.x,this.tension),Kb.initCatmullRom(c.y,d.y,p.y,u.y,this.tension),Jb.initCatmullRom(c.z,d.z,p.z,u.z,this.tension));return r.set(Yb.calc(l),Kb.calc(l),Jb.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new V().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function AD(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function Afe(t,e){const n=1-t;return n*n*e}function Rfe(t,e){return 2*(1-t)*t*e}function Pfe(t,e){return t*t*e}function nm(t,e,n,r){return Afe(t,e)+Rfe(t,n)+Pfe(t,r)}function Ife(t,e){const n=1-t;return n*n*n*e}function Lfe(t,e){const n=1-t;return 3*n*n*t*e}function kfe(t,e){return 3*(1-t)*t*t*e}function Ofe(t,e){return t*t*t*e}function rm(t,e,n,r,i){return Ife(t,e)+Lfe(t,n)+kfe(t,r)+Ofe(t,i)}class nP extends vo{constructor(e=new Me,n=new Me,r=new Me,i=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Me){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(rm(e,i.x,s.x,o.x,a.x),rm(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sj extends vo{constructor(e=new V,n=new V,r=new V,i=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new V){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(rm(e,i.x,s.x,o.x,a.x),rm(e,i.y,s.y,o.y,a.y),rm(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rP extends vo{constructor(e=new Me,n=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Me){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Me){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oj extends vo{constructor(e=new V,n=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new V){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new V){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iP extends vo{constructor(e=new Me,n=new Me,r=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Me){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(nm(e,i.x,s.x,o.x),nm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sP extends vo{constructor(e=new V,n=new V,r=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new V){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(nm(e,i.x,s.x,o.x),nm(e,i.y,s.y,o.y),nm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oP extends vo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Me){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(AD(a,l.x,c.x,u.x,d.x),AD(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Me().fromArray(i))}return this}}var Q_=Object.freeze({__proto__:null,ArcCurve:rj,CatmullRomCurve3:ij,CubicBezierCurve:nP,CubicBezierCurve3:sj,EllipseCurve:IS,LineCurve:rP,LineCurve3:oj,QuadraticBezierCurve:iP,QuadraticBezierCurve3:sP,SplineCurve:oP});class aj extends vo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Q_[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new Q_[i.type]().fromJSON(i))}return this}}class Jm extends aj{constructor(e){super(),this.type="Path",this.currentPoint=new Me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new rP(this.currentPoint.clone(),new Me(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new iP(this.currentPoint.clone(),new Me(e,n),new Me(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new nP(this.currentPoint.clone(),new Me(e,n),new Me(r,i),new Me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new oP(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new IS(e,n,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Og extends Ft{constructor(e=[new Me(0,-.5),new Me(.5,0),new Me(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=tr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,d=new V,p=new Me,m=new V,g=new V,y=new V;let _=0,v=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:_=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,m.x=v*1,m.y=-_,m.z=v*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:_=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,m.x=v*1,m.y=-_,m.z=v*0,g.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(g)}for(let S=0;S<=n;S++){const w=r+S*u*i,E=Math.sin(w),R=Math.cos(w);for(let A=0;A<=e.length-1;A++){d.x=e[A].x*E,d.y=e[A].y,d.z=e[A].x*R,o.push(d.x,d.y,d.z),p.x=S/n,p.y=A/(e.length-1),a.push(p.x,p.y);const M=l[3*A+0]*E,L=l[3*A+1],P=l[3*A+0]*R;c.push(M,L,P)}}for(let S=0;S<n;S++)for(let w=0;w<e.length-1;w++){const E=w+S*e.length,R=E,A=E+e.length,M=E+e.length+1,L=E+1;s.push(R,A,L),s.push(M,L,A)}this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("uv",new tt(a,2)),this.setAttribute("normal",new tt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Og(e.points,e.segments,e.phiStart,e.phiLength)}}class LS extends Og{constructor(e=1,n=1,r=4,i=8){const s=new Jm;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new LS(e.radius,e.length,e.capSegments,e.radialSegments)}}class kS extends Ft{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new V,u=new Me;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=n;d++,p+=3){const m=r+d/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("normal",new tt(a,3)),this.setAttribute("uv",new tt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class _h extends Ft{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],p=[],m=[];let g=0;const y=[],_=r/2;let v=0;S(),o===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new tt(d,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function S(){const E=new V,R=new V;let A=0;const M=(n-e)/r;for(let L=0;L<=s;L++){const P=[],C=L/s,N=C*(n-e)+e;for(let H=0;H<=i;H++){const z=H/i,$=z*l+a,X=Math.sin($),q=Math.cos($);R.x=N*X,R.y=-C*r+_,R.z=N*q,d.push(R.x,R.y,R.z),E.set(X,M,q).normalize(),p.push(E.x,E.y,E.z),m.push(z,1-C),P.push(g++)}y.push(P)}for(let L=0;L<i;L++)for(let P=0;P<s;P++){const C=y[P][L],N=y[P+1][L],H=y[P+1][L+1],z=y[P][L+1];u.push(C,N,z),u.push(N,H,z),A+=6}c.addGroup(v,A,0),v+=A}function w(E){const R=g,A=new Me,M=new V;let L=0;const P=E===!0?e:n,C=E===!0?1:-1;for(let H=1;H<=i;H++)d.push(0,_*C,0),p.push(0,C,0),m.push(.5,.5),g++;const N=g;for(let H=0;H<=i;H++){const $=H/i*l+a,X=Math.cos($),q=Math.sin($);M.x=P*q,M.y=_*C,M.z=P*X,d.push(M.x,M.y,M.z),p.push(0,C,0),A.x=X*.5+.5,A.y=q*.5*C+.5,m.push(A.x,A.y),g++}for(let H=0;H<i;H++){const z=R+H,$=N+H;E===!0?u.push($,$+1,z):u.push($+1,$,z),L+=3}c.addGroup(v,L,E===!0?1:2),v+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _h(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class OS extends _h{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new OS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class uc extends Ft{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new tt(s,3)),this.setAttribute("normal",new tt(s.slice(),3)),this.setAttribute("uv",new tt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const w=new V,E=new V,R=new V;for(let A=0;A<n.length;A+=3)m(n[A+0],w),m(n[A+1],E),m(n[A+2],R),l(w,E,R,S)}function l(S,w,E,R){const A=R+1,M=[];for(let L=0;L<=A;L++){M[L]=[];const P=S.clone().lerp(E,L/A),C=w.clone().lerp(E,L/A),N=A-L;for(let H=0;H<=N;H++)H===0&&L===A?M[L][H]=P:M[L][H]=P.clone().lerp(C,H/N)}for(let L=0;L<A;L++)for(let P=0;P<2*(A-L)-1;P++){const C=Math.floor(P/2);P%2===0?(p(M[L][C+1]),p(M[L+1][C]),p(M[L][C])):(p(M[L][C+1]),p(M[L+1][C+1]),p(M[L+1][C]))}}function c(S){const w=new V;for(let E=0;E<s.length;E+=3)w.x=s[E+0],w.y=s[E+1],w.z=s[E+2],w.normalize().multiplyScalar(S),s[E+0]=w.x,s[E+1]=w.y,s[E+2]=w.z}function u(){const S=new V;for(let w=0;w<s.length;w+=3){S.x=s[w+0],S.y=s[w+1],S.z=s[w+2];const E=_(S)/2/Math.PI+.5,R=v(S)/Math.PI+.5;o.push(E,1-R)}g(),d()}function d(){for(let S=0;S<o.length;S+=6){const w=o[S+0],E=o[S+2],R=o[S+4],A=Math.max(w,E,R),M=Math.min(w,E,R);A>.9&&M<.1&&(w<.2&&(o[S+0]+=1),E<.2&&(o[S+2]+=1),R<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function m(S,w){const E=S*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function g(){const S=new V,w=new V,E=new V,R=new V,A=new Me,M=new Me,L=new Me;for(let P=0,C=0;P<s.length;P+=9,C+=6){S.set(s[P+0],s[P+1],s[P+2]),w.set(s[P+3],s[P+4],s[P+5]),E.set(s[P+6],s[P+7],s[P+8]),A.set(o[C+0],o[C+1]),M.set(o[C+2],o[C+3]),L.set(o[C+4],o[C+5]),R.copy(S).add(w).add(E).divideScalar(3);const N=_(R);y(A,C+0,S,N),y(M,C+2,w,N),y(L,C+4,E,N)}}function y(S,w,E,R){R<0&&S.x===1&&(o[w]=S.x-1),E.x===0&&E.z===0&&(o[w]=R/2/Math.PI+.5)}function _(S){return Math.atan2(S.z,-S.x)}function v(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uc(e.vertices,e.indices,e.radius,e.details)}}class NS extends uc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new NS(e.radius,e.detail)}}const Xy=new V,qy=new V,Zb=new V,Yy=new es;class lj extends Ft{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(uu*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:y,b:_,c:v}=Yy;if(y.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),Yy.getNormal(Zb),d[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,d[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,d[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let S=0;S<3;S++){const w=(S+1)%3,E=d[S],R=d[w],A=Yy[u[S]],M=Yy[u[w]],L=`${E}_${R}`,P=`${R}_${E}`;P in p&&p[P]?(Zb.dot(p[P].normal)<=s&&(m.push(A.x,A.y,A.z),m.push(M.x,M.y,M.z)),p[P]=null):L in p||(p[L]={index0:c[S],index1:c[w],normal:Zb.clone()})}}for(const g in p)if(p[g]){const{index0:y,index1:_}=p[g];Xy.fromBufferAttribute(a,y),qy.fromBufferAttribute(a,_),m.push(Xy.x,Xy.y,Xy.z),m.push(qy.x,qy.y,qy.z)}this.setAttribute("position",new tt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class fu extends Jm{constructor(e){super(e),this.uuid=ss(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Jm().fromJSON(i))}return this}}const Nfe={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=cj(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,p,m;if(r&&(s=zfe(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let g=n;g<i;g+=n)d=t[g],p=t[g+1],d<a&&(a=d),p<l&&(l=p),d>c&&(c=d),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return Zm(s,o,n,a,l,m,0),o}};function cj(t,e,n,r,i){let s,o;if(i===Jfe(t,e,n,r)>0)for(s=e;s<n;s+=r)o=RD(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=RD(s,t[s],t[s+1],o);return o&&DS(o,o.next)&&(eg(o),o=o.next),o}function Au(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(DS(n,n.next)||Gn(n.prev,n,n.next)===0)){if(eg(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Zm(t,e,n,r,i,s,o){if(!t)return;!o&&s&&Gfe(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Ufe(t,r,i,s):Dfe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),eg(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Ffe(Au(t),e,n),Zm(t,e,n,r,i,s,2)):o===2&&Bfe(t,e,n,r,i,s):Zm(Au(t),e,n,r,i,s,1);break}}}function Dfe(t){const e=t.prev,n=t,r=t.next;if(Gn(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=r.next;for(;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=d&&g.y<=m&&ff(i,a,s,l,o,c,g.x,g.y)&&Gn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Ufe(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Gn(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<d?u<p?u:p:d<p?d:p,y=a>l?a>c?a:c:l>c?l:c,_=u>d?u>p?u:p:d>p?d:p,v=VT(m,g,e,n,r),S=VT(y,_,e,n,r);let w=t.prevZ,E=t.nextZ;for(;w&&w.z>=v&&E&&E.z<=S;){if(w.x>=m&&w.x<=y&&w.y>=g&&w.y<=_&&w!==i&&w!==o&&ff(a,u,l,d,c,p,w.x,w.y)&&Gn(w.prev,w,w.next)>=0||(w=w.prevZ,E.x>=m&&E.x<=y&&E.y>=g&&E.y<=_&&E!==i&&E!==o&&ff(a,u,l,d,c,p,E.x,E.y)&&Gn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;w&&w.z>=v;){if(w.x>=m&&w.x<=y&&w.y>=g&&w.y<=_&&w!==i&&w!==o&&ff(a,u,l,d,c,p,w.x,w.y)&&Gn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=S;){if(E.x>=m&&E.x<=y&&E.y>=g&&E.y<=_&&E!==i&&E!==o&&ff(a,u,l,d,c,p,E.x,E.y)&&Gn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Ffe(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!DS(i,s)&&uj(i,r,r.next,s)&&Qm(i,s)&&Qm(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),eg(r),eg(r.next),r=t=s),r=r.next}while(r!==t);return Au(r)}function Bfe(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&qfe(o,a)){let l=dj(o,a);o=Au(o,o.next),l=Au(l,l.next),Zm(o,e,n,r,i,s,0),Zm(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function zfe(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=cj(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Xfe(c));for(i.sort(Vfe),s=0;s<i.length;s++)n=Hfe(i[s],n);return n}function Vfe(t,e){return t.x-e.x}function Hfe(t,e){const n=jfe(t,e);if(!n)return e;const r=dj(n,t);return Au(r,r.next),Au(n,n.next)}function jfe(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&ff(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),Qm(n,t)&&(d<u||d===u&&(n.x>i.x||n.x===i.x&&Wfe(i,n)))&&(i=n,u=d)),n=n.next;while(n!==a);return i}function Wfe(t,e){return Gn(t.prev,t,e.prev)<0&&Gn(e.next,t,t.next)<0}function Gfe(t,e,n,r){let i=t;do i.z===0&&(i.z=VT(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,$fe(i)}function $fe(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function VT(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Xfe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ff(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function qfe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Yfe(t,e)&&(Qm(t,e)&&Qm(e,t)&&Kfe(t,e)&&(Gn(t.prev,t,e.prev)||Gn(t,e.prev,e))||DS(t,e)&&Gn(t.prev,t,t.next)>0&&Gn(e.prev,e,e.next)>0)}function Gn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function DS(t,e){return t.x===e.x&&t.y===e.y}function uj(t,e,n,r){const i=Jy(Gn(t,e,n)),s=Jy(Gn(t,e,r)),o=Jy(Gn(n,r,t)),a=Jy(Gn(n,r,e));return!!(i!==s&&o!==a||i===0&&Ky(t,n,e)||s===0&&Ky(t,r,e)||o===0&&Ky(n,t,r)||a===0&&Ky(n,e,r))}function Ky(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Jy(t){return t>0?1:t<0?-1:0}function Yfe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&uj(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Qm(t,e){return Gn(t.prev,t,t.next)<0?Gn(t,e,t.next)>=0&&Gn(t,t.prev,e)>=0:Gn(t,e,t.prev)<0||Gn(t,t.next,e)<0}function Kfe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function dj(t,e){const n=new HT(t.i,t.x,t.y),r=new HT(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function RD(t,e,n,r){const i=new HT(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function eg(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function HT(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jfe(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class Xo{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Xo.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];PD(e),ID(r,e);let o=e.length;n.forEach(PD);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,ID(r,n[l]);const a=Nfe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function PD(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ID(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class US extends Ft{constructor(e=new fu([new Me(.5,.5),new Me(-.5,.5),new Me(-.5,-.5),new Me(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new tt(i,3)),this.setAttribute("uv",new tt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,g=n.bevelSize!==void 0?n.bevelSize:m-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,_=n.bevelSegments!==void 0?n.bevelSegments:3;const v=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:Zfe;let w,E=!1,R,A,M,L;v&&(w=v.getSpacedPoints(u),E=!0,p=!1,R=v.computeFrenetFrames(u,!1),A=new V,M=new V,L=new V),p||(_=0,m=0,g=0,y=0);const P=a.extractPoints(c);let C=P.shape;const N=P.holes;if(!Xo.isClockWise(C)){C=C.reverse();for(let he=0,Se=N.length;he<Se;he++){const _e=N[he];Xo.isClockWise(_e)&&(N[he]=_e.reverse())}}const z=Xo.triangulateShape(C,N),$=C;for(let he=0,Se=N.length;he<Se;he++){const _e=N[he];C=C.concat(_e)}function X(he,Se,_e){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(Se,_e)}const q=C.length,fe=z.length;function k(he,Se,_e){let Le,Te,He;const nt=he.x-Se.x,B=he.y-Se.y,D=_e.x-he.x,J=_e.y-he.y,de=nt*nt+B*B,pe=nt*J-B*D;if(Math.abs(pe)>Number.EPSILON){const we=Math.sqrt(de),Qe=Math.sqrt(D*D+J*J),De=Se.x-B/we,Fe=Se.y+nt/we,Ct=_e.x-J/Qe,Oe=_e.y+D/Qe,st=((Ct-De)*J-(Oe-Fe)*D)/(nt*J-B*D);Le=De+nt*st-he.x,Te=Fe+B*st-he.y;const Et=Le*Le+Te*Te;if(Et<=2)return new Me(Le,Te);He=Math.sqrt(Et/2)}else{let we=!1;nt>Number.EPSILON?D>Number.EPSILON&&(we=!0):nt<-Number.EPSILON?D<-Number.EPSILON&&(we=!0):Math.sign(B)===Math.sign(J)&&(we=!0),we?(Le=-B,Te=nt,He=Math.sqrt(de)):(Le=nt,Te=B,He=Math.sqrt(de/2))}return new Me(Le/He,Te/He)}const W=[];for(let he=0,Se=$.length,_e=Se-1,Le=he+1;he<Se;he++,_e++,Le++)_e===Se&&(_e=0),Le===Se&&(Le=0),W[he]=k($[he],$[_e],$[Le]);const G=[];let ee,ae=W.concat();for(let he=0,Se=N.length;he<Se;he++){const _e=N[he];ee=[];for(let Le=0,Te=_e.length,He=Te-1,nt=Le+1;Le<Te;Le++,He++,nt++)He===Te&&(He=0),nt===Te&&(nt=0),ee[Le]=k(_e[Le],_e[He],_e[nt]);G.push(ee),ae=ae.concat(ee)}for(let he=0;he<_;he++){const Se=he/_,_e=m*Math.cos(Se*Math.PI/2),Le=g*Math.sin(Se*Math.PI/2)+y;for(let Te=0,He=$.length;Te<He;Te++){const nt=X($[Te],W[Te],Le);xe(nt.x,nt.y,-_e)}for(let Te=0,He=N.length;Te<He;Te++){const nt=N[Te];ee=G[Te];for(let B=0,D=nt.length;B<D;B++){const J=X(nt[B],ee[B],Le);xe(J.x,J.y,-_e)}}}const Pe=g+y;for(let he=0;he<q;he++){const Se=p?X(C[he],ae[he],Pe):C[he];E?(M.copy(R.normals[0]).multiplyScalar(Se.x),A.copy(R.binormals[0]).multiplyScalar(Se.y),L.copy(w[0]).add(M).add(A),xe(L.x,L.y,L.z)):xe(Se.x,Se.y,0)}for(let he=1;he<=u;he++)for(let Se=0;Se<q;Se++){const _e=p?X(C[Se],ae[Se],Pe):C[Se];E?(M.copy(R.normals[he]).multiplyScalar(_e.x),A.copy(R.binormals[he]).multiplyScalar(_e.y),L.copy(w[he]).add(M).add(A),xe(L.x,L.y,L.z)):xe(_e.x,_e.y,d/u*he)}for(let he=_-1;he>=0;he--){const Se=he/_,_e=m*Math.cos(Se*Math.PI/2),Le=g*Math.sin(Se*Math.PI/2)+y;for(let Te=0,He=$.length;Te<He;Te++){const nt=X($[Te],W[Te],Le);xe(nt.x,nt.y,d+_e)}for(let Te=0,He=N.length;Te<He;Te++){const nt=N[Te];ee=G[Te];for(let B=0,D=nt.length;B<D;B++){const J=X(nt[B],ee[B],Le);E?xe(J.x,J.y+w[u-1].y,w[u-1].x+_e):xe(J.x,J.y,d+_e)}}}re(),ye();function re(){const he=i.length/3;if(p){let Se=0,_e=q*Se;for(let Le=0;Le<fe;Le++){const Te=z[Le];it(Te[2]+_e,Te[1]+_e,Te[0]+_e)}Se=u+_*2,_e=q*Se;for(let Le=0;Le<fe;Le++){const Te=z[Le];it(Te[0]+_e,Te[1]+_e,Te[2]+_e)}}else{for(let Se=0;Se<fe;Se++){const _e=z[Se];it(_e[2],_e[1],_e[0])}for(let Se=0;Se<fe;Se++){const _e=z[Se];it(_e[0]+q*u,_e[1]+q*u,_e[2]+q*u)}}r.addGroup(he,i.length/3-he,0)}function ye(){const he=i.length/3;let Se=0;Ee($,Se),Se+=$.length;for(let _e=0,Le=N.length;_e<Le;_e++){const Te=N[_e];Ee(Te,Se),Se+=Te.length}r.addGroup(he,i.length/3-he,1)}function Ee(he,Se){let _e=he.length;for(;--_e>=0;){const Le=_e;let Te=_e-1;Te<0&&(Te=he.length-1);for(let He=0,nt=u+_*2;He<nt;He++){const B=q*He,D=q*(He+1),J=Se+Le+B,de=Se+Te+B,pe=Se+Te+D,we=Se+Le+D;dt(J,de,pe,we)}}}function xe(he,Se,_e){l.push(he),l.push(Se),l.push(_e)}function it(he,Se,_e){te(he),te(Se),te(_e);const Le=i.length/3,Te=S.generateTopUV(r,i,Le-3,Le-2,Le-1);ut(Te[0]),ut(Te[1]),ut(Te[2])}function dt(he,Se,_e,Le){te(he),te(Se),te(Le),te(Se),te(_e),te(Le);const Te=i.length/3,He=S.generateSideWallUV(r,i,Te-6,Te-3,Te-2,Te-1);ut(He[0]),ut(He[1]),ut(He[3]),ut(He[1]),ut(He[2]),ut(He[3])}function te(he){i.push(l[he*3+0]),i.push(l[he*3+1]),i.push(l[he*3+2])}function ut(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return Qfe(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Q_[i.type]().fromJSON(i)),new US(r,e.options)}}const Zfe={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Me(s,o),new Me(a,l),new Me(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],g=e[i*3+2],y=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Me(o,1-l),new Me(c,1-d),new Me(p,1-g),new Me(y,1-v)]:[new Me(a,1-l),new Me(u,1-d),new Me(m,1-g),new Me(_,1-v)]}};function Qfe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class FS extends uc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new FS(e.radius,e.detail)}}class Ng extends uc{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Ng(e.radius,e.detail)}}class BS extends Ft{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const p=(n-e)/i,m=new V,g=new Me;for(let y=0;y<=i;y++){for(let _=0;_<=r;_++){const v=s+_/r*o;m.x=d*Math.cos(v),m.y=d*Math.sin(v),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,u.push(g.x,g.y)}d+=p}for(let y=0;y<i;y++){const _=y*(r+1);for(let v=0;v<r;v++){const S=v+_,w=S,E=S+r+1,R=S+r+2,A=S+1;a.push(w,E,A),a.push(E,R,A)}}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(c,3)),this.setAttribute("uv",new tt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zS extends Ft{constructor(e=new fu([new Me(0,.5),new Me(-.5,-.5),new Me(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new tt(i,3)),this.setAttribute("normal",new tt(s,3)),this.setAttribute("uv",new tt(o,2));function c(u){const d=i.length/3,p=u.extractPoints(n);let m=p.shape;const g=p.holes;Xo.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,v=g.length;_<v;_++){const S=g[_];Xo.isClockWise(S)===!0&&(g[_]=S.reverse())}const y=Xo.triangulateShape(m,g);for(let _=0,v=g.length;_<v;_++){const S=g[_];m=m.concat(S)}for(let _=0,v=m.length;_<v;_++){const S=m[_];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let _=0,v=y.length;_<v;_++){const S=y[_],w=S[0]+d,E=S[1]+d,R=S[2]+d;r.push(w,E,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return ehe(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new zS(r,e.curveSegments)}}function ehe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Dg extends Ft{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new V,p=new V,m=[],g=[],y=[],_=[];for(let v=0;v<=r;v++){const S=[],w=v/r;let E=0;v===0&&o===0?E=.5/n:v===r&&l===Math.PI&&(E=-.5/n);for(let R=0;R<=n;R++){const A=R/n;d.x=-e*Math.cos(i+A*s)*Math.sin(o+w*a),d.y=e*Math.cos(o+w*a),d.z=e*Math.sin(i+A*s)*Math.sin(o+w*a),g.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),_.push(A+E,1-w),S.push(c++)}u.push(S)}for(let v=0;v<r;v++)for(let S=0;S<n;S++){const w=u[v][S+1],E=u[v][S],R=u[v+1][S],A=u[v+1][S+1];(v!==0||o>0)&&m.push(w,E,A),(v!==r-1||l<Math.PI)&&m.push(E,R,A)}this.setIndex(m),this.setAttribute("position",new tt(g,3)),this.setAttribute("normal",new tt(y,3)),this.setAttribute("uv",new tt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class VS extends uc{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new VS(e.radius,e.detail)}}class HS extends Ft{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new V,d=new V,p=new V;for(let m=0;m<=r;m++)for(let g=0;g<=i;g++){const y=g/i*s,_=m/r*Math.PI*2;d.x=(e+n*Math.cos(_))*Math.cos(y),d.y=(e+n*Math.cos(_))*Math.sin(y),d.z=n*Math.sin(_),a.push(d.x,d.y,d.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),p.subVectors(d,u).normalize(),l.push(p.x,p.y,p.z),c.push(g/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let g=1;g<=i;g++){const y=(i+1)*m+g-1,_=(i+1)*(m-1)+g-1,v=(i+1)*(m-1)+g,S=(i+1)*m+g;o.push(y,_,S),o.push(_,v,S)}this.setIndex(o),this.setAttribute("position",new tt(a,3)),this.setAttribute("normal",new tt(l,3)),this.setAttribute("uv",new tt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jS extends Ft{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new V,p=new V,m=new V,g=new V,y=new V,_=new V,v=new V;for(let w=0;w<=r;++w){const E=w/r*s*Math.PI*2;S(E,s,o,e,m),S(E+.01,s,o,e,g),_.subVectors(g,m),v.addVectors(g,m),y.crossVectors(_,v),v.crossVectors(y,_),y.normalize(),v.normalize();for(let R=0;R<=i;++R){const A=R/i*Math.PI*2,M=-n*Math.cos(A),L=n*Math.sin(A);d.x=m.x+(M*v.x+L*y.x),d.y=m.y+(M*v.y+L*y.y),d.z=m.z+(M*v.z+L*y.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),c.push(p.x,p.y,p.z),u.push(w/r),u.push(R/i)}}for(let w=1;w<=r;w++)for(let E=1;E<=i;E++){const R=(i+1)*(w-1)+(E-1),A=(i+1)*w+(E-1),M=(i+1)*w+E,L=(i+1)*(w-1)+E;a.push(R,A,L),a.push(A,M,L)}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(c,3)),this.setAttribute("uv",new tt(u,2));function S(w,E,R,A,M){const L=Math.cos(w),P=Math.sin(w),C=R/E*w,N=Math.cos(C);M.x=A*(2+N)*.5*L,M.y=A*(2+N)*P*.5,M.z=A*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class WS extends Ft{constructor(e=new sP(new V(-1,-1,0),new V(-1,1,0),new V(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new V,l=new V,c=new Me;let u=new V;const d=[],p=[],m=[],g=[];y(),this.setIndex(g),this.setAttribute("position",new tt(d,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function y(){for(let w=0;w<n;w++)_(w);_(s===!1?n:0),S(),v()}function _(w){u=e.getPointAt(w/n,u);const E=o.normals[w],R=o.binormals[w];for(let A=0;A<=i;A++){const M=A/i*Math.PI*2,L=Math.sin(M),P=-Math.cos(M);l.x=P*E.x+L*R.x,l.y=P*E.y+L*R.y,l.z=P*E.z+L*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let w=1;w<=n;w++)for(let E=1;E<=i;E++){const R=(i+1)*(w-1)+(E-1),A=(i+1)*w+(E-1),M=(i+1)*w+E,L=(i+1)*(w-1)+E;g.push(R,A,L),g.push(A,M,L)}}function S(){for(let w=0;w<=n;w++)for(let E=0;E<=i;E++)c.x=w/n,c.y=E/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new WS(new Q_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class fj extends Ft{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new V,s=new V;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],p=d.start,m=d.count;for(let g=p,y=p+m;g<y;g+=3)for(let _=0;_<3;_++){const v=a.getX(g+_),S=a.getX(g+(_+1)%3);i.fromBufferAttribute(o,v),s.fromBufferAttribute(o,S),LD(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),LD(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new tt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function LD(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var kD=Object.freeze({__proto__:null,BoxGeometry:Fu,CapsuleGeometry:LS,CircleGeometry:kS,ConeGeometry:OS,CylinderGeometry:_h,DodecahedronGeometry:NS,EdgesGeometry:lj,ExtrudeGeometry:US,IcosahedronGeometry:FS,LatheGeometry:Og,OctahedronGeometry:Ng,PlaneGeometry:vh,PolyhedronGeometry:uc,RingGeometry:BS,ShapeGeometry:zS,SphereGeometry:Dg,TetrahedronGeometry:VS,TorusGeometry:HS,TorusKnotGeometry:jS,TubeGeometry:WS,WireframeGeometry:fj});class hj extends $r{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new $e(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class pj extends Bs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class aP extends $r{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mj extends aP{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return tr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class gj extends $r{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.combine=Cg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vj extends $r{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class yj extends $r{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class _j extends $r{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.combine=Cg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xj extends $r{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lc,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sj extends Ci{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function nu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function wj(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bj(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function jT(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function lP(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function the(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],p=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*i;if(!(g<n||g>=r)){d.push(c.times[m]);for(let y=0;y<u;++y)p.push(c.values[m*u+y])}}d.length!==0&&(c.times=nu(d,c.times.constructor),c.values=nu(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function nhe(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let y;if(s<=a.times[0]){const v=u,S=d-u;y=a.values.slice(v,S)}else if(s>=a.times[g]){const v=g*d+u,S=v+d-u;y=a.values.slice(v,S)}else{const v=a.createInterpolant(),S=u,w=d-u;v.evaluate(s),y=v.resultBuffer.slice(S,w)}l==="quaternion"&&new zi().fromArray(y).normalize().conjugate().toArray(y);const _=c.times.length;for(let v=0;v<_;++v){const S=v*m+p;if(l==="quaternion")zi.multiplyQuaternionsFlat(c.values,S,y,0,c.values,S);else{const w=m-p*2;for(let E=0;E<w;++E)c.values[S+E]-=y[E]}}}return t.blendMode=HR,t}const rhe={convertArray:nu,isTypedArray:wj,getKeyframeOrder:bj,sortedArray:jT,flattenJSON:lP,subclip:the,makeClipAdditive:nhe};class Ug{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ej extends Ug{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qc,endingEnd:Qc}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case eu:s=e,a=2*n-r;break;case Wm:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case eu:o=e,l=2*r-n;break;case Wm:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(r-n)/(i-n),y=g*g,_=y*g,v=-p*_+2*p*y-p*g,S=(1+p)*_+(-1.5-2*p)*y+(-.5+p)*g+1,w=(-1-m)*_+(1.5+m)*y+.5*g,E=m*_-m*y;for(let R=0;R!==a;++R)s[R]=v*o[u+R]+S*o[c+R]+w*o[l+R]+E*o[d+R];return s}}class cP extends Ug{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),d=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*d+o[l+p]*u;return s}}class Mj extends Ug{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class yo{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=nu(n,this.TimeBufferType),this.values=nu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:nu(e.times,Array),values:nu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Mj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ej(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Hm:n=this.InterpolantFactoryMethodDiscrete;break;case jm:n=this.InterpolantFactoryMethodLinear;break;case X0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Hm;case this.InterpolantFactoryMethodLinear:return jm;case this.InterpolantFactoryMethodSmooth:return X0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&wj(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===X0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let g=0;g!==r;++g){const y=n[d+g];if(y!==n[p+g]||y!==n[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)n[p+m]=n[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}yo.prototype.TimeBufferType=Float32Array;yo.prototype.ValueBufferType=Float32Array;yo.prototype.DefaultInterpolation=jm;class Bu extends yo{}Bu.prototype.ValueTypeName="bool";Bu.prototype.ValueBufferType=Array;Bu.prototype.DefaultInterpolation=Hm;Bu.prototype.InterpolantFactoryMethodLinear=void 0;Bu.prototype.InterpolantFactoryMethodSmooth=void 0;class uP extends yo{}uP.prototype.ValueTypeName="color";class tg extends yo{}tg.prototype.ValueTypeName="number";class Tj extends Ug{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)zi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class xh extends yo{InterpolantFactoryMethodLinear(e){return new Tj(this.times,this.values,this.getValueSize(),e)}}xh.prototype.ValueTypeName="quaternion";xh.prototype.DefaultInterpolation=jm;xh.prototype.InterpolantFactoryMethodSmooth=void 0;class zu extends yo{}zu.prototype.ValueTypeName="string";zu.prototype.ValueBufferType=Array;zu.prototype.DefaultInterpolation=Hm;zu.prototype.InterpolantFactoryMethodLinear=void 0;zu.prototype.InterpolantFactoryMethodSmooth=void 0;class ng extends yo{}ng.prototype.ValueTypeName="vector";class rg{constructor(e="",n=-1,r=[],i=wS){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ss(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(she(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(yo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=bj(l);l=jT(l,1,u),c=jT(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new tg(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let p=i[d];p||(i[d]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,g,y){if(m.length!==0){const _=[],v=[];lP(m,_,v,g),_.length!==0&&y.push(new d(p,_,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const p=c[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let y=0;y<p[g].morphTargets.length;y++)m[p[g].morphTargets[y]]=-1;for(const y in m){const _=[],v=[];for(let S=0;S!==p[g].morphTargets.length;++S){const w=p[g];_.push(w.time),v.push(w.morphTarget===y?1:0)}i.push(new tg(".morphTargetInfluence["+y+"]",_,v))}l=m.length*o}else{const m=".bones["+n[d].name+"]";r(ng,m+".position",p,"pos",i),r(xh,m+".quaternion",p,"rot",i),r(ng,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ihe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return tg;case"vector":case"vector2":case"vector3":case"vector4":return ng;case"color":return uP;case"quaternion":return xh;case"bool":case"boolean":return Bu;case"string":return zu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function she(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ihe(t.type);if(t.times===void 0){const n=[],r=[];lP(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const wa={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class dP{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,p=c.length;d<p;d+=2){const m=c[d],g=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const Cj=new dP;class ji{constructor(e){this.manager=e!==void 0?e:Cj,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ji.DEFAULT_MATERIAL_NAME="__DEFAULT";const da={};class ohe extends Error{constructor(e,n){super(e),this.response=n}}class Fa extends ji{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=wa.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(da[e]!==void 0){da[e].push({onLoad:n,onProgress:r,onError:i});return}da[e]=[],da[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=da[e],d=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,g=m!==0;let y=0;const _=new ReadableStream({start(v){S();function S(){d.read().then(({done:w,value:E})=>{if(w)v.close();else{y+=E.byteLength;const R=new ProgressEvent("progress",{lengthComputable:g,loaded:y,total:m});for(let A=0,M=u.length;A<M;A++){const L=u[A];L.onProgress&&L.onProgress(R)}v.enqueue(E),S()}})}}});return new Response(_)}else throw new ohe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{wa.add(e,c);const u=da[e];delete da[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=da[e];if(u===void 0)throw this.manager.itemError(e),c;delete da[e];for(let d=0,p=u.length;d<p;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ahe extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Fa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=rg.parse(e[r]);n.push(i)}return n}}class lhe extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new PS,l=new Fa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=pr),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)u(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+y]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=pr),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class ig extends ji{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wa.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Km("img");function l(){u(),wa.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class che extends ji{constructor(e){super(e)}load(e,n,r,i){const s=new Ig;s.colorSpace=Cs;const o=new ig(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class uhe extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new jl,a=new Fa(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:ks,o.wrapT=c.wrapT!==void 0?c.wrapT:ks,o.magFilter=c.magFilter!==void 0?c.magFilter:pr,o.minFilter=c.minFilter!==void 0?c.minFilter:pr,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Uo),c.mipmapCount===1&&(o.minFilter=pr),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class dhe extends ji{constructor(e){super(e)}load(e,n,r,i){const s=new Xn,o=new ig(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class dc extends on{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new $e(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Aj extends dc{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(on.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $e(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const Qb=new wt,OD=new V,ND=new V;class fP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Me(512,512),this.map=null,this.mapPass=null,this.matrix=new wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lg,this._frameExtents=new Me(1,1),this._viewportCount=1,this._viewports=[new pn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;OD.setFromMatrixPosition(e.matrixWorld),n.position.copy(OD),ND.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(ND),n.updateMatrixWorld(),Qb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qb),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Qb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fhe extends fP{constructor(){super(new kr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Wf*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Rj extends dc{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(on.DEFAULT_UP),this.updateMatrix(),this.target=new on,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new fhe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const DD=new wt,bp=new V,eE=new V;class hhe extends fP{constructor(){super(new kr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Me(4,2),this._viewportCount=6,this._viewports=[new pn(2,1,1,1),new pn(0,1,1,1),new pn(3,1,1,1),new pn(1,1,1,1),new pn(3,0,1,1),new pn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),bp.setFromMatrixPosition(e.matrixWorld),r.position.copy(bp),eE.copy(r.position),eE.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(eE),r.updateMatrixWorld(),i.makeTranslation(-bp.x,-bp.y,-bp.z),DD.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DD)}}class Pj extends dc{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new hhe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class phe extends fP{constructor(){super(new kg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ij extends dc{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(on.DEFAULT_UP),this.updateMatrix(),this.target=new on,this.shadow=new phe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Lj extends dc{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class kj extends dc{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Oj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class Nj extends dc{constructor(e=new Oj,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class GS extends ji{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new Fa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=GS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new $e().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new $e().setHex(o.value);break;case"v2":i.uniforms[s].value=new Me().fromArray(o.value);break;case"v3":i.uniforms[s].value=new V().fromArray(o.value);break;case"v4":i.uniforms[s].value=new pn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Lt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new wt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Me().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:hj,SpriteMaterial:ZR,RawShaderMaterial:pj,ShaderMaterial:Bs,PointsMaterial:eP,MeshPhysicalMaterial:mj,MeshStandardMaterial:aP,MeshPhongMaterial:gj,MeshToonMaterial:vj,MeshNormalMaterial:yj,MeshLambertMaterial:_j,MeshDepthMaterial:KR,MeshDistanceMaterial:JR,MeshBasicMaterial:cc,MeshMatcapMaterial:xj,LineDashedMaterial:Sj,LineBasicMaterial:Ci,Material:$r};return new n[e]}}class WT{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Dj extends Ft{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Uj extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Fa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,g){if(n[g]!==void 0)return n[g];const _=m.interleavedBuffers[g],v=s(m,_.buffer),S=cf(_.type,v),w=new AS(S,_.stride);return w.uuid=_.uuid,n[g]=w,w}function s(m,g){if(r[g]!==void 0)return r[g];const _=m.arrayBuffers[g],v=new Uint32Array(_).buffer;return r[g]=v,v}const o=e.isInstancedBufferGeometry?new Dj:new Ft,a=e.data.index;if(a!==void 0){const m=cf(a.type,a.array);o.setIndex(new gn(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let y;if(g.isInterleavedBufferAttribute){const _=i(e.data,g.data);y=new Cu(_,g.itemSize,g.offset,g.normalized)}else{const _=cf(g.type,g.array),v=g.isInstancedBufferAttribute?$f:gn;y=new v(_,g.itemSize,g.normalized)}g.name!==void 0&&(y.name=g.name),g.usage!==void 0&&y.setUsage(g.usage),o.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],y=[];for(let _=0,v=g.length;_<v;_++){const S=g[_];let w;if(S.isInterleavedBufferAttribute){const E=i(e.data,S.data);w=new Cu(E,S.itemSize,S.offset,S.normalized)}else{const E=cf(S.type,S.array);w=new gn(E,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),y.push(w)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,g=d.length;m!==g;++m){const y=d[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new V;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new ci(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class mhe extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?WT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Fa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?WT.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Fa(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new fu().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new RS().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new Uj;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in kD?a=kD[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new GS;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=rg.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:cf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new dP(n);s=new ig(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],p=d.url;if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const _=p[g],v=a(_);v!==null&&(v instanceof HTMLImageElement?m.push(v):m.push(new jl(v.data,v.width,v.height)))}i[d.uuid]=new tu(m)}else{const m=a(d.url);i[d.uuid]=new tu(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:cf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new ig(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d],g=await s(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new jl(g.data,g.width,g.height)))}r[l.uuid]=new tu(u)}else{const u=await s(l.url);r[l.uuid]=new tu(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new Ig,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new jl:u=new Xn,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,ghe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],UD),u.wrapT=r(a.wrap[1],UD)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,FD)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,FD)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,y=p.length;g<y;g++){const _=p[g];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(r[_])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,d;switch(e.type){case"Scene":o=new K_,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new $e(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new CS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new TS(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new kr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new kg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Lj(e.color,e.intensity);break;case"DirectionalLight":o=new Ij(e.color,e.intensity);break;case"PointLight":o=new Pj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new kj(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Rj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Aj(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Nj().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new ZH(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new gr(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new QH(u,d,p),o.instanceMatrix=new $f(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new $f(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new ej(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(y=>{const _=new bi;_.min.fromArray(y.boxMin),_.max.fromArray(y.boxMax);const v=new ci;return v.radius=y.sphereRadius,v.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:_,sphereInitialized:y.sphereInitialized,sphere:v}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new JH;break;case"Line":o=new Zl(a(e.geometry),l(e.material));break;case"LineLoop":o=new tj(a(e.geometry),l(e.material));break;case"LineSegments":o=new Jo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new nj(a(e.geometry),l(e.material));break;case"Sprite":o=new KH(l(e.material));break;case"Group":o=new df;break;case"Bone":o=new QR;break;default:o=new on}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],n,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],y=o.getObjectByProperty("uuid",g.object);y!==void 0&&o.addLevel(y,g.distance,g.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const ghe={UVMapping:SS,CubeReflectionMapping:Ua,CubeRefractionMapping:Jl,EquirectangularReflectionMapping:Fm,EquirectangularRefractionMapping:Bm,CubeUVReflectionMapping:ph},UD={RepeatWrapping:zm,ClampToEdgeWrapping:ks,MirroredRepeatWrapping:Vm},FD={NearestFilter:Or,NearestMipmapNearestFilter:kR,NearestMipmapLinearFilter:lf,LinearFilter:pr,LinearMipmapNearestFilter:em,LinearMipmapLinearFilter:Uo};class vhe extends ji{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wa.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return wa.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),wa.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});wa.add(e,l),s.manager.itemStart(e)}}let Zy;class hP{static getContext(){return Zy===void 0&&(Zy=new(window.AudioContext||window.webkitAudioContext)),Zy}static setContext(e){Zy=e}}class yhe extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Fa(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);hP.getContext().decodeAudioData(c,function(d){n(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const BD=new wt,zD=new wt,Ic=new wt;class _he{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new kr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new kr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Ic.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(uu*n.fov*.5)/n.zoom;let a,l;zD.elements[12]=-i,BD.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Ic.elements[0]=2*n.near/(l-a),Ic.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ic),a=-o*n.aspect-s,l=o*n.aspect-s,Ic.elements[0]=2*n.near/(l-a),Ic.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ic)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(zD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(BD)}}class pP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=VD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=VD();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function VD(){return(typeof performance>"u"?Date:performance).now()}const Lc=new V,HD=new zi,xhe=new V,kc=new V;class She extends on{constructor(){super(),this.type="AudioListener",this.context=hP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new pP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Lc,HD,xhe),kc.set(0,0,-1).applyQuaternion(HD),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Lc.x,i),n.positionY.linearRampToValueAtTime(Lc.y,i),n.positionZ.linearRampToValueAtTime(Lc.z,i),n.forwardX.linearRampToValueAtTime(kc.x,i),n.forwardY.linearRampToValueAtTime(kc.y,i),n.forwardZ.linearRampToValueAtTime(kc.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Lc.x,Lc.y,Lc.z),n.setOrientation(kc.x,kc.y,kc.z,r.x,r.y,r.z)}}class Fj extends on{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Oc=new V,jD=new zi,whe=new V,Nc=new V;class bhe extends Fj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Oc,jD,whe),Nc.set(0,0,1).applyQuaternion(jD);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Oc.x,r),n.positionY.linearRampToValueAtTime(Oc.y,r),n.positionZ.linearRampToValueAtTime(Oc.z,r),n.orientationX.linearRampToValueAtTime(Nc.x,r),n.orientationY.linearRampToValueAtTime(Nc.y,r),n.orientationZ.linearRampToValueAtTime(Nc.z,r)}else n.setPosition(Oc.x,Oc.y,Oc.z),n.setOrientation(Nc.x,Nc.y,Nc.z)}}class Ehe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class Bj{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){zi.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;zi.multiplyQuaternionsFlat(e,o,e,n,e,r),zi.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const mP="\\[\\]\\.:\\/",Mhe=new RegExp("["+mP+"]","g"),gP="[^"+mP+"]",The="[^"+mP.replace("\\.","")+"]",Che=/((?:WC+[\/:])*)/.source.replace("WC",gP),Ahe=/(WCOD+)?/.source.replace("WCOD",The),Rhe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gP),Phe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gP),Ihe=new RegExp("^"+Che+Ahe+Rhe+Phe+"$"),Lhe=["material","materials","bones","map"];class khe{constructor(e,n,r){const i=r||en.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class en{constructor(e,n,r){this.path=n,this.parsedPath=r||en.parseTrackName(n),this.node=en.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new en.Composite(e,n,r):new en(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Mhe,"")}static parseTrackName(e){const n=Ihe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Lhe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=en.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}en.Composite=khe;en.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};en.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};en.prototype.GetterByBindingType=[en.prototype._getValue_direct,en.prototype._getValue_array,en.prototype._getValue_arrayElement,en.prototype._getValue_toArray];en.prototype.SetterByBindingTypeAndVersioning=[[en.prototype._setValue_direct,en.prototype._setValue_direct_setNeedsUpdate,en.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[en.prototype._setValue_array,en.prototype._setValue_array_setNeedsUpdate,en.prototype._setValue_array_setMatrixWorldNeedsUpdate],[en.prototype._setValue_arrayElement,en.prototype._setValue_arrayElement_setNeedsUpdate,en.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[en.prototype._setValue_fromArray,en.prototype._setValue_fromArray_setNeedsUpdate,en.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ohe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ss(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const p=arguments[u],m=p.uuid;let g=n[m];if(g===void 0){g=l++,n[m]=g,e.push(p);for(let y=0,_=o;y!==_;++y)s[y].push(new en(p,r[y],i[y]))}else if(g<c){a=e[g];const y=--c,_=e[y];n[_.uuid]=g,e[g]=_,n[m]=y,e[y]=p;for(let v=0,S=o;v!==S;++v){const w=s[v],E=w[y];let R=w[g];w[g]=E,R===void 0&&(R=new en(p,r[v],i[v])),w[y]=R}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const d=s++,p=e[d];n[p.uuid]=u,e[u]=p,n[c]=d,e[d]=l;for(let m=0,g=i;m!==g;++m){const y=r[m],_=y[d],v=y[u];y[u]=_,y[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<s){const p=--s,m=e[p],g=--o,y=e[g];n[m.uuid]=d,e[d]=m,n[y.uuid]=p,e[p]=y,e.pop();for(let _=0,v=i;_!==v;++_){const S=r[_],w=S[p],E=S[g];S[d]=w,S[p]=E,S.pop()}}else{const p=--o,m=e[p];p>0&&(n[m.uuid]=d),e[d]=m,e.pop();for(let g=0,y=i;g!==y;++g){const _=r[g];_[d]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(d);for(let p=u,m=l.length;p!==m;++p){const g=l[p];d[p]=new en(g,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class zj{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Qc,endingEnd:Qc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=yH,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case HR:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case wS:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===_H;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===vH){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=eu,i.endingEnd=eu):(e?i.endingStart=this.zeroSlopeAtStart?eu:Qc:i.endingStart=Wm,n?i.endingEnd=this.zeroSlopeAtEnd?eu:Qc:i.endingEnd=Wm)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const Nhe=new Float32Array(1);class Dhe extends Xa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let g=u[m];if(g!==void 0)++g.referenceCount,o[d]=g;else{if(g=o[d],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const y=n&&n._propertyBindings[d].binding.parsedPath;g=new Bj(en.create(r,m,y),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new cP(new Float32Array(2),new Float32Array(2),1,Nhe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?rg.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=wS),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new zj(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?rg.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class vP{constructor(e){this.value=e}clone(){return new vP(this.value.clone===void 0?this.value:this.value.clone())}}let Uhe=0;class Fhe extends Xa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Uhe++}),this.name="",this.usage=qm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Bhe extends AS{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class zhe{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const WD=new wt;class Vj{constructor(e,n,r=0,i=1/0){this.ray=new gh(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new du,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return WD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(WD),this}intersectObject(e,n=!0,r=[]){return GT(e,this,r,n),r.sort(GD),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)GT(e[i],this,r,n);return r.sort(GD),r}}function GD(t,e){return t.distance-e.distance}function GT(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)GT(i[s],e,n,!0)}}class Hj{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(tr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Vhe{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const $D=new Me;class Hhe{constructor(e=new Me(1/0,1/0),n=new Me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=$D.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$D).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const XD=new V,Qy=new V;class jhe{constructor(e=new V,n=new V){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){XD.subVectors(e,this.start),Qy.subVectors(this.end,this.start);const r=Qy.dot(Qy);let s=Qy.dot(XD)/r;return n&&(s=tr(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const qD=new V;class Whe extends on{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Ft,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new tt(i,3));const s=new Ci({fog:!1,toneMapped:!1});this.cone=new Jo(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),qD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(qD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const pl=new V,e0=new wt,tE=new wt;class Ghe extends Jo{constructor(e){const n=jj(e),r=new Ft,i=[],s=[],o=new $e(0,0,1),a=new $e(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new tt(i,3)),r.setAttribute("color",new tt(s,3));const l=new Ci({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");tE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(e0.multiplyMatrices(tE,a.matrixWorld),pl.setFromMatrixPosition(e0),i.setXYZ(o,pl.x,pl.y,pl.z),e0.multiplyMatrices(tE,a.parent.matrixWorld),pl.setFromMatrixPosition(e0),i.setXYZ(o+1,pl.x,pl.y,pl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function jj(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,jj(t.children[n]));return e}class $he extends gr{constructor(e,n,r){const i=new Dg(n,4,2),s=new cc({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Xhe=new V,YD=new $e,KD=new $e;class qhe extends on{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Ng(n);i.rotateY(Math.PI*.5),this.material=new cc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new gn(o,3)),this.add(new gr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");YD.copy(this.light.color),KD.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?YD:KD;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Xhe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Yhe extends Jo{constructor(e=10,n=10,r=4473924,i=8947848){r=new $e(r),i=new $e(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let p=0,m=0,g=-a;p<=n;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const y=p===s?r:i;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const u=new Ft;u.setAttribute("position",new tt(l,3)),u.setAttribute("color",new tt(c,3));const d=new Ci({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Khe extends Jo{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new $e(s),o=new $e(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const p=d/n*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const y=d&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let g=0;g<i;g++){let y=g/i*(Math.PI*2),_=Math.sin(y)*m,v=Math.cos(y)*m;a.push(_,0,v),l.push(p.r,p.g,p.b),y=(g+1)/i*(Math.PI*2),_=Math.sin(y)*m,v=Math.cos(y)*m,a.push(_,0,v),l.push(p.r,p.g,p.b)}}const c=new Ft;c.setAttribute("position",new tt(a,3)),c.setAttribute("color",new tt(l,3));const u=new Ci({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const JD=new V,t0=new V,ZD=new V;class Jhe extends on{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Ft;i.setAttribute("position",new tt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Ci({fog:!1,toneMapped:!1});this.lightPlane=new Zl(i,s),this.add(this.lightPlane),i=new Ft,i.setAttribute("position",new tt([0,0,0,0,0,1],3)),this.targetLine=new Zl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),JD.setFromMatrixPosition(this.light.matrixWorld),t0.setFromMatrixPosition(this.light.target.matrixWorld),ZD.subVectors(t0,JD),this.lightPlane.lookAt(t0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t0),this.targetLine.scale.z=ZD.length()}}const n0=new V,Zn=new Pg;class Zhe extends Jo{constructor(e){const n=new Ft,r=new Ci({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,y){l(g),l(y)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}n.setAttribute("position",new tt(i,3)),n.setAttribute("color",new tt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new $e(16755200),u=new $e(16711680),d=new $e(43775),p=new $e(16777215),m=new $e(3355443);this.setColors(c,u,d,p,m)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ir("c",n,e,Zn,0,0,-1),ir("t",n,e,Zn,0,0,1),ir("n1",n,e,Zn,-r,-i,-1),ir("n2",n,e,Zn,r,-i,-1),ir("n3",n,e,Zn,-r,i,-1),ir("n4",n,e,Zn,r,i,-1),ir("f1",n,e,Zn,-r,-i,1),ir("f2",n,e,Zn,r,-i,1),ir("f3",n,e,Zn,-r,i,1),ir("f4",n,e,Zn,r,i,1),ir("u1",n,e,Zn,r*.7,i*1.1,-1),ir("u2",n,e,Zn,-r*.7,i*1.1,-1),ir("u3",n,e,Zn,0,i*2,-1),ir("cf1",n,e,Zn,-r,0,1),ir("cf2",n,e,Zn,r,0,1),ir("cf3",n,e,Zn,0,-i,1),ir("cf4",n,e,Zn,0,i,1),ir("cn1",n,e,Zn,-r,0,-1),ir("cn2",n,e,Zn,r,0,-1),ir("cn3",n,e,Zn,0,-i,-1),ir("cn4",n,e,Zn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ir(t,e,n,r,i,s,o){n0.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],n0.x,n0.y,n0.z)}}const r0=new bi;class Qhe extends Jo{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Ft;s.setIndex(new gn(r,1)),s.setAttribute("position",new gn(i,3)),super(s,new Ci({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&r0.setFromObject(this.object),r0.isEmpty())return;const n=r0.min,r=r0.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class epe extends Jo{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ft;s.setIndex(new gn(r,1)),s.setAttribute("position",new tt(i,3)),super(s,new Ci({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class tpe extends Zl{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Ft;o.setAttribute("position",new tt(s,3)),o.computeBoundingSphere(),super(o,new Ci({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ft;l.setAttribute("position",new tt(a,3)),l.computeBoundingSphere(),this.add(new gr(l,new cc({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QD=new V;let i0,nE;class npe extends on{constructor(e=new V(0,0,1),n=new V(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",i0===void 0&&(i0=new Ft,i0.setAttribute("position",new tt([0,0,0,0,1,0],3)),nE=new _h(0,.5,1,5,1),nE.translate(0,-.5,0)),this.position.copy(n),this.line=new Zl(i0,new Ci({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new gr(nE,new cc({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{QD.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(QD,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class rpe extends Jo{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ft;i.setAttribute("position",new tt(n,3)),i.setAttribute("color",new tt(r,3));const s=new Ci({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new $e,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ipe{constructor(){this.type="ShapePath",this.color=new $e,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Jm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(v){const S=[];for(let w=0,E=v.length;w<E;w++){const R=v[w],A=new fu;A.curves=R.curves,S.push(A)}return S}function r(v,S){const w=S.length;let E=!1;for(let R=w-1,A=0;A<w;R=A++){let M=S[R],L=S[A],P=L.x-M.x,C=L.y-M.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(M=S[A],P=-P,L=S[R],C=-C),v.y<M.y||v.y>L.y)continue;if(v.y===M.y){if(v.x===M.x)return!0}else{const N=C*(v.x-M.x)-P*(v.y-M.y);if(N===0)return!0;if(N<0)continue;E=!E}}else{if(v.y!==M.y)continue;if(L.x<=v.x&&v.x<=M.x||M.x<=v.x&&v.x<=L.x)return!0}}return E}const i=Xo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new fu,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],p=[];let m=[],g=0,y;p[g]=void 0,m[g]=[];for(let v=0,S=s.length;v<S;v++)a=s[v],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!u&&p[g]&&g++,p[g]={s:new fu,p:y},p[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:y[0]});if(!p[0])return n(s);if(p.length>1){let v=!1,S=0;for(let w=0,E=p.length;w<E;w++)d[w]=[];for(let w=0,E=p.length;w<E;w++){const R=m[w];for(let A=0;A<R.length;A++){const M=R[A];let L=!0;for(let P=0;P<p.length;P++)r(M.p,p[P].p)&&(w!==P&&S++,L?(L=!1,d[P].push(M)):v=!0);L&&d[w].push(M)}}S>0&&v===!1&&(m=d)}let _;for(let v=0,S=p.length;v<S;v++){l=p[v].s,c.push(l),_=m[v];for(let w=0,E=_.length;w<E;w++)l.holes.push(_[w].h)}return c}}class spe extends mo{constructor(e=1,n=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Tg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Tg);const ope=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:LR,AddEquation:Il,AddOperation:eH,AdditiveAnimationBlendMode:HR,AdditiveBlending:X_,AgXToneMapping:sH,AlphaFormat:dH,AlwaysCompare:RH,AlwaysDepth:X5,AlwaysStencilFunc:DT,AmbientLight:Lj,AnimationAction:zj,AnimationClip:rg,AnimationLoader:ahe,AnimationMixer:Dhe,AnimationObjectGroup:Ohe,AnimationUtils:rhe,ArcCurve:rj,ArrayCamera:XH,ArrowHelper:npe,AttachedBindMode:cT,Audio:Fj,AudioAnalyser:Ehe,AudioContext:hP,AudioListener:She,AudioLoader:yhe,AxesHelper:rpe,BackSide:wi,BasicDepthPacking:xH,BasicShadowMap:C5,BatchedMesh:ej,Bone:QR,BooleanKeyframeTrack:Bu,Box2:Hhe,Box3:bi,Box3Helper:epe,BoxGeometry:Fu,BoxHelper:Qhe,BufferAttribute:gn,BufferGeometry:Ft,BufferGeometryLoader:Uj,ByteType:lH,Cache:wa,Camera:Pg,CameraHelper:Zhe,CanvasTexture:Cfe,CapsuleGeometry:LS,CatmullRomCurve3:ij,CineonToneMapping:rH,CircleGeometry:kS,ClampToEdgeWrapping:ks,Clock:pP,Color:$e,ColorKeyframeTrack:uP,ColorManagement:hn,CompressedArrayTexture:Mfe,CompressedCubeTexture:Tfe,CompressedTexture:PS,CompressedTextureLoader:lhe,ConeGeometry:OS,ConstantAlphaFactor:W5,ConstantColorFactor:H5,CubeCamera:FH,CubeReflectionMapping:Ua,CubeRefractionMapping:Jl,CubeTexture:Ig,CubeTextureLoader:che,CubeUVReflectionMapping:ph,CubicBezierCurve:nP,CubicBezierCurve3:sj,CubicInterpolant:Ej,CullFaceBack:oT,CullFaceFront:T5,CullFaceFrontBack:poe,CullFaceNone:M5,Curve:vo,CurvePath:aj,CustomBlending:A5,CustomToneMapping:iH,CylinderGeometry:_h,Cylindrical:Vhe,Data3DTexture:GR,DataArrayTexture:ES,DataTexture:jl,DataTextureLoader:uhe,DataUtils:bae,DecrementStencilOp:Moe,DecrementWrapStencilOp:Coe,DefaultLoadingManager:Cj,DepthFormat:cu,DepthStencilFormat:jf,DepthTexture:YR,DetachedBindMode:aH,DirectionalLight:Ij,DirectionalLightHelper:Jhe,DiscreteInterpolant:Mj,DisplayP3ColorSpace:bS,DodecahedronGeometry:NS,DoubleSide:No,DstAlphaFactor:U5,DstColorFactor:B5,DynamicCopyUsage:Hoe,DynamicDrawUsage:Doe,DynamicReadUsage:Boe,EdgesGeometry:lj,EllipseCurve:IS,EqualCompare:MH,EqualDepth:Y5,EqualStencilFunc:Ioe,EquirectangularReflectionMapping:Fm,EquirectangularRefractionMapping:Bm,Euler:ls,EventDispatcher:Xa,ExtrudeGeometry:US,FileLoader:Fa,Float16BufferAttribute:Rae,Float32BufferAttribute:tt,FloatType:Os,Fog:CS,FogExp2:TS,FramebufferTexture:Efe,FrontSide:Da,Frustum:Lg,GLBufferAttribute:zhe,GLSL1:Woe,GLSL3:UT,GreaterCompare:TH,GreaterDepth:J5,GreaterEqualCompare:AH,GreaterEqualDepth:K5,GreaterEqualStencilFunc:Noe,GreaterStencilFunc:koe,GridHelper:Yhe,Group:df,HalfFloatType:Ag,HemisphereLight:Aj,HemisphereLightHelper:qhe,IcosahedronGeometry:FS,ImageBitmapLoader:vhe,ImageLoader:ig,ImageUtils:kH,IncrementStencilOp:Eoe,IncrementWrapStencilOp:Toe,InstancedBufferAttribute:$f,InstancedBufferGeometry:Dj,InstancedInterleavedBuffer:Bhe,InstancedMesh:QH,Int16BufferAttribute:Cae,Int32BufferAttribute:Aae,Int8BufferAttribute:Eae,IntType:NR,InterleavedBuffer:AS,InterleavedBufferAttribute:Cu,Interpolant:Ug,InterpolateDiscrete:Hm,InterpolateLinear:jm,InterpolateSmooth:X0,InvertStencilOp:Aoe,KeepStencilOp:Hc,KeyframeTrack:yo,LOD:JH,LatheGeometry:Og,Layers:du,LessCompare:EH,LessDepth:q5,LessEqualCompare:jR,LessEqualDepth:Um,LessEqualStencilFunc:Loe,LessStencilFunc:Poe,Light:dc,LightProbe:Nj,Line:Zl,Line3:jhe,LineBasicMaterial:Ci,LineCurve:rP,LineCurve3:oj,LineDashedMaterial:Sj,LineLoop:tj,LineSegments:Jo,LinearDisplayP3ColorSpace:Rg,LinearFilter:pr,LinearInterpolant:cP,LinearMipMapLinearFilter:yoe,LinearMipMapNearestFilter:voe,LinearMipmapLinearFilter:Uo,LinearMipmapNearestFilter:em,LinearSRGBColorSpace:$a,LinearToneMapping:tH,LinearTransfer:Gm,Loader:ji,LoaderUtils:WT,LoadingManager:dP,LoopOnce:vH,LoopPingPong:_H,LoopRepeat:yH,LuminanceAlphaFormat:pH,LuminanceFormat:hH,MOUSE:foe,Material:$r,MaterialLoader:GS,MathUtils:aae,Matrix3:Lt,Matrix4:wt,MaxEquation:L5,Mesh:gr,MeshBasicMaterial:cc,MeshDepthMaterial:KR,MeshDistanceMaterial:JR,MeshLambertMaterial:_j,MeshMatcapMaterial:xj,MeshNormalMaterial:yj,MeshPhongMaterial:gj,MeshPhysicalMaterial:mj,MeshStandardMaterial:aP,MeshToonMaterial:vj,MinEquation:I5,MirroredRepeatWrapping:Vm,MixOperation:Q5,MultiplyBlending:lT,MultiplyOperation:Cg,NearestFilter:Or,NearestMipMapLinearFilter:goe,NearestMipMapNearestFilter:moe,NearestMipmapLinearFilter:lf,NearestMipmapNearestFilter:kR,NeutralToneMapping:oH,NeverCompare:bH,NeverDepth:$5,NeverStencilFunc:Roe,NoBlending:Pa,NoColorSpace:va,NoToneMapping:$o,NormalAnimationBlendMode:wS,NormalBlending:lu,NotEqualCompare:CH,NotEqualDepth:Z5,NotEqualStencilFunc:Ooe,NumberKeyframeTrack:tg,Object3D:on,ObjectLoader:mhe,ObjectSpaceNormalMap:wH,OctahedronGeometry:Ng,OneFactor:O5,OneMinusConstantAlphaFactor:G5,OneMinusConstantColorFactor:j5,OneMinusDstAlphaFactor:F5,OneMinusDstColorFactor:z5,OneMinusSrcAlphaFactor:Y_,OneMinusSrcColorFactor:D5,OrthographicCamera:kg,P3Primaries:Xm,PCFShadowMap:xS,PCFSoftShadowMap:Qp,PMREMGenerator:FT,Path:Jm,PerspectiveCamera:kr,Plane:wl,PlaneGeometry:vh,PlaneHelper:tpe,PointLight:Pj,PointLightHelper:$he,Points:nj,PointsMaterial:eP,PolarGridHelper:Khe,PolyhedronGeometry:uc,PositionalAudio:bhe,PropertyBinding:en,PropertyMixer:Bj,QuadraticBezierCurve:iP,QuadraticBezierCurve3:sP,Quaternion:zi,QuaternionKeyframeTrack:xh,QuaternionLinearInterpolant:Tj,RED_GREEN_RGTC2_Format:OT,RED_RGTC1_Format:gH,REVISION:Tg,RGBADepthPacking:SH,RGBAFormat:Ni,RGBAIntegerFormat:VR,RGBA_ASTC_10x10_Format:AT,RGBA_ASTC_10x5_Format:MT,RGBA_ASTC_10x6_Format:TT,RGBA_ASTC_10x8_Format:CT,RGBA_ASTC_12x10_Format:RT,RGBA_ASTC_12x12_Format:PT,RGBA_ASTC_4x4_Format:vT,RGBA_ASTC_5x4_Format:yT,RGBA_ASTC_5x5_Format:_T,RGBA_ASTC_6x5_Format:xT,RGBA_ASTC_6x6_Format:ST,RGBA_ASTC_8x5_Format:wT,RGBA_ASTC_8x6_Format:bT,RGBA_ASTC_8x8_Format:ET,RGBA_BPTC_Format:$0,RGBA_ETC2_EAC_Format:gT,RGBA_PVRTC_2BPPV1_Format:hT,RGBA_PVRTC_4BPPV1_Format:fT,RGBA_S3TC_DXT1_Format:j0,RGBA_S3TC_DXT3_Format:W0,RGBA_S3TC_DXT5_Format:G0,RGBFormat:fH,RGB_BPTC_SIGNED_Format:IT,RGB_BPTC_UNSIGNED_Format:LT,RGB_ETC1_Format:pT,RGB_ETC2_Format:mT,RGB_PVRTC_2BPPV1_Format:dT,RGB_PVRTC_4BPPV1_Format:uT,RGB_S3TC_DXT1_Format:H0,RGFormat:mH,RGIntegerFormat:zR,RawShaderMaterial:pj,Ray:gh,Raycaster:Vj,Rec709Primaries:$m,RectAreaLight:kj,RedFormat:FR,RedIntegerFormat:BR,ReinhardToneMapping:nH,RenderTarget:OH,RepeatWrapping:zm,ReplaceStencilOp:boe,ReverseSubtractEquation:P5,RingGeometry:BS,SIGNED_RED_GREEN_RGTC2_Format:NT,SIGNED_RED_RGTC1_Format:kT,SRGBColorSpace:Cs,SRGBTransfer:Mn,Scene:K_,ShaderChunk:Ut,ShaderLib:so,ShaderMaterial:Bs,ShadowMaterial:hj,Shape:fu,ShapeGeometry:zS,ShapePath:ipe,ShapeUtils:Xo,ShortType:cH,Skeleton:RS,SkeletonHelper:Ghe,SkinnedMesh:ZH,Source:tu,Sphere:ci,SphereGeometry:Dg,Spherical:Hj,SphericalHarmonics3:Oj,SplineCurve:oP,SpotLight:Rj,SpotLightHelper:Whe,Sprite:KH,SpriteMaterial:ZR,SrcAlphaFactor:q_,SrcAlphaSaturateFactor:V5,SrcColorFactor:N5,StaticCopyUsage:Voe,StaticDrawUsage:qm,StaticReadUsage:Foe,StereoCamera:_he,StreamCopyUsage:joe,StreamDrawUsage:Uoe,StreamReadUsage:zoe,StringKeyframeTrack:zu,SubtractEquation:R5,SubtractiveBlending:aT,TOUCH:hoe,TangentSpaceNormalMap:lc,TetrahedronGeometry:VS,Texture:Xn,TextureLoader:dhe,TorusGeometry:HS,TorusKnotGeometry:jS,Triangle:es,TriangleFanDrawMode:Soe,TriangleStripDrawMode:xoe,TrianglesDrawMode:_oe,TubeGeometry:WS,UVMapping:SS,Uint16BufferAttribute:$R,Uint32BufferAttribute:XR,Uint8BufferAttribute:Mae,Uint8ClampedBufferAttribute:Tae,Uniform:vP,UniformsGroup:Fhe,UniformsLib:Ve,UniformsUtils:UH,UnsignedByteType:Yo,UnsignedInt248Type:mh,UnsignedInt5999Type:uH,UnsignedIntType:Tu,UnsignedShort4444Type:DR,UnsignedShort5551Type:UR,UnsignedShortType:OR,VSMShadowMap:eo,Vector2:Me,Vector3:V,Vector4:pn,VectorKeyframeTrack:ng,VideoTexture:bfe,WebGL3DRenderTarget:hae,WebGLArrayRenderTarget:fae,WebGLCoordinateSystem:Fo,WebGLCubeRenderTarget:BH,WebGLMultipleRenderTargets:spe,WebGLRenderTarget:mo,WebGLRenderer:qH,WebGLUtils:$H,WebGPUCoordinateSystem:Ym,WireframeGeometry:fj,WrapAroundEnding:Wm,ZeroCurvatureEnding:Qc,ZeroFactor:k5,ZeroSlopeEnding:eu,ZeroStencilOp:woe,createCanvasElement:IH},Symbol.toStringTag,{value:"Module"}));var Wj={exports:{}},Vu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Vu.ConcurrentRoot=1;Vu.ContinuousEventPriority=4;Vu.DefaultEventPriority=16;Vu.DiscreteEventPriority=1;Vu.IdleEventPriority=536870912;Vu.LegacyRoot=0;Wj.exports=Vu;var hf=Wj.exports;function ape(t){let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const p=e;e=u?d:Object.assign({},e,d),n.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const g=u(e);if(!d(p,g)){const y=p;c(p=g,y)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const lpe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),e3=lpe?O.useEffect:O.useLayoutEffect;function cpe(t){const e=typeof t=="function"?ape(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=O.useReducer(_=>_+1,0),o=e.getState(),a=O.useRef(o),l=O.useRef(r),c=O.useRef(i),u=O.useRef(!1),d=O.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(d.current,p)),e3(()=>{m&&(d.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const g=O.useRef(o);e3(()=>{const _=()=>{try{const S=e.getState(),w=l.current(S);c.current(d.current,w)||(a.current=S,d.current=w,s())}catch{u.current=!0,s()}},v=e.subscribe(_);return e.getState()!==g.current&&_(),v},[]);const y=m?p:d.current;return O.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var Gj={exports:{}},rE={exports:{}},iE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t3;function upe(){return t3||(t3=1,function(t){function e(k,W){var G=k.length;k.push(W);e:for(;0<G;){var ee=G-1>>>1,ae=k[ee];if(0<i(ae,W))k[ee]=W,k[G]=ae,G=ee;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var W=k[0],G=k.pop();if(G!==W){k[0]=G;e:for(var ee=0,ae=k.length,Pe=ae>>>1;ee<Pe;){var re=2*(ee+1)-1,ye=k[re],Ee=re+1,xe=k[Ee];if(0>i(ye,G))Ee<ae&&0>i(xe,ye)?(k[ee]=xe,k[Ee]=G,ee=Ee):(k[ee]=ye,k[re]=G,ee=re);else if(Ee<ae&&0>i(xe,G))k[ee]=xe,k[Ee]=G,ee=Ee;else break e}}return W}function i(k,W){var G=k.sortIndex-W.sortIndex;return G!==0?G:k.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(k){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=k)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(k){if(y=!1,w(k),!g)if(n(l)!==null)g=!0,q(R);else{var W=n(c);W!==null&&fe(E,W.startTime-k)}}function R(k,W){g=!1,y&&(y=!1,v(L),L=-1),m=!0;var G=p;try{for(w(W),d=n(l);d!==null&&(!(d.expirationTime>W)||k&&!N());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,p=d.priorityLevel;var ae=ee(d.expirationTime<=W);W=t.unstable_now(),typeof ae=="function"?d.callback=ae:d===n(l)&&r(l),w(W)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var re=n(c);re!==null&&fe(E,re.startTime-W),Pe=!1}return Pe}finally{d=null,p=G,m=!1}}var A=!1,M=null,L=-1,P=5,C=-1;function N(){return!(t.unstable_now()-C<P)}function H(){if(M!==null){var k=t.unstable_now();C=k;var W=!0;try{W=M(!0,k)}finally{W?z():(A=!1,M=null)}}else A=!1}var z;if(typeof S=="function")z=function(){S(H)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,X=$.port2;$.port1.onmessage=H,z=function(){X.postMessage(null)}}else z=function(){_(H,0)};function q(k){M=k,A||(A=!0,z())}function fe(k,W){L=_(function(){k(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,q(R))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return k()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,W){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var G=p;p=k;try{return W()}finally{p=G}},t.unstable_scheduleCallback=function(k,W,G){var ee=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,k){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,k={id:u++,callback:W,priorityLevel:k,startTime:G,expirationTime:ae,sortIndex:-1},G>ee?(k.sortIndex=G,e(c,k),n(l)===null&&k===n(c)&&(y?(v(L),L=-1):y=!0,fe(E,G-ee))):(k.sortIndex=ae,e(l,k),g||m||(g=!0,q(R))),k},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(k){var W=p;return function(){var G=p;p=W;try{return k.apply(this,arguments)}finally{p=G}}}}(iE)),iE}var n3;function dpe(){return n3||(n3=1,rE.exports=upe()),rE.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fpe=function(e){var n={},r=O,i=dpe(),s=Object.assign;function o(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,x=1;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),R=Symbol.iterator;function A(f){return f===null||typeof f!="object"?null:(f=R&&f[R]||f["@@iterator"],typeof f=="function"?f:null)}function M(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case g:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case y:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case S:return h=f.displayName||null,h!==null?h:M(f.type)||"Memo";case w:h=f._payload,f=f._init;try{return M(f(h))}catch{}}return null}function L(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(h);case 8:return h===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function P(f){var h=f,x=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(x=h.return),f=h.return;while(f)}return h.tag===3?x:null}function C(f){if(P(f)!==f)throw Error(o(188))}function N(f){var h=f.alternate;if(!h){if(h=P(f),h===null)throw Error(o(188));return h!==f?null:f}for(var x=f,b=h;;){var T=x.return;if(T===null)break;var I=T.alternate;if(I===null){if(b=T.return,b!==null){x=b;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===x)return C(T),f;if(I===b)return C(T),h;I=I.sibling}throw Error(o(188))}if(x.return!==b.return)x=T,b=I;else{for(var j=!1,K=T.child;K;){if(K===x){j=!0,x=T,b=I;break}if(K===b){j=!0,b=T,x=I;break}K=K.sibling}if(!j){for(K=I.child;K;){if(K===x){j=!0,x=I,b=T;break}if(K===b){j=!0,b=I,x=T;break}K=K.sibling}if(!j)throw Error(o(189))}}if(x.alternate!==b)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?f:h}function H(f){return f=N(f),f!==null?z(f):null}function z(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=z(f);if(h!==null)return h;f=f.sibling}return null}function $(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var h=$(f);if(h!==null)return h}f=f.sibling}return null}var X=Array.isArray,q=e.getPublicInstance,fe=e.getRootHostContext,k=e.getChildHostContext,W=e.prepareForCommit,G=e.resetAfterCommit,ee=e.createInstance,ae=e.appendInitialChild,Pe=e.finalizeInitialChildren,re=e.prepareUpdate,ye=e.shouldSetTextContent,Ee=e.createTextInstance,xe=e.scheduleTimeout,it=e.cancelTimeout,dt=e.noTimeout,te=e.isPrimaryRenderer,ut=e.supportsMutation,he=e.supportsPersistence,Se=e.supportsHydration,_e=e.getInstanceFromNode,Le=e.preparePortalMount,Te=e.getCurrentEventPriority,He=e.detachDeletedInstance,nt=e.supportsMicrotasks,B=e.scheduleMicrotask,D=e.supportsTestSelectors,J=e.findFiberRoot,de=e.getBoundingRect,pe=e.getTextContent,we=e.isHiddenSubtree,Qe=e.matchAccessibilityRole,De=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,Ct=e.appendChild,Oe=e.appendChildToContainer,st=e.commitTextUpdate,Et=e.commitMount,ft=e.commitUpdate,Xe=e.insertBefore,At=e.insertInContainerBefore,zt=e.removeChild,Sn=e.removeChildFromContainer,Mt=e.resetTextContent,Z=e.hideInstance,Ce=e.hideTextInstance,be=e.unhideInstance,ze=e.unhideTextInstance,Ge=e.clearContainer,$t=e.cloneInstance,un=e.createContainerChildSet,Y=e.appendChildToContainerChildSet,ie=e.finalizeContainerChildren,le=e.replaceContainerChildren,Re=e.cloneHiddenInstance,Ue=e.cloneHiddenTextInstance,Tt=e.canHydrateInstance,at=e.canHydrateTextInstance,qe=e.canHydrateSuspenseInstance,bt=e.isSuspenseInstancePending,gt=e.isSuspenseInstanceFallback,Ln=e.registerSuspenseInstanceRetry,wn=e.getNextHydratableSibling,vt=e.getFirstHydratableChild,yn=e.getFirstHydratableChildWithinContainer,Kn=e.getFirstHydratableChildWithinSuspenseInstance,Zo=e.hydrateInstance,F=e.hydrateTextInstance,ne=e.hydrateSuspenseInstance,ue=e.getNextHydratableInstanceAfterSuspenseInstance,oe=e.commitHydratedContainer,se=e.commitHydratedSuspenseInstance,Be=e.clearSuspenseBoundary,Ke=e.clearSuspenseBoundaryFromContainer,Ze=e.shouldDeleteUnhydratedTailInstances,Ne=e.didNotMatchHydratedContainerTextInstance,rt=e.didNotMatchHydratedTextInstance,lt;function et(f){if(lt===void 0)try{throw Error()}catch(x){var h=x.stack.trim().match(/\n( *(at )?)/);lt=h&&h[1]||""}return`
`+lt+f}var dn=!1;function Bn(f,h){if(!f||dn)return"";dn=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(ke){var b=ke}Reflect.construct(f,[],h)}else{try{h.call()}catch(ke){b=ke}f.call(h.prototype)}else{try{throw Error()}catch(ke){b=ke}f()}}catch(ke){if(ke&&b&&typeof ke.stack=="string"){for(var T=ke.stack.split(`
`),I=b.stack.split(`
`),j=T.length-1,K=I.length-1;1<=j&&0<=K&&T[j]!==I[K];)K--;for(;1<=j&&0<=K;j--,K--)if(T[j]!==I[K]){if(j!==1||K!==1)do if(j--,K--,0>K||T[j]!==I[K]){var ve=`
`+T[j].replace(" at new "," at ");return f.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",f.displayName)),ve}while(1<=j&&0<=K);break}}}finally{dn=!1,Error.prepareStackTrace=x}return(f=f?f.displayName||f.name:"")?et(f):""}var Br=Object.prototype.hasOwnProperty,Wi=[],Xt=-1;function yt(f){return{current:f}}function an(f){0>Xt||(f.current=Wi[Xt],Wi[Xt]=null,Xt--)}function _t(f,h){Xt++,Wi[Xt]=f.current,f.current=h}var Xr={},yr=yt(Xr),lr=yt(!1),js=Xr;function zn(f,h){var x=f.type.contextTypes;if(!x)return Xr;var b=f.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===h)return b.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in x)T[I]=h[I];return b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=T),T}function Vn(f){return f=f.childContextTypes,f!=null}function qa(){an(lr),an(yr)}function fi(f,h,x){if(yr.current!==Xr)throw Error(o(168));_t(yr,h),_t(lr,x)}function Yu(f,h,x){var b=f.stateNode;if(h=h.childContextTypes,typeof b.getChildContext!="function")return x;b=b.getChildContext();for(var T in b)if(!(T in h))throw Error(o(108,L(f)||"Unknown",T));return s({},x,b)}function Ku(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Xr,js=yr.current,_t(yr,f),_t(lr,lr.current),!0}function Ah(f,h,x){var b=f.stateNode;if(!b)throw Error(o(169));x?(f=Yu(f,h,js),b.__reactInternalMemoizedMergedChildContext=f,an(lr),an(yr),_t(yr,f)):an(lr),_t(lr,x)}var Ws=Math.clz32?Math.clz32:yW,gW=Math.log,vW=Math.LN2;function yW(f){return f>>>=0,f===0?32:31-(gW(f)/vW|0)|0}var $g=64,Xg=4194304;function Rh(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function qg(f,h){var x=f.pendingLanes;if(x===0)return 0;var b=0,T=f.suspendedLanes,I=f.pingedLanes,j=x&268435455;if(j!==0){var K=j&~T;K!==0?b=Rh(K):(I&=j,I!==0&&(b=Rh(I)))}else j=x&~T,j!==0?b=Rh(j):I!==0&&(b=Rh(I));if(b===0)return 0;if(h!==0&&h!==b&&!(h&T)&&(T=b&-b,I=h&-h,T>=I||T===16&&(I&4194240)!==0))return h;if(b&4&&(b|=x&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=b;0<h;)x=31-Ws(h),T=1<<x,b|=f[x],h&=~T;return b}function _W(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xW(f,h){for(var x=f.suspendedLanes,b=f.pingedLanes,T=f.expirationTimes,I=f.pendingLanes;0<I;){var j=31-Ws(I),K=1<<j,ve=T[j];ve===-1?(!(K&x)||K&b)&&(T[j]=_W(K,h)):ve<=h&&(f.expiredLanes|=K),I&=~K}}function ow(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function aw(f){for(var h=[],x=0;31>x;x++)h.push(f);return h}function Ph(f,h,x){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-Ws(h),f[h]=x}function SW(f,h){var x=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var b=f.eventTimes;for(f=f.expirationTimes;0<x;){var T=31-Ws(x),I=1<<T;h[T]=0,b[T]=-1,f[T]=-1,x&=~I}}function lw(f,h){var x=f.entangledLanes|=h;for(f=f.entanglements;x;){var b=31-Ws(x),T=1<<b;T&h|f[b]&h&&(f[b]|=h),x&=~T}}var nn=0;function eI(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var cw=i.unstable_scheduleCallback,tI=i.unstable_cancelCallback,wW=i.unstable_shouldYield,bW=i.unstable_requestPaint,Tr=i.unstable_now,uw=i.unstable_ImmediatePriority,EW=i.unstable_UserBlockingPriority,dw=i.unstable_NormalPriority,MW=i.unstable_IdlePriority,Yg=null,_o=null;function TW(f){if(_o&&typeof _o.onCommitFiberRoot=="function")try{_o.onCommitFiberRoot(Yg,f,void 0,(f.current.flags&128)===128)}catch{}}function CW(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var xo=typeof Object.is=="function"?Object.is:CW,Qo=null,Kg=!1,fw=!1;function nI(f){Qo===null?Qo=[f]:Qo.push(f)}function AW(f){Kg=!0,nI(f)}function So(){if(!fw&&Qo!==null){fw=!0;var f=0,h=nn;try{var x=Qo;for(nn=1;f<x.length;f++){var b=x[f];do b=b(!0);while(b!==null)}Qo=null,Kg=!1}catch(T){throw Qo!==null&&(Qo=Qo.slice(f+1)),cw(uw,So),T}finally{nn=h,fw=!1}}return null}var RW=a.ReactCurrentBatchConfig;function Jg(f,h){if(xo(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var x=Object.keys(f),b=Object.keys(h);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var T=x[b];if(!Br.call(h,T)||!xo(f[T],h[T]))return!1}return!0}function PW(f){switch(f.tag){case 5:return et(f.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return f=Bn(f.type,!1),f;case 11:return f=Bn(f.type.render,!1),f;case 1:return f=Bn(f.type,!0),f;default:return""}}function Gs(f,h){if(f&&f.defaultProps){h=s({},h),f=f.defaultProps;for(var x in f)h[x]===void 0&&(h[x]=f[x]);return h}return h}var Zg=yt(null),Qg=null,Ju=null,hw=null;function pw(){hw=Ju=Qg=null}function rI(f,h,x){te?(_t(Zg,h._currentValue),h._currentValue=x):(_t(Zg,h._currentValue2),h._currentValue2=x)}function mw(f){var h=Zg.current;an(Zg),te?f._currentValue=h:f._currentValue2=h}function gw(f,h,x){for(;f!==null;){var b=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),f===x)break;f=f.return}}function Zu(f,h){Qg=f,hw=Ju=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(Xi=!0),f.firstContext=null)}function ps(f){var h=te?f._currentValue:f._currentValue2;if(hw!==f)if(f={context:f,memoizedValue:h,next:null},Ju===null){if(Qg===null)throw Error(o(308));Ju=f,Qg.dependencies={lanes:0,firstContext:f}}else Ju=Ju.next=f;return h}var wo=null,Ya=!1;function vw(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iI(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function ea(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function Ka(f,h){var x=f.updateQueue;x!==null&&(x=x.shared,cr!==null&&f.mode&1&&!(Vt&2)?(f=x.interleaved,f===null?(h.next=h,wo===null?wo=[x]:wo.push(x)):(h.next=f.next,f.next=h),x.interleaved=h):(f=x.pending,f===null?h.next=h:(h.next=f.next,f.next=h),x.pending=h))}function ev(f,h,x){if(h=h.updateQueue,h!==null&&(h=h.shared,(x&4194240)!==0)){var b=h.lanes;b&=f.pendingLanes,x|=b,h.lanes=x,lw(f,x)}}function sI(f,h){var x=f.updateQueue,b=f.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var T=null,I=null;if(x=x.firstBaseUpdate,x!==null){do{var j={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};I===null?T=I=j:I=I.next=j,x=x.next}while(x!==null);I===null?T=I=h:I=I.next=h}else T=I=h;x={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:b.shared,effects:b.effects},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=h:f.next=h,x.lastBaseUpdate=h}function tv(f,h,x,b){var T=f.updateQueue;Ya=!1;var I=T.firstBaseUpdate,j=T.lastBaseUpdate,K=T.shared.pending;if(K!==null){T.shared.pending=null;var ve=K,ke=ve.next;ve.next=null,j===null?I=ke:j.next=ke,j=ve;var Je=f.alternate;Je!==null&&(Je=Je.updateQueue,K=Je.lastBaseUpdate,K!==j&&(K===null?Je.firstBaseUpdate=ke:K.next=ke,Je.lastBaseUpdate=ve))}if(I!==null){var Pt=T.baseState;j=0,Je=ke=ve=null,K=I;do{var pt=K.lane,_n=K.eventTime;if((b&pt)===pt){Je!==null&&(Je=Je.next={eventTime:_n,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var ct=f,Jr=K;switch(pt=h,_n=x,Jr.tag){case 1:if(ct=Jr.payload,typeof ct=="function"){Pt=ct.call(_n,Pt,pt);break e}Pt=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Jr.payload,pt=typeof ct=="function"?ct.call(_n,Pt,pt):ct,pt==null)break e;Pt=s({},Pt,pt);break e;case 2:Ya=!0}}K.callback!==null&&K.lane!==0&&(f.flags|=64,pt=T.effects,pt===null?T.effects=[K]:pt.push(K))}else _n={eventTime:_n,lane:pt,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Je===null?(ke=Je=_n,ve=Pt):Je=Je.next=_n,j|=pt;if(K=K.next,K===null){if(K=T.shared.pending,K===null)break;pt=K,K=pt.next,pt.next=null,T.lastBaseUpdate=pt,T.shared.pending=null}}while(!0);if(Je===null&&(ve=Pt),T.baseState=ve,T.firstBaseUpdate=ke,T.lastBaseUpdate=Je,h=T.shared.interleaved,h!==null){T=h;do j|=T.lane,T=T.next;while(T!==h)}else I===null&&(T.shared.lanes=0);ad|=j,f.lanes=j,f.memoizedState=Pt}}function oI(f,h,x){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var b=f[h],T=b.callback;if(T!==null){if(b.callback=null,b=x,typeof T!="function")throw Error(o(191,T));T.call(b)}}}var aI=new r.Component().refs;function yw(f,h,x,b){h=f.memoizedState,x=x(b,h),x=x==null?h:s({},h,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var nv={isMounted:function(f){return(f=f._reactInternals)?P(f)===f:!1},enqueueSetState:function(f,h,x){f=f._reactInternals;var b=pi(),T=Qa(f),I=ea(b,T);I.payload=h,x!=null&&(I.callback=x),Ka(f,I),h=_s(f,T,b),h!==null&&ev(h,f,T)},enqueueReplaceState:function(f,h,x){f=f._reactInternals;var b=pi(),T=Qa(f),I=ea(b,T);I.tag=1,I.payload=h,x!=null&&(I.callback=x),Ka(f,I),h=_s(f,T,b),h!==null&&ev(h,f,T)},enqueueForceUpdate:function(f,h){f=f._reactInternals;var x=pi(),b=Qa(f),T=ea(x,b);T.tag=2,h!=null&&(T.callback=h),Ka(f,T),h=_s(f,b,x),h!==null&&ev(h,f,b)}};function lI(f,h,x,b,T,I,j){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(b,I,j):h.prototype&&h.prototype.isPureReactComponent?!Jg(x,b)||!Jg(T,I):!0}function cI(f,h,x){var b=!1,T=Xr,I=h.contextType;return typeof I=="object"&&I!==null?I=ps(I):(T=Vn(h)?js:yr.current,b=h.contextTypes,I=(b=b!=null)?zn(f,T):Xr),h=new h(x,I),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=nv,f.stateNode=h,h._reactInternals=f,b&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=T,f.__reactInternalMemoizedMaskedChildContext=I),h}function uI(f,h,x,b){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(x,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(x,b),h.state!==f&&nv.enqueueReplaceState(h,h.state,null)}function _w(f,h,x,b){var T=f.stateNode;T.props=x,T.state=f.memoizedState,T.refs=aI,vw(f);var I=h.contextType;typeof I=="object"&&I!==null?T.context=ps(I):(I=Vn(h)?js:yr.current,T.context=zn(f,I)),T.state=f.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(yw(f,h,I,x),T.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(h=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),h!==T.state&&nv.enqueueReplaceState(T,T.state,null),tv(f,x,T,b),T.state=f.memoizedState),typeof T.componentDidMount=="function"&&(f.flags|=4194308)}var Qu=[],ed=0,rv=null,iv=0,ms=[],gs=0,fc=null,ta=1,na="";function hc(f,h){Qu[ed++]=iv,Qu[ed++]=rv,rv=f,iv=h}function dI(f,h,x){ms[gs++]=ta,ms[gs++]=na,ms[gs++]=fc,fc=f;var b=ta;f=na;var T=32-Ws(b)-1;b&=~(1<<T),x+=1;var I=32-Ws(h)+T;if(30<I){var j=T-T%5;I=(b&(1<<j)-1).toString(32),b>>=j,T-=j,ta=1<<32-Ws(h)+T|x<<T|b,na=I+f}else ta=1<<I|x<<T|b,na=f}function xw(f){f.return!==null&&(hc(f,1),dI(f,1,0))}function Sw(f){for(;f===rv;)rv=Qu[--ed],Qu[ed]=null,iv=Qu[--ed],Qu[ed]=null;for(;f===fc;)fc=ms[--gs],ms[gs]=null,na=ms[--gs],ms[gs]=null,ta=ms[--gs],ms[gs]=null}var Gi=null,$i=null,kn=!1,Ih=!1,$s=null;function fI(f,h){var x=xs(5,null,null,0);x.elementType="DELETED",x.stateNode=h,x.return=f,h=f.deletions,h===null?(f.deletions=[x],f.flags|=16):h.push(x)}function hI(f,h){switch(f.tag){case 5:return h=Tt(h,f.type,f.pendingProps),h!==null?(f.stateNode=h,Gi=f,$i=vt(h),!0):!1;case 6:return h=at(h,f.pendingProps),h!==null?(f.stateNode=h,Gi=f,$i=null,!0):!1;case 13:if(h=qe(h),h!==null){var x=fc!==null?{id:ta,overflow:na}:null;return f.memoizedState={dehydrated:h,treeContext:x,retryLane:1073741824},x=xs(18,null,null,0),x.stateNode=h,x.return=f,f.child=x,Gi=f,$i=null,!0}return!1;default:return!1}}function ww(f){return(f.mode&1)!==0&&(f.flags&128)===0}function bw(f){if(kn){var h=$i;if(h){var x=h;if(!hI(f,h)){if(ww(f))throw Error(o(418));h=wn(x);var b=Gi;h&&hI(f,h)?fI(b,x):(f.flags=f.flags&-4097|2,kn=!1,Gi=f)}}else{if(ww(f))throw Error(o(418));f.flags=f.flags&-4097|2,kn=!1,Gi=f}}}function pI(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Gi=f}function Lh(f){if(!Se||f!==Gi)return!1;if(!kn)return pI(f),kn=!0,!1;if(f.tag!==3&&(f.tag!==5||Ze(f.type)&&!ye(f.type,f.memoizedProps))){var h=$i;if(h){if(ww(f)){for(f=$i;f;)f=wn(f);throw Error(o(418))}for(;h;)fI(f,h),h=wn(h)}}if(pI(f),f.tag===13){if(!Se)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));$i=ue(f)}else $i=Gi?wn(f.stateNode):null;return!0}function td(){Se&&($i=Gi=null,Ih=kn=!1)}function Ew(f){$s===null?$s=[f]:$s.push(f)}function kh(f,h,x){if(f=x.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var b=x.stateNode}if(!b)throw Error(o(147,f));var T=b,I=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(j){var K=T.refs;K===aI&&(K=T.refs={}),j===null?delete K[I]:K[I]=j},h._stringRef=I,h)}if(typeof f!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,f))}return f}function sv(f,h){throw f=Object.prototype.toString.call(h),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function mI(f){var h=f._init;return h(f._payload)}function gI(f){function h(ce,Q){if(f){var me=ce.deletions;me===null?(ce.deletions=[Q],ce.flags|=16):me.push(Q)}}function x(ce,Q){if(!f)return null;for(;Q!==null;)h(ce,Q),Q=Q.sibling;return null}function b(ce,Q){for(ce=new Map;Q!==null;)Q.key!==null?ce.set(Q.key,Q):ce.set(Q.index,Q),Q=Q.sibling;return ce}function T(ce,Q){return ce=tl(ce,Q),ce.index=0,ce.sibling=null,ce}function I(ce,Q,me){return ce.index=me,f?(me=ce.alternate,me!==null?(me=me.index,me<Q?(ce.flags|=2,Q):me):(ce.flags|=2,Q)):(ce.flags|=1048576,Q)}function j(ce){return f&&ce.alternate===null&&(ce.flags|=2),ce}function K(ce,Q,me,We){return Q===null||Q.tag!==6?(Q=a1(me,ce.mode,We),Q.return=ce,Q):(Q=T(Q,me),Q.return=ce,Q)}function ve(ce,Q,me,We){var ot=me.type;return ot===u?Je(ce,Q,me.props.children,We,me.key):Q!==null&&(Q.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===w&&mI(ot)===Q.type)?(We=T(Q,me.props),We.ref=kh(ce,Q,me),We.return=ce,We):(We=Dv(me.type,me.key,me.props,null,ce.mode,We),We.ref=kh(ce,Q,me),We.return=ce,We)}function ke(ce,Q,me,We){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==me.containerInfo||Q.stateNode.implementation!==me.implementation?(Q=l1(me,ce.mode,We),Q.return=ce,Q):(Q=T(Q,me.children||[]),Q.return=ce,Q)}function Je(ce,Q,me,We,ot){return Q===null||Q.tag!==7?(Q=xc(me,ce.mode,We,ot),Q.return=ce,Q):(Q=T(Q,me),Q.return=ce,Q)}function Pt(ce,Q,me){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=a1(""+Q,ce.mode,me),Q.return=ce,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case l:return me=Dv(Q.type,Q.key,Q.props,null,ce.mode,me),me.ref=kh(ce,null,Q),me.return=ce,me;case c:return Q=l1(Q,ce.mode,me),Q.return=ce,Q;case w:var We=Q._init;return Pt(ce,We(Q._payload),me)}if(X(Q)||A(Q))return Q=xc(Q,ce.mode,me,null),Q.return=ce,Q;sv(ce,Q)}return null}function pt(ce,Q,me,We){var ot=Q!==null?Q.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return ot!==null?null:K(ce,Q,""+me,We);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return me.key===ot?ve(ce,Q,me,We):null;case c:return me.key===ot?ke(ce,Q,me,We):null;case w:return ot=me._init,pt(ce,Q,ot(me._payload),We)}if(X(me)||A(me))return ot!==null?null:Je(ce,Q,me,We,null);sv(ce,me)}return null}function _n(ce,Q,me,We,ot){if(typeof We=="string"&&We!==""||typeof We=="number")return ce=ce.get(me)||null,K(Q,ce,""+We,ot);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case l:return ce=ce.get(We.key===null?me:We.key)||null,ve(Q,ce,We,ot);case c:return ce=ce.get(We.key===null?me:We.key)||null,ke(Q,ce,We,ot);case w:var Bt=We._init;return _n(ce,Q,me,Bt(We._payload),ot)}if(X(We)||A(We))return ce=ce.get(me)||null,Je(Q,ce,We,ot,null);sv(Q,We)}return null}function ct(ce,Q,me,We){for(var ot=null,Bt=null,It=Q,rn=Q=0,Ar=null;It!==null&&rn<me.length;rn++){It.index>rn?(Ar=It,It=null):Ar=It.sibling;var sn=pt(ce,It,me[rn],We);if(sn===null){It===null&&(It=Ar);break}f&&It&&sn.alternate===null&&h(ce,It),Q=I(sn,Q,rn),Bt===null?ot=sn:Bt.sibling=sn,Bt=sn,It=Ar}if(rn===me.length)return x(ce,It),kn&&hc(ce,rn),ot;if(It===null){for(;rn<me.length;rn++)It=Pt(ce,me[rn],We),It!==null&&(Q=I(It,Q,rn),Bt===null?ot=It:Bt.sibling=It,Bt=It);return kn&&hc(ce,rn),ot}for(It=b(ce,It);rn<me.length;rn++)Ar=_n(It,ce,rn,me[rn],We),Ar!==null&&(f&&Ar.alternate!==null&&It.delete(Ar.key===null?rn:Ar.key),Q=I(Ar,Q,rn),Bt===null?ot=Ar:Bt.sibling=Ar,Bt=Ar);return f&&It.forEach(function(nl){return h(ce,nl)}),kn&&hc(ce,rn),ot}function Jr(ce,Q,me,We){var ot=A(me);if(typeof ot!="function")throw Error(o(150));if(me=ot.call(me),me==null)throw Error(o(151));for(var Bt=ot=null,It=Q,rn=Q=0,Ar=null,sn=me.next();It!==null&&!sn.done;rn++,sn=me.next()){It.index>rn?(Ar=It,It=null):Ar=It.sibling;var nl=pt(ce,It,sn.value,We);if(nl===null){It===null&&(It=Ar);break}f&&It&&nl.alternate===null&&h(ce,It),Q=I(nl,Q,rn),Bt===null?ot=nl:Bt.sibling=nl,Bt=nl,It=Ar}if(sn.done)return x(ce,It),kn&&hc(ce,rn),ot;if(It===null){for(;!sn.done;rn++,sn=me.next())sn=Pt(ce,sn.value,We),sn!==null&&(Q=I(sn,Q,rn),Bt===null?ot=sn:Bt.sibling=sn,Bt=sn);return kn&&hc(ce,rn),ot}for(It=b(ce,It);!sn.done;rn++,sn=me.next())sn=_n(It,ce,rn,sn.value,We),sn!==null&&(f&&sn.alternate!==null&&It.delete(sn.key===null?rn:sn.key),Q=I(sn,Q,rn),Bt===null?ot=sn:Bt.sibling=sn,Bt=sn);return f&&It.forEach(function(oG){return h(ce,oG)}),kn&&hc(ce,rn),ot}function Ss(ce,Q,me,We){if(typeof me=="object"&&me!==null&&me.type===u&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case l:e:{for(var ot=me.key,Bt=Q;Bt!==null;){if(Bt.key===ot){if(ot=me.type,ot===u){if(Bt.tag===7){x(ce,Bt.sibling),Q=T(Bt,me.props.children),Q.return=ce,ce=Q;break e}}else if(Bt.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===w&&mI(ot)===Bt.type){x(ce,Bt.sibling),Q=T(Bt,me.props),Q.ref=kh(ce,Bt,me),Q.return=ce,ce=Q;break e}x(ce,Bt);break}else h(ce,Bt);Bt=Bt.sibling}me.type===u?(Q=xc(me.props.children,ce.mode,We,me.key),Q.return=ce,ce=Q):(We=Dv(me.type,me.key,me.props,null,ce.mode,We),We.ref=kh(ce,Q,me),We.return=ce,ce=We)}return j(ce);case c:e:{for(Bt=me.key;Q!==null;){if(Q.key===Bt)if(Q.tag===4&&Q.stateNode.containerInfo===me.containerInfo&&Q.stateNode.implementation===me.implementation){x(ce,Q.sibling),Q=T(Q,me.children||[]),Q.return=ce,ce=Q;break e}else{x(ce,Q);break}else h(ce,Q);Q=Q.sibling}Q=l1(me,ce.mode,We),Q.return=ce,ce=Q}return j(ce);case w:return Bt=me._init,Ss(ce,Q,Bt(me._payload),We)}if(X(me))return ct(ce,Q,me,We);if(A(me))return Jr(ce,Q,me,We);sv(ce,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,Q!==null&&Q.tag===6?(x(ce,Q.sibling),Q=T(Q,me),Q.return=ce,ce=Q):(x(ce,Q),Q=a1(me,ce.mode,We),Q.return=ce,ce=Q),j(ce)):x(ce,Q)}return Ss}var nd=gI(!0),vI=gI(!1),Oh={},vs=yt(Oh),Nh=yt(Oh),rd=yt(Oh);function bo(f){if(f===Oh)throw Error(o(174));return f}function Mw(f,h){_t(rd,h),_t(Nh,f),_t(vs,Oh),f=fe(h),an(vs),_t(vs,f)}function id(){an(vs),an(Nh),an(rd)}function yI(f){var h=bo(rd.current),x=bo(vs.current);h=k(x,f.type,h),x!==h&&(_t(Nh,f),_t(vs,h))}function Tw(f){Nh.current===f&&(an(vs),an(Nh))}var Hn=yt(0);function ov(f){for(var h=f;h!==null;){if(h.tag===13){var x=h.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||bt(x)||gt(x)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Cw=[];function Aw(){for(var f=0;f<Cw.length;f++){var h=Cw[f];te?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Cw.length=0}var av=a.ReactCurrentDispatcher,ys=a.ReactCurrentBatchConfig,sd=0,Jn=null,qr=null,Cr=null,lv=!1,Dh=!1,Uh=0,IW=0;function Yr(){throw Error(o(321))}function Rw(f,h){if(h===null)return!1;for(var x=0;x<h.length&&x<f.length;x++)if(!xo(f[x],h[x]))return!1;return!0}function Pw(f,h,x,b,T,I){if(sd=I,Jn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,av.current=f===null||f.memoizedState===null?NW:DW,f=x(b,T),Dh){I=0;do{if(Dh=!1,Uh=0,25<=I)throw Error(o(301));I+=1,Cr=qr=null,h.updateQueue=null,av.current=UW,f=x(b,T)}while(Dh)}if(av.current=hv,h=qr!==null&&qr.next!==null,sd=0,Cr=qr=Jn=null,lv=!1,h)throw Error(o(300));return f}function Iw(){var f=Uh!==0;return Uh=0,f}function ra(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cr===null?Jn.memoizedState=Cr=f:Cr=Cr.next=f,Cr}function Eo(){if(qr===null){var f=Jn.alternate;f=f!==null?f.memoizedState:null}else f=qr.next;var h=Cr===null?Jn.memoizedState:Cr.next;if(h!==null)Cr=h,qr=f;else{if(f===null)throw Error(o(310));qr=f,f={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},Cr===null?Jn.memoizedState=Cr=f:Cr=Cr.next=f}return Cr}function pc(f,h){return typeof h=="function"?h(f):h}function cv(f){var h=Eo(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=f;var b=qr,T=b.baseQueue,I=x.pending;if(I!==null){if(T!==null){var j=T.next;T.next=I.next,I.next=j}b.baseQueue=T=I,x.pending=null}if(T!==null){I=T.next,b=b.baseState;var K=j=null,ve=null,ke=I;do{var Je=ke.lane;if((sd&Je)===Je)ve!==null&&(ve=ve.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),b=ke.hasEagerState?ke.eagerState:f(b,ke.action);else{var Pt={lane:Je,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};ve===null?(K=ve=Pt,j=b):ve=ve.next=Pt,Jn.lanes|=Je,ad|=Je}ke=ke.next}while(ke!==null&&ke!==I);ve===null?j=b:ve.next=K,xo(b,h.memoizedState)||(Xi=!0),h.memoizedState=b,h.baseState=j,h.baseQueue=ve,x.lastRenderedState=b}if(f=x.interleaved,f!==null){T=f;do I=T.lane,Jn.lanes|=I,ad|=I,T=T.next;while(T!==f)}else T===null&&(x.lanes=0);return[h.memoizedState,x.dispatch]}function uv(f){var h=Eo(),x=h.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=f;var b=x.dispatch,T=x.pending,I=h.memoizedState;if(T!==null){x.pending=null;var j=T=T.next;do I=f(I,j.action),j=j.next;while(j!==T);xo(I,h.memoizedState)||(Xi=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),x.lastRenderedState=I}return[I,b]}function _I(){}function xI(f,h){var x=Jn,b=Eo(),T=h(),I=!xo(b.memoizedState,T);if(I&&(b.memoizedState=T,Xi=!0),b=b.queue,Bh(bI.bind(null,x,b,f),[f]),b.getSnapshot!==h||I||Cr!==null&&Cr.memoizedState.tag&1){if(x.flags|=2048,Fh(9,wI.bind(null,x,b,T,h),void 0,null),cr===null)throw Error(o(349));sd&30||SI(x,h,T)}return T}function SI(f,h,x){f.flags|=16384,f={getSnapshot:h,value:x},h=Jn.updateQueue,h===null?(h={lastEffect:null,stores:null},Jn.updateQueue=h,h.stores=[f]):(x=h.stores,x===null?h.stores=[f]:x.push(f))}function wI(f,h,x,b){h.value=x,h.getSnapshot=b,EI(h)&&_s(f,1,-1)}function bI(f,h,x){return x(function(){EI(h)&&_s(f,1,-1)})}function EI(f){var h=f.getSnapshot;f=f.value;try{var x=h();return!xo(f,x)}catch{return!0}}function Lw(f){var h=ra();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:f},h.queue=f,f=f.dispatch=OW.bind(null,Jn,f),[h.memoizedState,f]}function Fh(f,h,x,b){return f={tag:f,create:h,destroy:x,deps:b,next:null},h=Jn.updateQueue,h===null?(h={lastEffect:null,stores:null},Jn.updateQueue=h,h.lastEffect=f.next=f):(x=h.lastEffect,x===null?h.lastEffect=f.next=f:(b=x.next,x.next=f,f.next=b,h.lastEffect=f)),f}function MI(){return Eo().memoizedState}function dv(f,h,x,b){var T=ra();Jn.flags|=f,T.memoizedState=Fh(1|h,x,void 0,b===void 0?null:b)}function fv(f,h,x,b){var T=Eo();b=b===void 0?null:b;var I=void 0;if(qr!==null){var j=qr.memoizedState;if(I=j.destroy,b!==null&&Rw(b,j.deps)){T.memoizedState=Fh(h,x,I,b);return}}Jn.flags|=f,T.memoizedState=Fh(1|h,x,I,b)}function kw(f,h){return dv(8390656,8,f,h)}function Bh(f,h){return fv(2048,8,f,h)}function TI(f,h){return fv(4,2,f,h)}function CI(f,h){return fv(4,4,f,h)}function AI(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function RI(f,h,x){return x=x!=null?x.concat([f]):null,fv(4,4,AI.bind(null,h,f),x)}function Ow(){}function PI(f,h){var x=Eo();h=h===void 0?null:h;var b=x.memoizedState;return b!==null&&h!==null&&Rw(h,b[1])?b[0]:(x.memoizedState=[f,h],f)}function II(f,h){var x=Eo();h=h===void 0?null:h;var b=x.memoizedState;return b!==null&&h!==null&&Rw(h,b[1])?b[0]:(f=f(),x.memoizedState=[f,h],f)}function LW(f,h){var x=nn;nn=x!==0&&4>x?x:4,f(!0);var b=ys.transition;ys.transition={};try{f(!1),h()}finally{nn=x,ys.transition=b}}function LI(){return Eo().memoizedState}function kW(f,h,x){var b=Qa(f);x={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null},kI(f)?OI(h,x):(NI(f,h,x),x=pi(),f=_s(f,b,x),f!==null&&DI(f,h,b))}function OW(f,h,x){var b=Qa(f),T={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null};if(kI(f))OI(h,T);else{NI(f,h,T);var I=f.alternate;if(f.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var j=h.lastRenderedState,K=I(j,x);if(T.hasEagerState=!0,T.eagerState=K,xo(K,j))return}catch{}finally{}x=pi(),f=_s(f,b,x),f!==null&&DI(f,h,b)}}function kI(f){var h=f.alternate;return f===Jn||h!==null&&h===Jn}function OI(f,h){Dh=lv=!0;var x=f.pending;x===null?h.next=h:(h.next=x.next,x.next=h),f.pending=h}function NI(f,h,x){cr!==null&&f.mode&1&&!(Vt&2)?(f=h.interleaved,f===null?(x.next=x,wo===null?wo=[h]:wo.push(h)):(x.next=f.next,f.next=x),h.interleaved=x):(f=h.pending,f===null?x.next=x:(x.next=f.next,f.next=x),h.pending=x)}function DI(f,h,x){if(x&4194240){var b=h.lanes;b&=f.pendingLanes,x|=b,h.lanes=x,lw(f,x)}}var hv={readContext:ps,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useInsertionEffect:Yr,useLayoutEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useMutableSource:Yr,useSyncExternalStore:Yr,useId:Yr,unstable_isNewReconciler:!1},NW={readContext:ps,useCallback:function(f,h){return ra().memoizedState=[f,h===void 0?null:h],f},useContext:ps,useEffect:kw,useImperativeHandle:function(f,h,x){return x=x!=null?x.concat([f]):null,dv(4194308,4,AI.bind(null,h,f),x)},useLayoutEffect:function(f,h){return dv(4194308,4,f,h)},useInsertionEffect:function(f,h){return dv(4,2,f,h)},useMemo:function(f,h){var x=ra();return h=h===void 0?null:h,f=f(),x.memoizedState=[f,h],f},useReducer:function(f,h,x){var b=ra();return h=x!==void 0?x(h):h,b.memoizedState=b.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},b.queue=f,f=f.dispatch=kW.bind(null,Jn,f),[b.memoizedState,f]},useRef:function(f){var h=ra();return f={current:f},h.memoizedState=f},useState:Lw,useDebugValue:Ow,useDeferredValue:function(f){var h=Lw(f),x=h[0],b=h[1];return kw(function(){var T=ys.transition;ys.transition={};try{b(f)}finally{ys.transition=T}},[f]),x},useTransition:function(){var f=Lw(!1),h=f[0];return f=LW.bind(null,f[1]),ra().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,x){var b=Jn,T=ra();if(kn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=h(),cr===null)throw Error(o(349));sd&30||SI(b,h,x)}T.memoizedState=x;var I={value:x,getSnapshot:h};return T.queue=I,kw(bI.bind(null,b,I,f),[f]),b.flags|=2048,Fh(9,wI.bind(null,b,I,x,h),void 0,null),x},useId:function(){var f=ra(),h=cr.identifierPrefix;if(kn){var x=na,b=ta;x=(b&~(1<<32-Ws(b)-1)).toString(32)+x,h=":"+h+"R"+x,x=Uh++,0<x&&(h+="H"+x.toString(32)),h+=":"}else x=IW++,h=":"+h+"r"+x.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},DW={readContext:ps,useCallback:PI,useContext:ps,useEffect:Bh,useImperativeHandle:RI,useInsertionEffect:TI,useLayoutEffect:CI,useMemo:II,useReducer:cv,useRef:MI,useState:function(){return cv(pc)},useDebugValue:Ow,useDeferredValue:function(f){var h=cv(pc),x=h[0],b=h[1];return Bh(function(){var T=ys.transition;ys.transition={};try{b(f)}finally{ys.transition=T}},[f]),x},useTransition:function(){var f=cv(pc)[0],h=Eo().memoizedState;return[f,h]},useMutableSource:_I,useSyncExternalStore:xI,useId:LI,unstable_isNewReconciler:!1},UW={readContext:ps,useCallback:PI,useContext:ps,useEffect:Bh,useImperativeHandle:RI,useInsertionEffect:TI,useLayoutEffect:CI,useMemo:II,useReducer:uv,useRef:MI,useState:function(){return uv(pc)},useDebugValue:Ow,useDeferredValue:function(f){var h=uv(pc),x=h[0],b=h[1];return Bh(function(){var T=ys.transition;ys.transition={};try{b(f)}finally{ys.transition=T}},[f]),x},useTransition:function(){var f=uv(pc)[0],h=Eo().memoizedState;return[f,h]},useMutableSource:_I,useSyncExternalStore:xI,useId:LI,unstable_isNewReconciler:!1};function Nw(f,h){try{var x="",b=h;do x+=PW(b),b=b.return;while(b);var T=x}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:f,source:h,stack:T}}function Dw(f,h){try{console.error(h.value)}catch(x){setTimeout(function(){throw x})}}var FW=typeof WeakMap=="function"?WeakMap:Map;function UI(f,h,x){x=ea(-1,x),x.tag=3,x.payload={element:null};var b=h.value;return x.callback=function(){Rv||(Rv=!0,e1=b),Dw(f,h)},x}function FI(f,h,x){x=ea(-1,x),x.tag=3;var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var T=h.value;x.payload=function(){return b(T)},x.callback=function(){Dw(f,h)}}var I=f.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(x.callback=function(){Dw(f,h),typeof b!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var j=h.stack;this.componentDidCatch(h.value,{componentStack:j!==null?j:""})}),x}function BI(f,h,x){var b=f.pingCache;if(b===null){b=f.pingCache=new FW;var T=new Set;b.set(h,T)}else T=b.get(h),T===void 0&&(T=new Set,b.set(h,T));T.has(x)||(T.add(x),f=ZW.bind(null,f,h,x),h.then(f,f))}function zI(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function VI(f,h,x,b,T){return f.mode&1?(f.flags|=65536,f.lanes=T,f):(f===h?f.flags|=65536:(f.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(h=ea(-1,1),h.tag=2,Ka(x,h))),x.lanes|=1),f)}function Mo(f){f.flags|=4}function HI(f,h){if(f!==null&&f.child===h.child)return!0;if(h.flags&16)return!1;for(f=h.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var zh,Vh,pv,mv;if(ut)zh=function(f,h){for(var x=h.child;x!==null;){if(x.tag===5||x.tag===6)ae(f,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Vh=function(){},pv=function(f,h,x,b,T){if(f=f.memoizedProps,f!==b){var I=h.stateNode,j=bo(vs.current);x=re(I,x,f,b,T,j),(h.updateQueue=x)&&Mo(h)}},mv=function(f,h,x,b){x!==b&&Mo(h)};else if(he){zh=function(f,h,x,b){for(var T=h.child;T!==null;){if(T.tag===5){var I=T.stateNode;x&&b&&(I=Re(I,T.type,T.memoizedProps,T)),ae(f,I)}else if(T.tag===6)I=T.stateNode,x&&b&&(I=Ue(I,T.memoizedProps,T)),ae(f,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),zh(f,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var jI=function(f,h,x,b){for(var T=h.child;T!==null;){if(T.tag===5){var I=T.stateNode;x&&b&&(I=Re(I,T.type,T.memoizedProps,T)),Y(f,I)}else if(T.tag===6)I=T.stateNode,x&&b&&(I=Ue(I,T.memoizedProps,T)),Y(f,I);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)I=T.child,I!==null&&(I.return=T),jI(f,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===h)break;for(;T.sibling===null;){if(T.return===null||T.return===h)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};Vh=function(f,h){var x=h.stateNode;if(!HI(f,h)){f=x.containerInfo;var b=un(f);jI(b,h,!1,!1),x.pendingChildren=b,Mo(h),ie(f,b)}},pv=function(f,h,x,b,T){var I=f.stateNode,j=f.memoizedProps;if((f=HI(f,h))&&j===b)h.stateNode=I;else{var K=h.stateNode,ve=bo(vs.current),ke=null;j!==b&&(ke=re(K,x,j,b,T,ve)),f&&ke===null?h.stateNode=I:(I=$t(I,ke,x,j,b,h,f,K),Pe(I,x,b,T,ve)&&Mo(h),h.stateNode=I,f?Mo(h):zh(I,h,!1,!1))}},mv=function(f,h,x,b){x!==b?(f=bo(rd.current),x=bo(vs.current),h.stateNode=Ee(b,f,x,h),Mo(h)):h.stateNode=f.stateNode}}else Vh=function(){},pv=function(){},mv=function(){};function Hh(f,h){if(!kn)switch(f.tailMode){case"hidden":h=f.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:b.sibling=null}}function Kr(f){var h=f.alternate!==null&&f.alternate.child===f.child,x=0,b=0;if(h)for(var T=f.child;T!==null;)x|=T.lanes|T.childLanes,b|=T.subtreeFlags&14680064,b|=T.flags&14680064,T.return=f,T=T.sibling;else for(T=f.child;T!==null;)x|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=f,T=T.sibling;return f.subtreeFlags|=b,f.childLanes=x,h}function BW(f,h,x){var b=h.pendingProps;switch(Sw(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(h),null;case 1:return Vn(h.type)&&qa(),Kr(h),null;case 3:return b=h.stateNode,id(),an(lr),an(yr),Aw(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(Lh(h)?Mo(h):f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,$s!==null&&(r1($s),$s=null))),Vh(f,h),Kr(h),null;case 5:Tw(h),x=bo(rd.current);var T=h.type;if(f!==null&&h.stateNode!=null)pv(f,h,T,b,x),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!b){if(h.stateNode===null)throw Error(o(166));return Kr(h),null}if(f=bo(vs.current),Lh(h)){if(!Se)throw Error(o(175));f=Zo(h.stateNode,h.type,h.memoizedProps,x,f,h,!Ih),h.updateQueue=f,f!==null&&Mo(h)}else{var I=ee(T,b,x,f,h);zh(I,h,!1,!1),h.stateNode=I,Pe(I,T,b,x,f)&&Mo(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Kr(h),null;case 6:if(f&&h.stateNode!=null)mv(f,h,f.memoizedProps,b);else{if(typeof b!="string"&&h.stateNode===null)throw Error(o(166));if(f=bo(rd.current),x=bo(vs.current),Lh(h)){if(!Se)throw Error(o(176));if(f=h.stateNode,b=h.memoizedProps,(x=F(f,b,h,!Ih))&&(T=Gi,T!==null))switch(I=(T.mode&1)!==0,T.tag){case 3:Ne(T.stateNode.containerInfo,f,b,I);break;case 5:rt(T.type,T.memoizedProps,T.stateNode,f,b,I)}x&&Mo(h)}else h.stateNode=Ee(b,f,x,h)}return Kr(h),null;case 13:if(an(Hn),b=h.memoizedState,kn&&$i!==null&&h.mode&1&&!(h.flags&128)){for(f=$i;f;)f=wn(f);return td(),h.flags|=98560,h}if(b!==null&&b.dehydrated!==null){if(b=Lh(h),f===null){if(!b)throw Error(o(318));if(!Se)throw Error(o(344));if(f=h.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));ne(f,h)}else td(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return Kr(h),null}return $s!==null&&(r1($s),$s=null),h.flags&128?(h.lanes=x,h):(b=b!==null,x=!1,f===null?Lh(h):x=f.memoizedState!==null,b&&!x&&(h.child.flags|=8192,h.mode&1&&(f===null||Hn.current&1?_r===0&&(_r=3):s1())),h.updateQueue!==null&&(h.flags|=4),Kr(h),null);case 4:return id(),Vh(f,h),f===null&&Le(h.stateNode.containerInfo),Kr(h),null;case 10:return mw(h.type._context),Kr(h),null;case 17:return Vn(h.type)&&qa(),Kr(h),null;case 19:if(an(Hn),T=h.memoizedState,T===null)return Kr(h),null;if(b=(h.flags&128)!==0,I=T.rendering,I===null)if(b)Hh(T,!1);else{if(_r!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(I=ov(f),I!==null){for(h.flags|=128,Hh(T,!1),f=I.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),h.subtreeFlags=0,f=x,b=h.child;b!==null;)x=b,T=f,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=T,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,T=I.dependencies,x.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),b=b.sibling;return _t(Hn,Hn.current&1|2),h.child}f=f.sibling}T.tail!==null&&Tr()>Qw&&(h.flags|=128,b=!0,Hh(T,!1),h.lanes=4194304)}else{if(!b)if(f=ov(I),f!==null){if(h.flags|=128,b=!0,f=f.updateQueue,f!==null&&(h.updateQueue=f,h.flags|=4),Hh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!I.alternate&&!kn)return Kr(h),null}else 2*Tr()-T.renderingStartTime>Qw&&x!==1073741824&&(h.flags|=128,b=!0,Hh(T,!1),h.lanes=4194304);T.isBackwards?(I.sibling=h.child,h.child=I):(f=T.last,f!==null?f.sibling=I:h.child=I,T.last=I)}return T.tail!==null?(h=T.tail,T.rendering=h,T.tail=h.sibling,T.renderingStartTime=Tr(),h.sibling=null,f=Hn.current,_t(Hn,b?f&1|2:f&1),h):(Kr(h),null);case 22:case 23:return i1(),b=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==b&&(h.flags|=8192),b&&h.mode&1?qi&1073741824&&(Kr(h),ut&&h.subtreeFlags&6&&(h.flags|=8192)):Kr(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var zW=a.ReactCurrentOwner,Xi=!1;function hi(f,h,x,b){h.child=f===null?vI(h,null,x,b):nd(h,f.child,x,b)}function WI(f,h,x,b,T){x=x.render;var I=h.ref;return Zu(h,T),b=Pw(f,h,x,b,I,T),x=Iw(),f!==null&&!Xi?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~T,ia(f,h,T)):(kn&&x&&xw(h),h.flags|=1,hi(f,h,b,T),h.child)}function GI(f,h,x,b,T){if(f===null){var I=x.type;return typeof I=="function"&&!o1(I)&&I.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(h.tag=15,h.type=I,$I(f,h,I,b,T)):(f=Dv(x.type,null,b,h,h.mode,T),f.ref=h.ref,f.return=h,h.child=f)}if(I=f.child,!(f.lanes&T)){var j=I.memoizedProps;if(x=x.compare,x=x!==null?x:Jg,x(j,b)&&f.ref===h.ref)return ia(f,h,T)}return h.flags|=1,f=tl(I,b),f.ref=h.ref,f.return=h,h.child=f}function $I(f,h,x,b,T){if(f!==null&&Jg(f.memoizedProps,b)&&f.ref===h.ref)if(Xi=!1,(f.lanes&T)!==0)f.flags&131072&&(Xi=!0);else return h.lanes=f.lanes,ia(f,h,T);return Uw(f,h,x,b,T)}function XI(f,h,x){var b=h.pendingProps,T=b.children,I=f!==null?f.memoizedState:null;if(b.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},_t(od,qi),qi|=x;else if(x&1073741824)h.memoizedState={baseLanes:0,cachePool:null},b=I!==null?I.baseLanes:x,_t(od,qi),qi|=b;else return f=I!==null?I.baseLanes|x:x,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null},h.updateQueue=null,_t(od,qi),qi|=f,null;else I!==null?(b=I.baseLanes|x,h.memoizedState=null):b=x,_t(od,qi),qi|=b;return hi(f,h,T,x),h.child}function qI(f,h){var x=h.ref;(f===null&&x!==null||f!==null&&f.ref!==x)&&(h.flags|=512,h.flags|=2097152)}function Uw(f,h,x,b,T){var I=Vn(x)?js:yr.current;return I=zn(h,I),Zu(h,T),x=Pw(f,h,x,b,I,T),b=Iw(),f!==null&&!Xi?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~T,ia(f,h,T)):(kn&&b&&xw(h),h.flags|=1,hi(f,h,x,T),h.child)}function YI(f,h,x,b,T){if(Vn(x)){var I=!0;Ku(h)}else I=!1;if(Zu(h,T),h.stateNode===null)f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),cI(h,x,b),_w(h,x,b,T),b=!0;else if(f===null){var j=h.stateNode,K=h.memoizedProps;j.props=K;var ve=j.context,ke=x.contextType;typeof ke=="object"&&ke!==null?ke=ps(ke):(ke=Vn(x)?js:yr.current,ke=zn(h,ke));var Je=x.getDerivedStateFromProps,Pt=typeof Je=="function"||typeof j.getSnapshotBeforeUpdate=="function";Pt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(K!==b||ve!==ke)&&uI(h,j,b,ke),Ya=!1;var pt=h.memoizedState;j.state=pt,tv(h,b,j,T),ve=h.memoizedState,K!==b||pt!==ve||lr.current||Ya?(typeof Je=="function"&&(yw(h,x,Je,b),ve=h.memoizedState),(K=Ya||lI(h,x,K,b,pt,ve,ke))?(Pt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=ve),j.props=b,j.state=ve,j.context=ke,b=K):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{j=h.stateNode,iI(f,h),K=h.memoizedProps,ke=h.type===h.elementType?K:Gs(h.type,K),j.props=ke,Pt=h.pendingProps,pt=j.context,ve=x.contextType,typeof ve=="object"&&ve!==null?ve=ps(ve):(ve=Vn(x)?js:yr.current,ve=zn(h,ve));var _n=x.getDerivedStateFromProps;(Je=typeof _n=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(K!==Pt||pt!==ve)&&uI(h,j,b,ve),Ya=!1,pt=h.memoizedState,j.state=pt,tv(h,b,j,T);var ct=h.memoizedState;K!==Pt||pt!==ct||lr.current||Ya?(typeof _n=="function"&&(yw(h,x,_n,b),ct=h.memoizedState),(ke=Ya||lI(h,x,ke,b,pt,ct,ve)||!1)?(Je||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(b,ct,ve),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(b,ct,ve)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||K===f.memoizedProps&&pt===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||K===f.memoizedProps&&pt===f.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=ct),j.props=b,j.state=ct,j.context=ve,b=ke):(typeof j.componentDidUpdate!="function"||K===f.memoizedProps&&pt===f.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||K===f.memoizedProps&&pt===f.memoizedState||(h.flags|=1024),b=!1)}return Fw(f,h,x,b,I,T)}function Fw(f,h,x,b,T,I){qI(f,h);var j=(h.flags&128)!==0;if(!b&&!j)return T&&Ah(h,x,!1),ia(f,h,I);b=h.stateNode,zW.current=h;var K=j&&typeof x.getDerivedStateFromError!="function"?null:b.render();return h.flags|=1,f!==null&&j?(h.child=nd(h,f.child,null,I),h.child=nd(h,null,K,I)):hi(f,h,K,I),h.memoizedState=b.state,T&&Ah(h,x,!0),h.child}function KI(f){var h=f.stateNode;h.pendingContext?fi(f,h.pendingContext,h.pendingContext!==h.context):h.context&&fi(f,h.context,!1),Mw(f,h.containerInfo)}function JI(f,h,x,b,T){return td(),Ew(T),h.flags|=256,hi(f,h,x,b),h.child}var gv={dehydrated:null,treeContext:null,retryLane:0};function vv(f){return{baseLanes:f,cachePool:null}}function ZI(f,h,x){var b=h.pendingProps,T=Hn.current,I=!1,j=(h.flags&128)!==0,K;if((K=j)||(K=f!==null&&f.memoizedState===null?!1:(T&2)!==0),K?(I=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(T|=1),_t(Hn,T&1),f===null)return bw(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?gt(f)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(T=b.children,f=b.fallback,I?(b=h.mode,I=h.child,T={mode:"hidden",children:T},!(b&1)&&I!==null?(I.childLanes=0,I.pendingProps=T):I=Uv(T,b,0,null),f=xc(f,b,x,null),I.return=h,f.return=h,I.sibling=f,h.child=I,h.child.memoizedState=vv(x),h.memoizedState=gv,f):Bw(h,T));if(T=f.memoizedState,T!==null){if(K=T.dehydrated,K!==null){if(j)return h.flags&256?(h.flags&=-257,yv(f,h,x,Error(o(422)))):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(I=b.fallback,T=h.mode,b=Uv({mode:"visible",children:b.children},T,0,null),I=xc(I,T,x,null),I.flags|=2,b.return=h,I.return=h,b.sibling=I,h.child=b,h.mode&1&&nd(h,f.child,null,x),h.child.memoizedState=vv(x),h.memoizedState=gv,I);if(!(h.mode&1))h=yv(f,h,x,null);else if(gt(K))h=yv(f,h,x,Error(o(419)));else if(b=(x&f.childLanes)!==0,Xi||b){if(b=cr,b!==null){switch(x&-x){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}b=I&(b.suspendedLanes|x)?0:I,b!==0&&b!==T.retryLane&&(T.retryLane=b,_s(f,b,-1))}s1(),h=yv(f,h,x,Error(o(421)))}else bt(K)?(h.flags|=128,h.child=f.child,h=QW.bind(null,f),Ln(K,h),h=null):(x=T.treeContext,Se&&($i=Kn(K),Gi=h,kn=!0,$s=null,Ih=!1,x!==null&&(ms[gs++]=ta,ms[gs++]=na,ms[gs++]=fc,ta=x.id,na=x.overflow,fc=h)),h=Bw(h,h.pendingProps.children),h.flags|=4096);return h}return I?(b=e2(f,h,b.children,b.fallback,x),I=h.child,T=f.child.memoizedState,I.memoizedState=T===null?vv(x):{baseLanes:T.baseLanes|x,cachePool:null},I.childLanes=f.childLanes&~x,h.memoizedState=gv,b):(x=QI(f,h,b.children,x),h.memoizedState=null,x)}return I?(b=e2(f,h,b.children,b.fallback,x),I=h.child,T=f.child.memoizedState,I.memoizedState=T===null?vv(x):{baseLanes:T.baseLanes|x,cachePool:null},I.childLanes=f.childLanes&~x,h.memoizedState=gv,b):(x=QI(f,h,b.children,x),h.memoizedState=null,x)}function Bw(f,h){return h=Uv({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function QI(f,h,x,b){var T=f.child;return f=T.sibling,x=tl(T,{mode:"visible",children:x}),!(h.mode&1)&&(x.lanes=b),x.return=h,x.sibling=null,f!==null&&(b=h.deletions,b===null?(h.deletions=[f],h.flags|=16):b.push(f)),h.child=x}function e2(f,h,x,b,T){var I=h.mode;f=f.child;var j=f.sibling,K={mode:"hidden",children:x};return!(I&1)&&h.child!==f?(x=h.child,x.childLanes=0,x.pendingProps=K,h.deletions=null):(x=tl(f,K),x.subtreeFlags=f.subtreeFlags&14680064),j!==null?b=tl(j,b):(b=xc(b,I,T,null),b.flags|=2),b.return=h,x.return=h,x.sibling=b,h.child=x,b}function yv(f,h,x,b){return b!==null&&Ew(b),nd(h,f.child,null,x),f=Bw(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function t2(f,h,x){f.lanes|=h;var b=f.alternate;b!==null&&(b.lanes|=h),gw(f.return,h,x)}function zw(f,h,x,b,T){var I=f.memoizedState;I===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:T}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=b,I.tail=x,I.tailMode=T)}function n2(f,h,x){var b=h.pendingProps,T=b.revealOrder,I=b.tail;if(hi(f,h,b.children,x),b=Hn.current,b&2)b=b&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&t2(f,x,h);else if(f.tag===19)t2(f,x,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}b&=1}if(_t(Hn,b),!(h.mode&1))h.memoizedState=null;else switch(T){case"forwards":for(x=h.child,T=null;x!==null;)f=x.alternate,f!==null&&ov(f)===null&&(T=x),x=x.sibling;x=T,x===null?(T=h.child,h.child=null):(T=x.sibling,x.sibling=null),zw(h,!1,T,x,I);break;case"backwards":for(x=null,T=h.child,h.child=null;T!==null;){if(f=T.alternate,f!==null&&ov(f)===null){h.child=T;break}f=T.sibling,T.sibling=x,x=T,T=f}zw(h,!0,x,null,I);break;case"together":zw(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function ia(f,h,x){if(f!==null&&(h.dependencies=f.dependencies),ad|=h.lanes,!(x&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(o(153));if(h.child!==null){for(f=h.child,x=tl(f,f.pendingProps),h.child=x,x.return=h;f.sibling!==null;)f=f.sibling,x=x.sibling=tl(f,f.pendingProps),x.return=h;x.sibling=null}return h.child}function VW(f,h,x){switch(h.tag){case 3:KI(h),td();break;case 5:yI(h);break;case 1:Vn(h.type)&&Ku(h);break;case 4:Mw(h,h.stateNode.containerInfo);break;case 10:rI(h,h.type._context,h.memoizedProps.value);break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(_t(Hn,Hn.current&1),h.flags|=128,null):x&h.child.childLanes?ZI(f,h,x):(_t(Hn,Hn.current&1),f=ia(f,h,x),f!==null?f.sibling:null);_t(Hn,Hn.current&1);break;case 19:if(b=(x&h.childLanes)!==0,f.flags&128){if(b)return n2(f,h,x);h.flags|=128}var T=h.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),_t(Hn,Hn.current),b)break;return null;case 22:case 23:return h.lanes=0,XI(f,h,x)}return ia(f,h,x)}function HW(f,h){switch(Sw(h),h.tag){case 1:return Vn(h.type)&&qa(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return id(),an(lr),an(yr),Aw(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return Tw(h),null;case 13:if(an(Hn),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(o(340));td()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return an(Hn),null;case 4:return id(),null;case 10:return mw(h.type._context),null;case 22:case 23:return i1(),null;case 24:return null;default:return null}}var _v=!1,mc=!1,jW=typeof WeakSet=="function"?WeakSet:Set,je=null;function xv(f,h){var x=f.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(b){Pi(f,h,b)}else x.current=null}function Vw(f,h,x){try{x()}catch(b){Pi(f,h,b)}}var r2=!1;function WW(f,h){for(W(f.containerInfo),je=h;je!==null;)if(f=je,h=f.child,(f.subtreeFlags&1028)!==0&&h!==null)h.return=f,je=h;else for(;je!==null;){f=je;try{var x=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,T=x.memoizedState,I=f.stateNode,j=I.getSnapshotBeforeUpdate(f.elementType===f.type?b:Gs(f.type,b),T);I.__reactInternalSnapshotBeforeUpdate=j}break;case 3:ut&&Ge(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(K){Pi(f,f.return,K)}if(h=f.sibling,h!==null){h.return=f.return,je=h;break}je=f.return}return x=r2,r2=!1,x}function gc(f,h,x){var b=h.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var T=b=b.next;do{if((T.tag&f)===f){var I=T.destroy;T.destroy=void 0,I!==void 0&&Vw(h,x,I)}T=T.next}while(T!==b)}}function jh(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var x=h=h.next;do{if((x.tag&f)===f){var b=x.create;x.destroy=b()}x=x.next}while(x!==h)}}function Hw(f){var h=f.ref;if(h!==null){var x=f.stateNode;switch(f.tag){case 5:f=q(x);break;default:f=x}typeof h=="function"?h(f):h.current=f}}function i2(f,h,x){if(_o&&typeof _o.onCommitFiberUnmount=="function")try{_o.onCommitFiberUnmount(Yg,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var b=f=f.next;do{var T=b,I=T.destroy;T=T.tag,I!==void 0&&(T&2||T&4)&&Vw(h,x,I),b=b.next}while(b!==f)}break;case 1:if(xv(h,x),f=h.stateNode,typeof f.componentWillUnmount=="function")try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(j){Pi(h,x,j)}break;case 5:xv(h,x);break;case 4:ut?u2(f,h,x):he&&he&&(h=h.stateNode.containerInfo,x=un(h),le(h,x))}}function s2(f,h,x){for(var b=h;;)if(i2(f,b,x),b.child===null||ut&&b.tag===4){if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function o2(f){var h=f.alternate;h!==null&&(f.alternate=null,o2(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&He(h)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function a2(f){return f.tag===5||f.tag===3||f.tag===4}function l2(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||a2(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function c2(f){if(ut){e:{for(var h=f.return;h!==null;){if(a2(h))break e;h=h.return}throw Error(o(160))}var x=h;switch(x.tag){case 5:h=x.stateNode,x.flags&32&&(Mt(h),x.flags&=-33),x=l2(f),Ww(f,x,h);break;case 3:case 4:h=x.stateNode.containerInfo,x=l2(f),jw(f,x,h);break;default:throw Error(o(161))}}}function jw(f,h,x){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?At(x,f,h):Oe(x,f);else if(b!==4&&(f=f.child,f!==null))for(jw(f,h,x),f=f.sibling;f!==null;)jw(f,h,x),f=f.sibling}function Ww(f,h,x){var b=f.tag;if(b===5||b===6)f=f.stateNode,h?Xe(x,f,h):Ct(x,f);else if(b!==4&&(f=f.child,f!==null))for(Ww(f,h,x),f=f.sibling;f!==null;)Ww(f,h,x),f=f.sibling}function u2(f,h,x){for(var b=h,T=!1,I,j;;){if(!T){T=b.return;e:for(;;){if(T===null)throw Error(o(160));switch(I=T.stateNode,T.tag){case 5:j=!1;break e;case 3:I=I.containerInfo,j=!0;break e;case 4:I=I.containerInfo,j=!0;break e}T=T.return}T=!0}if(b.tag===5||b.tag===6)s2(f,b,x),j?Sn(I,b.stateNode):zt(I,b.stateNode);else if(b.tag===18)j?Ke(I,b.stateNode):Be(I,b.stateNode);else if(b.tag===4){if(b.child!==null){I=b.stateNode.containerInfo,j=!0,b.child.return=b,b=b.child;continue}}else if(i2(f,b,x),b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return,b.tag===4&&(T=!1)}b.sibling.return=b.return,b=b.sibling}}function Gw(f,h){if(ut){switch(h.tag){case 0:case 11:case 14:case 15:gc(3,h,h.return),jh(3,h),gc(5,h,h.return);return;case 1:return;case 5:var x=h.stateNode;if(x!=null){var b=h.memoizedProps;f=f!==null?f.memoizedProps:b;var T=h.type,I=h.updateQueue;h.updateQueue=null,I!==null&&ft(x,I,T,f,b,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));x=h.memoizedProps,st(h.stateNode,f!==null?f.memoizedProps:x,x);return;case 3:Se&&f!==null&&f.memoizedState.isDehydrated&&oe(h.stateNode.containerInfo);return;case 12:return;case 13:Sv(h);return;case 19:Sv(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:gc(3,h,h.return),jh(3,h),gc(5,h,h.return);return;case 12:return;case 13:Sv(h);return;case 19:Sv(h);return;case 3:Se&&f!==null&&f.memoizedState.isDehydrated&&oe(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,le(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Sv(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var x=f.stateNode;x===null&&(x=f.stateNode=new jW),h.forEach(function(b){var T=eG.bind(null,f,b);x.has(b)||(x.add(b),b.then(T,T))})}}function GW(f,h){for(je=h;je!==null;){h=je;var x=h.deletions;if(x!==null)for(var b=0;b<x.length;b++){var T=x[b];try{var I=f;ut?u2(I,T,h):s2(I,T,h);var j=T.alternate;j!==null&&(j.return=null),T.return=null}catch(ot){Pi(T,h,ot)}}if(x=h.child,h.subtreeFlags&12854&&x!==null)x.return=h,je=x;else for(;je!==null;){h=je;try{var K=h.flags;if(K&32&&ut&&Mt(h.stateNode),K&512){var ve=h.alternate;if(ve!==null){var ke=ve.ref;ke!==null&&(typeof ke=="function"?ke(null):ke.current=null)}}if(K&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var Je=h.alternate;(Je===null||Je.memoizedState===null)&&(Zw=Tr())}break;case 22:var Pt=h.memoizedState!==null,pt=h.alternate,_n=pt!==null&&pt.memoizedState!==null;if(x=h,ut){e:if(b=x,T=Pt,I=null,ut)for(var ct=b;;){if(ct.tag===5){if(I===null){I=ct;var Jr=ct.stateNode;T?Z(Jr):be(ct.stateNode,ct.memoizedProps)}}else if(ct.tag===6){if(I===null){var Ss=ct.stateNode;T?Ce(Ss):ze(Ss,ct.memoizedProps)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===b)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===b)break;for(;ct.sibling===null;){if(ct.return===null||ct.return===b)break e;I===ct&&(I=null),ct=ct.return}I===ct&&(I=null),ct.sibling.return=ct.return,ct=ct.sibling}}if(Pt&&!_n&&x.mode&1){je=x;for(var ce=x.child;ce!==null;){for(x=je=ce;je!==null;){b=je;var Q=b.child;switch(b.tag){case 0:case 11:case 14:case 15:gc(4,b,b.return);break;case 1:xv(b,b.return);var me=b.stateNode;if(typeof me.componentWillUnmount=="function"){var We=b.return;try{me.props=b.memoizedProps,me.state=b.memoizedState,me.componentWillUnmount()}catch(ot){Pi(b,We,ot)}}break;case 5:xv(b,b.return);break;case 22:if(b.memoizedState!==null){h2(x);continue}}Q!==null?(Q.return=b,je=Q):h2(x)}ce=ce.sibling}}}switch(K&4102){case 2:c2(h),h.flags&=-3;break;case 6:c2(h),h.flags&=-3,Gw(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Gw(h.alternate,h);break;case 4:Gw(h.alternate,h)}}catch(ot){Pi(h,h.return,ot)}if(x=h.sibling,x!==null){x.return=h.return,je=x;break}je=h.return}}}function $W(f,h,x){je=f,d2(f)}function d2(f,h,x){for(var b=(f.mode&1)!==0;je!==null;){var T=je,I=T.child;if(T.tag===22&&b){var j=T.memoizedState!==null||_v;if(!j){var K=T.alternate,ve=K!==null&&K.memoizedState!==null||mc;K=_v;var ke=mc;if(_v=j,(mc=ve)&&!ke)for(je=T;je!==null;)j=je,ve=j.child,j.tag===22&&j.memoizedState!==null?p2(T):ve!==null?(ve.return=j,je=ve):p2(T);for(;I!==null;)je=I,d2(I),I=I.sibling;je=T,_v=K,mc=ke}f2(f)}else T.subtreeFlags&8772&&I!==null?(I.return=T,je=I):f2(f)}}function f2(f){for(;je!==null;){var h=je;if(h.flags&8772){var x=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:mc||jh(5,h);break;case 1:var b=h.stateNode;if(h.flags&4&&!mc)if(x===null)b.componentDidMount();else{var T=h.elementType===h.type?x.memoizedProps:Gs(h.type,x.memoizedProps);b.componentDidUpdate(T,x.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&oI(h,I,b);break;case 3:var j=h.updateQueue;if(j!==null){if(x=null,h.child!==null)switch(h.child.tag){case 5:x=q(h.child.stateNode);break;case 1:x=h.child.stateNode}oI(h,j,x)}break;case 5:var K=h.stateNode;x===null&&h.flags&4&&Et(K,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&h.memoizedState===null){var ve=h.alternate;if(ve!==null){var ke=ve.memoizedState;if(ke!==null){var Je=ke.dehydrated;Je!==null&&se(Je)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}mc||h.flags&512&&Hw(h)}catch(Pt){Pi(h,h.return,Pt)}}if(h===f){je=null;break}if(x=h.sibling,x!==null){x.return=h.return,je=x;break}je=h.return}}function h2(f){for(;je!==null;){var h=je;if(h===f){je=null;break}var x=h.sibling;if(x!==null){x.return=h.return,je=x;break}je=h.return}}function p2(f){for(;je!==null;){var h=je;try{switch(h.tag){case 0:case 11:case 15:var x=h.return;try{jh(4,h)}catch(ve){Pi(h,x,ve)}break;case 1:var b=h.stateNode;if(typeof b.componentDidMount=="function"){var T=h.return;try{b.componentDidMount()}catch(ve){Pi(h,T,ve)}}var I=h.return;try{Hw(h)}catch(ve){Pi(h,I,ve)}break;case 5:var j=h.return;try{Hw(h)}catch(ve){Pi(h,j,ve)}}}catch(ve){Pi(h,h.return,ve)}if(h===f){je=null;break}var K=h.sibling;if(K!==null){K.return=h.return,je=K;break}je=h.return}}var wv=0,bv=1,Ev=2,Mv=3,Tv=4;if(typeof Symbol=="function"&&Symbol.for){var Wh=Symbol.for;wv=Wh("selector.component"),bv=Wh("selector.has_pseudo_class"),Ev=Wh("selector.role"),Mv=Wh("selector.test_id"),Tv=Wh("selector.text")}function $w(f){var h=_e(f);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(f=J(f),f===null)throw Error(o(362));return f.stateNode.current}function Xw(f,h){switch(h.$$typeof){case wv:if(f.type===h.value)return!0;break;case bv:e:{h=h.value,f=[f,0];for(var x=0;x<f.length;){var b=f[x++],T=f[x++],I=h[T];if(b.tag!==5||!we(b)){for(;I!=null&&Xw(b,I);)T++,I=h[T];if(T===h.length){h=!0;break e}else for(b=b.child;b!==null;)f.push(b,T),b=b.sibling}}h=!1}return h;case Ev:if(f.tag===5&&Qe(f.stateNode,h.value))return!0;break;case Tv:if((f.tag===5||f.tag===6)&&(f=pe(f),f!==null&&0<=f.indexOf(h.value)))return!0;break;case Mv:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function qw(f){switch(f.$$typeof){case wv:return"<"+(M(f.value)||"Unknown")+">";case bv:return":has("+(qw(f)||"")+")";case Ev:return'[role="'+f.value+'"]';case Tv:return'"'+f.value+'"';case Mv:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function m2(f,h){var x=[];f=[f,0];for(var b=0;b<f.length;){var T=f[b++],I=f[b++],j=h[I];if(T.tag!==5||!we(T)){for(;j!=null&&Xw(T,j);)I++,j=h[I];if(I===h.length)x.push(T);else for(T=T.child;T!==null;)f.push(T,I),T=T.sibling}}return x}function Yw(f,h){if(!D)throw Error(o(363));f=$w(f),f=m2(f,h),h=[],f=Array.from(f);for(var x=0;x<f.length;){var b=f[x++];if(b.tag===5)we(b)||h.push(b.stateNode);else for(b=b.child;b!==null;)f.push(b),b=b.sibling}return h}var XW=Math.ceil,Cv=a.ReactCurrentDispatcher,Kw=a.ReactCurrentOwner,rr=a.ReactCurrentBatchConfig,Vt=0,cr=null,ur=null,zr=0,qi=0,od=yt(0),_r=0,Gh=null,ad=0,Av=0,Jw=0,$h=null,Ai=null,Zw=0,Qw=1/0;function ld(){Qw=Tr()+500}var Rv=!1,e1=null,Ja=null,Pv=!1,Za=null,Iv=0,Xh=0,t1=null,Lv=-1,kv=0;function pi(){return Vt&6?Tr():Lv!==-1?Lv:Lv=Tr()}function Qa(f){return f.mode&1?Vt&2&&zr!==0?zr&-zr:RW.transition!==null?(kv===0&&(f=$g,$g<<=1,!($g&4194240)&&($g=64),kv=f),kv):(f=nn,f!==0?f:Te()):1}function _s(f,h,x){if(50<Xh)throw Xh=0,t1=null,Error(o(185));var b=Ov(f,h);return b===null?null:(Ph(b,h,x),(!(Vt&2)||b!==cr)&&(b===cr&&(!(Vt&2)&&(Av|=h),_r===4&&el(b,zr)),Ri(b,x),h===1&&Vt===0&&!(f.mode&1)&&(ld(),Kg&&So())),b)}function Ov(f,h){f.lanes|=h;var x=f.alternate;for(x!==null&&(x.lanes|=h),x=f,f=f.return;f!==null;)f.childLanes|=h,x=f.alternate,x!==null&&(x.childLanes|=h),x=f,f=f.return;return x.tag===3?x.stateNode:null}function Ri(f,h){var x=f.callbackNode;xW(f,h);var b=qg(f,f===cr?zr:0);if(b===0)x!==null&&tI(x),f.callbackNode=null,f.callbackPriority=0;else if(h=b&-b,f.callbackPriority!==h){if(x!=null&&tI(x),h===1)f.tag===0?AW(v2.bind(null,f)):nI(v2.bind(null,f)),nt?B(function(){Vt===0&&So()}):cw(uw,So),x=null;else{switch(eI(b)){case 1:x=uw;break;case 4:x=EW;break;case 16:x=dw;break;case 536870912:x=MW;break;default:x=dw}x=T2(x,g2.bind(null,f))}f.callbackPriority=h,f.callbackNode=x}}function g2(f,h){if(Lv=-1,kv=0,Vt&6)throw Error(o(327));var x=f.callbackNode;if(_c()&&f.callbackNode!==x)return null;var b=qg(f,f===cr?zr:0);if(b===0)return null;if(b&30||b&f.expiredLanes||h)h=Nv(f,b);else{h=b;var T=Vt;Vt|=2;var I=x2();(cr!==f||zr!==h)&&(ld(),vc(f,h));do try{KW();break}catch(K){_2(f,K)}while(!0);pw(),Cv.current=I,Vt=T,ur!==null?h=0:(cr=null,zr=0,h=_r)}if(h!==0){if(h===2&&(T=ow(f),T!==0&&(b=T,h=n1(f,T))),h===1)throw x=Gh,vc(f,0),el(f,b),Ri(f,Tr()),x;if(h===6)el(f,b);else{if(T=f.current.alternate,!(b&30)&&!qW(T)&&(h=Nv(f,b),h===2&&(I=ow(f),I!==0&&(b=I,h=n1(f,I))),h===1))throw x=Gh,vc(f,0),el(f,b),Ri(f,Tr()),x;switch(f.finishedWork=T,f.finishedLanes=b,h){case 0:case 1:throw Error(o(345));case 2:yc(f,Ai);break;case 3:if(el(f,b),(b&130023424)===b&&(h=Zw+500-Tr(),10<h)){if(qg(f,0)!==0)break;if(T=f.suspendedLanes,(T&b)!==b){pi(),f.pingedLanes|=f.suspendedLanes&T;break}f.timeoutHandle=xe(yc.bind(null,f,Ai),h);break}yc(f,Ai);break;case 4:if(el(f,b),(b&4194240)===b)break;for(h=f.eventTimes,T=-1;0<b;){var j=31-Ws(b);I=1<<j,j=h[j],j>T&&(T=j),b&=~I}if(b=T,b=Tr()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*XW(b/1960))-b,10<b){f.timeoutHandle=xe(yc.bind(null,f,Ai),b);break}yc(f,Ai);break;case 5:yc(f,Ai);break;default:throw Error(o(329))}}}return Ri(f,Tr()),f.callbackNode===x?g2.bind(null,f):null}function n1(f,h){var x=$h;return f.current.memoizedState.isDehydrated&&(vc(f,h).flags|=256),f=Nv(f,h),f!==2&&(h=Ai,Ai=x,h!==null&&r1(h)),f}function r1(f){Ai===null?Ai=f:Ai.push.apply(Ai,f)}function qW(f){for(var h=f;;){if(h.flags&16384){var x=h.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var b=0;b<x.length;b++){var T=x[b],I=T.getSnapshot;T=T.value;try{if(!xo(I(),T))return!1}catch{return!1}}}if(x=h.child,h.subtreeFlags&16384&&x!==null)x.return=h,h=x;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function el(f,h){for(h&=~Jw,h&=~Av,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var x=31-Ws(h),b=1<<x;f[x]=-1,h&=~b}}function v2(f){if(Vt&6)throw Error(o(327));_c();var h=qg(f,0);if(!(h&1))return Ri(f,Tr()),null;var x=Nv(f,h);if(f.tag!==0&&x===2){var b=ow(f);b!==0&&(h=b,x=n1(f,b))}if(x===1)throw x=Gh,vc(f,0),el(f,h),Ri(f,Tr()),x;if(x===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,yc(f,Ai),Ri(f,Tr()),null}function y2(f){Za!==null&&Za.tag===0&&!(Vt&6)&&_c();var h=Vt;Vt|=1;var x=rr.transition,b=nn;try{if(rr.transition=null,nn=1,f)return f()}finally{nn=b,rr.transition=x,Vt=h,!(Vt&6)&&So()}}function i1(){qi=od.current,an(od)}function vc(f,h){f.finishedWork=null,f.finishedLanes=0;var x=f.timeoutHandle;if(x!==dt&&(f.timeoutHandle=dt,it(x)),ur!==null)for(x=ur.return;x!==null;){var b=x;switch(Sw(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&qa();break;case 3:id(),an(lr),an(yr),Aw();break;case 5:Tw(b);break;case 4:id();break;case 13:an(Hn);break;case 19:an(Hn);break;case 10:mw(b.type._context);break;case 22:case 23:i1()}x=x.return}if(cr=f,ur=f=tl(f.current,null),zr=qi=h,_r=0,Gh=null,Jw=Av=ad=0,Ai=$h=null,wo!==null){for(h=0;h<wo.length;h++)if(x=wo[h],b=x.interleaved,b!==null){x.interleaved=null;var T=b.next,I=x.pending;if(I!==null){var j=I.next;I.next=T,b.next=j}x.pending=b}wo=null}return f}function _2(f,h){do{var x=ur;try{if(pw(),av.current=hv,lv){for(var b=Jn.memoizedState;b!==null;){var T=b.queue;T!==null&&(T.pending=null),b=b.next}lv=!1}if(sd=0,Cr=qr=Jn=null,Dh=!1,Uh=0,Kw.current=null,x===null||x.return===null){_r=1,Gh=h,ur=null;break}e:{var I=f,j=x.return,K=x,ve=h;if(h=zr,K.flags|=32768,ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var ke=ve,Je=K,Pt=Je.tag;if(!(Je.mode&1)&&(Pt===0||Pt===11||Pt===15)){var pt=Je.alternate;pt?(Je.updateQueue=pt.updateQueue,Je.memoizedState=pt.memoizedState,Je.lanes=pt.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var _n=zI(j);if(_n!==null){_n.flags&=-257,VI(_n,j,K,I,h),_n.mode&1&&BI(I,ke,h),h=_n,ve=ke;var ct=h.updateQueue;if(ct===null){var Jr=new Set;Jr.add(ve),h.updateQueue=Jr}else ct.add(ve);break e}else{if(!(h&1)){BI(I,ke,h),s1();break e}ve=Error(o(426))}}else if(kn&&K.mode&1){var Ss=zI(j);if(Ss!==null){!(Ss.flags&65536)&&(Ss.flags|=256),VI(Ss,j,K,I,h),Ew(ve);break e}}I=ve,_r!==4&&(_r=2),$h===null?$h=[I]:$h.push(I),ve=Nw(ve,K),K=j;do{switch(K.tag){case 3:K.flags|=65536,h&=-h,K.lanes|=h;var ce=UI(K,ve,h);sI(K,ce);break e;case 1:I=ve;var Q=K.type,me=K.stateNode;if(!(K.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(Ja===null||!Ja.has(me)))){K.flags|=65536,h&=-h,K.lanes|=h;var We=FI(K,I,h);sI(K,We);break e}}K=K.return}while(K!==null)}w2(x)}catch(ot){h=ot,ur===x&&x!==null&&(ur=x=x.return);continue}break}while(!0)}function x2(){var f=Cv.current;return Cv.current=hv,f===null?hv:f}function s1(){(_r===0||_r===3||_r===2)&&(_r=4),cr===null||!(ad&268435455)&&!(Av&268435455)||el(cr,zr)}function Nv(f,h){var x=Vt;Vt|=2;var b=x2();cr===f&&zr===h||vc(f,h);do try{YW();break}catch(T){_2(f,T)}while(!0);if(pw(),Vt=x,Cv.current=b,ur!==null)throw Error(o(261));return cr=null,zr=0,_r}function YW(){for(;ur!==null;)S2(ur)}function KW(){for(;ur!==null&&!wW();)S2(ur)}function S2(f){var h=M2(f.alternate,f,qi);f.memoizedProps=f.pendingProps,h===null?w2(f):ur=h,Kw.current=null}function w2(f){var h=f;do{var x=h.alternate;if(f=h.return,h.flags&32768){if(x=HW(x,h),x!==null){x.flags&=32767,ur=x;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{_r=6,ur=null;return}}else if(x=BW(x,h,qi),x!==null){ur=x;return}if(h=h.sibling,h!==null){ur=h;return}ur=h=f}while(h!==null);_r===0&&(_r=5)}function yc(f,h){var x=nn,b=rr.transition;try{rr.transition=null,nn=1,JW(f,h,x)}finally{rr.transition=b,nn=x}return null}function JW(f,h,x){do _c();while(Za!==null);if(Vt&6)throw Error(o(327));var b=f.finishedWork,T=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var I=b.lanes|b.childLanes;if(SW(f,I),f===cr&&(ur=cr=null,zr=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||Pv||(Pv=!0,T2(dw,function(){return _c(),null})),I=(b.flags&15990)!==0,b.subtreeFlags&15990||I){I=rr.transition,rr.transition=null;var j=nn;nn=1;var K=Vt;Vt|=4,Kw.current=null,WW(f,b),GW(f,b),G(f.containerInfo),f.current=b,$W(b),bW(),Vt=K,nn=j,rr.transition=I}else f.current=b;if(Pv&&(Pv=!1,Za=f,Iv=T),I=f.pendingLanes,I===0&&(Ja=null),TW(b.stateNode),Ri(f,Tr()),h!==null)for(x=f.onRecoverableError,b=0;b<h.length;b++)x(h[b]);if(Rv)throw Rv=!1,f=e1,e1=null,f;return Iv&1&&f.tag!==0&&_c(),I=f.pendingLanes,I&1?f===t1?Xh++:(Xh=0,t1=f):Xh=0,So(),null}function _c(){if(Za!==null){var f=eI(Iv),h=rr.transition,x=nn;try{if(rr.transition=null,nn=16>f?16:f,Za===null)var b=!1;else{if(f=Za,Za=null,Iv=0,Vt&6)throw Error(o(331));var T=Vt;for(Vt|=4,je=f.current;je!==null;){var I=je,j=I.child;if(je.flags&16){var K=I.deletions;if(K!==null){for(var ve=0;ve<K.length;ve++){var ke=K[ve];for(je=ke;je!==null;){var Je=je;switch(Je.tag){case 0:case 11:case 15:gc(8,Je,I)}var Pt=Je.child;if(Pt!==null)Pt.return=Je,je=Pt;else for(;je!==null;){Je=je;var pt=Je.sibling,_n=Je.return;if(o2(Je),Je===ke){je=null;break}if(pt!==null){pt.return=_n,je=pt;break}je=_n}}}var ct=I.alternate;if(ct!==null){var Jr=ct.child;if(Jr!==null){ct.child=null;do{var Ss=Jr.sibling;Jr.sibling=null,Jr=Ss}while(Jr!==null)}}je=I}}if(I.subtreeFlags&2064&&j!==null)j.return=I,je=j;else e:for(;je!==null;){if(I=je,I.flags&2048)switch(I.tag){case 0:case 11:case 15:gc(9,I,I.return)}var ce=I.sibling;if(ce!==null){ce.return=I.return,je=ce;break e}je=I.return}}var Q=f.current;for(je=Q;je!==null;){j=je;var me=j.child;if(j.subtreeFlags&2064&&me!==null)me.return=j,je=me;else e:for(j=Q;je!==null;){if(K=je,K.flags&2048)try{switch(K.tag){case 0:case 11:case 15:jh(9,K)}}catch(ot){Pi(K,K.return,ot)}if(K===j){je=null;break e}var We=K.sibling;if(We!==null){We.return=K.return,je=We;break e}je=K.return}}if(Vt=T,So(),_o&&typeof _o.onPostCommitFiberRoot=="function")try{_o.onPostCommitFiberRoot(Yg,f)}catch{}b=!0}return b}finally{nn=x,rr.transition=h}}return!1}function b2(f,h,x){h=Nw(x,h),h=UI(f,h,1),Ka(f,h),h=pi(),f=Ov(f,1),f!==null&&(Ph(f,1,h),Ri(f,h))}function Pi(f,h,x){if(f.tag===3)b2(f,f,x);else for(;h!==null;){if(h.tag===3){b2(h,f,x);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Ja===null||!Ja.has(b))){f=Nw(x,f),f=FI(h,f,1),Ka(h,f),f=pi(),h=Ov(h,1),h!==null&&(Ph(h,1,f),Ri(h,f));break}}h=h.return}}function ZW(f,h,x){var b=f.pingCache;b!==null&&b.delete(h),h=pi(),f.pingedLanes|=f.suspendedLanes&x,cr===f&&(zr&x)===x&&(_r===4||_r===3&&(zr&130023424)===zr&&500>Tr()-Zw?vc(f,0):Jw|=x),Ri(f,h)}function E2(f,h){h===0&&(f.mode&1?(h=Xg,Xg<<=1,!(Xg&130023424)&&(Xg=4194304)):h=1);var x=pi();f=Ov(f,h),f!==null&&(Ph(f,h,x),Ri(f,x))}function QW(f){var h=f.memoizedState,x=0;h!==null&&(x=h.retryLane),E2(f,x)}function eG(f,h){var x=0;switch(f.tag){case 13:var b=f.stateNode,T=f.memoizedState;T!==null&&(x=T.retryLane);break;case 19:b=f.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(h),E2(f,x)}var M2;M2=function(f,h,x){if(f!==null)if(f.memoizedProps!==h.pendingProps||lr.current)Xi=!0;else{if(!(f.lanes&x)&&!(h.flags&128))return Xi=!1,VW(f,h,x);Xi=!!(f.flags&131072)}else Xi=!1,kn&&h.flags&1048576&&dI(h,iv,h.index);switch(h.lanes=0,h.tag){case 2:var b=h.type;f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps;var T=zn(h,yr.current);Zu(h,x),T=Pw(null,h,b,f,T,x);var I=Iw();return h.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Vn(b)?(I=!0,Ku(h)):I=!1,h.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,vw(h),T.updater=nv,h.stateNode=T,T._reactInternals=h,_w(h,b,f,x),h=Fw(null,h,b,!0,I,x)):(h.tag=0,kn&&I&&xw(h),hi(null,h,T,x),h=h.child),h;case 16:b=h.elementType;e:{switch(f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),f=h.pendingProps,T=b._init,b=T(b._payload),h.type=b,T=h.tag=nG(b),f=Gs(b,f),T){case 0:h=Uw(null,h,b,f,x);break e;case 1:h=YI(null,h,b,f,x);break e;case 11:h=WI(null,h,b,f,x);break e;case 14:h=GI(null,h,b,Gs(b.type,f),x);break e}throw Error(o(306,b,""))}return h;case 0:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Gs(b,T),Uw(f,h,b,T,x);case 1:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Gs(b,T),YI(f,h,b,T,x);case 3:e:{if(KI(h),f===null)throw Error(o(387));b=h.pendingProps,I=h.memoizedState,T=I.element,iI(f,h),tv(h,b,null,x);var j=h.memoizedState;if(b=j.element,Se&&I.isDehydrated)if(I={element:b,isDehydrated:!1,cache:j.cache,transitions:j.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){T=Error(o(423)),h=JI(f,h,b,x,T);break e}else if(b!==T){T=Error(o(424)),h=JI(f,h,b,x,T);break e}else for(Se&&($i=yn(h.stateNode.containerInfo),Gi=h,kn=!0,$s=null,Ih=!1),x=vI(h,null,b,x),h.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(td(),b===T){h=ia(f,h,x);break e}hi(f,h,b,x)}h=h.child}return h;case 5:return yI(h),f===null&&bw(h),b=h.type,T=h.pendingProps,I=f!==null?f.memoizedProps:null,j=T.children,ye(b,T)?j=null:I!==null&&ye(b,I)&&(h.flags|=32),qI(f,h),hi(f,h,j,x),h.child;case 6:return f===null&&bw(h),null;case 13:return ZI(f,h,x);case 4:return Mw(h,h.stateNode.containerInfo),b=h.pendingProps,f===null?h.child=nd(h,null,b,x):hi(f,h,b,x),h.child;case 11:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Gs(b,T),WI(f,h,b,T,x);case 7:return hi(f,h,h.pendingProps,x),h.child;case 8:return hi(f,h,h.pendingProps.children,x),h.child;case 12:return hi(f,h,h.pendingProps.children,x),h.child;case 10:e:{if(b=h.type._context,T=h.pendingProps,I=h.memoizedProps,j=T.value,rI(h,b,j),I!==null)if(xo(I.value,j)){if(I.children===T.children&&!lr.current){h=ia(f,h,x);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var K=I.dependencies;if(K!==null){j=I.child;for(var ve=K.firstContext;ve!==null;){if(ve.context===b){if(I.tag===1){ve=ea(-1,x&-x),ve.tag=2;var ke=I.updateQueue;if(ke!==null){ke=ke.shared;var Je=ke.pending;Je===null?ve.next=ve:(ve.next=Je.next,Je.next=ve),ke.pending=ve}}I.lanes|=x,ve=I.alternate,ve!==null&&(ve.lanes|=x),gw(I.return,x,h),K.lanes|=x;break}ve=ve.next}}else if(I.tag===10)j=I.type===h.type?null:I.child;else if(I.tag===18){if(j=I.return,j===null)throw Error(o(341));j.lanes|=x,K=j.alternate,K!==null&&(K.lanes|=x),gw(j,x,h),j=I.sibling}else j=I.child;if(j!==null)j.return=I;else for(j=I;j!==null;){if(j===h){j=null;break}if(I=j.sibling,I!==null){I.return=j.return,j=I;break}j=j.return}I=j}hi(f,h,T.children,x),h=h.child}return h;case 9:return T=h.type,b=h.pendingProps.children,Zu(h,x),T=ps(T),b=b(T),h.flags|=1,hi(f,h,b,x),h.child;case 14:return b=h.type,T=Gs(b,h.pendingProps),T=Gs(b.type,T),GI(f,h,b,T,x);case 15:return $I(f,h,h.type,h.pendingProps,x);case 17:return b=h.type,T=h.pendingProps,T=h.elementType===b?T:Gs(b,T),f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Vn(b)?(f=!0,Ku(h)):f=!1,Zu(h,x),cI(h,b,T),_w(h,b,T,x),Fw(null,h,b,!0,f,x);case 19:return n2(f,h,x);case 22:return XI(f,h,x)}throw Error(o(156,h.tag))};function T2(f,h){return cw(f,h)}function tG(f,h,x,b){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(f,h,x,b){return new tG(f,h,x,b)}function o1(f){return f=f.prototype,!(!f||!f.isReactComponent)}function nG(f){if(typeof f=="function")return o1(f)?1:0;if(f!=null){if(f=f.$$typeof,f===y)return 11;if(f===S)return 14}return 2}function tl(f,h){var x=f.alternate;return x===null?(x=xs(f.tag,h,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=h,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&14680064,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,h=f.dependencies,x.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x}function Dv(f,h,x,b,T,I){var j=2;if(b=f,typeof f=="function")o1(f)&&(j=1);else if(typeof f=="string")j=5;else e:switch(f){case u:return xc(x.children,T,I,h);case d:j=8,T|=8;break;case p:return f=xs(12,x,h,T|2),f.elementType=p,f.lanes=I,f;case _:return f=xs(13,x,h,T),f.elementType=_,f.lanes=I,f;case v:return f=xs(19,x,h,T),f.elementType=v,f.lanes=I,f;case E:return Uv(x,T,I,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:j=10;break e;case g:j=9;break e;case y:j=11;break e;case S:j=14;break e;case w:j=16,b=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return h=xs(j,x,h,T),h.elementType=f,h.type=b,h.lanes=I,h}function xc(f,h,x,b){return f=xs(7,f,b,h),f.lanes=x,f}function Uv(f,h,x,b){return f=xs(22,f,b,h),f.elementType=E,f.lanes=x,f.stateNode={},f}function a1(f,h,x){return f=xs(6,f,null,h),f.lanes=x,f}function l1(f,h,x){return h=xs(4,f.children!==null?f.children:[],f.key,h),h.lanes=x,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function rG(f,h,x,b,T){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=dt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aw(0),this.expirationTimes=aw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aw(0),this.identifierPrefix=b,this.onRecoverableError=T,Se&&(this.mutableSourceEagerHydrationData=null)}function C2(f,h,x,b,T,I,j,K,ve){return f=new rG(f,h,x,K,ve),h===1?(h=1,I===!0&&(h|=8)):h=0,I=xs(3,null,null,h),f.current=I,I.stateNode=f,I.memoizedState={element:b,isDehydrated:x,cache:null,transitions:null},vw(I),f}function A2(f){if(!f)return Xr;f=f._reactInternals;e:{if(P(f)!==f||f.tag!==1)throw Error(o(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Vn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(f.tag===1){var x=f.type;if(Vn(x))return Yu(f,x,h)}return h}function R2(f){var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=H(h),f===null?null:f.stateNode}function P2(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<h?x:h}}function c1(f,h){P2(f,h),(f=f.alternate)&&P2(f,h)}function iG(f){return f=H(f),f===null?null:f.stateNode}function sG(){return null}return n.attemptContinuousHydration=function(f){if(f.tag===13){var h=pi();_s(f,134217728,h),c1(f,134217728)}},n.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var h=pi(),x=Qa(f);_s(f,x,h),c1(f,x)}},n.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var x=Rh(h.pendingLanes);x!==0&&(lw(h,x|1),Ri(h,Tr()),!(Vt&6)&&(ld(),So()))}break;case 13:var b=pi();y2(function(){return _s(f,1,b)}),c1(f,1)}},n.batchedUpdates=function(f,h){var x=Vt;Vt|=1;try{return f(h)}finally{Vt=x,Vt===0&&(ld(),Kg&&So())}},n.createComponentSelector=function(f){return{$$typeof:wv,value:f}},n.createContainer=function(f,h,x,b,T,I,j){return C2(f,h,!1,null,x,b,T,I,j)},n.createHasPseudoClassSelector=function(f){return{$$typeof:bv,value:f}},n.createHydrationContainer=function(f,h,x,b,T,I,j,K,ve){return f=C2(x,b,!0,f,T,I,j,K,ve),f.context=A2(null),x=f.current,b=pi(),T=Qa(x),I=ea(b,T),I.callback=h??null,Ka(x,I),f.current.lanes=T,Ph(f,T,b),Ri(f,b),f},n.createPortal=function(f,h,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:b==null?null:""+b,children:f,containerInfo:h,implementation:x}},n.createRoleSelector=function(f){return{$$typeof:Ev,value:f}},n.createTestNameSelector=function(f){return{$$typeof:Mv,value:f}},n.createTextSelector=function(f){return{$$typeof:Tv,value:f}},n.deferredUpdates=function(f){var h=nn,x=rr.transition;try{return rr.transition=null,nn=16,f()}finally{nn=h,rr.transition=x}},n.discreteUpdates=function(f,h,x,b,T){var I=nn,j=rr.transition;try{return rr.transition=null,nn=1,f(h,x,b,T)}finally{nn=I,rr.transition=j,Vt===0&&ld()}},n.findAllNodes=Yw,n.findBoundingRects=function(f,h){if(!D)throw Error(o(363));h=Yw(f,h),f=[];for(var x=0;x<h.length;x++)f.push(de(h[x]));for(h=f.length-1;0<h;h--){x=f[h];for(var b=x.x,T=b+x.width,I=x.y,j=I+x.height,K=h-1;0<=K;K--)if(h!==K){var ve=f[K],ke=ve.x,Je=ke+ve.width,Pt=ve.y,pt=Pt+ve.height;if(b>=ke&&I>=Pt&&T<=Je&&j<=pt){f.splice(h,1);break}else if(b!==ke||x.width!==ve.width||pt<I||Pt>j){if(!(I!==Pt||x.height!==ve.height||Je<b||ke>T)){ke>b&&(ve.width+=ke-b,ve.x=b),Je<T&&(ve.width=T-ke),f.splice(h,1);break}}else{Pt>I&&(ve.height+=Pt-I,ve.y=I),pt<j&&(ve.height=j-Pt),f.splice(h,1);break}}}return f},n.findHostInstance=R2,n.findHostInstanceWithNoPortals=function(f){return f=N(f),f=f!==null?$(f):null,f===null?null:f.stateNode},n.findHostInstanceWithWarning=function(f){return R2(f)},n.flushControlled=function(f){var h=Vt;Vt|=1;var x=rr.transition,b=nn;try{rr.transition=null,nn=1,f()}finally{nn=b,rr.transition=x,Vt=h,Vt===0&&(ld(),So())}},n.flushPassiveEffects=_c,n.flushSync=y2,n.focusWithin=function(f,h){if(!D)throw Error(o(363));for(f=$w(f),h=m2(f,h),h=Array.from(h),f=0;f<h.length;){var x=h[f++];if(!we(x)){if(x.tag===5&&De(x.stateNode))return!0;for(x=x.child;x!==null;)h.push(x),x=x.sibling}}return!1},n.getCurrentUpdatePriority=function(){return nn},n.getFindAllNodesFailureDescription=function(f,h){if(!D)throw Error(o(363));var x=0,b=[];f=[$w(f),0];for(var T=0;T<f.length;){var I=f[T++],j=f[T++],K=h[j];if((I.tag!==5||!we(I))&&(Xw(I,K)&&(b.push(qw(K)),j++,j>x&&(x=j)),j<h.length))for(I=I.child;I!==null;)f.push(I,j),I=I.sibling}if(x<h.length){for(f=[];x<h.length;x++)f.push(qw(h[x]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},n.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return q(f.child.stateNode);default:return f.child.stateNode}},n.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:iG,findFiberByHostInstance:f.findFiberByHostInstance||sG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)f=!0;else{try{Yg=h.inject(f),_o=h}catch{}f=!!h.checkDCE}}return f},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(f,h,x,b){if(!D)throw Error(o(363));f=Yw(f,h);var T=Fe(f,x,b).disconnect;return{disconnect:function(){T()}}},n.registerMutableSourceForHydration=function(f,h){var x=h._getVersion;x=x(h._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[h,x]:f.mutableSourceEagerHydrationData.push(h,x)},n.runWithPriority=function(f,h){var x=nn;try{return nn=f,h()}finally{nn=x}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(f,h,x,b){var T=h.current,I=pi(),j=Qa(T);return x=A2(x),h.context===null?h.context=x:h.pendingContext=x,h=ea(I,j),h.payload={element:f},b=b===void 0?null:b,b!==null&&(h.callback=b),Ka(T,h),f=_s(T,j,I),f!==null&&ev(f,T,j),j},n};Gj.exports=fpe;var hpe=Gj.exports;const ppe=_x(hpe);var $j={exports:{}},Xj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,W){var G=k.length;k.push(W);e:for(;0<G;){var ee=G-1>>>1,ae=k[ee];if(0<i(ae,W))k[ee]=W,k[G]=ae,G=ee;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var W=k[0],G=k.pop();if(G!==W){k[0]=G;e:for(var ee=0,ae=k.length,Pe=ae>>>1;ee<Pe;){var re=2*(ee+1)-1,ye=k[re],Ee=re+1,xe=k[Ee];if(0>i(ye,G))Ee<ae&&0>i(xe,ye)?(k[ee]=xe,k[Ee]=G,ee=Ee):(k[ee]=ye,k[re]=G,ee=re);else if(Ee<ae&&0>i(xe,G))k[ee]=xe,k[Ee]=G,ee=Ee;else break e}}return W}function i(k,W){var G=k.sortIndex-W.sortIndex;return G!==0?G:k.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,g=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(k){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=k)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(k){if(y=!1,w(k),!g)if(n(l)!==null)g=!0,q(R);else{var W=n(c);W!==null&&fe(E,W.startTime-k)}}function R(k,W){g=!1,y&&(y=!1,v(L),L=-1),m=!0;var G=p;try{for(w(W),d=n(l);d!==null&&(!(d.expirationTime>W)||k&&!N());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,p=d.priorityLevel;var ae=ee(d.expirationTime<=W);W=t.unstable_now(),typeof ae=="function"?d.callback=ae:d===n(l)&&r(l),w(W)}else r(l);d=n(l)}if(d!==null)var Pe=!0;else{var re=n(c);re!==null&&fe(E,re.startTime-W),Pe=!1}return Pe}finally{d=null,p=G,m=!1}}var A=!1,M=null,L=-1,P=5,C=-1;function N(){return!(t.unstable_now()-C<P)}function H(){if(M!==null){var k=t.unstable_now();C=k;var W=!0;try{W=M(!0,k)}finally{W?z():(A=!1,M=null)}}else A=!1}var z;if(typeof S=="function")z=function(){S(H)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,X=$.port2;$.port1.onmessage=H,z=function(){X.postMessage(null)}}else z=function(){_(H,0)};function q(k){M=k,A||(A=!0,z())}function fe(k,W){L=_(function(){k(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,q(R))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return k()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,W){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var G=p;p=k;try{return W()}finally{p=G}},t.unstable_scheduleCallback=function(k,W,G){var ee=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,k){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=G+ae,k={id:u++,callback:W,priorityLevel:k,startTime:G,expirationTime:ae,sortIndex:-1},G>ee?(k.sortIndex=G,e(c,k),n(l)===null&&k===n(c)&&(y?(v(L),L=-1):y=!0,fe(E,G-ee))):(k.sortIndex=ae,e(l,k),g||m||(g=!0,q(R))),k},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(k){var W=p;return function(){var G=p;p=W;try{return k.apply(this,arguments)}finally{p=G}}}})(Xj);$j.exports=Xj;var r3=$j.exports;const yP={},mpe=t=>void Object.assign(yP,t);function gpe(t,e){function n(u,{args:d=[],attach:p,...m},g){let y=`${u[0].toUpperCase()}${u.slice(1)}`,_;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=m.object;_=Vd(v,{type:u,root:g,attach:p,primitive:!0})}else{const v=yP[y];if(!v)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");_=Vd(new v(...d),{type:u,root:g,attach:p,memoizedProps:{args:d}})}return _.__r3f.attach===void 0&&(_ instanceof Ft?_.__r3f.attach="geometry":_ instanceof $r&&(_.__r3f.attach="material")),y!=="inject"&&aE(_,m),_}function r(u,d){let p=!1;if(d){var m,g;(m=d.__r3f)!=null&&m.attach?oE(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),p=!0),p||(g=u.__r3f)==null||g.objects.push(d),d.__r3f||Vd(d,{}),d.__r3f.parent=u,XT(d),Hd(d)}}function i(u,d,p){let m=!1;if(d){var g,y;if((g=d.__r3f)!=null&&g.attach)oE(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:d});const _=u.children.filter(S=>S!==d),v=_.indexOf(p);u.children=[..._.slice(0,v),d,..._.slice(v)],m=!0}m||(y=u.__r3f)==null||y.objects.push(d),d.__r3f||Vd(d,{}),d.__r3f.parent=u,XT(d),Hd(d)}}function s(u,d,p=!1){u&&[...u].forEach(m=>o(d,m,p))}function o(u,d,p){if(d){var m,g,y;if(d.__r3f&&(d.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==d)),(g=d.__r3f)!=null&&g.attach)l3(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var _;u.remove(d),(_=d.__r3f)!=null&&_.root&&Epe(Y0(d),d)}const S=(y=d.__r3f)==null?void 0:y.primitive,w=!S&&(p===void 0?d.dispose!==null:p);if(!S){var v;s((v=d.__r3f)==null?void 0:v.objects,d,w),s(d.children,d,w)}if(delete d.__r3f,w&&d.dispose&&d.type!=="Scene"){const E=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?r3.unstable_scheduleCallback(r3.unstable_IdlePriority,E):E()}Hd(u)}}function a(u,d,p,m){var g;const y=(g=u.__r3f)==null?void 0:g.parent;if(!y)return;const _=n(d,p,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&r(_,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>r(_,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(y,u),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(y,_),_.raycast&&_.__r3f.eventCount&&Y0(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(v=>{v!==null&&(v.stateNode=_,v.ref&&(typeof v.ref=="function"?v.ref(_):v.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:ppe({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,p)=>{if(!d||!p)return;const m=u.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,p,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:_=[],children:v,...S}=m,{args:w=[],children:E,...R}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((M,L)=>M!==w[L]))return[!0];const A=e6(u,S,R,!0);return A.changes.length?[!1,A]:null}},commitUpdate(u,[d,p],m,g,y,_){d?a(u,m,y,_):aE(u,p)},commitMount(u,d,p,m){var g;const y=(g=u.__r3f)!=null?g:{};u.raycast&&y.handlers&&y.eventCount&&Y0(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>Vd(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&l3(m,u,p),u.isObject3D&&(u.visible=!1),Hd(u)},unhideInstance(u,d){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&oE(g,u,m),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),Hd(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():hf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&On.fun(performance.now)?performance.now:On.fun(Date.now)?Date.now:()=>0,scheduleTimeout:On.fun(setTimeout)?setTimeout:void 0,cancelTimeout:On.fun(clearTimeout)?clearTimeout:void 0}),applyProps:aE}}var i3,s3;const sE=t=>"colorSpace"in t||"outputColorSpace"in t,qj=()=>{var t;return(t=yP.ColorManagement)!=null?t:null},Yj=t=>t&&t.isOrthographicCamera,vpe=t=>t&&t.hasOwnProperty("current"),Fg=typeof window<"u"&&((i3=window.document)!=null&&i3.createElement||((s3=window.navigator)==null?void 0:s3.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function Kj(t){const e=O.useRef(t);return Fg(()=>void(e.current=t),[t]),e}function ype({set:t}){return Fg(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class Jj extends O.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Jj.getDerivedStateFromError=()=>({error:!0});const Zj="__default",o3=new Map,_pe=t=>t&&!!t.memoized&&!!t.changes;function Qj(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Ep=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function Y0(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const On={obj:t=>t===Object(t)&&!On.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(On.str(t)||On.num(t))return t===e;const s=On.obj(t);if(s&&r==="reference")return t===e;const o=On.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!On.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(On.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function xpe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Vd(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function $T(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const a3=/-\d+$/;function oE(t,e,n){if(On.str(n)){if(a3.test(n)){const s=n.replace(a3,""),{target:o,key:a}=$T(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=$T(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function l3(t,e,n){var r,i;if(On.str(n)){const{target:s,key:o}=$T(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function e6(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=t==null?void 0:t.__r3f)!=null?u:{},p=Object.entries(i),m=[];if(c){const y=Object.keys(l);for(let _=0;_<y.length;_++)i.hasOwnProperty(y[_])||p.unshift([y[_],Zj+"remove"])}p.forEach(([y,_])=>{var v;if((v=t.__r3f)!=null&&v.primitive&&y==="object"||On.equ(_,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return m.push([y,_,!0,[]]);let S=[];y.includes("-")&&(S=y.split("-")),m.push([y,_,!1,S]);for(const w in i){const E=i[w];w.startsWith(`${y}-`)&&m.push([w,E,!1,w.split("-")])}});const g={...i};return d.memoizedProps&&d.memoizedProps.args&&(g.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(g.attach=d.memoizedProps.attach),{memoized:g,changes:m}}const Spe=typeof process<"u"&&!1;function aE(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=_pe(e)?e:e6(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<c.length;p++){let[m,g,y,_]=c[p];if(sE(t)){const E="srgb",R="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?E:R):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?E:R)}let v=t,S=v[m];if(_.length&&(S=_.reduce((w,E)=>w[E],t),!(S&&S.set))){const[w,...E]=_.reverse();v=E.reverse().reduce((R,A)=>R[A],t),m=w}if(g===Zj+"remove")if(v.constructor){let w=o3.get(v.constructor);w||(w=new v.constructor,o3.set(v.constructor,w)),g=w[m]}else g=0;if(y)g?s.handlers[m]=g:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof du)){if(Array.isArray(g))S.fromArray?S.fromArray(g):S.set(...g);else if(S.copy&&g&&g.constructor&&(Spe?S.constructor.name===g.constructor.name:S.constructor===g.constructor))S.copy(g);else if(g!==void 0){const w=S instanceof $e;!w&&S.setScalar?S.setScalar(g):S instanceof du&&g instanceof du?S.mask=g.mask:S.set(g),!qj()&&!a.linear&&w&&S.convertSRGBToLinear()}}else if(v[m]=g,v[m]instanceof Xn&&v[m].format===Ni&&v[m].type===Yo){const w=v[m];sE(w)&&sE(a.gl)?w.colorSpace=a.gl.outputColorSpace:w.encoding=a.gl.outputEncoding}Hd(t)}if(s.parent&&t.raycast&&u!==s.eventCount){const p=Y0(t).getState().internal,m=p.interaction.indexOf(t);m>-1&&p.interaction.splice(m,1),s.eventCount&&p.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&XT(t),t}function Hd(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function XT(t){t.onUpdate==null||t.onUpdate(t)}function wpe(t,e){t.manual||(Yj(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function s0(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function bpe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return hf.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return hf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return hf.ContinuousEventPriority;default:return hf.DefaultEventPriority}}function t6(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function Epe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{t6(n.capturedMap,e,r,i)})}function Mpe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),d=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<m.length;v++){const S=Ep(m[v]);S&&(S.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(v){const S=Ep(v);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var w;S.events.compute==null||S.events.compute(l,S,(w=S.previousRoot)==null?void 0:w.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(v,!0):[]}let y=m.flatMap(g).sort((v,S)=>{const w=Ep(v.object),E=Ep(S.object);return!w||!E?v.distance-S.distance:E.events.priority-w.events.priority||v.distance-S.distance}).filter(v=>{const S=s0(v);return d.has(S)?!1:(d.add(S),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const v of y){let S=v.object;for(;S;){var _;(_=S.__r3f)!=null&&_.eventCount&&p.push({...v,eventObject:S}),S=S.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())d.has(s0(v.intersection))||p.push(v.intersection);return p}function i(l,c,u,d){const p=t.getState();if(l.length){const m={stopped:!1};for(const g of l){const y=Ep(g.object)||p,{raycaster:_,pointer:v,camera:S,internal:w}=y,E=new V(v.x,v.y,0).unproject(S),R=C=>{var N,H;return(N=(H=w.capturedMap.get(C))==null?void 0:H.has(g.eventObject))!=null?N:!1},A=C=>{const N={intersection:g,target:c.target};w.capturedMap.has(C)?w.capturedMap.get(C).set(g.eventObject,N):w.capturedMap.set(C,new Map([[g.eventObject,N]])),c.target.setPointerCapture(C)},M=C=>{const N=w.capturedMap.get(C);N&&t6(w.capturedMap,g.eventObject,N,C)};let L={};for(let C in c){let N=c[C];typeof N!="function"&&(L[C]=N)}let P={...g,...L,pointer:v,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:E,ray:_.ray,camera:S,stopPropagation(){const C="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!C||C.has(g.eventObject))&&(P.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(N=>N.eventObject===g.eventObject))){const N=l.slice(0,l.indexOf(g));s([...N,g])}},target:{hasPointerCapture:R,setPointerCapture:A,releasePointerCapture:M},currentTarget:{hasPointerCapture:R,setPointerCapture:A,releasePointerCapture:M},nativeEvent:c};if(d(P),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(s0(u)),p!=null&&p.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:p}=t.getState();p.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(u,m?n:void 0),v=g?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=_.map(w=>w.eventObject)),g&&!_.length&&v<=2&&(o(u,p.interaction),d&&d(u)),m&&s(_);function S(w){const E=w.eventObject,R=E.__r3f,A=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(m){if(A.onPointerOver||A.onPointerEnter||A.onPointerOut||A.onPointerLeave){const M=s0(w),L=p.hovered.get(M);L?L.stopped&&w.stopPropagation():(p.hovered.set(M,w),A.onPointerOver==null||A.onPointerOver(w),A.onPointerEnter==null||A.onPointerEnter(w))}A.onPointerMove==null||A.onPointerMove(w)}else{const M=A[l];M?(!g||p.initialHits.includes(E))&&(o(u,p.interaction.filter(L=>!p.initialHits.includes(L))),M(w)):g&&p.initialHits.includes(E)&&o(u,p.interaction.filter(L=>!p.initialHits.includes(L)))}}i(_,u,v,S)}}return{handlePointer:a}}const n6=t=>!!(t!=null&&t.render),r6=O.createContext(null),Tpe=(t,e)=>{const n=cpe((a,l)=>{const c=new V,u=new V,d=new V;function p(v=l().camera,S=u,w=l().size){const{width:E,height:R,top:A,left:M}=w,L=E/R;S instanceof V?d.copy(S):d.set(...S);const P=v.getWorldPosition(c).distanceTo(d);if(Yj(v))return{width:E/v.zoom,height:R/v.zoom,top:A,left:M,factor:1,distance:P,aspect:L};{const C=v.fov*Math.PI/180,N=2*Math.tan(C/2)*P,H=N*(E/R);return{width:H,height:N,top:A,left:M,factor:E/H,distance:P,aspect:L}}}let m;const g=v=>a(S=>({performance:{...S.performance,current:v}})),y=new Me;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>t(l(),v),advance:(v,S)=>e(v,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new pP,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();m&&clearTimeout(m),v.performance.current!==v.performance.min&&g(v.performance.min),m=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:v=>a(S=>({...S,events:{...S.events,...v}})),setSize:(v,S,w,E,R)=>{const A=l().camera,M={width:v,height:S,top:E||0,left:R||0,updateStyle:w};a(L=>({size:M,viewport:{...L.viewport,...p(A,u,M)}}))},setDpr:v=>a(S=>{const w=Qj(v);return{viewport:{...S.viewport,dpr:w,initialDpr:S.viewport.initialDpr||w}}}),setFrameloop:(v="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,v!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:O.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,S,w)=>{const E=l().internal;return E.priority=E.priority+(S>0?1:0),E.subscribers.push({ref:v,priority:S,store:w}),E.subscribers=E.subscribers.sort((R,A)=>R.priority-A.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(S>0?1:0),R.subscribers=R.subscribers.filter(A=>A.ref!==v))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,wpe(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let o0,Cpe=new Set,Ape=new Set,Rpe=new Set;function lE(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Mp(t,e){switch(t){case"before":return lE(Cpe,e);case"after":return lE(Ape,e);case"tail":return lE(Rpe,e)}}let cE,uE;function dE(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),cE=e.internal.subscribers,o0=0;o0<cE.length;o0++)uE=cE[o0],uE.ref.current(uE.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Ppe(t){let e=!1,n=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,Mp("before",c),n=!0;for(const d of t.values()){var u;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=dE(c,s))}if(n=!1,Mp("after",c),r===0)return Mp("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var d;if(!c)return t.forEach(p=>a(p.store.getState(),u));(d=c.gl.xr)!=null&&d.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,d,p){if(u&&Mp("before",c),d)dE(c,d,p);else for(const m of t.values())dE(c,m.store.getState());u&&Mp("after",c)}return{loop:o,invalidate:a,advance:l}}function Ipe(){const t=O.useContext(r6);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Lpe(t,e=0){const n=Ipe(),r=n.getState().internal.subscribe,i=Kj(t);return Fg(()=>r(i,e,n),[e,r,n]),null}const Xf=new Map,{invalidate:c3,advance:u3}=Ppe(Xf),{reconciler:ex,applyProps:Ud}=gpe(Xf,bpe),Fd={objects:"shallow",strict:!1},kpe=(t,e)=>{const n=typeof t=="function"?t(e):t;return n6(n)?n:new qH({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Ope(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function Npe(t){const e=Xf.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Tpe(c3,u3),o=n||ex.createContainer(s,hf.ConcurrentRoot,null,!1,null,"",i,null);e||Xf.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:p,scene:m,events:g,onCreated:y,shadows:_=!1,linear:v=!1,flat:S=!1,legacy:w=!1,orthographic:E=!1,frameloop:R="always",dpr:A=[1,2],performance:M,raycaster:L,camera:P,onPointerMissed:C}=u,N=s.getState(),H=N.gl;N.gl||N.set({gl:H=kpe(d,t)});let z=N.raycaster;z||N.set({raycaster:z=new Vj});const{params:$,...X}=L||{};if(On.equ(X,z,Fd)||Ud(z,{...X}),On.equ($,z.params,Fd)||Ud(z,{params:{...z.params,...$}}),!N.camera||N.camera===c&&!On.equ(c,P,Fd)){c=P;const G=P instanceof Pg,ee=G?P:E?new kg(0,0,0,0,.1,1e3):new kr(75,0,.1,1e3);G||(ee.position.z=5,P&&(Ud(ee,P),("aspect"in P||"left"in P||"right"in P||"bottom"in P||"top"in P)&&(ee.manual=!0,ee.updateProjectionMatrix())),!N.camera&&!(P!=null&&P.rotation)&&ee.lookAt(0,0,0)),N.set({camera:ee}),z.camera=ee}if(!N.scene){let G;m instanceof K_?G=m:(G=new K_,m&&Ud(G,m)),N.set({scene:Vd(G)})}if(!N.xr){var q;const G=(Pe,re)=>{const ye=s.getState();ye.frameloop!=="never"&&u3(Pe,!0,ye,re)},ee=()=>{const Pe=s.getState();Pe.gl.xr.enabled=Pe.gl.xr.isPresenting,Pe.gl.xr.setAnimationLoop(Pe.gl.xr.isPresenting?G:null),Pe.gl.xr.isPresenting||c3(Pe)},ae={connect(){const Pe=s.getState().gl;Pe.xr.addEventListener("sessionstart",ee),Pe.xr.addEventListener("sessionend",ee)},disconnect(){const Pe=s.getState().gl;Pe.xr.removeEventListener("sessionstart",ee),Pe.xr.removeEventListener("sessionend",ee)}};typeof((q=H.xr)==null?void 0:q.addEventListener)=="function"&&ae.connect(),N.set({xr:ae})}if(H.shadowMap){const G=H.shadowMap.enabled,ee=H.shadowMap.type;if(H.shadowMap.enabled=!!_,On.boo(_))H.shadowMap.type=Qp;else if(On.str(_)){var fe;const ae={basic:C5,percentage:xS,soft:Qp,variance:eo};H.shadowMap.type=(fe=ae[_])!=null?fe:Qp}else On.obj(_)&&Object.assign(H.shadowMap,_);(G!==H.shadowMap.enabled||ee!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const k=qj();k&&("enabled"in k?k.enabled=!w:"legacyMode"in k&&(k.legacyMode=w)),l||Ud(H,{outputEncoding:v?3e3:3001,toneMapping:S?$o:LR}),N.legacy!==w&&N.set(()=>({legacy:w})),N.linear!==v&&N.set(()=>({linear:v})),N.flat!==S&&N.set(()=>({flat:S})),d&&!On.fun(d)&&!n6(d)&&!On.equ(d,H,Fd)&&Ud(H,d),g&&!N.events.handlers&&N.set({events:g(s)});const W=Ope(t,p);return On.equ(W,N.size,Fd)||N.setSize(W.width,W.height,W.updateStyle,W.top,W.left),A&&N.viewport.dpr!==Qj(A)&&N.setDpr(A),N.frameloop!==R&&N.setFrameloop(R),N.onPointerMissed||N.set({onPointerMissed:C}),M&&!On.equ(M,N.performance,Fd)&&N.set(G=>({performance:{...G.performance,...M}})),a=y,l=!0,this},render(u){return l||this.configure(),ex.updateContainer(U.jsx(Dpe,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){i6(t)}}}function Dpe({store:t,children:e,onCreated:n,rootElement:r}){return Fg(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),U.jsx(r6.Provider,{value:t,children:e})}function i6(t,e){const n=Xf.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),ex.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),xpe(i),Xf.delete(t),e&&e(t)}catch{}},500)})}}ex.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:O.version});function qT(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}qT.debounce=qT;var Upe=qT;const d3=_x(Upe);function Fpe(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=O.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=O.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=O.useRef(!1);O.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,g]=O.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:w,top:E,width:R,height:A,bottom:M,right:L,x:P,y:C}=l.current.element.getBoundingClientRect(),N={left:w,top:E,width:R,height:A,bottom:M,right:L,x:P,y:C};l.current.element instanceof HTMLElement&&i&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),d.current&&!Hpe(l.current.lastBounds,N)&&a(l.current.lastBounds=N)};return[S,u?d3(S,u):S,c?d3(S,c):S]},[a,i,c,u]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",g,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(g),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",g,{capture:!0,passive:!0})))}const v=S=>{!S||S===l.current.element||(y(),l.current.element=S,l.current.scrollContainers=s6(S),_())};return zpe(g,!!n),Bpe(m),O.useEffect(()=>{y(),_()},[n,g,m]),O.useEffect(()=>y,[]),[v,o,p]}function Bpe(t){O.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function zpe(t,e){O.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function s6(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...s6(t.parentElement)]}const Vpe=["x","y","top","bottom","left","right","width","height"],Hpe=(t,e)=>Vpe.every(n=>t[n]===e[n]);var jpe=Object.defineProperty,Wpe=Object.defineProperties,Gpe=Object.getOwnPropertyDescriptors,f3=Object.getOwnPropertySymbols,$pe=Object.prototype.hasOwnProperty,Xpe=Object.prototype.propertyIsEnumerable,h3=(t,e,n)=>e in t?jpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p3=(t,e)=>{for(var n in e||(e={}))$pe.call(e,n)&&h3(t,n,e[n]);if(f3)for(var n of f3(e))Xpe.call(e,n)&&h3(t,n,e[n]);return t},qpe=(t,e)=>Wpe(t,Gpe(e)),m3,g3;typeof window<"u"&&((m3=window.document)!=null&&m3.createElement||((g3=window.navigator)==null?void 0:g3.product)==="ReactNative")?O.useLayoutEffect:O.useEffect;function o6(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=o6(r,e,n);if(i)return i;r=e?null:r.sibling}}function a6(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const v3=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=v3;return}return v3.apply(this,arguments)};const _P=a6(O.createContext(null));class l6 extends O.Component{render(){return O.createElement(_P.Provider,{value:this._reactInternals},this.props.children)}}function Ype(){const t=O.useContext(_P);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=O.useId();return O.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=o6(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function Kpe(){const t=Ype(),[e]=O.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==_P&&!e.has(i)&&e.set(i,O.useContext(a6(i)))}n=n.return}return e}function Jpe(){const t=Kpe();return O.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>O.createElement(e,null,O.createElement(n.Provider,qpe(p3({},r),{value:t.get(n)}))),e=>O.createElement(l6,p3({},e))),[t])}const fE={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Zpe(t){const{handlePointer:e}=Mpe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(fE).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=fE[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=fE[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const Qpe=O.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=Zpe,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:_,raycaster:v,camera:S,scene:w,onPointerMissed:E,onCreated:R,...A},M){O.useMemo(()=>mpe(ope),[]);const L=Jpe(),[P,C]=Fpe({scroll:!0,debounce:{scroll:50,resize:0},...r}),N=O.useRef(null),H=O.useRef(null);O.useImperativeHandle(M,()=>N.current);const z=Kj(E),[$,X]=O.useState(!1),[q,fe]=O.useState(!1);if($)throw $;if(q)throw q;const k=O.useRef(null);Fg(()=>{const G=N.current;C.width>0&&C.height>0&&G&&(k.current||(k.current=Npe(G)),k.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:p,orthographic:m,frameloop:g,dpr:y,performance:_,raycaster:v,camera:S,scene:w,size:C,onPointerMissed:(...ee)=>z.current==null?void 0:z.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(a?vpe(a)?a.current:a:H.current),l&&ee.setEvents({compute:(ae,Pe)=>{const re=ae[l+"X"],ye=ae[l+"Y"];Pe.pointer.set(re/Pe.size.width*2-1,-(ye/Pe.size.height)*2+1),Pe.raycaster.setFromCamera(Pe.pointer,Pe.camera)}}),R==null||R(ee)}}),k.current.render(U.jsx(L,{children:U.jsx(Jj,{set:fe,children:U.jsx(O.Suspense,{fallback:U.jsx(ype,{set:X}),children:e})})})))}),O.useEffect(()=>{const G=N.current;if(G)return()=>i6(G)},[]);const W=a?"none":"auto";return U.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...i},...A,children:U.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:U.jsx("canvas",{ref:N,style:{display:"block"},children:n})})})}),eme=O.forwardRef(function(e,n){return U.jsx(l6,{children:U.jsx(Qpe,{...e,ref:n})})}),tme=()=>parseInt(Tg.replace(/\D+/g,"")),nme=tme();class rme extends Bs{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${nme>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const ime=t=>new V().setFromSpherical(new Hj(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),sme=O.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:r=0,factor:i=4,fade:s=!1,speed:o=1},a)=>{const l=O.useRef(),[c,u,d]=O.useMemo(()=>{const m=[],g=[],y=Array.from({length:n},()=>(.5+.5*Math.random())*i),_=new $e;let v=t+e;const S=e/n;for(let w=0;w<n;w++)v-=S*Math.random(),m.push(...ime(v).toArray()),_.setHSL(w/n,r,.9),g.push(_.r,_.g,_.b);return[new Float32Array(m),new Float32Array(g),new Float32Array(y)]},[n,e,i,t,r]);Lpe(m=>l.current&&(l.current.uniforms.time.value=m.clock.getElapsedTime()*o));const[p]=O.useState(()=>new rme);return O.createElement("points",{ref:a},O.createElement("bufferGeometry",null,O.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),O.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),O.createElement("bufferAttribute",{attach:"attributes-size",args:[d,1]})),O.createElement("primitive",{ref:l,object:p,attach:"material",blending:X_,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});function ome(t){return Nu({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function ame(t){return Nu({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function lme(t){return Nu({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const c6=()=>{const[t,e]=O.useState(!1);return U.jsxs("div",{children:[U.jsx("div",{children:U.jsx(li.button,{whileHover:{rotate:"180deg"},whileTap:{scale:.9},onClick:()=>e(!0),className:"text-3xl bg-gray-100 text-black hover:text-indigo-500 transition-colors p-2 rounded-full",children:U.jsx(ame,{})})}),U.jsx(cme,{isOpen:t,setIsOpen:e})]})},cme=({isOpen:t,setIsOpen:e})=>{const{theme:n,toggleTheme:r}=Vs(),{username:i}=Du();return U.jsxs(li.nav,{className:`fixed top-0 bottom-0 left-0 w-screen ${n==="light"?"bg-white":"bg-dark text-gray-300"}`,animate:t?"open":"closed",variants:ume,initial:"closed",children:[U.jsx(li.button,{className:"text-3xl bg-white text-black hover:text-indigo-500 border-[1px] border-transparent hover:border-indigo-500 transition-colors p-4 rounded-full absolute top-8 right-8",whileHover:{rotate:"180deg"},onClick:()=>e(!1),whileTap:{scale:.9},children:U.jsx(lme,{})}),U.jsxs(li.div,{variants:dme,className:"flex flex-col gap-4 absolute bottom-8 left-8",children:[U.jsx(hE,{text:"Home",href:"/home"}),U.jsx(hE,{text:"Profile",href:`/${i}`}),U.jsx(hE,{text:"Sign Out",onClick:()=>{localStorage.removeItem("selectedNav"),localStorage.removeItem("session"),window.location.reload()}})]})]})},hE=({text:t,href:e,onClick:n})=>{const{theme:r,toggleTheme:i}=Vs();return U.jsx(li.a,{className:`inline-block z-10 w-fit font-black text-7xl hover:text-indigo-600 transition-colors${r==="light"?" text-gray-700":" text-gray-300"}`,variants:fme,transition:{type:"spring",damping:3},whileHover:{y:-15,rotate:"-7.5deg"},rel:"nofollow",href:e,onClick:n,children:t})},ume={open:{x:"0%",borderTopLeftRadius:"0vw",borderBottomLeftRadius:"0vw",opacity:1},closed:{x:"100%",borderTopLeftRadius:"50vw",borderBottomLeftRadius:"50vw",opacity:0}},dme={open:{transition:{staggerChildren:.1}},closed:{transition:{staggerChildren:.1}}},fme={open:{x:0},closed:{x:25}},y3=["#13FFAA","#1E67C6","#CE84CF","#DD335C"],hme=({selectedChat:t,selectedChatData:e,userData:n,usersData:r})=>{const i=G4(y3[0]),[s,o]=O.useState([]),[a,l]=O.useState(""),c=n.username,u=n.full_name,d=O.useRef(null),{theme:p}=Vs();O.useEffect(()=>{VJ(i,y3,{ease:"easeInOut",duration:20,repeat:1/0,repeatType:"mirror"})},[]);const m=SJ`radial-gradient(150% 130% at 50% 0%, #1a1a24 60%, ${i})`;O.useEffect(()=>{const y=$_.channel(`room.${t}`).on("postgres_changes",{event:"INSERT",schema:"public"},_=>{o(v=>[...v,_.new])}).subscribe();return()=>{y.unsubscribe()}},[t]),O.useEffect(()=>{(async()=>{const v=`https://push-it-backend.vercel.app/messages?chat_id=${encodeURIComponent(Number(t))}
      `;try{const S=await fetch(v,{method:"GET"});if(!S.ok)throw new Error("Failed to fetch messages");const w=await S.json();o(w)}catch(S){console.error("Fetch messages error:",S.message)}})()},[t]);const g=async y=>{y.preventDefault();try{if(!(await fetch("https://push-it-backend.vercel.app/add-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:Number(t),message_text:a,user_name:c,full_name:u})})).ok)throw new Error(result.error||"Failed to send message");l("")}catch(_){console.error("There was a problem with your fetch operation:",_)}try{const{error:_}=await $_.from("messages").insert({chat_id:Number(t),message_text:a,user_name:c});if(_){console.error("Error inserting message:",_.message);return}}catch(_){console.error("There was a problem with your fetch operation:",_)}};return O.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[s]),U.jsx(U.Fragment,{children:U.jsxs(li.section,{style:{backgroundImage:m},className:"relative h-full w-full",children:[U.jsxs("div",{className:`flex flex-col h-full w-full bg-opacity-20  ${p==="light"?"bg-dark text-gray-700":"bg-dark text-gray-100"}`,children:[U.jsxs("div",{style:{height:"10%"},className:`flex items-center justify-between p-5 w-full border-b ${p==="light"?"border-gray-300":"border-gray-700"}`,children:[U.jsx("h2",{className:`text-3xl font-semibold capitalize${p==="light"?" text-gray-300":" text-gray-100"}`,children:e.title||e.chat_name}),U.jsx("div",{className:"flex md:hidden z-50",children:U.jsx(c6,{})})]}),U.jsx("div",{ref:d,className:"flex flex-col overflow-y-scroll z-10 no-scrollbar w-full p-5",style:{height:"85%"},children:s.map(y=>{var _;return U.jsxs("div",{className:`${y.user_name===c?"self-end":"self-start"} p-2 mb-4 rounded-lg w-fit flex flex-col max-w-full sm:max-w-md md:max-w-lg lg:max-w-xl`,children:[U.jsxs("div",{className:`${y.user_name===c?"self-end":"self-start"} flex items-center flex-col gap-2`,children:[U.jsx("img",{src:r&&Array.isArray(r)&&((_=r.filter(v=>v).find(v=>v.username===y.user_name))==null?void 0:_.profile_pic)||"defaultProfilePicUrl",alt:`${y.user_name}'s profile`,className:`${y.user_name===c?"self-end":"self-start"} w-10 h-10 rounded-full border border-gray-300`}),U.jsxs("p",{className:`text-sm ${p==="light"?"text-gray-500":"text-gray-300"}`,children:[y.user_name," -"," ",new Date(y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),U.jsx("div",{children:U.jsx("span",{className:`${y.user_name===c?"bg-indigo-600 text-white rounded-tr-none":p==="light"?"bg-gray-200 text-black":"bg-gray-700 text-white rounded-tl-none"} flex w-fit p-3 mt-2 rounded-lg  `,children:U.jsx("p",{className:"text-lg",children:y.message_text})})})]},y.id||`${y.chat_id}-${y.timestamp}-${y.user_name}`)})}),U.jsxs("form",{onSubmit:g,style:{eight:"5%"},className:`flex items-center p-4 border-t z-10 ${p==="light"?"border-gray-300":"border-gray-700"}`,children:[U.jsx("input",{type:"text",value:a,onChange:y=>l(y.target.value),className:`flex-grow p-2 border ${p==="light"?"border-gray-300 bg-gray-300":"border-gray-700 bg-gray-700"} rounded-lg`,placeholder:"Type your message..."}),U.jsx("button",{type:"submit",className:`ml-2 p-2 ${p==="light"?"bg-blue-500 text-white":"bg-blue-700 text-white"} rounded-lg`,children:"Send"})]})]}),U.jsx("div",{className:"absolute inset-0 z-0 ",children:U.jsx(eme,{children:U.jsx(sme,{radius:40,count:9500,factor:2,fade:!0,speed:.01})})})]})})},_3=["Ones","Groups","Add Chat"],pme=()=>{const[t,e]=O.useState(_3[0]),[n,r]=O.useState(!1),[i,s]=O.useState(null),[o,a]=O.useState({}),{userData:l,username:c}=dR(),{theme:u}=Vs(),[d,p]=O.useState("closed"),[m,g]=O.useState([]),[y,_]=O.useState(null),[v,S]=O.useState(""),w=O.useCallback(async()=>{try{const M=await fetch("https://push-it-backend.vercel.app/all-profiles",{method:"GET"});if(!M.ok)throw new Error("Failed to fetch users");const L=await M.json();g(L)}catch(M){_(M),console.error("There was a problem fetching users:",M)}},[]);O.useEffect(()=>{w()},[w]);const E=O.useCallback(M=>{e(M)},[]),R=O.useMemo(()=>u==="light"?"bg-white text-black":"bg-dark text-white",[u]),A=O.useMemo(()=>u==="light"?"bg-gray-100":"bg-dark-lighter",[u]);return O.useMemo(()=>u==="light"?"bg-gray-200 text-black placeholder-gray-600":"bg-gray-700 text-white placeholder-gray-400",[u]),U.jsxs(U.Fragment,{children:[U.jsxs("div",{className:`w-full h-full flex ${R}`,children:[U.jsx("div",{className:`hidden md:flex flex-col w-full md:w-25p h-50 md:h-full overflow-y-scroll no-scrollbar ${A}`,children:U.jsxs("div",{className:"flex flex-col items-center w-full p-5",children:[U.jsx("div",{className:"flex justify-around w-full mt-4 mb-4",children:_3.map(M=>U.jsx(mme,{text:M,selected:t===M,setSelected:E},M))}),U.jsx(iN,{selected:t,setSelectedChat:s,selectedChatData:o,setSelectedChatData:a,userData:l,usersData:m,username:c})]})}),U.jsx("div",{className:"w-full md:w-75p h-90p md:h-full",children:U.jsx(hme,{selectedChat:i,userData:l,selectedChatData:o,usersData:m,mobileChatsNav:d,setMobileChatsNav:p})}),U.jsx("div",{className:"absolute top-1 left-32 w-full p-4 md:hidden",children:U.jsxs(li.div,{animate:d==="open"?"open":"closed",className:"relative z-[30]",children:[U.jsxs("button",{onClick:()=>p(d==="open"?"closed":"open"),className:"flex items-center gap-2 px-3 py-2 rounded-md text-gray-700 bg-gray-100 hover:bg-indigo-500 transition-colors",children:[U.jsx("span",{className:"font-medium text-sm",children:"Chats"}),U.jsx(li.span,{variants:gme,children:U.jsx(ome,{})})]}),U.jsxs(li.div,{initial:x3.closed,variants:x3,style:{originY:"top",translateX:"-50%"},className:`absolute top-10 right-0 w-64 p-4 shadow-md rounded-md z-20 overflow-hidden ${d==="open"?"visible":"hidden"} ${u==="light"?"bg-gray-100":"bg-dark-lighter"}`,children:[U.jsx(iN,{selected:t,setSelectedChat:s,selectedChatData:o,setSelectedChatData:a,userData:l,usersData:m}),U.jsx("button",{onClick:()=>r(!0),className:"w-full p-3 rounded-md text-xl bg-blue-500 text-white hover:bg-opacity-80 transition-opacity",children:"Add Chat"})]})]})})]}),n&&U.jsx("div",{className:"modal",onClick:()=>r(!1),children:U.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),children:[U.jsx(f5,{}),U.jsx("button",{onClick:()=>r(!1),className:"mt-4 w-full p-2 rounded-md text-xl bg-red-500 text-white hover:bg-opacity-80 transition-opacity",children:"Close"})]})}),v&&U.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-green-500 text-white p-4 text-center",children:v})]})},mme=zo.memo(({text:t,selected:e,setSelected:n})=>{const{theme:r}=Vs(),i=e?"text-white bg-gray-700":r==="light"?"text-gray-600 hover:text-gray-800 hover:bg-gray-300":"text-gray-400 hover:text-gray-200 hover:bg-gray-600";return U.jsx("button",{onClick:()=>n(t),className:`text-sm transition-colors px-4 py-2 rounded-full ${i}`,children:t})}),x3={open:{scaleY:1,transition:{when:"beforeChildren",staggerChildren:.1}},closed:{scaleY:0,transition:{when:"afterChildren",staggerChildren:.1}}},gme={open:{rotate:180},closed:{rotate:0}},vme=()=>U.jsx(yme,{}),yme=()=>U.jsxs("div",{className:"relative overflow-hidden bg-eucalyptus-900 w-screen h-screen items-center justify-center flex",children:[U.jsx("div",{className:"z-20",children:U.jsx("section",{className:"z-20 ",children:U.jsxs("div",{className:"main_wrapper",children:[U.jsxs("div",{className:"main",children:[U.jsxs("div",{className:"antenna",children:[U.jsx("div",{className:"antenna_shadow"}),U.jsx("div",{className:"a1"}),U.jsx("div",{className:"a1d"}),U.jsx("div",{className:"a2"}),U.jsx("div",{className:"a2d"}),U.jsx("div",{className:"a_base"})]}),U.jsxs("div",{className:"tv",children:[U.jsx("div",{className:"cruve",children:U.jsx("svg",{xmlSpace:"preserve",viewBox:"0 0 189.929 189.929",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"curve_svg",children:U.jsx("path",{d:`M70.343,70.343c-30.554,30.553-44.806,72.7-39.102,115.635l-29.738,3.951C-5.442,137.659,11.917,86.34,49.129,49.13
        C86.34,11.918,137.664-5.445,189.928,1.502l-3.95,29.738C143.041,25.54,100.895,39.789,70.343,70.343z`})})}),U.jsx("div",{className:"display_div",children:U.jsx("div",{className:"screen_out",children:U.jsx("div",{className:"screen_out1",children:U.jsx("div",{className:"screen",children:U.jsx("span",{className:"notfound_text",children:" NOT FOUND"})})})})}),U.jsxs("div",{className:"lines",children:[U.jsx("div",{className:"line1"}),U.jsx("div",{className:"line2"}),U.jsx("div",{className:"line3"})]}),U.jsxs("div",{className:"buttons_div",children:[U.jsx("div",{className:"b1",children:U.jsx("div",{})}),U.jsx("div",{className:"b2"}),U.jsxs("div",{className:"speakers",children:[U.jsxs("div",{className:"g1",children:[U.jsx("div",{className:"g11"}),U.jsx("div",{className:"g12"}),U.jsx("div",{className:"g13"})]}),U.jsx("div",{className:"g"}),U.jsx("div",{className:"g"})]})]})]}),U.jsxs("div",{className:"bottom",children:[U.jsx("div",{className:"base1"}),U.jsx("div",{className:"base2"}),U.jsx("div",{className:"base3"})]})]}),U.jsxs("div",{className:"text_404",children:[U.jsx("div",{className:"text_4041 bg-gradient-to-br from-white to-gray-400 bg-clip-text font-extrabold text-transparent",children:"4"}),U.jsx("div",{className:"text_4041 bg-gradient-to-br from-white to-gray-400 bg-clip-text font-extrabold text-transparent",children:"0"}),U.jsx("div",{className:"text_4041 bg-gradient-to-br from-white to-gray-400 bg-clip-text font-extrabold text-transparent",children:"4"})]})]})})}),U.jsx(_me,{})]}),_me=()=>U.jsxs("div",{style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke-width='2' stroke='rgb(180 254 215/ 0.2)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e")`},className:"absolute bottom-0 left-0 right-0 top-0",children:[U.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-eucalyptus-950/70 via-eucalyptus-950/0 to-eucalyptus-950/70"}),U.jsx(xme,{})]}),xme=()=>{const{width:t}=wme(),e=t?Math.floor(t/Ji):0,n=[{top:Ji*0,left:Math.floor(e*.05)*Ji,transition:{duration:3.5,repeatDelay:5,delay:2}},{top:Ji*12,left:Math.floor(e*.15)*Ji,transition:{duration:3.5,repeatDelay:10,delay:4}},{top:Ji*3,left:Math.floor(e*.25)*Ji},{top:Ji*9,left:Math.floor(e*.75)*Ji,transition:{duration:2,repeatDelay:7.5,delay:3.5}},{top:0,left:Math.floor(e*.7)*Ji,transition:{duration:3,repeatDelay:2,delay:1}},{top:Ji*2,left:Math.floor(e*1)*Ji-Ji,transition:{duration:5,repeatDelay:5,delay:5}}];return U.jsx(U.Fragment,{children:n.map((r,i)=>U.jsx(Sme,{top:r.top,left:r.left-bme,transition:r.transition||{}},i))})},Sme=({top:t,left:e,transition:n={}})=>U.jsx(li.div,{initial:{y:0,opacity:0},animate:{opacity:[0,1,0],y:32*8},transition:{ease:"easeInOut",duration:3,repeat:1/0,repeatDelay:1.5,...n},style:{top:t,left:e},className:"absolute z-10 h-[64px] w-[1px] bg-gradient-to-b from-eucalyptus-200 to-eucalyptus-200"}),wme=()=>{const[t,e]=O.useState({width:void 0,height:void 0});return O.useEffect(()=>{const n=()=>e({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",n),n(),()=>{window.removeEventListener("resize",n)}},[]),t},Ji=32,bme=1,Eme=()=>{const{userData:t}=dR(),[e,n]=O.useState(""),{theme:r,toggleTheme:i}=Vs(),{username:s}=lV(),[o,a]=O.useState(!1),l=O.useRef(null);O.useEffect(()=>{t&&n(t==null?void 0:t.profile_pic)},[t]);const c=async u=>{a(!0);const d=u.target.files[0];if(!d){a(!1);return}const p=`${s}/${d.name}`;try{const{data:m,error:g}=await $_.storage.from("profile_pictures").upload(p,d,{upsert:!0});if(g)throw g;const{data:y,error:_}=$_.storage.from("profile_pictures").getPublicUrl(p);if(_)throw _;if(!(await fetch("https://push-it-backend.vercel.app/profile-pic",{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify({username:s,profilePic:y.publicUrl})})).ok)throw new Error("Failed to update profile pic");n(y.publicUrl)}catch(m){console.error("Error handling profile picture: ",m.message)}finally{a(!1)}};return U.jsxs("div",{className:`flex flex-col items-center justify-center w-full h-full p-5 ${r==="light"?"bg-white text-black":"bg-[#16181c] text-white"}`,children:[U.jsx("div",{className:"md:hidden flex self-end",children:U.jsx(c6,{})}),U.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-center p-5",children:[U.jsxs("div",{className:"flex flex-col items-center gap-10",children:[U.jsxs("div",{className:"flex flex-col items-center h-full w-full gap-5",children:[U.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"hidden",ref:l}),U.jsx("img",{src:e||"default-profile-pic-url",alt:"profile-pic",className:"w-40 h-40 rounded-full object-cover"}),U.jsx("button",{onClick:()=>l.current.click(),className:`bottom-0 right-0 p-2 rounded-lg ${r==="light"?"bg-gray-200":"bg-dark-lighter"}`,children:o?"Uploading...":"Change Profile Picture"})]}),U.jsx("h1",{className:"text-3xl font-bold capitalize",children:t.username}),U.jsx("p",{className:"text-lg",children:t.full_name})]}),U.jsx("div",{className:"flex flex-col items-center mt-8",children:U.jsx("button",{onClick:i,className:`p-2 rounded-lg ${r==="light"?"bg-gray-200":"bg-dark-lighter"}`,children:r==="light"?"Dark Mode":"Light Mode"})})]})]})},Mme=()=>U.jsxs("div",{className:"bg-zinc-950 py-20 text-zinc-200 selection:bg-zinc-600 w-screen h-screen flex items-center",children:[U.jsxs(li.div,{initial:{opacity:0,y:25},animate:{opacity:1,y:0},transition:{duration:1.25,ease:"easeInOut"},className:"relative z-10 mx-auto w-full max-w-xl p-4",children:[U.jsx(Tme,{}),U.jsx(Cme,{})]}),U.jsx(Rme,{})]}),Tme=()=>U.jsxs("div",{children:[U.jsx(Ame,{}),U.jsxs("div",{className:"mb-9 mt-6 space-y-1.5",children:[U.jsx("h1",{className:"text-2xl font-semibold",children:"Request Password Reset"}),U.jsxs("p",{className:"text-zinc-400",children:["Remembered your password?"," ",U.jsx(rS,{to:"/signin",className:"text-blue-400",children:"Sign in."})]})]})]}),Cme=()=>{const{requestPasswordReset:t,loading:e}=ja(),[n,r]=O.useState(""),[i,s]=O.useState(null),[o,a]=O.useState(null),l=async c=>{c.preventDefault(),s(null),a(null);try{await t(n),a("Password reset link sent to your email")}catch{s("Failed to send password reset link")}};return U.jsxs("form",{onSubmit:l,children:[U.jsxs("div",{className:"mb-3",children:[U.jsx("label",{htmlFor:"email-input",className:"mb-1.5 block text-zinc-400",children:"Email"}),U.jsx("input",{id:"email-input",type:"email",placeholder:"Enter your email",className:"w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-0 focus:ring-blue-700",value:n,onChange:c=>r(c.target.value),required:!0})]}),i&&U.jsx("p",{className:"text-red-500",children:i}),o&&U.jsx("p",{className:"text-green-500",children:o}),U.jsx("button",{type:"submit",className:"w-full rounded-md bg-gradient-to-br from-blue-400 to-blue-700 px-4 py-2 text-lg text-zinc-50 ring-2 ring-blue-500/50 ring-offset-2 ring-offset-zinc-950 transition-all hover:scale-[1.02] hover:ring-transparent active:scale-[0.98] active:ring-blue-500/70",children:e?"Sending...":"Send Reset Link"})]})},Ame=()=>U.jsx("img",{width:"99",height:"21",viewBox:"0 0 99 21",src:"./pushitt.png",alt:"Logo"}),Rme=()=>U.jsx("div",{style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke-width='2' stroke='rgb(30 58 138 / 0.5)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e")`},className:"absolute right-0 top-0 z-0 size-[50vw]",children:U.jsx("div",{style:{backgroundImage:"radial-gradient(100% 100% at 100% 0%, rgba(9,9,11,0), rgba(9,9,11,1))"},className:"absolute inset-0"})}),Pme=()=>{const{token:t}=lV(),[e,n]=O.useState(""),[r,i]=O.useState(""),[s,o]=O.useState(""),[a,l]=O.useState(""),c=async u=>{if(u.preventDefault(),o(""),l(""),e!==r){o("Passwords do not match");return}try{const d=await fetch("https://push-it-backend.vercel.app/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,newPassword:e})});if(!d.ok){const p=await d.json();throw new Error(p.message)}l("Password reset successfully. You can now log in with your new password.")}catch(d){o(d.message)}};return U.jsxs("div",{className:"bg-zinc-950 py-20 text-zinc-200 selection:bg-zinc-600 w-screen h-screen flex items-center",children:[U.jsxs(li.div,{initial:{opacity:0,y:25},animate:{opacity:1,y:0},transition:{duration:1.25,ease:"easeInOut"},className:"relative z-10 mx-auto w-full max-w-xl p-4",children:[U.jsx(Ime,{}),U.jsxs("form",{onSubmit:c,className:"space-y-6",children:[U.jsxs("div",{children:[U.jsx("label",{htmlFor:"newPassword",className:"block text-zinc-400",children:"New Password"}),U.jsx("input",{id:"newPassword",type:"password",placeholder:"New Password",className:"mt-1 w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-none focus:ring-blue-700",value:e,onChange:u=>n(u.target.value),required:!0})]}),U.jsxs("div",{children:[U.jsx("label",{htmlFor:"confirmPassword",className:"block text-zinc-400",children:"Confirm Password"}),U.jsx("input",{id:"confirmPassword",type:"password",placeholder:"Confirm Password",className:"mt-1 w-full rounded-md border border-zinc-700 bg-zinc-900 px-3 py-2 placeholder-zinc-500 ring-1 ring-transparent transition-shadow focus:outline-none focus:ring-blue-700",value:r,onChange:u=>i(u.target.value),required:!0})]}),s&&U.jsx("p",{className:"text-red-500",children:s}),a&&U.jsx("p",{className:"text-green-500",children:a}),U.jsx("button",{type:"submit",className:"w-full rounded-md bg-gradient-to-br from-blue-400 to-blue-700 px-4 py-2 text-lg text-zinc-50 ring-2 ring-blue-500/50 ring-offset-2 ring-offset-zinc-950 transition-all hover:scale-[1.02] hover:ring-transparent active:scale-[0.98] active:ring-blue-500/70",children:"Reset Password"})]})]}),U.jsx(kme,{})]})},Ime=()=>U.jsxs("div",{children:[U.jsx(Lme,{}),U.jsxs("div",{className:"mb-9 mt-6 space-y-1.5",children:[U.jsx("h1",{className:"text-2xl font-semibold",children:"Reset your password"}),U.jsxs("p",{className:"text-zinc-400",children:["Remembered your password?"," ",U.jsx(rS,{to:"/signin",className:"text-blue-400",children:"Sign in."})]})]})]}),Lme=()=>U.jsx("img",{width:"99",height:"21",viewBox:"0 0 99 21",src:"./pushitt.png",alt:"Logo"}),kme=()=>U.jsx("div",{style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' width='32' height='32' fill='none' stroke-width='2' stroke='rgb(30 58 138 / 0.5)'%3e%3cpath d='M0 .5H31.5V32'/%3e%3c/svg%3e")`},className:"absolute right-0 top-0 z-0 size-[50vw]",children:U.jsx("div",{style:{backgroundImage:"radial-gradient(100% 100% at 100% 0%, rgba(9,9,11,0), rgba(9,9,11,1))"},className:"absolute inset-0"})}),Ome=()=>{const{session:t}=ja(),n=aQ([{path:"/",element:t?U.jsx(U0,{to:"/home"}):U.jsx(ZQ,{}),errorElement:U.jsx(vme,{})},{path:"/signup",element:t?U.jsx(U0,{to:"/home"}):U.jsx(iee,{})},{path:"/request-password-reset",element:U.jsx(Mme,{})},{path:"/reset-password/:token",element:U.jsx(Pme,{})},{element:t?U.jsx(Eee,{}):U.jsx(U0,{to:"/"}),children:[{path:"/home",element:U.jsx(pme,{})},{path:"/:username",element:U.jsx(Eme,{})}]}]);return U.jsx(gQ,{router:n})},u6=Object.prototype.toString;function xP(t){switch(u6.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Ba(t,Error)}}function Sh(t,e){return u6.call(t)===`[object ${e}]`}function d6(t){return Sh(t,"ErrorEvent")}function S3(t){return Sh(t,"DOMError")}function Nme(t){return Sh(t,"DOMException")}function Ia(t){return Sh(t,"String")}function SP(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function wP(t){return t===null||SP(t)||typeof t!="object"&&typeof t!="function"}function qf(t){return Sh(t,"Object")}function $S(t){return typeof Event<"u"&&Ba(t,Event)}function Dme(t){return typeof Element<"u"&&Ba(t,Element)}function Ume(t){return Sh(t,"RegExp")}function XS(t){return!!(t&&t.then&&typeof t.then=="function")}function Fme(t){return qf(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function Ba(t,e){try{return t instanceof e}catch{return!1}}function f6(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function Cf(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function w3(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{f6(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Bme(t,e,n=!1){return Ia(t)?Ume(e)?e.test(t):Ia(e)?n?t===e:t.includes(e):!1:!1}function Wl(t,e=[],n=!1){return e.some(r=>Bme(t,r,n))}function zme(t,e,n=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!Ba(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=Vme(YT(t,e,i,o.originalException,r,s.exception.values,a,0),n))}function YT(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(Ba(r[i],Error)){b3(o,a);const c=t(e,r[i]),u=l.length;E3(c,i,u,a),l=YT(t,e,n,r[i],i,[c,...l],c,u)}return Array.isArray(r.errors)&&r.errors.forEach((c,u)=>{if(Ba(c,Error)){b3(o,a);const d=t(e,c),p=l.length;E3(d,`errors[${u}]`,p,a),l=YT(t,e,n,c,i,[d,...l],d,p)}}),l}function b3(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function E3(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Vme(t,e){return t.map(n=>(n.value&&(n.value=Cf(n.value,e)),n))}const hu="8.13.0",Qt=globalThis;function bP(t,e,n){const r=n||Qt,i=r.__SENTRY__=r.__SENTRY__||{},s=i[hu]=i[hu]||{};return s[t]||(s[t]=e())}const Af=Qt,Hme=80;function Ql(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||Hme;for(;n&&s++<r&&(c=jme(n,u),!(c==="html"||s>1&&o+i.length*l+c.length>=d));)i.push(c),o+=c.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function jme(t,e){const n=t,r=[];if(!n||!n.tagName)return"";if(Af.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(i&&i.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&Ia(o)){const a=o.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function h6(){try{return Af.document.location.href}catch{return""}}function Wme(t){return Af.document&&Af.document.querySelector?Af.document.querySelector(t):null}function p6(t){if(!Af.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}const wh=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Gme="Sentry Logger ",KT=["debug","info","warn","error","log","assert","trace"],tx={};function Ru(t){if(!("console"in Qt))return t();const e=Qt.console,n={},r=Object.keys(tx);r.forEach(i=>{const s=tx[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function $me(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return wh?KT.forEach(n=>{e[n]=(...r)=>{t&&Ru(()=>{Qt.console[n](`${Gme}[${n}]:`,...r)})}}):KT.forEach(n=>{e[n]=()=>{}}),e}const Ae=$me(),Xme=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function qme(t){return t==="http"||t==="https"}function Bg(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:l}=t;return`${a}://${l}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Yme(t){const e=Xme.exec(t);if(!e){Ru(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,i="",s="",o="",a=""]=e.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return m6({host:s,pass:i,path:l,projectId:c,port:o,protocol:n,publicKey:r})}function m6(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Kme(t){if(!wh)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(Ae.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?qme(r)?e&&isNaN(parseInt(e,10))?(Ae.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(Ae.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(Ae.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Jme(t){const e=typeof t=="string"?Yme(t):m6(t);if(!(!e||!Kme(e)))return e}class Do extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function Nr(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&g6(i,r),t[e]=i}function zs(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{wh&&Ae.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function g6(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,zs(t,"__sentry_original__",e)}catch{}}function EP(t){return t.__sentry_original__}function Zme(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function v6(t){if(xP(t))return{message:t.message,name:t.name,stack:t.stack,...T3(t)};if($S(t)){const e={type:t.type,target:M3(t.target),currentTarget:M3(t.currentTarget),...T3(t)};return typeof CustomEvent<"u"&&Ba(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function M3(t){try{return Dme(t)?Ql(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function T3(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function Qme(t,e=40){const n=Object.keys(v6(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return Cf(r,e);for(let i=n.length;i>0;i--){const s=n.slice(0,i).join(", ");if(!(s.length>e))return i===n.length?s:Cf(s,e)}return""}function Dr(t){return JT(t,new Map)}function JT(t,e){if(ege(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.keys(t))typeof t[i]<"u"&&(r[i]=JT(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(JT(i,e))}),r}return t}function ege(t){if(!qf(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const y6=50,Pu="?",C3=/\(error: (.*)\)/,A3=/captureMessage|captureException/;function _6(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],o=n.split(`
`);for(let a=r;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=C3.test(l)?l.replace(C3,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of e){const d=u(c);if(d){s.push(d);break}}if(s.length>=y6+i)break}}return nge(s.slice(i))}}function tge(t){return Array.isArray(t)?_6(...t):t}function nge(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(a0(e).function||"")&&e.pop(),e.reverse(),A3.test(a0(e).function||"")&&(e.pop(),A3.test(a0(e).function||"")&&e.pop()),e.slice(0,y6).map(n=>({...n,filename:n.filename||a0(e).filename,function:n.function||Pu}))}function a0(t){return t[t.length-1]||{}}const pE="<anonymous>";function za(t){try{return!t||typeof t!="function"?pE:t.name||pE}catch{return pE}}function R3(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const K0={},P3={};function Hu(t,e){K0[t]=K0[t]||[],K0[t].push(e)}function ju(t,e){P3[t]||(e(),P3[t]=!0)}function ho(t,e){const n=t&&K0[t];if(n)for(const r of n)try{r(e)}catch(i){wh&&Ae.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${za(r)}
Error:`,i)}}function rge(t){const e="console";Hu(e,t),ju(e,ige)}function ige(){"console"in Qt&&KT.forEach(function(t){t in Qt.console&&Nr(Qt.console,t,function(e){return tx[t]=e,function(...n){ho("console",{args:n,level:t});const i=tx[t];i&&i.apply(Qt.console,n)}})})}const ZT=Qt;function x6(){if(!("fetch"in ZT))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function QT(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function sge(){if(typeof EdgeRuntime=="string")return!0;if(!x6())return!1;if(QT(ZT.fetch))return!0;let t=!1;const e=ZT.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=QT(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){wh&&Ae.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}const S6=1e3;function zg(){return Date.now()/S6}function oge(){const{performance:t}=Qt;if(!t||!t.now)return zg;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/S6}const Vi=oge(),cs=(()=>{const{performance:t}=Qt;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,o=t.timing&&t.timing.navigationStart,l=typeof o=="number"?Math.abs(o+n-r):e,c=l<e;return s||c?i<=l?t.timeOrigin:o:r})();function w6(t){const e="fetch";Hu(e,t),ju(e,age)}function age(){sge()&&Nr(Qt,"fetch",function(t){return function(...e){const{method:n,url:r}=lge(e),i={args:e,fetchData:{method:n,url:r},startTimestamp:Vi()*1e3};ho("fetch",{...i});const s=new Error().stack;return t.apply(Qt,e).then(o=>{const a={...i,endTimestamp:Vi()*1e3,response:o};return ho("fetch",a),o},o=>{const a={...i,endTimestamp:Vi()*1e3,error:o};throw ho("fetch",a),xP(o)&&o.stack===void 0&&(o.stack=s,zs(o,"framesToPop",1)),o})}})}function eC(t,e){return!!t&&typeof t=="object"&&!!t[e]}function I3(t){return typeof t=="string"?t:t?eC(t,"url")?t.url:t.toString?t.toString():"":""}function lge(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:I3(n),method:eC(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:I3(e),method:eC(e,"method")?String(e.method).toUpperCase():"GET"}}let l0=null;function b6(t){const e="error";Hu(e,t),ju(e,cge)}function cge(){l0=Qt.onerror,Qt.onerror=function(t,e,n,r,i){return ho("error",{column:r,error:i,line:n,msg:t,url:e}),l0&&!l0.__SENTRY_LOADER__?l0.apply(this,arguments):!1},Qt.onerror.__SENTRY_INSTRUMENTED__=!0}let c0=null;function E6(t){const e="unhandledrejection";Hu(e,t),ju(e,uge)}function uge(){c0=Qt.onunhandledrejection,Qt.onunhandledrejection=function(t){return ho("unhandledrejection",t),c0&&!c0.__SENTRY_LOADER__?c0.apply(this,arguments):!0},Qt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function dge(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function fge(){return"npm"}function hge(){return!dge()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function L3(){return typeof window<"u"&&(!hge()||pge())}function pge(){return Qt.process!==void 0&&Qt.process.type==="renderer"}function mge(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(t)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[n,r]}function Fn(){const t=Qt,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function M6(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function bl(t){const{message:e,event_id:n}=t;if(e)return e;const r=M6(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function tC(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function sg(t,e){const n=M6(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};n.mechanism.data=s}}function k3(t){if(t&&t.__sentry_captured__)return!0;try{zs(t,"__sentry_captured__",!0)}catch{}return!1}function T6(t){return Array.isArray(t)?t:[t]}function Lo(t,e=100,n=1/0){try{return nC("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function C6(t,e=3,n=100*1024){const r=Lo(t,e);return _ge(r)>n?C6(t,e-1,n):r}function nC(t,e,n=1/0,r=1/0,i=mge()){const[s,o]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&!Number.isNaN(e))return e;const a=gge(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const l=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const m=c.toJSON();return nC("",m,l-1,r,i)}catch{}const u=Array.isArray(e)?[]:{};let d=0;const p=v6(e);for(const m in p){if(!Object.prototype.hasOwnProperty.call(p,m))continue;if(d>=r){u[m]="[MaxProperties ~]";break}const g=p[m];u[m]=nC(m,g,l-1,r,i),d++}return o(e),u}function gge(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(f6(e))return"[VueViewModel]";if(Fme(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${za(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=vge(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function vge(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function yge(t){return~-encodeURI(t).split(/%..|./).length}function _ge(t){return yge(JSON.stringify(t))}var pa;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(pa||(pa={}));function Va(t){return new Is(e=>{e(t)})}function nx(t){return new Is((e,n)=>{n(t)})}class Is{constructor(e){Is.prototype.__init.call(this),Is.prototype.__init2.call(this),Is.prototype.__init3.call(this),Is.prototype.__init4.call(this),this._state=pa.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new Is((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Is((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=e=>{this._setResult(pa.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(pa.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===pa.PENDING){if(XS(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===pa.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===pa.RESOLVED&&n[1](this._value),this._state===pa.REJECTED&&n[2](this._value),n[0]=!0)})}}}function xge(t){const e=[];function n(){return t===void 0||e.length<t}function r(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}function i(o){if(!n())return nx(new Do("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new Is((a,l)=>{let c=e.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{Va(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:e,add:i,drain:s}}function pu(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const Sge=["fatal","error","warning","log","info","debug"];function wge(t){return t==="warn"?"warning":Sge.includes(t)?t:"log"}const rC="baggage",A6="sentry-",bge=/^sentry-/,Ege=8192;function R6(t){const e=Mge(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>{if(i.match(bge)){const o=i.slice(A6.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function P6(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,i])=>(i&&(n[`${A6}${r}`]=i),n),{});return Tge(e)}function Mge(t){if(!(!t||!Ia(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=O3(n);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):O3(t)}function O3(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function Tge(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],i)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=i===0?s:`${e},${s}`;return o.length>Ege?(wh&&Ae.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const Cge=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Age(t){if(!t)return;const e=t.match(Cge);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function Rge(t,e){const n=Age(t),r=R6(e),{traceId:i,parentSpanId:s,parentSampled:o}=n||{};return n?{traceId:i||Fn(),parentSpanId:s||Fn().substring(16),spanId:Fn().substring(16),sampled:o,dsc:r||{}}:{traceId:i||Fn(),spanId:Fn().substring(16)}}function MP(t=Fn(),e=Fn().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function Wu(t,e=[]){return[t,e]}function Pge(t,e){const[n,r]=t;return[n,[...r,e]]}function N3(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function iC(t){return Qt.__SENTRY__&&Qt.__SENTRY__.encodePolyfill?Qt.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function Ige(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[iC(r),s]:r.push(typeof s=="string"?iC(s):s)}for(const s of n){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(Lo(a))}i(l)}}return typeof r=="string"?r:Lge(r)}function Lge(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function kge(t){return[{type:"span"},t]}function Oge(t){const e=typeof t.data=="string"?iC(t.data):t.data;return[Dr({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const Nge={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function D3(t){return Nge[t]}function TP(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function I6(t,e,n,r){const i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Bg(r)},...i&&{trace:Dr({...i})}}}function Dge(t,e,n){const r=[{type:"client_report"},{timestamp:n||zg(),discarded_events:t}];return Wu(e?{dsn:e}:{},[r])}const Uge=60*1e3;function Fge(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?Uge:r-e}function Bge(t,e){return t[e]||t.all||0}function L6(t,e,n=Date.now()){return Bge(t,e)>n}function k6(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),p=(isNaN(d)?60:d)*1e3;if(!c)i.all=r+p;else for(const m of c.split(";"))m==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(i[m]=r+p):i[m]=r+p}else o?i.all=r+Fge(o,r):e===429&&(i.all=r+60*1e3);return i}function zge(t,e){return t??e()}function mE(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}function rx(){return{traceId:Fn(),spanId:Fn().substring(16)}}const u0=Qt;function Vge(){const t=u0.chrome,e=t&&t.app&&t.app.runtime,n="history"in u0&&!!u0.history.pushState&&!!u0.history.replaceState;return!e&&n}const Gt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function bh(){return CP(Qt),Qt}function CP(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||hu,e[hu]=e[hu]||{}}function Hge(t){const e=Vi(),n={sid:Fn(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Wge(n)};return t&&Yf(n,t),n}function Yf(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Vi(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Fn()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function jge(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),Yf(t,n)}function Wge(t){return Dr({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const sC="_sentrySpan";function og(t,e){e?zs(t,sC,e):delete t[sC]}function ix(t){return t[sC]}const Gge=100;class AP{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=rx()}clone(){const e=new AP;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,og(e,ix(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Yf(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[r,i]=n instanceof ec?[n.getScopeData(),n.getRequestSession()]:qf(n)?[e,e.requestSession]:[],{tags:s,extra:o,user:a,contexts:l,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...l},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,og(this,void 0),this._attachments=[],this._propagationContext=rx(),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:Gge;if(r<=0)return this;const i={timestamp:zg(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ix(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:Fn();if(!this._client)return Ae.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:Fn();if(!this._client)return Ae.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Fn();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(Ae.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const ec=AP;function $ge(){return bP("defaultCurrentScope",()=>new ec)}function Xge(){return bP("defaultIsolationScope",()=>new ec)}class qge{constructor(e,n){let r;e?r=e:r=new ec;let i;n?i=n:i=new ec,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return XS(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}_popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}}function Kf(){const t=bh(),e=CP(t);return e.stack=e.stack||new qge($ge(),Xge())}function Yge(t){return Kf().withScope(t)}function Kge(t,e){const n=Kf();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function U3(t){return Kf().withScope(()=>t(Kf().getIsolationScope()))}function Jge(){return{withIsolationScope:U3,withScope:Yge,withSetScope:Kge,withSetIsolationScope:(t,e)=>U3(e),getCurrentScope:()=>Kf().getScope(),getIsolationScope:()=>Kf().getIsolationScope()}}function Vg(t){const e=CP(t);return e.acs?e.acs:Jge()}function Yn(){const t=bh();return Vg(t).getCurrentScope()}function Hs(){const t=bh();return Vg(t).getIsolationScope()}function Zge(){return bP("globalScope",()=>new ec)}function RP(...t){const e=bh(),n=Vg(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function Yt(){return Yn().getClient()}const Qge="_sentryMetrics";function oC(t){const e=t[Qge];if(!e)return;const n={};for(const[,[r,i]]of e)(n[r]||(n[r]=[])).push(Dr(i));return n}const ba="sentry.source",O6="sentry.sample_rate",ag="sentry.op",di="sentry.origin",aC="sentry.idle_span_finish_reason",PP="sentry.measurement_unit",IP="sentry.measurement_value",eve="sentry.profile_id",N6="sentry.exclusive_time",tve=0,D6=1,Pr=2;function nve(t){if(t<400&&t>=100)return{code:D6};if(t>=400&&t<500)switch(t){case 401:return{code:Pr,message:"unauthenticated"};case 403:return{code:Pr,message:"permission_denied"};case 404:return{code:Pr,message:"not_found"};case 409:return{code:Pr,message:"already_exists"};case 413:return{code:Pr,message:"failed_precondition"};case 429:return{code:Pr,message:"resource_exhausted"};case 499:return{code:Pr,message:"cancelled"};default:return{code:Pr,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:Pr,message:"unimplemented"};case 503:return{code:Pr,message:"unavailable"};case 504:return{code:Pr,message:"deadline_exceeded"};default:return{code:Pr,message:"internal_error"}}return{code:Pr,message:"unknown_error"}}function U6(t,e){t.setAttribute("http.response.status_code",e);const n=nve(e);n.message!=="unknown_error"&&t.setStatus(n)}const F6=0,B6=1;function rve(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:s,status:o,origin:a}=fn(t);return Dr({parent_span_id:s,span_id:e,trace_id:n,data:r,op:i,status:o,origin:a})}function ive(t){const{spanId:e,traceId:n}=t.spanContext(),{parent_span_id:r}=fn(t);return Dr({parent_span_id:r,span_id:e,trace_id:n})}function z6(t){const{traceId:e,spanId:n}=t.spanContext(),r=Gu(t);return MP(e,n,r)}function mu(t){return typeof t=="number"?F3(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?F3(t.getTime()):Vi()}function F3(t){return t>9999999999?t/1e3:t}function fn(t){if(ove(t))return t.getSpanJSON();try{const{spanId:e,traceId:n}=t.spanContext();if(sve(t)){const{attributes:r,startTime:i,name:s,endTime:o,parentSpanId:a,status:l}=t;return Dr({span_id:e,trace_id:n,data:r,description:s,parent_span_id:a,start_timestamp:mu(i),timestamp:mu(o)||void 0,status:V6(l),op:r[ag],origin:r[di],_metrics_summary:oC(t)})}return{span_id:e,trace_id:n}}catch{return{}}}function sve(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function ove(t){return typeof t.getSpanJSON=="function"}function Gu(t){const{traceFlags:e}=t.spanContext();return e===B6}function V6(t){if(!(!t||t.code===tve))return t.code===D6?"ok":t.message||"unknown_error"}const gu="_sentryChildSpans",lC="_sentryRootSpan";function H6(t,e){const n=t[lC]||t;zs(e,lC,n),t[gu]?t[gu].add(e):zs(t,gu,new Set([e]))}function ave(t,e){t[gu]&&t[gu].delete(e)}function J0(t){const e=new Set;function n(r){if(!e.has(r)&&Gu(r)){e.add(r);const i=r[gu]?Array.from(r[gu]):[];for(const s of i)n(s)}}return n(t),Array.from(e)}function Ei(t){return t[lC]||t}function hs(){const t=bh(),e=Vg(t);return e.getActiveSpan?e.getActiveSpan():ix(Yn())}let B3=!1;function lve(){B3||(B3=!0,b6(cC),E6(cC))}function cC(){const t=hs(),e=t&&Ei(t);if(e){const n="internal_error";Gt&&Ae.log(`[Tracing] Root span: ${n} -> Global error occured`),e.setStatus({code:Pr,message:n})}}cC.tag="sentry_tracingErrorCallback";const j6="_sentryScope",W6="_sentryIsolationScope";function cve(t,e,n){t&&(zs(t,W6,n),zs(t,j6,e))}function z3(t){return{scope:t[j6],isolationScope:t[W6]}}function tc(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||uve();return!!e&&(e.enableTracing||"tracesSampleRate"in e||"tracesSampler"in e)}function uve(){const t=Yt();return t&&t.getOptions()}class Eh{constructor(e={}){this._traceId=e.traceId||Fn(),this._spanId=e.spanId||Fn().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:F6}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}}const LP="production",G6="_frozenDsc";function V3(t,e){zs(t,G6,e)}function qS(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i=Dr({environment:n.environment||LP,release:n.release,public_key:r,trace_id:t});return e.emit("createDsc",i),i}function $u(t){const e=Yt();if(!e)return{};const n=qS(fn(t).trace_id||"",e),r=Ei(t),i=r[G6];if(i)return i;const s=r.spanContext().traceState,o=s&&s.get("sentry.dsc"),a=o&&R6(o);if(a)return a;const l=fn(r),c=l.data||{},u=c[O6];u!=null&&(n.sample_rate=`${u}`);const d=c[ba],p=l.description;return d!=="url"&&p&&(n.transaction=p),n.sampled=String(Gu(r)),e.emit("createDsc",n,r),n}function dve(t){if(!Gt)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=fn(t),{spanId:i}=t.spanContext(),s=Gu(t),o=Ei(t),a=o===t,l=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,c=[`op: ${n}`,`name: ${e}`,`ID: ${i}`];if(r&&c.push(`parent ID: ${r}`),!a){const{op:u,description:d}=fn(o);c.push(`root ID: ${o.spanContext().spanId}`),u&&c.push(`root op: ${u}`),d&&c.push(`root description: ${d}`)}Ae.log(`${l}
  ${c.join(`
  `)}`)}function fve(t){if(!Gt)return;const{description:e="< unknown name >",op:n="< unknown op >"}=fn(t),{spanId:r}=t.spanContext(),s=Ei(t)===t,o=`[Tracing] Finishing "${n}" ${s?"root ":""}span "${e}" with ID ${r}`;Ae.log(o)}function sx(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(typeof e!="number"||isNaN(e)||e<0||e>1){Gt&&Ae.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`);return}return e}function hve(t,e){if(!tc(t))return[!1];let n;typeof t.tracesSampler=="function"?n=t.tracesSampler(e):e.parentSampled!==void 0?n=e.parentSampled:typeof t.tracesSampleRate<"u"?n=t.tracesSampleRate:n=1;const r=sx(n);return r===void 0?(Gt&&Ae.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):r?Math.random()<r?[!0,r]:(Gt&&Ae.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,r]):(Gt&&Ae.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,r])}function pve(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function mve(t,e,n,r){const i=TP(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:Bg(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Wu(s,[o])}function gve(t,e,n,r){const i=TP(n),s=t.type&&t.type!=="replay_event"?t.type:"event";pve(t,n&&n.sdk);const o=I6(t,i,r,e);return delete t.sdkProcessingMetadata,Wu(o,[[{type:s},t]])}function vve(t,e){function n(u){return!!u.trace_id&&!!u.public_key}const r=$u(t[0]),i=e&&e.getDsn(),s=e&&e.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!s&&i&&{dsn:Bg(i)}},a=e&&e.getOptions().beforeSendSpan,l=a?u=>a(fn(u)):u=>fn(u),c=[];for(const u of t){const d=l(u);d&&c.push(kge(d))}return Wu(o,c)}function yve(t,e,n){const r=hs(),i=r&&Ei(r);i&&i.addEvent(t,{[IP]:e,[PP]:n})}function H3(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},i=r[PP],s=r[IP];typeof i=="string"&&typeof s=="number"&&(e[n.name]={value:s,unit:i})}),e}const j3=1e3;class kP{constructor(e={}){this._traceId=e.traceId||Fn(),this._spanId=e.spanId||Fn().substring(16),this._startTime=e.startTimestamp||Vi(),this._attributes={},this.setAttributes({[di]:"manual",[ag]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?B6:F6}}setAttribute(e,n){n===void 0?delete this._attributes[e]:this._attributes[e]=n}setAttributes(e){Object.keys(e).forEach(n=>this.setAttribute(n,e[n]))}updateStartTime(e){this._startTime=mu(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=mu(e),fve(this),this._onSpanEnded())}getSpanJSON(){return Dr({data:this._attributes,description:this._name,op:this._attributes[ag],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:V6(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[di],_metrics_summary:oC(this),profile_id:this._attributes[eve],exclusive_time:this._attributes[N6],measurements:H3(this._events),is_segment:this._isStandaloneSpan&&Ei(this)===this||void 0,segment_id:this._isStandaloneSpan?Ei(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){Gt&&Ae.log("[Tracing] Adding an event to span:",e);const i=W3(n)?n:r||Vi(),s=W3(n)?{}:n||{},o={name:e,time:mu(i),attributes:s};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=Yt();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ei(this)))return;if(this._isStandaloneSpan){this._sampled?xve(vve([this],e)):(Gt&&Ae.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(z3(this).scope||Yn()).captureEvent(r)}_convertSpanToTransaction(){if(!G3(fn(this)))return;this._name||(Gt&&Ae.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=z3(this),i=(e||Yn()).getClient()||Yt();if(this._sampled!==!0){Gt&&Ae.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),i&&i.recordDroppedEvent("sample_rate","transaction");return}const o=J0(this).filter(d=>d!==this&&!_ve(d)).map(d=>fn(d)).filter(G3),a=this._attributes[ba],l={contexts:{trace:rve(this)},spans:o.length>j3?o.sort((d,p)=>d.start_timestamp-p.start_timestamp).slice(0,j3):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,...Dr({dynamicSamplingContext:$u(this)})},_metrics_summary:oC(this),...a&&{transaction_info:{source:a}}},c=H3(this._events);return c&&Object.keys(c).length&&(Gt&&Ae.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function W3(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function G3(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function _ve(t){return t instanceof kP&&t.isStandaloneSpan()}function xve(t){const e=Yt();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}const r=e.getTransport();r&&r.send(t).then(null,i=>{Gt&&Ae.error("Error while sending span:",i)})}const $6="__SENTRY_SUPPRESS_TRACING__";function Xu(t){const e=q6();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=wve(t),{forceTransaction:r,parentSpan:i}=t;return(t.scope?o=>RP(t.scope,o):i?o=>X6(i,o):o=>o())(()=>{const o=Yn(),a=Eve(o);return t.onlyIfParent&&!a?new Eh:Sve({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}function X6(t,e){const n=q6();return n.withActiveSpan?n.withActiveSpan(t,e):RP(r=>(og(r,t||void 0),e(r)))}function Sve({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!tc())return new Eh;const i=Hs();let s;if(t&&!n)s=bve(t,r,e),H6(t,s);else if(t){const o=$u(t),{traceId:a,spanId:l}=t.spanContext(),c=Gu(t);s=$3({traceId:a,parentSpanId:l,...e},r,c),V3(s,o)}else{const{traceId:o,dsc:a,parentSpanId:l,sampled:c}={...i.getPropagationContext(),...r.getPropagationContext()};s=$3({traceId:o,parentSpanId:l,...e},r,c),a&&V3(s,a)}return dve(s),cve(s,r,i),s}function wve(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=mu(t.startTime),delete r.startTime,r}return n}function q6(){const t=bh();return Vg(t)}function $3(t,e,n){const r=Yt(),i=r&&r.getOptions()||{},{name:s="",attributes:o}=t,[a,l]=e.getScopeData().sdkProcessingMetadata[$6]?[!1]:hve(i,{name:s,parentSampled:n,attributes:o,transactionContext:{name:s,parentSampled:n}}),c=new kP({...t,attributes:{[ba]:"custom",...t.attributes},sampled:a});return l!==void 0&&c.setAttribute(O6,l),r&&r.emit("spanStart",c),c}function bve(t,e,n){const{spanId:r,traceId:i}=t.spanContext(),s=e.getScopeData().sdkProcessingMetadata[$6]?!1:Gu(t),o=s?new kP({...n,parentSpanId:r,traceId:i,sampled:s}):new Eh({traceId:i});H6(t,o);const a=Yt();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function Eve(t){const e=ix(t);if(!e)return;const n=Yt();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Ei(e):e}const Z0={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Mve="heartbeatFailed",Tve="idleTimeout",Cve="finalTimeout",Ave="externalFinish";function Y6(t,e={}){const n=new Map;let r=!1,i,s=Ave,o=!e.disableAutoFinish;const{idleTimeout:a=Z0.idleTimeout,finalTimeout:l=Z0.finalTimeout,childSpanTimeout:c=Z0.childSpanTimeout,beforeSpanEnd:u}=e,d=Yt();if(!d||!tc())return new Eh;const p=Yn(),m=hs(),g=Rve(t);g.end=new Proxy(g.end,{apply(R,A,M){u&&u(g);const[L,...P]=M,C=L||Vi(),N=mu(C),H=J0(g).filter(fe=>fe!==g);if(!H.length)return E(N),Reflect.apply(R,A,[N,...P]);const z=H.map(fe=>fn(fe).timestamp).filter(fe=>!!fe),$=z.length?Math.max(...z):void 0,X=fn(g).start_timestamp,q=Math.min(X?X+l/1e3:1/0,Math.max(X||-1/0,Math.min(N,$||1/0)));return E(q),Reflect.apply(R,A,[q,...P])}});function y(){i&&(clearTimeout(i),i=void 0)}function _(R){y(),i=setTimeout(()=>{!r&&n.size===0&&o&&(s=Tve,g.end(R))},a)}function v(R){i=setTimeout(()=>{!r&&o&&(s=Mve,g.end(R))},c)}function S(R){y(),n.set(R,!0);const A=Vi();v(A+c/1e3)}function w(R){if(n.has(R)&&n.delete(R),n.size===0){const A=Vi();_(A+a/1e3)}}function E(R){r=!0,n.clear(),og(p,m);const A=fn(g),{start_timestamp:M}=A;if(!M)return;(A.data||{})[aC]||g.setAttribute(aC,s),Ae.log(`[Tracing] Idle span "${A.op}" finished`);const P=J0(g).filter(N=>N!==g);let C=0;P.forEach(N=>{N.isRecording()&&(N.setStatus({code:Pr,message:"cancelled"}),N.end(R),Gt&&Ae.log("[Tracing] Cancelling span since span ended early",JSON.stringify(N,void 0,2)));const H=fn(N),{timestamp:z=0,start_timestamp:$=0}=H,X=$<=R,q=(l+a)/1e3,fe=z-$<=q;if(Gt){const k=JSON.stringify(N,void 0,2);X?fe||Ae.log("[Tracing] Discarding span since it finished after idle span final timeout",k):Ae.log("[Tracing] Discarding span since it happened after idle span was finished",k)}(!fe||!X)&&(ave(g,N),C++)}),C>0&&g.setAttribute("sentry.idle_span_discarded_spans",C)}return d.on("spanStart",R=>{if(r||R===g||fn(R).timestamp)return;J0(g).includes(R)&&S(R.spanContext().spanId)}),d.on("spanEnd",R=>{r||w(R.spanContext().spanId)}),d.on("idleSpanEnableAutoFinish",R=>{R===g&&(o=!0,_(),n.size&&v())}),e.disableAutoFinish||_(),setTimeout(()=>{r||(g.setStatus({code:Pr,message:"deadline_exceeded"}),s=Cve,g.end())},l),g}function Rve(t){const e=Xu(t);return og(Yn(),e),Gt&&Ae.log("[Tracing] Started span is an idle span"),e}function uC(t,e,n,r=0){return new Is((i,s)=>{const o=t[r];if(e===null||typeof o!="function")i(e);else{const a=o({...e},n);Gt&&o.id&&a===null&&Ae.log(`Event processor "${o.id}" dropped event`),XS(a)?a.then(l=>uC(t,l,n,r+1).then(i)).then(null,s):uC(t,a,n,r+1).then(i).then(null,s)}})}function Pve(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;Ive(t,e),r&&Ove(t,r),Nve(t,n),Lve(t,i),kve(t,s)}function X3(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:p,transactionName:m,span:g}=e;Tp(t,"extra",n),Tp(t,"tags",r),Tp(t,"user",i),Tp(t,"contexts",s),Tp(t,"sdkProcessingMetadata",a),o&&(t.level=o),m&&(t.transactionName=m),g&&(t.span=g),l.length&&(t.breadcrumbs=[...t.breadcrumbs,...l]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),u.length&&(t.eventProcessors=[...t.eventProcessors,...u]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...p}}function Tp(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}function Ive(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=e,l=Dr(n);l&&Object.keys(l).length&&(t.extra={...l,...t.extra});const c=Dr(r);c&&Object.keys(c).length&&(t.tags={...c,...t.tags});const u=Dr(i);u&&Object.keys(u).length&&(t.user={...u,...t.user});const d=Dr(s);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function Lve(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function kve(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Ove(t,e){t.contexts={trace:ive(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:$u(e),...t.sdkProcessingMetadata};const n=Ei(e),r=fn(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function Nve(t,e){t.fingerprint=t.fingerprint?T6(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}function K6(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,l={...e,event_id:e.event_id||n.event_id||Fn(),timestamp:e.timestamp||zg()},c=n.integrations||t.integrations.map(_=>_.name);Dve(l,t),Bve(l,c),e.type===void 0&&Uve(l,t.stackParser);const u=Vve(r,n.captureContext);n.mechanism&&sg(l,n.mechanism);const d=i?i.getEventProcessors():[],p=Zge().getScopeData();if(s){const _=s.getScopeData();X3(p,_)}if(u){const _=u.getScopeData();X3(p,_)}const m=[...n.attachments||[],...p.attachments];m.length&&(n.attachments=m),Pve(l,p);const g=[...d,...p.eventProcessors];return uC(g,l,n).then(_=>(_&&Fve(_),typeof o=="number"&&o>0?zve(_,o,a):_))}function Dve(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;"environment"in t||(t.environment="environment"in e?n:LP),t.release===void 0&&r!==void 0&&(t.release=r),t.dist===void 0&&i!==void 0&&(t.dist=i),t.message&&(t.message=Cf(t.message,s));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=Cf(o.value,s));const a=t.request;a&&a.url&&(a.url=Cf(a.url,s))}const q3=new WeakMap;function Uve(t,e){const n=Qt._sentryDebugIds;if(!n)return;let r;const i=q3.get(e);i?r=i:(r=new Map,q3.set(e,r));const s=Object.entries(n).reduce((o,[a,l])=>{let c;const u=r.get(a);u?c=u:(c=e(a),r.set(a,c));for(let d=c.length-1;d>=0;d--){const p=c[d];if(p.filename){o[p.filename]=l;break}}return o},{});try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function Fve(t){const e={};try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([r,i])=>{n.push({type:"sourcemap",code_file:r,debug_id:i})})}function Bve(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function zve(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:Lo(i.data,e,n)}}))},...t.user&&{user:Lo(t.user,e,n)},...t.contexts&&{contexts:Lo(t.contexts,e,n)},...t.extra&&{extra:Lo(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Lo(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(i=>({...i,...i.data&&{data:Lo(i.data,e,n)}}))),r}function Vve(t,e){if(!e)return t;const n=t?t.clone():new ec;return n.update(e),n}function Hve(t){if(t)return jve(t)?{captureContext:t}:Gve(t)?{captureContext:t}:t}function jve(t){return t instanceof ec||typeof t=="function"}const Wve=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Gve(t){return Object.keys(t).some(e=>Wve.includes(e))}function OP(t,e){return Yn().captureException(t,Hve(e))}function J6(t,e){return Yn().captureEvent(t,e)}function Z6(t,e){Hs().setContext(t,e)}function $ve(t){Hs().addEventProcessor(t)}function Y3(t){const e=Yt(),n=Hs(),r=Yn(),{release:i,environment:s=LP}=e&&e.getOptions()||{},{userAgent:o}=Qt.navigator||{},a=Hge({release:i,environment:s,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...t}),l=n.getSession();return l&&l.status==="ok"&&Yf(l,{status:"exited"}),Q6(),n.setSession(a),r.setSession(a),a}function Q6(){const t=Hs(),e=Yn(),n=e.getSession()||t.getSession();n&&jge(n),e8(),t.setSession(),e.setSession()}function e8(){const t=Hs(),e=Yn(),n=Yt(),r=e.getSession()||t.getSession();r&&n&&n.captureSession(r)}function K3(t=!1){if(t){Q6();return}e8()}const Xve="7";function qve(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function Yve(t){return`${qve(t)}${t.projectId}/envelope/`}function Kve(t,e){return Zme({sentry_key:t.publicKey,sentry_version:Xve,...e&&{sentry_client:`${e.name}/${e.version}`}})}function Jve(t,e,n){return e||`${Yve(t)}?${Kve(t,n)}`}const J3=[];function Zve(t){const e={};return t.forEach(n=>{const{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function Qve(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...e,...n]:typeof n=="function"?r=T6(n(e)):r=e;const i=Zve(r),s=i.findIndex(o=>o.name==="Debug");if(s>-1){const[o]=i.splice(s,1);i.push(o)}return i}function eye(t,e){const n={};return e.forEach(r=>{r&&t8(t,r,n)}),n}function Z3(t,e){for(const n of e)n&&n.afterAllSetup&&n.afterAllSetup(t)}function t8(t,e,n){if(n[e.name]){Gt&&Ae.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,J3.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),J3.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,t),{id:e.name});t.addEventProcessor(i)}Gt&&Ae.log(`Integration installed: ${e.name}`)}const Q3="Not capturing exception because it's already been captured.";class tye{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Jme(e.dsn):Gt&&Ae.warn("No DSN provided, client will not send events."),this._dsn){const n=Jve(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){const i=Fn();if(k3(e))return Gt&&Ae.log(Q3),i;const s={event_id:i,...n};return this._process(this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r))),s.event_id}captureMessage(e,n,r,i){const s={event_id:Fn(),...r},o=SP(e)?e:String(e),a=wP(e)?this.eventFromMessage(o,n,s):this.eventFromException(e,s);return this._process(a.then(l=>this._captureEvent(l,s,i))),s.event_id}captureEvent(e,n,r){const i=Fn();if(n&&n.originalException&&k3(n.originalException))return Gt&&Ae.log(Q3),i;const s={event_id:i,...n},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,s,a||r)),s.event_id}captureSession(e){typeof e.release!="string"?Gt&&Ae.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Yf(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):Va(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];t8(this,e,this._integrations),n||Z3(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=gve(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=Pge(r,Oge(s));const i=this.sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=mve(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=`${e}:${n}`;Gt&&Ae.log(`Adding outcome: "${i}"`),this._outcomes[i]=(this._outcomes[i]||0)+1}}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(Gt&&Ae.error("Error while sending event:",n),n)):(Gt&&Ae.error("Transport disabled"),Va({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=eye(this,e),Z3(this,e)}_updateSessionFromEvent(e,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const l of s){const c=l.mechanism;if(c&&c.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(Yf(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Is(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,e&&r>=e&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,i=Hs()){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),K6(s,e,n,r,this,i).then(a=>{if(a===null)return a;const l={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&l){const{traceId:u,spanId:d,parentSpanId:p,dsc:m}=l;a.contexts={trace:Dr({trace_id:u,span_id:d,parent_span_id:p}),...a.contexts};const g=m||qS(u,this);a.sdkProcessingMetadata={dynamicSamplingContext:g,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(Gt){const s=i;s.logLevel==="log"?Ae.log(s.message):Ae.warn(s)}})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=r8(e),a=n8(e),l=e.type||"error",c=`before send for type \`${l}\``,u=typeof s>"u"?void 0:sx(s);if(a&&typeof u=="number"&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",e),nx(new Do(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const d=l==="replay_event"?"replay":l,m=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,n,r,m).then(g=>{if(g===null)throw this.recordDroppedEvent("event_processor",d,e),new Do("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return g;const _=rye(i,g,n);return nye(_,c)}).then(g=>{if(g===null)throw this.recordDroppedEvent("before_send",d,e),new Do(`${c} returned \`null\`, will not send event.`,"log");const y=r&&r.getSession();!o&&y&&this._updateSessionFromEvent(y,g);const _=g.transaction_info;if(o&&_&&g.transaction!==e.transaction){const v="custom";g.transaction_info={..._,source:v}}return this.sendEvent(g,n),g}).then(null,g=>{throw g instanceof Do?g:(this.captureException(g,{data:{__sentry__:!0},originalException:g}),new Do(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${g}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}}function nye(t,e){const n=`${e} must return \`null\` or a valid event.`;if(XS(t))return t.then(r=>{if(!qf(r)&&r!==null)throw new Do(n);return r},r=>{throw new Do(`${e} rejected with ${r}`)});if(!qf(t)&&t!==null)throw new Do(n);return t}function rye(t,e,n){const{beforeSend:r,beforeSendTransaction:i,beforeSendSpan:s}=t;if(n8(e)&&r)return r(e,n);if(r8(e)){if(e.spans&&s){const o=[];for(const a of e.spans){const l=s(a);l&&o.push(l)}e.spans=o}if(i)return i(e,n)}return e}function n8(t){return t.type===void 0}function r8(t){return t.type==="transaction"}function iye(t,e){e.debug===!0&&(Gt?Ae.enable():Ru(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Yn().update(e.initialScope);const r=new t(e);return sye(r),r.init(),r}function sye(t){Yn().setClient(t)}const oye=64;function aye(t,e,n=xge(t.bufferSize||oye)){let r={};const i=o=>n.drain(o);function s(o){const a=[];if(N3(o,(d,p)=>{const m=D3(p);if(L6(r,m)){const g=eU(d,p);t.recordDroppedEvent("ratelimit_backoff",m,g)}else a.push(d)}),a.length===0)return Va({});const l=Wu(o[0],a),c=d=>{N3(l,(p,m)=>{const g=eU(p,m);t.recordDroppedEvent(d,D3(m),g)})},u=()=>e({body:Ige(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Gt&&Ae.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=k6(r,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof Do)return Gt&&Ae.error("Skipped sending event because buffer is full."),c("queue_overflow"),Va({});throw d})}return{send:s,flush:i}}function eU(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}function lye(t,e){const n=e&&e.getDsn(),r=e&&e.getOptions().tunnel;return uye(t,n)||cye(t,r)}function cye(t,e){return e?tU(t)===tU(e):!1}function uye(t,e){return e?t.includes(e.host):!1}function tU(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function i8(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:hu})),version:hu}),t._metadata=i}const dye=100;function nc(t,e){const n=Yt(),r=Hs();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=dye}=n.getOptions();if(s<=0)return;const a={timestamp:zg(),...t},l=i?Ru(()=>i(a,e)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,e),r.addBreadcrumb(l,s))}let nU;const fye="FunctionToString",rU=new WeakMap,hye=()=>({name:fye,setupOnce(){nU=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=EP(this),n=rU.has(Yt())&&e!==void 0?e:this;return nU.apply(n,t)}}catch{}},setup(t){rU.set(t,!0)}}),pye=hye,mye=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],gye="InboundFilters",vye=(t={})=>({name:gye,processEvent(e,n,r){const i=r.getOptions(),s=_ye(t,i);return xye(e,s)?null:e}}),yye=vye;function _ye(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:mye],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function xye(t,e){return e.ignoreInternal&&Tye(t)?(Gt&&Ae.warn(`Event dropped due to being internal Sentry Error.
Event: ${bl(t)}`),!0):Sye(t,e.ignoreErrors)?(Gt&&Ae.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${bl(t)}`),!0):Aye(t)?(Gt&&Ae.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${bl(t)}`),!0):wye(t,e.ignoreTransactions)?(Gt&&Ae.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${bl(t)}`),!0):bye(t,e.denyUrls)?(Gt&&Ae.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${bl(t)}.
Url: ${ox(t)}`),!0):Eye(t,e.allowUrls)?!1:(Gt&&Ae.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${bl(t)}.
Url: ${ox(t)}`),!0)}function Sye(t,e){return t.type||!e||!e.length?!1:Mye(t).some(n=>Wl(n,e))}function wye(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?Wl(n,e):!1}function bye(t,e){if(!e||!e.length)return!1;const n=ox(t);return n?Wl(n,e):!1}function Eye(t,e){if(!e||!e.length)return!0;const n=ox(t);return n?Wl(n,e):!0}function Mye(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch{}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),e}function Tye(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function Cye(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function ox(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?Cye(e):null}catch{return Gt&&Ae.error(`Cannot extract url for event ${bl(t)}`),null}}function Aye(t){return t.type||!t.exception||!t.exception.values||t.exception.values.length===0?!1:!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value)}const Rye="Dedupe",Pye=()=>{let t;return{name:Rye,processEvent(e){if(e.type)return e;try{if(Lye(e,t))return Gt&&Ae.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},Iye=Pye;function Lye(t,e){return e?!!(kye(t,e)||Oye(t,e)):!1}function kye(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!o8(t,e)||!s8(t,e))}function Oye(t,e){const n=iU(e),r=iU(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!o8(t,e)||!s8(t,e))}function s8(t,e){let n=R3(t),r=R3(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function o8(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function iU(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Nye(t,e,n,r,i="auto.http.browser"){if(!t.fetchData)return;const s=tc()&&e(t.fetchData.url);if(t.endTimestamp&&s){const g=t.fetchData.__span;if(!g)return;const y=r[g];y&&(Fye(y,t),delete r[g]);return}const o=Yn(),a=Yt(),{method:l,url:c}=t.fetchData,u=Uye(c),d=u?pu(u).host:void 0,p=!!hs(),m=s&&p?Xu({name:`${l} ${c}`,attributes:{url:c,type:"fetch","http.method":l,"http.url":u,"server.address":d,[di]:i,[ag]:"http.client"}}):new Eh;if(t.fetchData.__span=m.spanContext().spanId,r[m.spanContext().spanId]=m,n(t.fetchData.url)&&a){const g=t.args[0];t.args[1]=t.args[1]||{};const y=t.args[1];y.headers=Dye(g,a,o,y,tc()&&p?m:void 0)}return m}function Dye(t,e,n,r,i){const s=Hs(),{traceId:o,spanId:a,sampled:l,dsc:c}={...s.getPropagationContext(),...n.getPropagationContext()},u=i?z6(i):MP(o,a,l),d=P6(c||(i?$u(i):qS(o,e))),p=r.headers||(typeof Request<"u"&&Ba(t,Request)?t.headers:void 0);if(p)if(typeof Headers<"u"&&Ba(p,Headers)){const m=new Headers(p);return m.append("sentry-trace",u),d&&m.append(rC,d),m}else if(Array.isArray(p)){const m=[...p,["sentry-trace",u]];return d&&m.push([rC,d]),m}else{const m="baggage"in p?p.baggage:void 0,g=[];return Array.isArray(m)?g.push(...m):m&&g.push(m),d&&g.push(d),{...p,"sentry-trace":u,baggage:g.length>0?g.join(","):void 0}}else return{"sentry-trace":u,baggage:d}}function Uye(t){try{return new URL(t).href}catch{return}}function Fye(t,e){if(e.response){U6(t,e.response.status);const n=e.response&&e.response.headers&&e.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&t.setAttribute("http.response_content_length",r)}}else e.error&&t.setStatus({code:Pr,message:"internal_error"});t.end()}const Nt=Qt;let dC=0;function a8(){return dC>0}function Bye(){dC++,setTimeout(()=>{dC--})}function Jf(t,e={},n){if(typeof t!="function")return t;try{const i=t.__sentry_wrapped__;if(i)return i;if(EP(t))return t}catch{return t}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(o=>Jf(o,e));return t.apply(this,s)}catch(s){throw Bye(),RP(o=>{o.addEventProcessor(a=>(e.mechanism&&(tC(a,void 0,void 0),sg(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),OP(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}g6(r,t),zs(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}const Di=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function NP(t,e){const n=DP(t,e),r={type:e&&e.name,value:Wye(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function zye(t,e,n,r){const i=Yt(),s=i&&i.getOptions().normalizeDepth,o=Yye(e),a={__serialized__:C6(e,s)};if(o)return{exception:{values:[NP(t,o)]},extra:a};const l={exception:{values:[{type:$S(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Xye(e,{isUnhandledRejection:r})}]},extra:a};if(n){const c=DP(t,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function gE(t,e){return{exception:{values:[NP(t,e)]}}}function DP(t,e){const n=e.stacktrace||e.stack||"",r=Hye(e),i=jye(e);try{return t(n,r,i)}catch{}return[]}const Vye=/Minified React error #\d+;/i;function Hye(t){return t&&Vye.test(t.message)?1:0}function jye(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function Wye(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Gye(t,e,n,r){const i=n&&n.syntheticException||void 0,s=UP(t,e,i,r);return sg(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),Va(s)}function $ye(t,e,n="info",r,i){const s=r&&r.syntheticException||void 0,o=fC(t,e,s,i);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Va(o)}function UP(t,e,n,r,i){let s;if(d6(e)&&e.error)return gE(t,e.error);if(S3(e)||Nme(e)){const o=e;if("stack"in e)s=gE(t,e);else{const a=o.name||(S3(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=fC(t,l,n,r),tC(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return xP(e)?gE(t,e):qf(e)||$S(e)?(s=zye(t,e,n,i),sg(s,{synthetic:!0}),s):(s=fC(t,e,n,r),tC(s,`${e}`,void 0),sg(s,{synthetic:!0}),s)}function fC(t,e,n,r){const i={};if(r&&n){const s=DP(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}if(SP(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function Xye(t,{isUnhandledRejection:e}){const n=Qme(t),r=e?"promise rejection":"exception";return d6(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:$S(t)?`Event \`${qye(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function qye(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function Yye(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}function Kye(t,{metadata:e,tunnel:n,dsn:r}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:Bg(r)}},s=Jye(t);return Wu(i,[s])}function Jye(t){return[{type:"user_report"},t]}class Zye extends tye{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e},r=Nt.SENTRY_SDK_SOURCE||fge();i8(n,"browser",["browser"],r),super(n),n.sendClientReports&&Nt.document&&Nt.document.addEventListener("visibilitychange",()=>{Nt.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return Gye(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return $ye(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){Di&&Ae.warn("SDK not enabled, will not capture user feedback.");return}const n=Kye(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){Di&&Ae.log("No outcomes to send");return}if(!this._dsn){Di&&Ae.log("No dsn provided, will not send outcomes");return}Di&&Ae.log("Sending outcomes:",e);const n=Dge(e,this._options.tunnel&&Bg(this._dsn));this.sendEnvelope(n)}}const ns=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Qye=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",Mh=(t,e,n,r)=>{let i,s;return o=>{e.value>=0&&(o||r)&&(s=e.value-(i||0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=Qye(e.value,n),t(e)))}},Rt=Qt,e0e=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,YS=()=>Rt.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],KS=()=>{const t=YS();return t&&t.activationStart||0},Th=(t,e)=>{const n=YS();let r="navigate";return n&&(Rt.document&&Rt.document.prerendering||KS()>0?r="prerender":Rt.document&&Rt.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:e0e(),navigationType:r}},qu=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},JS=t=>{const e=n=>{(n.type==="pagehide"||Rt.document&&Rt.document.visibilityState==="hidden")&&t(n)};Rt.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},FP=t=>{let e=!1;return n=>{e||(t(n),e=!0)}};let lg=-1;const t0e=()=>{lg=Rt.document.visibilityState==="hidden"&&!Rt.document.prerendering?0:1/0},ax=t=>{Rt.document.visibilityState==="hidden"&&lg>-1&&(lg=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("visibilitychange",ax,!0),removeEventListener("prerenderingchange",ax,!0))},n0e=()=>{addEventListener("visibilitychange",ax,!0),addEventListener("prerenderingchange",ax,!0)},ZS=()=>(Rt.document&&lg<0&&(t0e(),n0e()),{get firstHiddenTime(){return lg}}),Hg=t=>{Rt.document&&Rt.document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},r0e=[1800,3e3],i0e=(t,e={})=>{Hg(()=>{const n=ZS(),r=Th("FCP");let i;const o=qu("paint",a=>{a.forEach(l=>{l.name==="first-contentful-paint"&&(o.disconnect(),l.startTime<n.firstHiddenTime&&(r.value=Math.max(l.startTime-KS(),0),r.entries.push(l),i(!0)))})});o&&(i=Mh(t,r,r0e,e.reportAllChanges))})},s0e=[.1,.25],o0e=(t,e={})=>{i0e(FP(()=>{const n=Th("CLS",0);let r,i=0,s=[];const o=l=>{l.forEach(c=>{if(!c.hadRecentInput){const u=s[0],d=s[s.length-1];i&&u&&d&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c])}}),i>n.value&&(n.value=i,n.entries=s,r())},a=qu("layout-shift",o);a&&(r=Mh(t,n,s0e,e.reportAllChanges),JS(()=>{o(a.takeRecords()),r(!0)}),setTimeout(r,0))}))},a0e=[100,300],l0e=(t,e={})=>{Hg(()=>{const n=ZS(),r=Th("FID");let i;const s=l=>{l.startTime<n.firstHiddenTime&&(r.value=l.processingStart-l.startTime,r.entries.push(l),i(!0))},o=l=>{l.forEach(s)},a=qu("first-input",o);i=Mh(t,r,a0e,e.reportAllChanges),a&&JS(FP(()=>{o(a.takeRecords()),a.disconnect()}))})};let l8=0,vE=1/0,d0=0;const c0e=t=>{t.forEach(e=>{e.interactionId&&(vE=Math.min(vE,e.interactionId),d0=Math.max(d0,e.interactionId),l8=d0?(d0-vE)/7+1:0)})};let hC;const u0e=()=>hC?l8:performance.interactionCount||0,d0e=()=>{"interactionCount"in performance||hC||(hC=qu("event",c0e,{type:"event",buffered:!0,durationThreshold:0}))},f0e=[200,500],h0e=0,c8=()=>u0e()-h0e,sU=10,ga=[],yE={},oU=t=>{const e=ga[ga.length-1],n=yE[t.interactionId];if(n||ga.length<sU||e&&t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{const r={id:t.interactionId,latency:t.duration,entries:[t]};yE[r.id]=r,ga.push(r)}ga.sort((r,i)=>i.latency-r.latency),ga.splice(sU).forEach(r=>{delete yE[r.id]})}},p0e=()=>{const t=Math.min(ga.length-1,Math.floor(c8()/50));return ga[t]},m0e=(t,e={})=>{Hg(()=>{d0e();const n=Th("INP");let r;const i=o=>{o.forEach(l=>{l.interactionId&&oU(l),l.entryType==="first-input"&&!ga.some(u=>u.entries.some(d=>l.duration===d.duration&&l.startTime===d.startTime))&&oU(l)});const a=p0e();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())},s=qu("event",i,{durationThreshold:e.durationThreshold!=null?e.durationThreshold:40});r=Mh(t,n,f0e,e.reportAllChanges),s&&("PerformanceEventTiming"in Rt&&"interactionId"in PerformanceEventTiming.prototype&&s.observe({type:"first-input",buffered:!0}),JS(()=>{i(s.takeRecords()),n.value<0&&c8()>0&&(n.value=0,n.entries=[]),r(!0)}))})},g0e=[2500,4e3],aU={},v0e=(t,e={})=>{Hg(()=>{const n=ZS(),r=Th("LCP");let i;const s=a=>{const l=a[a.length-1];l&&l.startTime<n.firstHiddenTime&&(r.value=Math.max(l.startTime-KS(),0),r.entries=[l],i())},o=qu("largest-contentful-paint",s);if(o){i=Mh(t,r,g0e,e.reportAllChanges);const a=FP(()=>{aU[r.id]||(s(o.takeRecords()),o.disconnect(),aU[r.id]=!0,i(!0))});["keydown","click"].forEach(l=>{Rt.document&&addEventListener(l,()=>setTimeout(a,0),!0)}),JS(a)}})},y0e=[800,1800],pC=t=>{Rt.document&&Rt.document.prerendering?Hg(()=>pC(t)):Rt.document&&Rt.document.readyState!=="complete"?addEventListener("load",()=>pC(t),!0):setTimeout(t,0)},_0e=(t,e={})=>{const n=Th("TTFB"),r=Mh(t,n,y0e,e.reportAllChanges);pC(()=>{const i=YS();if(i){const s=i.responseStart;if(s<=0||s>performance.now())return;n.value=Math.max(s-KS(),0),n.entries=[i],r(!0)}})},im={},lx={};let u8,d8,f8,h8,p8;function m8(t,e=!1){return jg("cls",t,S0e,u8,e)}function g8(t,e=!1){return jg("lcp",t,b0e,f8,e)}function v8(t){return jg("fid",t,w0e,d8)}function x0e(t){return jg("ttfb",t,E0e,h8)}function y8(t){return jg("inp",t,M0e,p8)}function Zf(t,e){return _8(t,e),lx[t]||(T0e(t),lx[t]=!0),x8(t,e)}function Ch(t,e){const n=im[t];if(!(!n||!n.length))for(const r of n)try{r(e)}catch(i){ns&&Ae.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${za(r)}
Error:`,i)}}function S0e(){return o0e(t=>{Ch("cls",{metric:t}),u8=t},{reportAllChanges:!0})}function w0e(){return l0e(t=>{Ch("fid",{metric:t}),d8=t})}function b0e(){return v0e(t=>{Ch("lcp",{metric:t}),f8=t},{reportAllChanges:!0})}function E0e(){return _0e(t=>{Ch("ttfb",{metric:t}),h8=t})}function M0e(){return m0e(t=>{Ch("inp",{metric:t}),p8=t})}function jg(t,e,n,r,i=!1){_8(t,e);let s;return lx[t]||(s=n(),lx[t]=!0),r&&e({metric:r}),x8(t,e,i?s:void 0)}function T0e(t){const e={};t==="event"&&(e.durationThreshold=0),qu(t,n=>{Ch(t,{entries:n})},e)}function _8(t,e){im[t]=im[t]||[],im[t].push(e)}function x8(t,e,n){return()=>{n&&n();const r=im[t];if(!r)return;const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}function C0e(t){return"duration"in t}function _E(t){return typeof t=="number"&&isFinite(t)}function Qf(t,e,n,{...r}){const i=fn(t).start_timestamp;return i&&i>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),X6(t,()=>{const s=Xu({startTime:e,...r});return s&&s.end(n),s})}function BP(){return Rt&&Rt.addEventListener&&Rt.performance}function wr(t){return t/1e3}const A0e=2147483647;let lU=0,Ir={},Ro,sm;function R0e(){const t=BP();if(t&&cs){t.mark&&Rt.performance.mark("sentry-tracing-init");const e=O0e(),n=L0e(),r=k0e(),i=N0e();return()=>{e(),n(),r(),i()}}return()=>{}}function P0e(){Zf("longtask",({entries:t})=>{for(const e of t){if(!hs())return;const n=wr(cs+e.startTime),r=wr(e.duration),i=Xu({name:"Main UI thread blocked",op:"ui.long-task",startTime:n,attributes:{[di]:"auto.ui.browser.metrics"}});i&&i.end(n+r)}})}function I0e(){Zf("event",({entries:t})=>{for(const e of t){if(!hs())return;if(e.name==="click"){const n=wr(cs+e.startTime),r=wr(e.duration),i={name:Ql(e.target),op:`ui.interaction.${e.name}`,startTime:n,attributes:{[di]:"auto.ui.browser.metrics"}},s=p6(e.target);s&&(i.attributes["ui.component_name"]=s);const o=Xu(i);o&&o.end(n+r)}}})}function L0e(){return m8(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ns&&Ae.log("[Measurements] Adding CLS"),Ir.cls={value:t.value,unit:""},sm=e)},!0)}function k0e(){return g8(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ns&&Ae.log("[Measurements] Adding LCP"),Ir.lcp={value:t.value,unit:"millisecond"},Ro=e)},!0)}function O0e(){return v8(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=wr(cs),r=wr(e.startTime);ns&&Ae.log("[Measurements] Adding FID"),Ir.fid={value:t.value,unit:"millisecond"},Ir["mark.fid"]={value:n+r,unit:"second"}})}function N0e(){return x0e(({metric:t})=>{t.entries[t.entries.length-1]&&(ns&&Ae.log("[Measurements] Adding TTFB"),Ir.ttfb={value:t.value,unit:"millisecond"})})}function D0e(t){const e=BP();if(!e||!Rt.performance.getEntries||!cs)return;ns&&Ae.log("[Tracing] Adding & adjusting spans using Performance API");const n=wr(cs),r=e.getEntries(),{op:i,start_timestamp:s}=fn(t);if(r.slice(lU).forEach(o=>{const a=wr(o.startTime),l=wr(o.duration);if(!(i==="navigation"&&s&&n+a<s))switch(o.entryType){case"navigation":{F0e(t,o,n);break}case"mark":case"paint":case"measure":{U0e(t,o,a,l,n);const c=ZS(),u=o.startTime<c.firstHiddenTime;o.name==="first-paint"&&u&&(ns&&Ae.log("[Measurements] Adding FP"),Ir.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&u&&(ns&&Ae.log("[Measurements] Adding FCP"),Ir.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{z0e(t,o,o.name,a,l,n);break}}}),lU=Math.max(r.length-1,0),V0e(t),i==="pageload"){j0e(Ir),["fcp","fp","lcp"].forEach(a=>{const l=Ir[a];if(!l||!s||n>=s)return;const c=l.value,u=n+wr(c),d=Math.abs((u-s)*1e3),p=d-c;ns&&Ae.log(`[Measurements] Normalized ${a} from ${c} to ${d} (${p})`),l.value=d});const o=Ir["mark.fid"];o&&Ir.fid&&(Qf(t,o.value,o.value+wr(Ir.fid.value),{name:"first input delay",op:"ui.action",attributes:{[di]:"auto.ui.browser.metrics"}}),delete Ir["mark.fid"]),"fcp"in Ir||delete Ir.cls,Object.entries(Ir).forEach(([a,l])=>{yve(a,l.value,l.unit)}),H0e(t)}Ro=void 0,sm=void 0,Ir={}}function U0e(t,e,n,r,i){const s=i+n,o=s+r;return Qf(t,s,o,{name:e.name,op:e.entryType,attributes:{[di]:"auto.resource.browser.metrics"}}),s}function F0e(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{f0(t,e,r,n)}),f0(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),f0(t,e,"fetch",n,"cache","domainLookupStart"),f0(t,e,"domainLookup",n,"DNS"),B0e(t,e,n)}function f0(t,e,n,r,i,s){const o=s?e[s]:e[`${n}End`],a=e[`${n}Start`];!a||!o||Qf(t,r+wr(a),r+wr(o),{op:"browser",name:i||n,attributes:{[di]:"auto.ui.browser.metrics"}})}function B0e(t,e,n){e.responseEnd&&(Qf(t,n+wr(e.requestStart),n+wr(e.responseEnd),{op:"browser",name:"request",attributes:{[di]:"auto.ui.browser.metrics"}}),Qf(t,n+wr(e.responseStart),n+wr(e.responseEnd),{op:"browser",name:"response",attributes:{[di]:"auto.ui.browser.metrics"}}))}function z0e(t,e,n,r,i,s){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=pu(n),a={[di]:"auto.resource.browser.metrics"};xE(a,e,"transferSize","http.response_transfer_size"),xE(a,e,"encodedBodySize","http.response_content_length"),xE(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(Rt.location.origin);const l=s+r,c=l+i;Qf(t,l,c,{name:n.replace(Rt.location.origin,""),op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",attributes:a})}function V0e(t){const e=Rt.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),_E(n.rtt)&&(Ir["connection.rtt"]={value:n.rtt,unit:"millisecond"})),_E(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),_E(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function H0e(t){Ro&&(ns&&Ae.log("[Measurements] Adding LCP Data"),Ro.element&&t.setAttribute("lcp.element",Ql(Ro.element)),Ro.id&&t.setAttribute("lcp.id",Ro.id),Ro.url&&t.setAttribute("lcp.url",Ro.url.trim().slice(0,200)),t.setAttribute("lcp.size",Ro.size)),sm&&sm.sources&&(ns&&Ae.log("[Measurements] Adding CLS Data"),sm.sources.forEach((e,n)=>t.setAttribute(`cls.source.${n+1}`,Ql(e.node))))}function xE(t,e,n,r){const i=e[n];i!=null&&i<A0e&&(t[r]=i)}function j0e(t){const e=YS();if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(ns&&Ae.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}const W0e=1e3;let cU,mC,gC;function S8(t){const e="dom";Hu(e,t),ju(e,G0e)}function G0e(){if(!Rt.document)return;const t=ho.bind(null,"dom"),e=uU(t,!0);Rt.document.addEventListener("click",e,!1),Rt.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=Rt[n]&&Rt[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(Nr(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__=l.__sentry_instrumentation_handlers__||{},u=c[s]=c[s]||{refCount:0};if(!u.handler){const d=uU(t);u.handler=d,i.call(this,s,d,a)}u.refCount++}catch{}return i.call(this,s,o,a)}}),Nr(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const l=this,c=l.__sentry_instrumentation_handlers__||{},u=c[s];u&&(u.refCount--,u.refCount<=0&&(i.call(this,s,u.handler,a),u.handler=void 0,delete c[s]),Object.keys(c).length===0&&delete l.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}function $0e(t){if(t.type!==mC)return!1;try{if(!t.target||t.target._sentryId!==gC)return!1}catch{}return!0}function X0e(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function uU(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=q0e(n);if(X0e(n.type,r))return;zs(n,"_sentryCaptured",!0),r&&!r._sentryId&&zs(r,"_sentryId",Fn());const i=n.type==="keypress"?"input":n.type;$0e(n)||(t({event:n,name:i,global:e}),mC=n.type,gC=r?r._sentryId:void 0),clearTimeout(cU),cU=Rt.setTimeout(()=>{gC=void 0,mC=void 0},W0e)}}function q0e(t){try{return t.target}catch{return null}}let h0;function QS(t){const e="history";Hu(e,t),ju(e,Y0e)}function Y0e(){if(!Vge())return;const t=Rt.onpopstate;Rt.onpopstate=function(...n){const r=Rt.location.href,i=h0;if(h0=r,ho("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=h0,o=String(i);h0=o,ho("history",{from:s,to:o})}return n.apply(this,r)}}Nr(Rt.history,"pushState",e),Nr(Rt.history,"replaceState",e)}const Q0={};function w8(t){const e=Q0[t];if(e)return e;let n=Rt[t];if(QT(n))return Q0[t]=n.bind(Rt);const r=Rt.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s&&s[t]&&(n=s[t]),r.head.removeChild(i)}catch(i){ns&&Ae.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n&&(Q0[t]=n.bind(Rt))}function dU(t){Q0[t]=void 0}function Iu(...t){return w8("setTimeout")(...t)}const ru="__sentry_xhr_v3__";function b8(t){const e="xhr";Hu(e,t),ju(e,K0e)}function K0e(){if(!Rt.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;Nr(t,"open",function(e){return function(...n){const r=Vi()*1e3,i=Ia(n[0])?n[0].toUpperCase():void 0,s=J0e(n[1]);if(!i||!s)return e.apply(this,n);this[ru]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[ru];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const l={endTimestamp:Vi()*1e3,startTimestamp:r,xhr:this};ho("xhr",l)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?Nr(this,"onreadystatechange",function(a){return function(...l){return o(),a.apply(this,l)}}):this.addEventListener("readystatechange",o),Nr(this,"setRequestHeader",function(a){return function(...l){const[c,u]=l,d=this[ru];return d&&Ia(c)&&Ia(u)&&(d.request_headers[c.toLowerCase()]=u),a.apply(this,l)}}),e.apply(this,n)}}),Nr(t,"send",function(e){return function(...n){const r=this[ru];if(!r)return e.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={startTimestamp:Vi()*1e3,xhr:this};return ho("xhr",i),e.apply(this,n)}})}function J0e(t){if(Ia(t))return t;try{return t.toString()}catch{}}const SE=[],e_=new Map;function Z0e(){if(BP()&&cs){const e=Q0e();return()=>{e()}}return()=>{}}const fU={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Q0e(){return y8(({metric:t})=>{const e=Yt();if(!e||t.value==null)return;const n=t.entries.find(R=>R.duration===t.value&&fU[R.name]);if(!n)return;const{interactionId:r}=n,i=fU[n.name],s=e.getOptions(),o=wr(cs+n.startTime),a=wr(t.value),l=Yn(),c=hs(),u=c?Ei(c):void 0,p=(r!=null?e_.get(r):void 0)||(u?fn(u).description:l.getScopeData().transactionName),m=l.getUser(),g=e.getIntegrationByName("Replay"),y=g&&g.getReplayId(),_=m!==void 0?m.email||m.id||m.ip_address:void 0;let v;try{v=l.getScopeData().contexts.profile.profile_id}catch{}const S=Ql(n.target),w=Dr({release:s.release,environment:s.environment,transaction:p,[N6]:t.value,[di]:"auto.http.browser.inp",user:_||void 0,profile_id:v||void 0,replay_id:y||void 0}),E=Xu({name:S,op:`ui.interaction.${i}`,attributes:w,startTime:o,experimental:{standalone:!0}});E.addEvent("inp",{[PP]:"millisecond",[IP]:t.value}),E.end(o+a)})}function e_e(t){const e=({entries:n})=>{n.forEach(r=>{if(!C0e(r)||!t.name)return;const i=r.interactionId;if(i!=null&&!e_.has(i)){if(SE.length>10){const s=SE.shift();e_.delete(s)}SE.push(i),e_.set(i,t.name)}})};Zf("event",e),Zf("first-input",e)}function t_e(t,e=w8("fetch")){let n=0,r=0;function i(s){const o=s.body.length;n+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return dU("fetch"),nx("No fetch implementation available");try{return e(t.url,a).then(l=>(n-=o,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return dU("fetch"),n-=o,r--,nx(l)}}return aye(t,i)}const n_e=30,r_e=50;function vC(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?Pu:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const i_e=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,s_e=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o_e=/\((\S*)(?::(\d+))(?::(\d+))\)/,a_e=t=>{const e=i_e.exec(t);if(e){const[,r,i,s]=e;return vC(r,Pu,+i,+s)}const n=s_e.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=o_e.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[i,s]=E8(n[1]||Pu,n[2]);return vC(s,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},l_e=[n_e,a_e],c_e=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,u_e=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d_e=t=>{const e=c_e.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=u_e.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||Pu;return[i,r]=E8(i,r),vC(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},f_e=[r_e,d_e],h_e=[l_e,f_e],p_e=_6(...h_e),E8=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Pu,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},p0=1024,m_e="Breadcrumbs",g_e=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:m_e,setup(n){e.console&&rge(x_e(n)),e.dom&&S8(__e(n,e.dom)),e.xhr&&b8(S_e(n)),e.fetch&&w6(w_e(n)),e.history&&QS(b_e(n)),e.sentry&&n.on("beforeSendEvent",y_e(n))}}},v_e=g_e;function y_e(t){return function(n){Yt()===t&&nc({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:bl(n)},{event:n})}}function __e(t,e){return function(r){if(Yt()!==t)return;let i,s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>p0&&(Di&&Ae.warn(`\`dom.maxStringLength\` cannot exceed ${p0}, but a value of ${a} was configured. Sentry will use ${p0} instead.`),a=p0),typeof o=="string"&&(o=[o]);try{const c=r.event,u=E_e(c)?c.target:c;i=Ql(u,{keyAttrs:o,maxStringLength:a}),s=p6(u)}catch{i="<unknown>"}if(i.length===0)return;const l={category:`ui.${r.name}`,message:i};s&&(l.data={"ui.component_name":s}),nc(l,{event:r.event,name:r.name,global:r.global})}}function x_e(t){return function(n){if(Yt()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:wge(n.level),message:w3(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${w3(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;nc(r,{input:n.args,level:n.level})}}function S_e(t){return function(n){if(Yt()!==t)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[ru];if(!r||!i||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:r,endTimestamp:i};nc({category:"xhr",data:u,type:"http"},d)}}function w_e(t){return function(n){if(Yt()!==t)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const s=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};nc({category:"fetch",data:s,level:"error",type:"http"},o)}else{const s=n.response,o={...n.fetchData,status_code:s&&s.status},a={input:n.args,response:s,startTimestamp:r,endTimestamp:i};nc({category:"fetch",data:o,type:"http"},a)}}}function b_e(t){return function(n){if(Yt()!==t)return;let r=n.from,i=n.to;const s=pu(Nt.location.href);let o=r?pu(r):void 0;const a=pu(i);(!o||!o.path)&&(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),nc({category:"navigation",data:{from:r,to:i}})}}function E_e(t){return!!t&&!!t.target}const M_e=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],T_e="BrowserApiErrors",C_e=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:T_e,setupOnce(){e.setTimeout&&Nr(Nt,"setTimeout",hU),e.setInterval&&Nr(Nt,"setInterval",hU),e.requestAnimationFrame&&Nr(Nt,"requestAnimationFrame",R_e),e.XMLHttpRequest&&"XMLHttpRequest"in Nt&&Nr(XMLHttpRequest.prototype,"send",P_e);const n=e.eventTarget;n&&(Array.isArray(n)?n:M_e).forEach(I_e)}}},A_e=C_e;function hU(t){return function(...e){const n=e[0];return e[0]=Jf(n,{mechanism:{data:{function:za(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function R_e(t){return function(e){return t.apply(this,[Jf(e,{mechanism:{data:{function:"requestAnimationFrame",handler:za(t)},handled:!1,type:"instrument"}})])}}function P_e(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&Nr(n,i,function(s){const o={mechanism:{data:{function:i,handler:za(s)},handled:!1,type:"instrument"}},a=EP(s);return a&&(o.mechanism.data.handler=za(a)),Jf(s,o)})}),t.apply(this,e)}}function I_e(t){const e=Nt,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(Nr(n,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=Jf(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:za(s),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Jf(s,{mechanism:{data:{function:"addEventListener",handler:za(s),target:t},handled:!1,type:"instrument"}}),o])}}),Nr(n,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const l=a&&a.__sentry_wrapped__;l&&r.call(this,i,l,o)}catch{}return r.call(this,i,a,o)}}))}const L_e="GlobalHandlers",k_e=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:L_e,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(N_e(n),pU("onerror")),e.onunhandledrejection&&(D_e(n),pU("onunhandledrejection"))}}},O_e=k_e;function N_e(t){b6(e=>{const{stackParser:n,attachStacktrace:r}=M8();if(Yt()!==t||a8())return;const{msg:i,url:s,line:o,column:a,error:l}=e,c=B_e(UP(n,l||i,void 0,r,!1),s,o,a);c.level="error",J6(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function D_e(t){E6(e=>{const{stackParser:n,attachStacktrace:r}=M8();if(Yt()!==t||a8())return;const i=U_e(e),s=wP(i)?F_e(i):UP(n,i,void 0,r,!0);s.level="error",J6(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function U_e(t){if(wP(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function F_e(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function B_e(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Ia(e)&&e.length>0?e:h6();return l.length===0&&l.push({colno:c,filename:d,function:Pu,in_app:!0,lineno:u}),t}function pU(t){Di&&Ae.log(`Global Handler attached: ${t}`)}function M8(){const t=Yt();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const z_e=()=>({name:"HttpContext",preprocessEvent(t){if(!Nt.navigator&&!Nt.location&&!Nt.document)return;const e=t.request&&t.request.url||Nt.location&&Nt.location.href,{referrer:n}=Nt.document||{},{userAgent:r}=Nt.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),V_e="cause",H_e=5,j_e="LinkedErrors",W_e=(t={})=>{const e=t.limit||H_e,n=t.key||V_e;return{name:j_e,preprocessEvent(r,i,s){const o=s.getOptions();zme(NP,o.stackParser,o.maxValueLength,n,e,r,i)}}},G_e=W_e;function $_e(t){return[yye(),pye(),A_e(),v_e(),O_e(),G_e(),Iye(),z_e()]}function X_e(t={}){return{...{defaultIntegrations:$_e(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:Nt.SENTRY_RELEASE&&Nt.SENTRY_RELEASE.id?Nt.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...t}}function q_e(){const t=Nt,e=t.chrome?"chrome":"browser",n=t[e],r=n&&n.runtime&&n.runtime.id,i=Nt.location&&Nt.location.href||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:"],o=!!r&&Nt===Nt.top&&s.some(a=>i.startsWith(`${a}//`));return!!r&&!o}function Y_e(t={}){const e=X_e(t);if(q_e()){Ru(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}Di&&(x6()||Ae.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...e,stackParser:tge(e.stackParser||p_e),integrations:Qve(e),transport:e.transport||t_e},r=iye(Zye,n);return e.autoSessionTracking&&K_e(),r}function K_e(){if(typeof Nt.document>"u"){Di&&Ae.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}Y3({ignoreDuration:!0}),K3(),QS(({from:t,to:e})=>{t!==void 0&&t!==e&&(Y3({ignoreDuration:!0}),K3())})}const Tn=Qt,zP="sentryReplaySession",J_e="replay_event",VP="Unable to send Replay",Z_e=3e5,Q_e=9e5,exe=5e3,txe=5500,nxe=6e4,rxe=5e3,ixe=3,mU=15e4,m0=5e3,sxe=3e3,oxe=300,HP=2e7,axe=4999,lxe=15e3,gU=36e5;function cxe(t,e){return t??e()}function cx(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}var Sr;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(Sr||(Sr={}));function uxe(t){return t.nodeType===t.ELEMENT_NODE}function om(t){const e=cx([t,"optionalAccess",n=>n.host]);return cx([e,"optionalAccess",n=>n.shadowRoot])===t}function am(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function dxe(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function fxe(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}function ux(t){try{const e=t.rules||t.cssRules;return e?dxe(Array.from(e,T8).join("")):null}catch{return null}}function T8(t){let e;if(pxe(t))try{e=ux(t.styleSheet)||fxe(t)}catch{}else if(mxe(t)&&t.selectorText.includes(":"))return hxe(t.cssText);return e||t.cssText}function hxe(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function pxe(t){return"styleSheet"in t}function mxe(t){return"selectorText"in t}class C8{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const n=cx([this,"access",r=>r.getMeta,"call",r=>r(e),"optionalAccess",r=>r.id]);return cxe(n,()=>-1)}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(n,i)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function gxe(){return new C8}function ew({maskInputOptions:t,tagName:e,type:n}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||n&&t[n]||n==="password"||e==="INPUT"&&!n&&t.text)}function cg({isMasked:t,element:e,value:n,maskInputFn:r}){let i=n||"";return t?(r&&(i=r(i,e)),"*".repeat(i.length)):i}function eh(t){return t.toLowerCase()}function yC(t){return t.toUpperCase()}const vU="__rrweb_original__";function vxe(t){const e=t.getContext("2d");if(!e)return!0;const n=50;for(let r=0;r<t.width;r+=n)for(let i=0;i<t.height;i+=n){const s=e.getImageData,o=vU in s?s[vU]:s;if(new Uint32Array(o.call(e,r,i,Math.min(n,t.width-r),Math.min(n,t.height-i)).data.buffer).some(l=>l!==0))return!1}return!0}function jP(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?eh(e):null}function dx(t,e,n){return e==="INPUT"&&(n==="radio"||n==="checkbox")?t.getAttribute("value")||"":t.value}let yxe=1;const _xe=new RegExp("[^a-z0-9-_:]"),ug=-2;function WP(){return yxe++}function xxe(t){if(t instanceof HTMLFormElement)return"form";const e=eh(t.tagName);return _xe.test(e)?"div":e}function Sxe(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let Bd,yU;const wxe=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,bxe=/^(?:[a-z+]+:)?\/\//i,Exe=/^www\..*/i,Mxe=/^(data:)([^,]*),(.*)/i;function fx(t,e){return(t||"").replace(wxe,(n,r,i,s,o,a)=>{const l=i||o||a,c=r||s||"";if(!l)return n;if(bxe.test(l)||Exe.test(l))return`url(${c}${l}${c})`;if(Mxe.test(l))return`url(${c}${l}${c})`;if(l[0]==="/")return`url(${c}${Sxe(e)+l}${c})`;const u=e.split("/"),d=l.split("/");u.pop();for(const p of d)p!=="."&&(p===".."?u.pop():u.push(p));return`url(${c}${u.join("/")}${c})`})}const Txe=/^[^ \t\n\r\u000c]+/,Cxe=/^[, \t\n\r\u000c]+/;function Axe(t,e){if(e.trim()==="")return e;let n=0;function r(s){let o;const a=s.exec(e.substring(n));return a?(o=a[0],n+=o.length,o):""}const i=[];for(;r(Cxe),!(n>=e.length);){let s=r(Txe);if(s.slice(-1)===",")s=pf(t,s.substring(0,s.length-1)),i.push(s);else{let o="";s=pf(t,s);let a=!1;for(;;){const l=e.charAt(n);if(l===""){i.push((s+o).trim());break}else if(a)l===")"&&(a=!1);else if(l===","){n+=1,i.push((s+o).trim());break}else l==="("&&(a=!0);o+=l,n+=1}}}return i.join(", ")}function pf(t,e){if(!e||e.trim()==="")return e;const n=t.createElement("a");return n.href=e,n.href}function Rxe(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function GP(){const t=document.createElement("a");return t.href="",t.href}function A8(t,e,n,r,i,s){return r&&(n==="src"||n==="href"&&!(e==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(e==="table"||e==="td"||e==="th")?pf(t,r):n==="srcset"?Axe(t,r):n==="style"?fx(r,GP()):e==="object"&&n==="data"?pf(t,r):typeof s=="function"?s(n,r,i):r)}function R8(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function Pxe(t,e,n,r){try{if(r&&t.matches(r))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let i=t.classList.length;i--;){const s=t.classList[i];if(e.test(s))return!0}if(n)return t.matches(n)}catch{}return!1}function Ixe(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function iu(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:iu(t.parentNode,e,n,r+1)}function mf(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(Ixe(r,t))return!0}return!!(e&&r.matches(e))}catch{return!1}}}function th(t,e,n,r,i,s){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const c=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(c))return!0}let a=-1,l=-1;if(s){if(l=iu(o,mf(r,i)),l<0)return!0;a=iu(o,mf(e,n),l>=0?l:1/0)}else{if(a=iu(o,mf(e,n)),a<0)return!1;l=iu(o,mf(r,i),a>=0?a:1/0)}return a>=0?l>=0?a<=l:!0:l>=0?!1:!!s}catch{}return!!s}function Lxe(t,e,n){const r=t.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=setTimeout(()=>{i||(e(),i=!0)},n);t.addEventListener("load",()=>{clearTimeout(a),i=!0,e()});return}const o="about:blank";if(r.location.href!==o||t.src===o||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function kxe(t,e,n){let r=!1,i;try{i=t.sheet}catch{return}if(i)return;const s=setTimeout(()=>{r||(e(),r=!0)},n);t.addEventListener("load",()=>{clearTimeout(s),r=!0,e()})}function Oxe(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskAttributeFn:l,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:g={},maskTextFn:y,maskInputFn:_,dataURLOptions:v={},inlineImages:S,recordCanvas:w,keepIframeSrcFn:E,newlyAddedElement:R=!1}=e,A=Nxe(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:Sr.Document,childNodes:[],compatMode:t.compatMode}:{type:Sr.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:Sr.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:A};case t.ELEMENT_NODE:return Uxe(t,{doc:n,blockClass:i,blockSelector:s,unblockSelector:o,inlineStylesheet:m,maskAttributeFn:l,maskInputOptions:g,maskInputFn:_,dataURLOptions:v,inlineImages:S,recordCanvas:w,keepIframeSrcFn:E,newlyAddedElement:R,rootId:A,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case t.TEXT_NODE:return Dxe(t,{maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:y,maskInputOptions:g,maskInputFn:_,rootId:A});case t.CDATA_SECTION_NODE:return{type:Sr.CDATA,textContent:"",rootId:A};case t.COMMENT_NODE:return{type:Sr.Comment,textContent:t.textContent||"",rootId:A};default:return!1}}function Nxe(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return n===1?void 0:n}function Dxe(t,e){const{maskAllText:n,maskTextClass:r,unmaskTextClass:i,maskTextSelector:s,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:l,maskInputFn:c,rootId:u}=e,d=t.parentNode&&t.parentNode.tagName;let p=t.textContent;const m=d==="STYLE"?!0:void 0,g=d==="SCRIPT"?!0:void 0,y=d==="TEXTAREA"?!0:void 0;if(m&&p){try{t.nextSibling||t.previousSibling||cx([t,"access",v=>v.parentNode,"access",v=>v.sheet,"optionalAccess",v=>v.cssRules])&&(p=ux(t.parentNode.sheet))}catch(v){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${v}`,t)}p=fx(p,GP())}g&&(p="SCRIPT_PLACEHOLDER");const _=th(t,r,s,i,o,n);if(!m&&!g&&!y&&p&&_&&(p=a?a(p,t.parentElement):p.replace(/[\S]/g,"*")),y&&p&&(l.textarea||_)&&(p=c?c(p,t.parentNode):p.replace(/[\S]/g,"*")),d==="OPTION"&&p){const v=ew({type:null,tagName:d,maskInputOptions:l});p=cg({isMasked:th(t,r,s,i,o,v),element:t,value:p,maskInputFn:c})}return{type:Sr.Text,textContent:p||"",isStyle:m,rootId:u}}function Uxe(t,e){const{doc:n,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:l,maskInputFn:c,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:g=!1,rootId:y,maskAllText:_,maskTextClass:v,unmaskTextClass:S,maskTextSelector:w,unmaskTextSelector:E}=e,R=Pxe(t,r,i,s),A=xxe(t);let M={};const L=t.attributes.length;for(let C=0;C<L;C++){const N=t.attributes[C];N.name&&!R8(A,N.name,N.value)&&(M[N.name]=A8(n,A,eh(N.name),N.value,t,l))}if(A==="link"&&o){const C=Array.from(n.styleSheets).find(H=>H.href===t.href);let N=null;C&&(N=ux(C)),N&&(delete M.rel,delete M.href,M._cssText=fx(N,C.href))}if(A==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const C=ux(t.sheet);C&&(M._cssText=fx(C,GP()))}if(A==="input"||A==="textarea"||A==="select"||A==="option"){const C=t,N=jP(C),H=dx(C,yC(A),N),z=C.checked;if(N!=="submit"&&N!=="button"&&H){const $=th(C,v,w,S,E,ew({type:N,tagName:yC(A),maskInputOptions:a}));M.value=cg({isMasked:$,element:C,value:H,maskInputFn:c})}z&&(M.checked=z)}if(A==="option"&&(t.selected&&!a.select?M.selected=!0:delete M.selected),A==="canvas"&&p){if(t.__context==="2d")vxe(t)||(M.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){const C=t.toDataURL(u.type,u.quality),N=document.createElement("canvas");N.width=t.width,N.height=t.height;const H=N.toDataURL(u.type,u.quality);C!==H&&(M.rr_dataURL=C)}}if(A==="img"&&d){Bd||(Bd=n.createElement("canvas"),yU=Bd.getContext("2d"));const C=t,N=C.crossOrigin;C.crossOrigin="anonymous";const H=()=>{C.removeEventListener("load",H);try{Bd.width=C.naturalWidth,Bd.height=C.naturalHeight,yU.drawImage(C,0,0),M.rr_dataURL=Bd.toDataURL(u.type,u.quality)}catch(z){console.warn(`Cannot inline img src=${C.currentSrc}! Error: ${z}`)}N?M.crossOrigin=N:C.removeAttribute("crossorigin")};C.complete&&C.naturalWidth!==0?H():C.addEventListener("load",H)}if((A==="audio"||A==="video")&&(M.rr_mediaState=t.paused?"paused":"played",M.rr_mediaCurrentTime=t.currentTime),g||(t.scrollLeft&&(M.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(M.rr_scrollTop=t.scrollTop)),R){const{width:C,height:N}=t.getBoundingClientRect();M={class:M.class,rr_width:`${C}px`,rr_height:`${N}px`}}A==="iframe"&&!m(M.src)&&(t.contentDocument||(M.rr_src=M.src),delete M.src);let P;try{customElements.get(A)&&(P=!0)}catch{}return{type:Sr.Element,tagName:A,attributes:M,childNodes:[],isSVG:Rxe(t)||void 0,needBlock:R,rootId:y,isCustom:P}}function bn(t){return t==null?"":t.toLowerCase()}function Fxe(t,e){if(e.comment&&t.type===Sr.Comment)return!0;if(t.type===Sr.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(bn(t.attributes.name).match(/^msapplication-tile(image|color)$/)||bn(t.attributes.name)==="application-name"||bn(t.attributes.rel)==="icon"||bn(t.attributes.rel)==="apple-touch-icon"||bn(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&bn(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(bn(t.attributes.property).match(/^(og|twitter|fb):/)||bn(t.attributes.name).match(/^(og|twitter):/)||bn(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(bn(t.attributes.name)==="robots"||bn(t.attributes.name)==="googlebot"||bn(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(bn(t.attributes.name)==="author"||bn(t.attributes.name)==="generator"||bn(t.attributes.name)==="framework"||bn(t.attributes.name)==="publisher"||bn(t.attributes.name)==="progid"||bn(t.attributes.property).match(/^article:/)||bn(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(bn(t.attributes.name)==="google-site-verification"||bn(t.attributes.name)==="yandex-verification"||bn(t.attributes.name)==="csrf-token"||bn(t.attributes.name)==="p:domain_verify"||bn(t.attributes.name)==="verify-v1"||bn(t.attributes.name)==="verification"||bn(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function gf(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:m=!0,maskInputOptions:g={},maskAttributeFn:y,maskTextFn:_,maskInputFn:v,slimDOMOptions:S,dataURLOptions:w={},inlineImages:E=!1,recordCanvas:R=!1,onSerialize:A,onIframeLoad:M,iframeLoadTimeout:L=5e3,onStylesheetLoad:P,stylesheetLoadTimeout:C=5e3,keepIframeSrcFn:N=()=>!1,newlyAddedElement:H=!1}=e;let{preserveWhiteSpace:z=!0}=e;const $=Oxe(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:_,maskInputFn:v,dataURLOptions:w,inlineImages:E,recordCanvas:R,keepIframeSrcFn:N,newlyAddedElement:H});if(!$)return console.warn(t,"not serialized"),null;let X;r.hasNode(t)?X=r.getId(t):Fxe($,S)||!z&&$.type===Sr.Text&&!$.isStyle&&!$.textContent.replace(/^\s+|\s+$/gm,"").length?X=ug:X=WP();const q=Object.assign($,{id:X});if(r.add(t,q),X===ug)return null;A&&A(t);let fe=!p;if(q.type===Sr.Element){fe=fe&&!q.needBlock,delete q.needBlock;const k=t.shadowRoot;k&&am(k)&&(q.isShadowHost=!0)}if((q.type===Sr.Document||q.type===Sr.Element)&&fe){S.headWhitespace&&q.type===Sr.Element&&q.tagName==="head"&&(z=!1);const k={doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:_,maskInputFn:v,slimDOMOptions:S,dataURLOptions:w,inlineImages:E,recordCanvas:R,preserveWhiteSpace:z,onSerialize:A,onIframeLoad:M,iframeLoadTimeout:L,onStylesheetLoad:P,stylesheetLoadTimeout:C,keepIframeSrcFn:N};for(const W of Array.from(t.childNodes)){const G=gf(W,k);G&&q.childNodes.push(G)}if(uxe(t)&&t.shadowRoot)for(const W of Array.from(t.shadowRoot.childNodes)){const G=gf(W,k);G&&(am(t.shadowRoot)&&(G.isShadow=!0),q.childNodes.push(G))}}return t.parentNode&&om(t.parentNode)&&am(t.parentNode)&&(q.isShadow=!0),q.type===Sr.Element&&q.tagName==="iframe"&&Lxe(t,()=>{const k=t.contentDocument;if(k&&M){const W=gf(k,{doc:k,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:_,maskInputFn:v,slimDOMOptions:S,dataURLOptions:w,inlineImages:E,recordCanvas:R,preserveWhiteSpace:z,onSerialize:A,onIframeLoad:M,iframeLoadTimeout:L,onStylesheetLoad:P,stylesheetLoadTimeout:C,keepIframeSrcFn:N});W&&M(t,W)}},L),q.type===Sr.Element&&q.tagName==="link"&&q.attributes.rel==="stylesheet"&&kxe(t,()=>{if(P){const k=gf(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:m,maskInputOptions:g,maskAttributeFn:y,maskTextFn:_,maskInputFn:v,slimDOMOptions:S,dataURLOptions:w,inlineImages:E,recordCanvas:R,preserveWhiteSpace:z,onSerialize:A,onIframeLoad:M,iframeLoadTimeout:L,onStylesheetLoad:P,stylesheetLoadTimeout:C,keepIframeSrcFn:N});k&&P(t,k)}},C),q}function Bxe(t,e){const{mirror:n=new C8,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:l=null,maskTextSelector:c=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:m=!1,maskAllInputs:g=!1,maskAttributeFn:y,maskTextFn:_,maskInputFn:v,slimDOM:S=!1,dataURLOptions:w,preserveWhiteSpace:E,onSerialize:R,onIframeLoad:A,iframeLoadTimeout:M,onStylesheetLoad:L,stylesheetLoadTimeout:P,keepIframeSrcFn:C=()=>!1}=e||{};return gf(t,{doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:o,maskTextClass:a,unmaskTextClass:l,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:g===!1?{}:g,maskAttributeFn:y,maskTextFn:_,maskInputFn:v,slimDOMOptions:S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:S==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:S===!1?{}:S,dataURLOptions:w,inlineImages:p,recordCanvas:m,preserveWhiteSpace:E,onSerialize:R,onIframeLoad:A,iframeLoadTimeout:M,onStylesheetLoad:L,stylesheetLoadTimeout:P,keepIframeSrcFn:C,newlyAddedElement:!1})}function El(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}function xi(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const jd=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let _U={map:{},getId(){return console.error(jd),-1},getNode(){return console.error(jd),null},removeNodeFromMap(){console.error(jd)},has(){return console.error(jd),!1},reset(){console.error(jd)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(_U=new Proxy(_U,{get(t,e,n){return e==="map"&&console.error(jd),Reflect.get(t,e,n)}}));function dg(t,e,n={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&n.leading===!1&&(i=o);const a=e-(o-i),l=this;a<=0||a>e?(r&&($xe(r),r=null),i=o,t.apply(l,s)):!r&&n.trailing!==!1&&(r=tw(()=>{i=n.leading===!1?0:Date.now(),r=null,t.apply(l,s)},a))}}function P8(t,e,n,r,i=window){const s=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,r?n:{set(o){tw(()=>{n.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>P8(t,e,s||{},!0)}function $P(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}let hx=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(hx=()=>new Date().getTime());function I8(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:El([e,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||El([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||El([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:El([e,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||El([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||El([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function L8(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function k8(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function O8(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}function oo(t,e,n,r,i){if(!t)return!1;const s=O8(t);if(!s)return!1;const o=mf(e,n);if(!i){const c=r&&s.matches(r);return o(s)&&!c}const a=iu(s,o);let l=-1;return a<0?!1:(r&&(l=iu(s,mf(null,r))),a>-1&&l<0?!0:a<l)}function zxe(t,e){return e.getId(t)!==-1}function wE(t,e){return e.getId(t)===ug}function N8(t,e){if(om(t))return!1;const n=e.getId(t);return e.has(n)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?N8(t.parentNode,e):!0:!0}function _C(t){return!!t.changedTouches}function Vxe(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let n=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function D8(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function U8(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function xC(t){return!!El([t,"optionalAccess",e=>e.shadowRoot])}class Hxe{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return zge(this.styleIDMap.get(e),()=>-1)}has(e){return this.styleIDMap.has(e)}add(e,n){if(this.has(e))return this.getId(e);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function F8(t){let e=null;return El([t,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function jxe(t){let e=t,n;for(;n=F8(e);)e=n;return e}function Wxe(t){const e=t.ownerDocument;if(!e)return!1;const n=jxe(t);return e.contains(n)}function B8(t){const e=t.ownerDocument;return e?e.contains(t)||Wxe(t):!1}const xU={};function XP(t){const e=xU[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i);const s=i.contentWindow;s&&s[t]&&(r=s[t]),n.head.removeChild(i)}catch{}return xU[t]=r.bind(window)}function Gxe(...t){return XP("requestAnimationFrame")(...t)}function tw(...t){return XP("setTimeout")(...t)}function $xe(...t){return XP("clearTimeout")(...t)}var Ht=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Ht||{}),jt=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(jt||{}),vi=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(vi||{}),fa=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(fa||{});function Xxe(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}function SU(t){return"__ln"in t}class qxe{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<e;r++)n=Xxe([n,"optionalAccess",i=>i.next])||null;return n}addNode(e){const n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&SU(e.previousSibling)){const r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&SU(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;n.previous=r,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){const n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const wU=(t,e)=>`${t}@${e}`;class Yxe{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],n=new Set,r=new qxe,i=l=>{let c=l,u=ug;for(;u===ug;)c=c&&c.nextSibling,u=c&&this.mirror.getId(c);return u},s=l=>{if(!l.parentNode||!B8(l))return;const c=om(l.parentNode)?this.mirror.getId(F8(l)):this.mirror.getId(l.parentNode),u=i(l);if(c===-1||u===-1)return r.addNode(l);const d=gf(l,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:p=>{D8(p,this.mirror)&&this.iframeManager.addIframe(p),U8(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),xC(l)&&this.shadowDomManager.addShadowRoot(l.shadowRoot,this.doc)},onIframeLoad:(p,m)=>{this.iframeManager.attachIframe(p,m),this.shadowDomManager.observeAttachShadow(p)},onStylesheetLoad:(p,m)=>{this.stylesheetManager.attachLinkElement(p,m)}});d&&(e.push({parentId:c,nextId:u,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const l of this.movedSet)bU(this.removes,l,this.mirror)&&!this.movedSet.has(l.parentNode)||s(l);for(const l of this.addedSet)!EU(this.droppedSet,l)&&!bU(this.removes,l,this.mirror)||EU(this.movedSet,l)?s(l):this.droppedSet.add(l);let o=null;for(;r.length;){let l=null;if(o){const c=this.mirror.getId(o.value.parentNode),u=i(o.value);c!==-1&&u!==-1&&(l=o)}if(!l){let c=r.tail;for(;c;){const u=c;if(c=c.previous,u){const d=this.mirror.getId(u.value.parentNode);if(i(u.value)===-1)continue;if(d!==-1){l=u;break}else{const m=u.value;if(m.parentNode&&m.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const g=m.parentNode.host;if(this.mirror.getId(g)!==-1){l=u;break}}}}}}if(!l){for(;r.head;)r.removeNode(r.head.value);break}o=l.previous,r.removeNode(l.value),s(l.value)}const a={texts:this.texts.map(l=>({id:this.mirror.getId(l.node),value:l.value})).filter(l=>!n.has(l.id)).filter(l=>this.mirror.has(l.id)),attributes:this.attributes.map(l=>{const{attributes:c}=l;if(typeof c.style=="string"){const u=JSON.stringify(l.styleDiff),d=JSON.stringify(l._unchangedStyles);u.length<c.style.length&&(u+d).split("var(").length===c.style.split("var(").length&&(c.style=l.styleDiff)}return{id:this.mirror.getId(l.node),attributes:c}}).filter(l=>!n.has(l.id)).filter(l=>this.mirror.has(l.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!wE(e.target,this.mirror))switch(e.type){case"characterData":{const n=e.target.textContent;!oo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==e.oldValue&&this.texts.push({value:th(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,O8(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,i=e.target.getAttribute(r);if(r==="value"){const o=jP(n),a=n.tagName;i=dx(n,a,o);const l=ew({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),c=th(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l);i=cg({isMasked:c,element:n,value:i,maskInputFn:this.maskInputFn})}if(oo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;let s=this.attributeMap.get(e.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(i))if(!n.contentDocument)r="rr_src";else return;if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),r==="type"&&n.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!R8(n.tagName,r)&&(s.attributes[r]=A8(this.doc,eh(n.tagName),eh(r),i,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const a of Array.from(n.style)){const l=n.style.getPropertyValue(a),c=n.style.getPropertyPriority(a);l!==o.style.getPropertyValue(a)||c!==o.style.getPropertyPriority(a)?c===""?s.styleDiff[a]=l:s.styleDiff[a]=[l,c]:s._unchangedStyles[a]=[l,c]}for(const a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(s.styleDiff[a]=!1)}break}case"childList":{if(oo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(n=>this.genAdds(n,e.target)),e.removedNodes.forEach(n=>{const r=this.mirror.getId(n),i=om(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);oo(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||wE(n,this.mirror)||!zxe(n,this.mirror)||(this.addedSet.has(n)?(SC(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(e.target)&&r===-1||N8(e.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[wU(r,i)]?SC(this.movedSet,n):this.removes.push({parentId:i,id:r,isShadow:om(e.target)&&am(e.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(wE(e,this.mirror))return;this.movedSet.add(e);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[wU(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);oo(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(r=>this.genAdds(r)),xC(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=e[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function SC(t,e){t.delete(e),e.childNodes.forEach(n=>SC(t,n))}function bU(t,e,n){return t.length===0?!1:z8(t,e,n)}function z8(t,e,n){const{parentNode:r}=e;if(!r)return!1;const i=n.getId(r);return t.some(s=>s.id===i)?!0:z8(t,r,n)}function EU(t,e){return t.size===0?!1:V8(t,e)}function V8(t,e){const{parentNode:n}=e;return n?t.has(n)?!0:V8(t,n):!1}let lm;function Kxe(t){lm=t}function Jxe(){lm=void 0}const Zt=t=>lm?(...n)=>{try{return t(...n)}catch(r){if(lm&&lm(r)===!0)return()=>{};throw r}}:t;function ko(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}const vf=[];function Wg(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function H8(t,e){const n=new Yxe;vf.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const i=ko([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);i&&window[i]&&(r=window[i]);const s=new r(Zt(o=>{t.onMutation&&t.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Zxe({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const l=dg(Zt(d=>{const p=Date.now()-a;t(o.map(m=>(m.timeOffset-=p,m)),d),o=[],a=null}),s),c=Zt(dg(Zt(d=>{const p=Wg(d),{clientX:m,clientY:g}=_C(d)?d.changedTouches[0]:d;a||(a=hx()),o.push({x:m,y:g,id:r.getId(p),timeOffset:hx()-a}),l(typeof DragEvent<"u"&&d instanceof DragEvent?jt.Drag:d instanceof MouseEvent?jt.MouseMove:jt.TouchMove)}),i,{trailing:!1})),u=[xi("mousemove",c,n),xi("touchmove",c,n),xi("drag",c,n)];return Zt(()=>{u.forEach(d=>d())})}function Qxe({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,l=[];let c=null;const u=d=>p=>{const m=Wg(p);if(oo(m,r,i,s,!0))return;let g=null,y=d;if("pointerType"in p){switch(p.pointerType){case"mouse":g=fa.Mouse;break;case"touch":g=fa.Touch;break;case"pen":g=fa.Pen;break}g===fa.Touch?vi[d]===vi.MouseDown?y="TouchStart":vi[d]===vi.MouseUp&&(y="TouchEnd"):fa.Pen}else _C(p)&&(g=fa.Touch);g!==null?(c=g,(y.startsWith("Touch")&&g===fa.Touch||y.startsWith("Mouse")&&g===fa.Mouse)&&(g=null)):vi[d]===vi.Click&&(g=c,c=null);const _=_C(p)?p.changedTouches[0]:p;if(!_)return;const v=n.getId(m),{clientX:S,clientY:w}=_;Zt(t)({type:vi[y],id:v,x:S,y:w,...g!==null&&{pointerType:g}})};return Object.keys(vi).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let p=eh(d);const m=u(d);if(window.PointerEvent)switch(vi[d]){case vi.MouseDown:case vi.MouseUp:p=p.replace("mouse","pointer");break;case vi.TouchStart:case vi.TouchEnd:return}l.push(xi(p,m,e))}),Zt(()=>{l.forEach(d=>d())})}function j8({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){const a=Zt(dg(Zt(l=>{const c=Wg(l);if(!c||oo(c,r,i,s,!0))return;const u=n.getId(c);if(c===e&&e.defaultView){const d=I8(e.defaultView);t({id:u,x:d.left,y:d.top})}else t({id:u,x:c.scrollLeft,y:c.scrollTop})}),o.scroll||100));return xi("scroll",a,e)}function eSe({viewportResizeCb:t},{win:e}){let n=-1,r=-1;const i=Zt(dg(Zt(()=>{const s=L8(),o=k8();(n!==s||r!==o)&&(t({width:Number(o),height:Number(s)}),n=s,r=o)}),200));return xi("resize",i,e)}const tSe=["INPUT","TEXTAREA","SELECT"],MU=new WeakMap;function nSe({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputOptions:l,maskInputFn:c,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:y}){function _(M){let L=Wg(M);const P=M.isTrusted,C=L&&yC(L.tagName);if(C==="OPTION"&&(L=L.parentElement),!L||!C||tSe.indexOf(C)<0||oo(L,r,i,s,!0))return;const N=L;if(N.classList.contains(o)||a&&N.matches(a))return;const H=jP(L);let z=dx(N,C,H),$=!1;const X=ew({maskInputOptions:l,tagName:C,type:H}),q=th(L,p,g,m,y,X);(H==="radio"||H==="checkbox")&&($=L.checked),z=cg({isMasked:q,element:L,value:z,maskInputFn:c}),v(L,d?{text:z,isChecked:$,userTriggered:P}:{text:z,isChecked:$});const fe=L.name;H==="radio"&&fe&&$&&e.querySelectorAll(`input[type="radio"][name="${fe}"]`).forEach(k=>{if(k!==L){const W=cg({isMasked:q,element:k,value:dx(k,C,H),maskInputFn:c});v(k,d?{text:W,isChecked:!$,userTriggered:!1}:{text:W,isChecked:!$})}})}function v(M,L){const P=MU.get(M);if(!P||P.text!==L.text||P.isChecked!==L.isChecked){MU.set(M,L);const C=n.getId(M);Zt(t)({...L,id:C})}}const w=(u.input==="last"?["change"]:["input","change"]).map(M=>xi(M,Zt(_),e)),E=e.defaultView;if(!E)return()=>{w.forEach(M=>M())};const R=E.Object.getOwnPropertyDescriptor(E.HTMLInputElement.prototype,"value"),A=[[E.HTMLInputElement.prototype,"value"],[E.HTMLInputElement.prototype,"checked"],[E.HTMLSelectElement.prototype,"value"],[E.HTMLTextAreaElement.prototype,"value"],[E.HTMLSelectElement.prototype,"selectedIndex"],[E.HTMLOptionElement.prototype,"selected"]];return R&&R.set&&w.push(...A.map(M=>P8(M[0],M[1],{set(){Zt(_)({target:this,isTrusted:!1})}},!1,E))),Zt(()=>{w.forEach(M=>M())})}function px(t){const e=[];function n(r,i){if(g0("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||g0("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||g0("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||g0("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(o)}return i}return n(t,e)}function Ml(t,e,n){let r,i;return t?(t.ownerNode?r=e.getId(t.ownerNode):i=n.getId(t),{styleId:i,id:r}):{}}function rSe({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Zt((u,d,p)=>{const[m,g]=p,{id:y,styleId:_}=Ml(d,e,n.styleMirror);return(y&&y!==-1||_&&_!==-1)&&t({id:y,styleId:_,adds:[{rule:m,index:g}]}),u.apply(d,p)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Zt((u,d,p)=>{const[m]=p,{id:g,styleId:y}=Ml(d,e,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&t({id:g,styleId:y,removes:[{index:m}]}),u.apply(d,p)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Zt((u,d,p)=>{const[m]=p,{id:g,styleId:y}=Ml(d,e,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&t({id:g,styleId:y,replace:m}),u.apply(d,p)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Zt((u,d,p)=>{const[m]=p,{id:g,styleId:y}=Ml(d,e,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&t({id:g,styleId:y,replaceSync:m}),u.apply(d,p)})}));const l={};v0("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(v0("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),v0("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),v0("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const c={};return Object.entries(l).forEach(([u,d])=>{c[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(c[u].insertRule,{apply:Zt((p,m,g)=>{const[y,_]=g,{id:v,styleId:S}=Ml(m.parentStyleSheet,e,n.styleMirror);return(v&&v!==-1||S&&S!==-1)&&t({id:v,styleId:S,adds:[{rule:y,index:[...px(m),_||0]}]}),p.apply(m,g)})}),d.prototype.deleteRule=new Proxy(c[u].deleteRule,{apply:Zt((p,m,g)=>{const[y]=g,{id:_,styleId:v}=Ml(m.parentStyleSheet,e,n.styleMirror);return(_&&_!==-1||v&&v!==-1)&&t({id:_,styleId:v,removes:[{index:[...px(m),y]}]}),p.apply(m,g)})})}),Zt(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([u,d])=>{d.prototype.insertRule=c[u].insertRule,d.prototype.deleteRule=c[u].deleteRule})})}function W8({mirror:t,stylesheetManager:e},n){let r=null;n.nodeName==="#document"?r=t.getId(n):r=t.getId(n.host);const i=n.nodeName==="#document"?ko([n,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):ko([n,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),s=ko([i,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(ko([i,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!i||!s?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return ko([s,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=ko([s,"access",l=>l.set,"optionalAccess",l=>l.call,"call",l=>l(this,o)]);if(r!==null&&r!==-1)try{e.adoptStyleSheets(o,r)}catch{}return a}}),Zt(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function iSe({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Zt((a,l,c)=>{const[u,d,p]=c;if(n.has(u))return s.apply(l,[u,d,p]);const{id:m,styleId:g}=Ml(ko([l,"access",y=>y.parentRule,"optionalAccess",y=>y.parentStyleSheet]),e,r.styleMirror);return(m&&m!==-1||g&&g!==-1)&&t({id:m,styleId:g,set:{property:u,value:d,priority:p},index:px(l.parentRule)}),a.apply(l,c)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Zt((a,l,c)=>{const[u]=c;if(n.has(u))return o.apply(l,[u]);const{id:d,styleId:p}=Ml(ko([l,"access",m=>m.parentRule,"optionalAccess",m=>m.parentStyleSheet]),e,r.styleMirror);return(d&&d!==-1||p&&p!==-1)&&t({id:d,styleId:p,remove:{property:u},index:px(l.parentRule)}),a.apply(l,c)})}),Zt(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function sSe({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:i,sampling:s,doc:o}){const a=Zt(c=>dg(Zt(u=>{const d=Wg(u);if(!d||oo(d,e,n,r,!0))return;const{currentTime:p,volume:m,muted:g,playbackRate:y}=d;t({type:c,id:i.getId(d),currentTime:p,volume:m,muted:g,playbackRate:y})}),s.media||500)),l=[xi("play",a(0),o),xi("pause",a(1),o),xi("seeked",a(2),o),xi("volumechange",a(3),o),xi("ratechange",a(4),o)];return Zt(()=>{l.forEach(c=>c())})}function oSe({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,s=n.FontFace;n.FontFace=function(l,c,u){const d=new s(l,c,u);return i.set(d,{family:l,buffer:typeof c!="string",descriptors:u,fontSource:typeof c=="string"?c:JSON.stringify(Array.from(new Uint8Array(c)))}),d};const o=$P(e.fonts,"add",function(a){return function(l){return tw(Zt(()=>{const c=i.get(l);c&&(t(c),i.delete(l))}),0),a.apply(this,[l])}});return r.push(()=>{n.FontFace=s}),r.push(o),Zt(()=>{r.forEach(a=>a())})}function aSe(t){const{doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,selectionCb:o}=t;let a=!0;const l=Zt(()=>{const c=e.getSelection();if(!c||a&&ko([c,"optionalAccess",p=>p.isCollapsed]))return;a=c.isCollapsed||!1;const u=[],d=c.rangeCount||0;for(let p=0;p<d;p++){const m=c.getRangeAt(p),{startContainer:g,startOffset:y,endContainer:_,endOffset:v}=m;oo(g,r,i,s,!0)||oo(_,r,i,s,!0)||u.push({start:n.getId(g),startOffset:y,end:n.getId(_),endOffset:v})}o({ranges:u})});return l(),xi("selectionchange",l)}function lSe({doc:t,customElementCb:e}){const n=t.defaultView;return!n||!n.customElements?()=>{}:$P(n.customElements,"define",function(i){return function(s,o,a){try{e({define:{name:s}})}catch{}return i.apply(this,[s,o,a])}})}function cSe(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};const r=H8(t,t.doc),i=Zxe(t),s=Qxe(t),o=j8(t),a=eSe(t,{win:n}),l=nSe(t),c=sSe(t),u=rSe(t,{win:n}),d=W8(t,t.doc),p=iSe(t,{win:n}),m=t.collectFonts?oSe(t):()=>{},g=aSe(t),y=lSe(t),_=[];for(const v of t.plugins)_.push(v.observer(v.callback,n,v.options));return Zt(()=>{vf.forEach(v=>v.reset()),r.disconnect(),i(),s(),o(),a(),l(),c(),u(),d(),p(),m(),g(),y(),_.forEach(v=>v())})}function g0(t){return typeof window[t]<"u"}function v0(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class wC{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,n,r,i){const s=r||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),o.set(a,n)),a}getIds(e,n){const r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return n.map(s=>this.getId(e,s,r,i))}getRemoteId(e,n,r){const i=r||this.getRemoteIdToIdMap(e);if(typeof n!="number")return n;const s=i.get(n);return s||-1}getRemoteIds(e,n){const r=this.getRemoteIdToIdMap(e);return n.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){let n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}function TU(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}class uSe{constructor(){this.crossOriginIframeMirror=new wC(WP),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class dSe{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new wC(WP),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new wC(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),TU([this,"access",r=>r.loadListener,"optionalCall",r=>r(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const n=e;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!e.source)return;const i=this.crossOriginIframeMap.get(e.source);if(!i)return;const s=this.transformCrossOriginEvent(i,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(e,n){switch(n.type){case Ht.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:Ht.IncrementalSnapshot,data:{source:jt.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ht.Meta:case Ht.Load:case Ht.DomContentLoaded:return!1;case Ht.Plugin:return n;case Ht.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case Ht.IncrementalSnapshot:switch(n.data.source){case jt.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(r.node,i)}),n.data.removes.forEach(r=>{this.replaceIds(r,e,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,e,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case jt.Drag:case jt.TouchMove:case jt.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case jt.ViewportResize:return!1;case jt.MediaInteraction:case jt.MouseInteraction:case jt.Scroll:case jt.CanvasMutation:case jt.Input:return this.replaceIds(n.data,e,["id"]),n;case jt.StyleSheetRule:case jt.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case jt.Font:return n;case jt.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,e,["start","end"])}),n;case jt.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),TU([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(i=>{this.replaceStyleIds(i,e,["styleId"])})]),n}}return!1}replace(e,n,r,i){for(const s of i)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=e.getIds(r,n[s]):n[s]=e.getId(r,n[s]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(e,n){e.type!==Sr.Document&&!e.rootId&&(e.rootId=n),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class fSe{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class hSe{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(!am(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=H8({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(j8({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),tw(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(W8({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push($P(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s);return this.shadowRoot&&B8(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class CU{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class pSe{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Hxe,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){if(e.length===0)return;const r={id:n,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(a,l)=>({rule:T8(a),index:l}))})),r.styleIds.push(o)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class mSe{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Gxe(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,n){const r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==n)}add(e,n){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let Qn,mx;const Zs=gxe();function Gl(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:l=null,maskAllText:c=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:m=null,inlineStylesheet:g=!0,maskAllInputs:y,maskInputOptions:_,slimDOMOptions:v,maskAttributeFn:S,maskInputFn:w,maskTextFn:E,maxCanvasSize:R=null,packFn:A,sampling:M={},dataURLOptions:L={},mousemoveWait:P,recordCanvas:C=!1,recordCrossOriginIframes:N=!1,recordAfter:H=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:z=!1,collectFonts:$=!1,inlineImages:X=!1,plugins:q,keepIframeSrcFn:fe=()=>!1,ignoreCSSAttributes:k=new Set([]),errorHandler:W,onMutation:G,getCanvasManager:ee}=t;Kxe(W);const ae=N?window.parent===window:!0;let Pe=!1;if(!ae)try{window.parent.document&&(Pe=!1)}catch{Pe=!0}if(ae&&!e)throw new Error("emit function is required");P!==void 0&&M.mousemove===void 0&&(M.mousemove=P),Zs.reset();const re=y===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},ye=v===!0||v==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:v==="all",headMetaDescKeywords:v==="all"}:v||{};Vxe();let Ee,xe=0;const it=B=>{for(const D of q||[])D.eventProcessor&&(B=D.eventProcessor(B));return A&&!Pe&&(B=A(B)),B};Qn=(B,D)=>{const J=B;if(J.timestamp=hx(),mE([vf,"access",de=>de[0],"optionalAccess",de=>de.isFrozen,"call",de=>de()])&&J.type!==Ht.FullSnapshot&&!(J.type===Ht.IncrementalSnapshot&&J.data.source===jt.Mutation)&&vf.forEach(de=>de.unfreeze()),ae)mE([e,"optionalCall",de=>de(it(J),D)]);else if(Pe){const de={type:"rrweb",event:it(J),origin:window.location.origin,isCheckout:D};window.parent.postMessage(de,"*")}if(J.type===Ht.FullSnapshot)Ee=J,xe=0;else if(J.type===Ht.IncrementalSnapshot){if(J.data.source===jt.Mutation&&J.data.isAttachIframe)return;xe++;const de=r&&xe>=r,pe=n&&Ee&&J.timestamp-Ee.timestamp>n;(de||pe)&&nt(!0)}};const dt=B=>{Qn({type:Ht.IncrementalSnapshot,data:{source:jt.Mutation,...B}})},te=B=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.Scroll,...B}}),ut=B=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.CanvasMutation,...B}}),he=B=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.AdoptedStyleSheet,...B}}),Se=new pSe({mutationCb:dt,adoptedStyleSheetCb:he}),_e=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new uSe:new dSe({mirror:Zs,mutationCb:dt,stylesheetManager:Se,recordCrossOriginIframes:N,wrappedEmit:Qn});for(const B of q||[])B.getMirror&&B.getMirror({nodeMirror:Zs,crossOriginIframeMirror:_e.crossOriginIframeMirror,crossOriginIframeStyleMirror:_e.crossOriginIframeStyleMirror});const Le=new mSe,Te=vSe(ee,{mirror:Zs,win:window,mutationCb:B=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.CanvasMutation,...B}}),recordCanvas:C,blockClass:i,blockSelector:s,unblockSelector:o,maxCanvasSize:R,sampling:M.canvas,dataURLOptions:L,errorHandler:W}),He=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new fSe:new hSe({mutationCb:dt,scrollCb:te,bypassOptions:{onMutation:G,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskInputOptions:re,dataURLOptions:L,maskAttributeFn:S,maskTextFn:E,maskInputFn:w,recordCanvas:C,inlineImages:X,sampling:M,slimDOMOptions:ye,iframeManager:_e,stylesheetManager:Se,canvasManager:Te,keepIframeSrcFn:fe,processedNodeManager:Le},mirror:Zs}),nt=(B=!1)=>{Qn({type:Ht.Meta,data:{href:window.location.href,width:k8(),height:L8()}},B),Se.reset(),He.init(),vf.forEach(J=>J.lock());const D=Bxe(document,{mirror:Zs,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:g,maskAllInputs:re,maskAttributeFn:S,maskInputFn:w,maskTextFn:E,slimDOM:ye,dataURLOptions:L,recordCanvas:C,inlineImages:X,onSerialize:J=>{D8(J,Zs)&&_e.addIframe(J),U8(J,Zs)&&Se.trackLinkElement(J),xC(J)&&He.addShadowRoot(J.shadowRoot,document)},onIframeLoad:(J,de)=>{_e.attachIframe(J,de),He.observeAttachShadow(J)},onStylesheetLoad:(J,de)=>{Se.attachLinkElement(J,de)},keepIframeSrcFn:fe});if(!D)return console.warn("Failed to snapshot the document");Qn({type:Ht.FullSnapshot,data:{node:D,initialOffset:I8(window)}}),vf.forEach(J=>J.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Se.adoptStyleSheets(document.adoptedStyleSheets,Zs.getId(document))};mx=nt;try{const B=[],D=de=>Zt(cSe)({onMutation:G,mutationCb:dt,mousemoveCb:(pe,we)=>Qn({type:Ht.IncrementalSnapshot,data:{source:we,positions:pe}}),mouseInteractionCb:pe=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.MouseInteraction,...pe}}),scrollCb:te,viewportResizeCb:pe=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.ViewportResize,...pe}}),inputCb:pe=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.Input,...pe}}),mediaInteractionCb:pe=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.MediaInteraction,...pe}}),styleSheetRuleCb:pe=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.StyleSheetRule,...pe}}),styleDeclarationCb:pe=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.StyleDeclaration,...pe}}),canvasMutationCb:ut,fontCb:pe=>Qn({type:Ht.IncrementalSnapshot,data:{source:jt.Font,...pe}}),selectionCb:pe=>{Qn({type:Ht.IncrementalSnapshot,data:{source:jt.Selection,...pe}})},customElementCb:pe=>{Qn({type:Ht.IncrementalSnapshot,data:{source:jt.CustomElement,...pe}})},blockClass:i,ignoreClass:a,ignoreSelector:l,maskAllText:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:m,maskInputOptions:re,inlineStylesheet:g,sampling:M,recordCanvas:C,inlineImages:X,userTriggeredOnInput:z,collectFonts:$,doc:de,maskAttributeFn:S,maskInputFn:w,maskTextFn:E,keepIframeSrcFn:fe,blockSelector:s,unblockSelector:o,slimDOMOptions:ye,dataURLOptions:L,mirror:Zs,iframeManager:_e,stylesheetManager:Se,shadowDomManager:He,processedNodeManager:Le,canvasManager:Te,ignoreCSSAttributes:k,plugins:mE([q,"optionalAccess",pe=>pe.filter,"call",pe=>pe(we=>we.observer),"optionalAccess",pe=>pe.map,"call",pe=>pe(we=>({observer:we.observer,options:we.options,callback:Qe=>Qn({type:Ht.Plugin,data:{plugin:we.name,payload:Qe}})}))])||[]},{});_e.addLoadListener(de=>{try{B.push(D(de.contentDocument))}catch(pe){console.warn(pe)}});const J=()=>{nt(),B.push(D(document))};return document.readyState==="interactive"||document.readyState==="complete"?J():(B.push(xi("DOMContentLoaded",()=>{Qn({type:Ht.DomContentLoaded,data:{}}),H==="DOMContentLoaded"&&J()})),B.push(xi("load",()=>{Qn({type:Ht.Load,data:{}}),H==="load"&&J()},window))),()=>{B.forEach(de=>de()),Le.destroy(),mx=void 0,Jxe()}}catch(B){console.warn(B)}}function gSe(t){if(!mx)throw new Error("please take full snapshot after start recording");mx(t)}Gl.mirror=Zs;Gl.takeFullSnapshot=gSe;function vSe(t,e){try{return t?t(e):new CU}catch{return console.warn("Unable to initialize CanvasManager"),new CU}}const ySe=3,_Se=5;function qP(t){return t>9999999999?t:t*1e3}function bE(t){return t>9999999999?t/1e3:t}function Gg(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:Ht.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Lo(e,10,1e3)}}),e.category==="console")))}const xSe="button,a";function G8(t){return t.closest(xSe)||t}function $8(t){const e=X8(t);return!e||!(e instanceof Element)?e:G8(e)}function X8(t){return SSe(t)?t.target:t}function SSe(t){return typeof t=="object"&&!!t&&"target"in t}let Tl;function wSe(t){return Tl||(Tl=[],bSe()),Tl.push(t),()=>{const e=Tl?Tl.indexOf(t):-1;e>-1&&Tl.splice(e,1)}}function bSe(){Nr(Tn,"open",function(t){return function(...e){if(Tl)try{Tl.forEach(n=>n())}catch{}return t.apply(Tn,e)}})}function ESe(t,e,n){t.handleClick(e,n)}class MSe{constructor(e,n,r=Gg){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=wSe(()=>{this._lastMutation=AU()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,n){if(CSe(n,this._ignoreSelector)||!ASe(e))return;const r={timestamp:bE(e.timestamp),clickBreadcrumb:e,clickCount:0,node:n};this._clicks.some(i=>i.node===r.node&&Math.abs(i.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=bE(e)}registerScroll(e=Date.now()){this._lastScroll=bE(e)}registerClick(e){const n=G8(e);this._handleMultiClick(n)}_handleMultiClick(e){this._getClicks(e).forEach(n=>{n.clickCount++})}_getClicks(e){return this._clicks.filter(n=>n.node===e)}_checkClicks(){const e=[],n=AU();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&e.push(r)});for(const r of e){const i=this._clicks.indexOf(r);i>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const n=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,i=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!r&&!i,{clickCount:o,clickBreadcrumb:a}=e;if(s){const l=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,c=l<this._timeout*1e3?"mutation":"timeout",u={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Tn.location.href,route:n.getCurrentRoute(),timeAfterClickMs:l,endReason:c,clickCount:o||1}};this._addBreadcrumbEvent(n,u);return}if(o>1){const l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Tn.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,l)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Iu(()=>this._checkClicks(),1e3)}}const TSe=["A","BUTTON","INPUT"];function CSe(t,e){return!!(!TSe.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}function ASe(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function AU(){return Date.now()/1e3}function RSe(t,e){try{if(!PSe(e))return;const{source:n}=e.data;if(n===jt.Mutation&&t.registerMutation(e.timestamp),n===jt.Scroll&&t.registerScroll(e.timestamp),ISe(e)){const{type:r,id:i}=e.data,s=Gl.mirror.getNode(i);s instanceof HTMLElement&&r===vi.Click&&t.registerClick(s)}}catch{}}function PSe(t){return t.type===ySe}function ISe(t){return t.data.source===jt.MouseInteraction}function Bo(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var gx;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(gx||(gx={}));const LSe=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function kSe(t){const e={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const n in t)if(LSe.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),e[r]=t[n]}return e}const OSe=t=>e=>{if(!t.isEnabled())return;const n=NSe(e);if(!n)return;const r=e.name==="click",i=r?e.event:void 0;r&&t.clickDetector&&i&&i.target&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&ESe(t.clickDetector,n,$8(e.event)),Gg(t,n)};function q8(t,e){const n=Gl.mirror.getId(t),r=n&&Gl.mirror.getNode(n),i=r&&Gl.mirror.getMeta(r),s=i&&USe(i)?i:null;return{message:e,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map(o=>o.type===gx.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:kSe(s.attributes)}}:{}}}function NSe(t){const{target:e,message:n}=DSe(t);return Bo({category:`ui.${t.name}`,...q8(e,n)})}function DSe(t){const e=t.name==="click";let n,r=null;try{r=e?$8(t.event):X8(t.event),n=Ql(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function USe(t){return t.type===gx.Element}function FSe(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=BSe(e);n&&Gg(t,n)}function BSe(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:i,key:s,target:o}=t;if(!o||zSe(o)||!s)return null;const a=e||r||i,l=s.length===1;if(!a&&l)return null;const c=Ql(o,{maxStringLength:200})||"<unknown>",u=q8(o,c);return Bo({category:"ui.keyDown",message:c,data:{...u.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:i,key:s}})}function zSe(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const VSe={resource:$Se,paint:WSe,navigation:GSe};function y0(t,e){return({metric:n})=>void e.replayPerformanceEntries.push(t(n))}function HSe(t){return t.map(jSe).filter(Boolean)}function jSe(t){const e=VSe[t.entryType];return e?e(t):null}function nh(t){return((cs||Tn.performance.timeOrigin)+t)/1e3}function WSe(t){const{duration:e,entryType:n,name:r,startTime:i}=t,s=nh(i);return{type:n,name:r,start:s,end:s+e,data:void 0}}function GSe(t){const{entryType:e,name:n,decodedBodySize:r,duration:i,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,domInteractive:c,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:m,transferSize:g,type:y}=t;return i===0?null:{type:`${e}.${y}`,start:nh(m),end:nh(s),name:n,data:{size:g,decodedBodySize:r,encodedBodySize:o,duration:i,domInteractive:c,domContentLoadedEventStart:a,domContentLoadedEventEnd:l,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:p}}}function $Se(t){const{entryType:e,initiatorType:n,name:r,responseEnd:i,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:l,transferSize:c}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:nh(s),end:nh(i),name:r,data:{size:c,statusCode:l,decodedBodySize:o,encodedBodySize:a}}}function XSe(t){const e=t.entries[t.entries.length-1],n=e?e.element:void 0;return nw(t,"largest-contentful-paint",n)}function qSe(t){const e=t.entries[0],n=e&&e.sources&&e.sources[0]?e.sources[0].node:void 0;return nw(t,"cumulative-layout-shift",n)}function YSe(t){const e=t.entries[t.entries.length-1],n=e?e.target:void 0;return nw(t,"first-input-delay",n)}function KSe(t){const e=t.entries[t.entries.length-1],n=e?e.target:void 0;return nw(t,"interaction-to-next-paint",n)}function nw(t,e,n){const r=t.value,i=t.rating,s=nh(r);return{type:"web-vital",name:e,start:s,end:s,data:{value:r,size:r,rating:i,nodeId:n?Gl.mirror.getId(n):void 0}}}function JSe(t){function e(i){t.performanceEntries.includes(i)||t.performanceEntries.push(i)}function n({entries:i}){i.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(i=>{r.push(Zf(i,n))}),r.push(g8(y0(XSe,t)),m8(y0(qSe,t)),v8(y0(YSe,t)),y8(y0(KSe,t))),()=>{r.forEach(i=>i())}}const xn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ZSe='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function QSe(){const t=new Blob([ZSe]);return URL.createObjectURL(t)}function Li(t,e){xn&&(Ae.info(t),e&&Y8(t))}function vu(t,e){xn&&(Ae.info(t),e&&Iu(()=>{Y8(t)},0))}function Y8(t){nc({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class YP extends Error{constructor(){super(`Event buffer exceeded maximum size of ${HP}.`)}}class K8{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const n=JSON.stringify(e).length;if(this._totalSize+=n,this._totalSize>HP)throw new YP;this.events.push(e)}finish(){return new Promise(e=>{const n=this.events;this.clear(),e(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(n=>n.timestamp).sort()[0];return e?qP(e):null}}class ewe{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){Li("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,n){const r=this._getAndIncrementId();return new Promise((i,s)=>{const o=({data:a})=>{const l=a;if(l.method===e&&l.id===r){if(this._worker.removeEventListener("message",o),!l.success){xn&&Ae.error("[Replay]",l.response),s(new Error("Error in compression worker"));return}i(l.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:e,arg:n})})}_getAndIncrementId(){return this._id++}}class twe{constructor(e){this._worker=new ewe(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const n=qP(e.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>HP?Promise.reject(new YP):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{xn&&Ae.warn('[Replay] Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class nwe{constructor(e){this._fallback=new K8,this._compression=new twe(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{Li("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:n}=this._fallback,r=[];for(const i of e)r.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(i){xn&&Ae.warn("[Replay] Failed to add events when switching buffers.",i)}}}function rwe({useCompression:t,workerUrl:e}){if(t&&window.Worker){const n=iwe(e);if(n)return n}return Li("[Replay] Using simple buffer"),new K8}function iwe(t){try{const e=t||swe();if(!e)return;Li(`[Replay] Using compression worker${t?` from ${t}`:""}`);const n=new Worker(e);return new nwe(n)}catch{Li("[Replay] Failed to create compression worker")}}function swe(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?QSe():""}function KP(){try{return"sessionStorage"in Tn&&!!Tn.sessionStorage}catch{return!1}}function owe(t){awe(),t.session=void 0}function awe(){if(KP())try{Tn.sessionStorage.removeItem(zP)}catch{}}function J8(t){return t===void 0?!1:Math.random()<t}function Z8(t){const e=Date.now(),n=t.id||Fn(),r=t.started||e,i=t.lastActivity||e,s=t.segmentId||0,o=t.sampled,a=t.previousSessionId;return{id:n,started:r,lastActivity:i,segmentId:s,sampled:o,previousSessionId:a}}function JP(t){if(KP())try{Tn.sessionStorage.setItem(zP,JSON.stringify(t))}catch{}}function lwe(t,e){return J8(t)?"session":e?"buffer":!1}function RU({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const i=lwe(t,e),s=Z8({sampled:i,previousSessionId:r});return n&&JP(s),s}function cwe(t){if(!KP())return null;try{const e=Tn.sessionStorage.getItem(zP);if(!e)return null;const n=JSON.parse(e);return vu("[Replay] Loading existing session",t),Z8(n)}catch{return null}}function bC(t,e,n=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=n}function Q8(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return bC(t.started,e,r)||bC(t.lastActivity,n,r)}function eW(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!(!Q8(t,{sessionIdleExpire:e,maxReplayDuration:n})||t.sampled==="buffer"&&t.segmentId===0)}function EE({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:n,previousSessionId:r},i){const s=i.stickySession&&cwe(t);return s?eW(s,{sessionIdleExpire:e,maxReplayDuration:n})?(vu("[Replay] Session in sessionStorage is expired, creating new one..."),RU(i,{previousSessionId:s.id})):s:(vu("[Replay] Creating new session",t),RU(i,{previousSessionId:r}))}function uwe(t){return t.type===Ht.Custom}function ZP(t,e,n){return nW(t,e)?(tW(t,e,n),!0):!1}function dwe(t,e,n){return nW(t,e)?tW(t,e,n):Promise.resolve(null)}async function tW(t,e,n){if(!t.eventBuffer)return null;try{n&&t.recordingMode==="buffer"&&t.eventBuffer.clear(),n&&(t.eventBuffer.hasCheckout=!0);const r=t.getOptions(),i=fwe(e,r.beforeAddRecordingEvent);return i?await t.eventBuffer.addEvent(i):void 0}catch(r){const i=r&&r instanceof YP?"addEventSizeExceeded":"addEvent";xn&&Ae.error(r),await t.stop({reason:i});const s=Yt();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function nW(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=qP(e.timestamp);return n+t.timeouts.sessionIdlePause<Date.now()?!1:n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(vu(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),!1):!0}function fwe(t,e){try{if(typeof e=="function"&&uwe(t))return e(t)}catch(n){return xn&&Ae.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return t}function QP(t){return!t.type}function EC(t){return t.type==="transaction"}function hwe(t){return t.type==="replay_event"}function PU(t){return t.type==="feedback"}function pwe(t){return(e,n)=>{if(!t.isEnabled()||!QP(e)&&!EC(e))return;const r=n&&n.statusCode;if(!(!r||r<200||r>=300)){if(EC(e)){mwe(t,e);return}gwe(t,e)}}}function mwe(t,e){const n=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}function gwe(t,e){const n=t.getContext();if(e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id),t.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=t.getOptions();typeof r=="function"&&!r(e)||Iu(()=>{t.sendBufferedReplayOrFlush()})}function vwe(t){return e=>{!t.isEnabled()||!QP(e)||ywe(t,e)}}function ywe(t,e){const n=e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Bo({category:"replay.hydrate-error",data:{url:h6()}});Gg(t,r)}}function _we(t){const e=Yt();e&&e.on("beforeAddBreadcrumb",n=>xwe(t,n))}function xwe(t,e){if(!t.isEnabled()||!rW(e))return;const n=Swe(e);n&&Gg(t,n)}function Swe(t){return!rW(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:t.category==="console"?wwe(t):Bo(t)}function wwe(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||e.length===0)return Bo(t);let n=!1;const r=e.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>m0?(n=!0,`${i.slice(0,m0)}…`):i;if(typeof i=="object")try{const s=Lo(i,7);return JSON.stringify(s).length>m0?(n=!0,`${JSON.stringify(s,null,2).slice(0,m0)}…`):s}catch{}return i});return Bo({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function rW(t){return!!t.category}function bwe(t,e){return t.type||!t.exception||!t.exception.values||!t.exception.values.length?!1:!!(e.originalException&&e.originalException.__rrweb__)}function Ewe(t,e){t.triggerUserActivity(),t.addUpdate(()=>e.timestamp?(t.throttledAddEvent({type:Ht.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function Mwe(t,e){return t.recordingMode!=="buffer"||e.message===VP||!e.exception||e.type?!1:J8(t.getOptions().errorSampleRate)}function Twe(t){return Object.assign((e,n)=>t.isEnabled()?hwe(e)?(delete e.breadcrumbs,e):!QP(e)&&!EC(e)&&!PU(e)||!t.checkAndHandleExpiredSession()?e:PU(e)?(t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),Ewe(t,e),e):bwe(e,n)&&!t.getOptions()._experiments.captureExceptions?(xn&&Ae.log("[Replay] Ignoring error from rrweb internals",e),null):((Mwe(t,e)||t.recordingMode==="session")&&(e.tags={...e.tags,replayId:t.getSessionId()}),e):e,{id:"Replay"})}function rw(t,e){return e.map(({type:n,start:r,end:i,name:s,data:o})=>{const a=t.throttledAddEvent({type:Ht.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:s,startTimestamp:r,endTimestamp:i,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function Cwe(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}function Awe(t){return e=>{if(!t.isEnabled())return;const n=Cwe(e);n!==null&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate(()=>(rw(t,[n]),!1)))}}function Rwe(t,e){return xn&&t.getOptions()._experiments.traceInternals?!1:lye(e,Yt())}function iW(t,e){t.isEnabled()&&e!==null&&(Rwe(t,e.name)||t.addUpdate(()=>(rw(t,[e]),!0)))}function iw(t){if(!t)return;const e=new TextEncoder;try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=lW(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function sW(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function oW(t){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[lW(t)];if(!t)return[void 0]}catch{return xn&&Ae.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return xn&&Ae.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function vx(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function aW(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:i,method:s,statusCode:o,request:a,response:l}=e;return{type:t,start:n/1e3,end:r/1e3,name:i,data:Dr({method:s,statusCode:o,request:a,response:l})}}function fg(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function $l(t,e,n){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:i,warnings:s}=Pwe(n);return r.body=i,s&&s.length>0&&(r._meta={warnings:s}),r}function MC(t,e){return Object.entries(t).reduce((n,[r,i])=>{const s=r.toLowerCase();return e.includes(s)&&t[r]&&(n[s]=i),n},{})}function lW(t){return new URLSearchParams(t).toString()}function Pwe(t){if(!t||typeof t!="string")return{body:t};const e=t.length>mU,n=Iwe(t);if(e){const r=t.slice(0,mU);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch{}return{body:t}}function Iwe(t){const e=t[0],n=t[t.length-1];return e==="["&&n==="]"||e==="{"&&n==="}"}function yx(t,e){const n=Lwe(t);return Wl(n,e)}function Lwe(t,e=Tn.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(Tn.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;return!t.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function kwe(t,e,n){try{const r=await Nwe(t,e,n),i=aW("resource.fetch",r);iW(n.replay,i)}catch(r){xn&&Ae.error("[Replay] Failed to capture fetch breadcrumb",r)}}function Owe(t,e){const{input:n,response:r}=e,i=n?cW(n):void 0,s=iw(i),o=r?sW(r.headers.get("content-length")):void 0;s!==void 0&&(t.data.request_body_size=s),o!==void 0&&(t.data.response_body_size=o)}async function Nwe(t,e,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r}=e,{url:o,method:a,status_code:l=0,request_body_size:c,response_body_size:u}=t.data,d=yx(o,n.networkDetailAllowUrls)&&!yx(o,n.networkDetailDenyUrls),p=d?Dwe(n,e.input,c):fg(c),m=await Uwe(d,n,e.response,u);return{startTimestamp:i,endTimestamp:s,url:o,method:a,statusCode:l,request:p,response:m}}function Dwe({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const i=n?zwe(n,e):{};if(!t)return $l(i,r,void 0);const s=cW(n),[o,a]=oW(s),l=$l(i,r,o);return a?vx(l,a):l}async function Uwe(t,{networkCaptureBodies:e,networkResponseHeaders:n},r,i){if(!t&&i!==void 0)return fg(i);const s=r?uW(r.headers,n):{};if(!r||!e&&i!==void 0)return $l(s,i,void 0);const[o,a]=await Bwe(r),l=Fwe(o,{networkCaptureBodies:e,responseBodySize:i,captureDetails:t,headers:s});return a?vx(l,a):l}function Fwe(t,{networkCaptureBodies:e,responseBodySize:n,captureDetails:r,headers:i}){try{const s=t&&t.length&&n===void 0?iw(t):n;return r?e?$l(i,s,t):$l(i,s,void 0):fg(s)}catch(s){return xn&&Ae.warn("[Replay] Failed to serialize response body",s),$l(i,n,void 0)}}async function Bwe(t){const e=Vwe(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await Hwe(e)]}catch(n){return xn&&Ae.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function cW(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}function uW(t,e){const n={};return e.forEach(r=>{t.get(r)&&(n[r]=t.get(r))}),n}function zwe(t,e){return t.length===1&&typeof t[0]!="string"?IU(t[0],e):t.length===2?IU(t[1],e):{}}function IU(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?uW(n,e):Array.isArray(n)?{}:MC(n,e):{}}function Vwe(t){try{return t.clone()}catch(e){xn&&Ae.warn("[Replay] Failed to clone response body",e)}}function Hwe(t){return new Promise((e,n)=>{const r=Iu(()=>n(new Error("Timeout while trying to read response body")),500);jwe(t).then(i=>e(i),i=>n(i)).finally(()=>clearTimeout(r))})}async function jwe(t){return await t.text()}async function Wwe(t,e,n){try{const r=$we(t,e,n),i=aW("resource.xhr",r);iW(n.replay,i)}catch(r){xn&&Ae.error("[Replay] Failed to capture xhr breadcrumb",r)}}function Gwe(t,e){const{xhr:n,input:r}=e;if(!n)return;const i=iw(r),s=n.getResponseHeader("content-length")?sW(n.getResponseHeader("content-length")):Kwe(n.response,n.responseType);i!==void 0&&(t.data.request_body_size=i),s!==void 0&&(t.data.response_body_size=s)}function $we(t,e,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r,input:o,xhr:a}=e,{url:l,method:c,status_code:u=0,request_body_size:d,response_body_size:p}=t.data;if(!l)return null;if(!a||!yx(l,n.networkDetailAllowUrls)||yx(l,n.networkDetailDenyUrls)){const A=fg(d),M=fg(p);return{startTimestamp:i,endTimestamp:s,url:l,method:c,statusCode:u,request:A,response:M}}const m=a[ru],g=m?MC(m.request_headers,n.networkRequestHeaders):{},y=MC(Xwe(a),n.networkResponseHeaders),[_,v]=n.networkCaptureBodies?oW(o):[void 0],[S,w]=n.networkCaptureBodies?qwe(a):[void 0],E=$l(g,d,_),R=$l(y,p,S);return{startTimestamp:i,endTimestamp:s,url:l,method:c,statusCode:u,request:v?vx(E,v):E,response:w?vx(R,w):R}}function Xwe(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((n,r)=>{const[i,s]=r.split(": ");return s&&(n[i.toLowerCase()]=s),n},{}):{}}function qwe(t){const e=[];try{return[t.responseText]}catch(n){e.push(n)}try{return Ywe(t.response,t.responseType)}catch(n){e.push(n)}return xn&&Ae.warn("[Replay] Failed to get xhr response body",...e),[void 0]}function Ywe(t,e){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(e==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch{return xn&&Ae.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return xn&&Ae.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Kwe(t,e){try{const n=e==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return iw(n)}catch{return}}function Jwe(t){const e=Yt();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o}=t.getOptions(),a={replay:t,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o};e&&e.on("beforeAddBreadcrumb",(l,c)=>Zwe(a,l,c))}catch{}}function Zwe(t,e,n){if(e.data)try{Qwe(e)&&t1e(n)&&(Gwe(e,n),Wwe(e,n,t)),e1e(e)&&n1e(n)&&(Owe(e,n),kwe(e,n,t))}catch{xn&&Ae.warn("Error when enriching network breadcrumb")}}function Qwe(t){return t.category==="xhr"}function e1e(t){return t.category==="fetch"}function t1e(t){return t&&t.xhr}function n1e(t){return t&&t.response}function r1e(t){const e=Yt();S8(OSe(t)),QS(Awe(t)),_we(t),Jwe(t);const n=Twe(t);$ve(n),e&&(e.on("beforeSendEvent",vwe(t)),e.on("afterSendEvent",pwe(t)),e.on("createDsc",r=>{const i=t.getSessionId();i&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(r.replay_id=i)}),e.on("spanStart",r=>{t.lastActiveSpan=r}),e.on("spanEnd",r=>{t.lastActiveSpan=r}),e.on("beforeSendFeedback",(r,i)=>{const s=t.getSessionId();i&&i.includeReplay&&t.isEnabled()&&s&&r.contexts&&r.contexts.feedback&&(r.contexts.feedback.replay_id=s)}))}async function i1e(t){try{return Promise.all(rw(t,[s1e(Tn.performance.memory)]))}catch{return[]}}function s1e(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function o1e(t,e,n){let r,i,s;const o=n&&n.maxWait?Math.max(n.maxWait,e):0;function a(){return l(),r=t(),r}function l(){i!==void 0&&clearTimeout(i),s!==void 0&&clearTimeout(s),i=s=void 0}function c(){return i!==void 0||s!==void 0?a():r}function u(){return i&&clearTimeout(i),i=Iu(a,e),o&&s===void 0&&(s=Iu(a,o)),r}return u.cancel=l,u.flush=c,u}function a1e(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession()){xn&&Ae.warn("[Replay] Received replay event after session expired.");return}const i=r||!e;e=!0,t.clickDetector&&RSe(t.clickDetector,n),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&i&&t.setInitialState(),!ZP(t,n,i))return!0;if(!i)return!1;if(c1e(t,i),t.session&&t.session.previousSessionId)return!0;if(t.recordingMode==="buffer"&&t.session&&t.eventBuffer){const s=t.eventBuffer.getEarliestTimestamp();s&&(Li(`[Replay] Updating session start time to earliest event in buffer to ${new Date(s)}`,t.getOptions()._experiments.traceInternals),t.session.started=s,t.getOptions().stickySession&&JP(t.session))}return t.recordingMode==="session"&&t.flush(),!0})}}function l1e(t){const e=t.getOptions();return{type:Ht.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function c1e(t,e){!e||!t.session||t.session.segmentId!==0||ZP(t,l1e(t),!1)}function u1e(t,e,n,r){return Wu(I6(t,TP(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function d1e({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}
`;if(typeof t=="string")n=`${r}${t}`;else{const s=new TextEncoder().encode(r);n=new Uint8Array(s.length+t.length),n.set(s),n.set(t,s.length)}return n}async function f1e({client:t,scope:e,replayId:n,event:r}){const i=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,s={event_id:n,integrations:i};t.emit("preprocessEvent",r,s);const o=await K6(t.getOptions(),r,s,e,t,Hs());if(!o)return null;o.platform=o.platform||"javascript";const a=t.getSdkMetadata(),{name:l,version:c}=a&&a.sdk||{};return o.sdk={...o.sdk,name:l||"sentry.javascript.unknown",version:c||"0.0.0"},o}async function h1e({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:i,session:s}){const o=d1e({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:l,traceIds:c,initialTimestamp:u}=r,d=Yt(),p=Yn(),m=d&&d.getTransport(),g=d&&d.getDsn();if(!d||!m||!g||!s.sampled)return Va({});const y={type:J_e,replay_start_timestamp:u/1e3,timestamp:i/1e3,error_ids:l,trace_ids:c,urls:a,replay_id:e,segment_id:n,replay_type:s.sampled},_=await f1e({scope:p,client:d,replayId:e,event:y});if(!_)return d.recordDroppedEvent("event_processor","replay",y),Li("An event processor returned `null`, will not send event."),Va({});delete _.sdkProcessingMetadata;const v=u1e(_,o,g,d.getOptions().tunnel);let S;try{S=await m.send(v)}catch(E){const R=new Error(VP);try{R.cause=E}catch{}throw R}if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new dW(S.statusCode);const w=k6({},S);if(L6(w,"replay"))throw new fW(w);return S}class dW extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class fW extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function hW(t,e={count:0,interval:rxe}){const{recordingData:n,options:r}=t;if(n.length)try{return await h1e(t),!0}catch(i){if(i instanceof dW||i instanceof fW)throw i;if(Z6("Replays",{_retryCount:e.count}),xn&&r._experiments&&r._experiments.captureExceptions&&OP(i),e.count>=ixe){const s=new Error(`${VP} - max retries exceeded`);try{s.cause=i}catch{}throw s}return e.interval*=++e.count,new Promise((s,o)=>{Iu(async()=>{try{await hW(t,e),s(!0)}catch(a){o(a)}},e.interval)})}}const pW="__THROTTLED",p1e="__SKIPPED";function m1e(t,e,n){const r=new Map,i=a=>{const l=a-n;r.forEach((c,u)=>{u<l&&r.delete(u)})},s=()=>[...r.values()].reduce((a,l)=>a+l,0);let o=!1;return(...a)=>{const l=Math.floor(Date.now()/1e3);if(i(l),s()>=e){const u=o;return o=!0,u?p1e:pW}o=!1;const c=r.get(l)||0;return r.set(l,c+1),t(...a)}}class Cl{constructor({options:e,recordingOptions:n}){Cl.prototype.__init.call(this),Cl.prototype.__init2.call(this),Cl.prototype.__init3.call(this),Cl.prototype.__init4.call(this),Cl.prototype.__init5.call(this),Cl.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Z_e,sessionIdleExpire:Q_e},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=e,this._debouncedFlush=o1e(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=m1e((o,a)=>dwe(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:i}=this.getOptions(),s=r?{threshold:Math.min(sxe,r),timeout:r,scrollTimeout:oxe,ignoreSelector:i?i.join(","):""}:void 0;s&&(this.clickDetector=new MSe(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:n,sessionSampleRate:r}=this._options,i=n<=0&&r<=0;if(this._requiresManualStart=i,!i){if(this._initializeSessionForSampling(e),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",vu(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");vu("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=EE({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");vu("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=EE({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Gl({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:nxe},emit:a1e(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{Li(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,owe(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Li("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Li("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();Li("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const n=e();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&bC(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${Tn.location.pathname}${Tn.location.hash}${Tn.location.search}`,n=`${Tn.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(e,n){const r=this._throttledAddEvent(e,n);if(r===pW){const i=Bo({category:"replay.throttled"});this.addUpdate(()=>!ZP(this,{type:_Se,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastActiveSpan||hs(),n=e&&Ei(e),i=(n&&fn(n).data||{})[ba];if(!(!n||!i||!["route","custom"].includes(i)))return fn(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=rwe({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){xn&&Ae.error("[Replay]",e),xn&&this._options._experiments&&this._options._experiments.captureExceptions&&OP(e)}_initializeSessionForSampling(e){const n=this._options.errorSampleRate>0,r=EE({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return eW(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Tn.document.addEventListener("visibilitychange",this._handleVisibilityChange),Tn.addEventListener("blur",this._handleWindowBlur),Tn.addEventListener("focus",this._handleWindowFocus),Tn.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(r1e(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=JSe(this)}_removeListeners(){try{Tn.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Tn.removeEventListener("blur",this._handleWindowBlur),Tn.removeEventListener("focus",this._handleWindowFocus),Tn.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{Tn.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Bo({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Bo({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{FSe(this,e)}}_doChangeToBackgroundTasks(e){!this.session||Q8(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Li("[Replay] Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:Ht.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){const e=HSe(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(rw(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:n}=this;if(!e||!n||this._requiresManualStart||e.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){xn&&Ae.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await i1e(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await hW({replayId:e,recordingData:s,segmentId:i,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=Yt();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){xn&&Ae.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,i=Date.now()-n;this._debouncedFlush.cancel();const s=i<this._options.minReplayDuration,o=i>this._options.maxReplayDuration+5e3;if(s||o){Li(`[Replay] Session duration (${Math.floor(i/1e3)}s) is too ${s?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),s&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&Li("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(l){xn&&Ae.error(l)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&JP(this.session)}__init6(){this._onMutationHandler=e=>{const n=e.length,r=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=r&&n>r;if(n>i||s){const o=Bo({category:"replay.mutations",data:{count:n,limit:s}});this._createCustomBreadcrumb(o)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function Cp(t,e){return[...t,...e].join(",")}function g1e({mask:t,unmask:e,block:n,unblock:r,ignore:i}){const s=['base[href="/"]'],o=Cp(t,[".sentry-mask","[data-sentry-mask]"]),a=Cp(e,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:Cp(n,[".sentry-block","[data-sentry-block]",...s]),unblockSelector:Cp(r,[]),ignoreSelector:Cp(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function v1e({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:i,value:s}){return!r||i.unmaskTextSelector&&t.matches(i.unmaskTextSelector)?s:n.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const LU='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',y1e=["content-length","content-type","accept"];let kU=!1;const _1e=t=>new sw(t);class sw{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=exe,flushMaxDelay:n=txe,minReplayDuration:r=axe,maxReplayDuration:i=gU,stickySession:s=!0,useCompression:o=!0,workerUrl:a,_experiments:l={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:p=750,mutationLimit:m=1e4,slowClickTimeout:g=7e3,slowClickIgnoreSelectors:y=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:v=[],networkCaptureBodies:S=!0,networkRequestHeaders:w=[],networkResponseHeaders:E=[],mask:R=[],maskAttributes:A=["title","placeholder"],unmask:M=[],block:L=[],unblock:P=[],ignore:C=[],maskFn:N,beforeAddRecordingEvent:H,beforeErrorSampling:z}={}){this.name=sw.id;const $=g1e({mask:R,unmask:M,block:L,unblock:P,ignore:C});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:N,maskInputFn:N,maskAttributeFn:(X,q,fe)=>v1e({maskAttributes:A,maskAllText:c,privacyOptions:$,key:X,value:q,el:fe}),...$,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:X=>{try{X.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:n,minReplayDuration:Math.min(r,lxe),maxReplayDuration:Math.min(i,gU),stickySession:s,useCompression:o,workerUrl:a,blockAllMedia:d,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:p,mutationLimit:m,slowClickTimeout:g,slowClickIgnoreSelectors:y,networkDetailAllowUrls:_,networkDetailDenyUrls:v,networkCaptureBodies:S,networkRequestHeaders:OU(w),networkResponseHeaders:OU(E),beforeAddRecordingEvent:H,beforeErrorSampling:z,_experiments:l},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${LU}`:LU),this._isInitialized&&L3())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return kU}set _isInitialized(e){kU=e}setupOnce(){L3()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(e)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=x1e(this._initialOptions);this._replay=new Cl({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const n=Yt().getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}sw.__initStatic();function x1e(t){const e=Yt(),n=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Dr(t)};if(!n)return Ru(()=>{console.warn("SDK client is not available.")}),r;const i=sx(n.replaysSessionSampleRate),s=sx(n.replaysOnErrorSampleRate);return i==null&&s==null&&Ru(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),i!=null&&(r.sessionSampleRate=i),s!=null&&(r.errorSampleRate=s),r}function OU(t){return[...y1e,...t.map(e=>e.toLowerCase())]}const TC={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function S1e(t){const{traceFetch:e,traceXHR:n,shouldCreateSpanForRequest:r,enableHTTPTimings:i,tracePropagationTargets:s}={traceFetch:TC.traceFetch,traceXHR:TC.traceXHR,...t},o=typeof r=="function"?r:c=>!0,a=c=>M1e(c,s),l={};e&&w6(c=>{const u=Nye(c,o,a,l);if(u){const d=mW(c.fetchData.url),p=d?pu(d).host:void 0;u.setAttributes({"http.url":d,"server.address":p})}i&&u&&NU(u)}),n&&b8(c=>{const u=T1e(c,o,a,l);i&&u&&NU(u)})}function w1e(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function NU(t){const{url:e}=fn(t).data||{};if(!e||typeof e!="string")return;const n=Zf("resource",({entries:r})=>{r.forEach(i=>{w1e(i)&&i.name.endsWith(e)&&(E1e(i).forEach(o=>t.setAttribute(...o)),setTimeout(n))})})}function b1e(t){let e="unknown",n="unknown",r="";for(const i of t){if(i==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(i))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=i}return r===t&&(e=r),{name:e,version:n}}function Co(t=0){return((cs||performance.timeOrigin)+t)/1e3}function E1e(t){const{name:e,version:n}=b1e(t.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",e]),cs?[...r,["http.request.redirect_start",Co(t.redirectStart)],["http.request.fetch_start",Co(t.fetchStart)],["http.request.domain_lookup_start",Co(t.domainLookupStart)],["http.request.domain_lookup_end",Co(t.domainLookupEnd)],["http.request.connect_start",Co(t.connectStart)],["http.request.secure_connection_start",Co(t.secureConnectionStart)],["http.request.connection_end",Co(t.connectEnd)],["http.request.request_start",Co(t.requestStart)],["http.request.response_start",Co(t.responseStart)],["http.request.response_end",Co(t.responseEnd)]]:r}function M1e(t,e){const n=Nt.location&&Nt.location.href;if(n){let r,i;try{r=new URL(t,n),i=new URL(n).origin}catch{return!1}const s=r.origin===i;return e?Wl(r.toString(),e)||s&&Wl(r.pathname,e):s}else{const r=!!t.match(/^\/(?!\/)/);return e?Wl(t,e):r}}function T1e(t,e,n,r){const i=t.xhr,s=i&&i[ru];if(!i||i.__sentry_own_request__||!s)return;const o=tc()&&e(s.url);if(t.endTimestamp&&o){const p=i.__sentry_xhr_span_id__;if(!p)return;const m=r[p];m&&s.status_code!==void 0&&(U6(m,s.status_code),m.end(),delete r[p]);return}const a=mW(s.url),l=a?pu(a).host:void 0,c=!!hs(),u=o&&c?Xu({name:`${s.method} ${s.url}`,attributes:{type:"xhr","http.method":s.method,"http.url":a,url:s.url,"server.address":l,[di]:"auto.http.browser",[ag]:"http.client"}}):new Eh;i.__sentry_xhr_span_id__=u.spanContext().spanId,r[i.__sentry_xhr_span_id__]=u;const d=Yt();return i.setRequestHeader&&n(s.url)&&d&&C1e(i,d,tc()&&c?u:void 0),u}function C1e(t,e,n){const r=Yn(),i=Hs(),{traceId:s,spanId:o,sampled:a,dsc:l}={...i.getPropagationContext(),...r.getPropagationContext()},c=n&&tc()?z6(n):MP(s,o,a),u=P6(l||(n?$u(n):qS(s,e)));A1e(t,c,u)}function A1e(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader(rC,n)}catch{}}function mW(t){try{return new URL(t,Nt.location.origin).href}catch{return}}function R1e(){Nt&&Nt.document?Nt.document.addEventListener("visibilitychange",()=>{const t=hs();if(!t)return;const e=Ei(t);if(Nt.document.hidden&&e){const n="cancelled",{op:r,status:i}=fn(e);Di&&Ae.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),i||e.setStatus({code:Pr,message:n}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):Di&&Ae.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const P1e="BrowserTracing",I1e={...Z0,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...TC},L1e=(t={})=>{lve();const{enableInp:e,enableLongTask:n,_experiments:{enableInteractions:r},beforeStartSpan:i,idleTimeout:s,finalTimeout:o,childSpanTimeout:a,markBackgroundSpan:l,traceFetch:c,traceXHR:u,shouldCreateSpanForRequest:d,enableHTTPTimings:p,instrumentPageLoad:m,instrumentNavigation:g}={...I1e,...t},y=R0e();e&&Z0e(),n&&P0e(),r&&I0e();const _={name:void 0,source:void 0};function v(S,w){const E=w.op==="pageload",R=i?i(w):w,A=R.attributes||{};w.name!==R.name&&(A[ba]="custom",R.attributes=A),_.name=R.name,_.source=A[ba];const M=Y6(R,{idleTimeout:s,finalTimeout:o,childSpanTimeout:a,disableAutoFinish:E,beforeSpanEnd:P=>{y(),D0e(P)}});function L(){["interactive","complete"].includes(Nt.document.readyState)&&S.emit("idleSpanEnableAutoFinish",M)}return E&&Nt.document&&(Nt.document.addEventListener("readystatechange",()=>{L()}),L()),M}return{name:P1e,afterAllSetup(S){let w,E=Nt.location&&Nt.location.href;S.on("startNavigationSpan",R=>{Yt()===S&&(w&&(Di&&Ae.log(`[Tracing] Finishing current root span with op: ${fn(w).op}`),w.end()),w=v(S,{op:"navigation",...R}))}),S.on("startPageLoadSpan",(R,A={})=>{if(Yt()!==S)return;w&&(Di&&Ae.log(`[Tracing] Finishing current root span with op: ${fn(w).op}`),w.end());const M=A.sentryTrace||DU("sentry-trace"),L=A.baggage||DU("baggage"),P=Rge(M,L);Yn().setPropagationContext(P),w=v(S,{op:"pageload",...R})}),S.on("spanEnd",R=>{const A=fn(R).op;if(R!==Ei(R)||A!=="navigation"&&A!=="pageload")return;const M=Yn(),L=M.getPropagationContext();M.setPropagationContext({...L,sampled:L.sampled!==void 0?L.sampled:Gu(R),dsc:L.dsc||$u(R)})}),Nt.location&&(m&&k1e(S,{name:Nt.location.pathname,startTime:cs?cs/1e3:void 0,attributes:{[ba]:"url",[di]:"auto.pageload.browser"}}),g&&QS(({to:R,from:A})=>{if(A===void 0&&E&&E.indexOf(R)!==-1){E=void 0;return}A!==R&&(E=void 0,O1e(S,{name:Nt.location.pathname,attributes:{[ba]:"url",[di]:"auto.navigation.browser"}}))})),l&&R1e(),r&&N1e(s,o,a,_),e&&e_e(_),S1e({traceFetch:c,traceXHR:u,tracePropagationTargets:S.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:d,enableHTTPTimings:p})}}};function k1e(t,e,n){t.emit("startPageLoadSpan",e,n),Yn().setTransactionName(e.name);const r=hs();return(r&&fn(r).op)==="pageload"?r:void 0}function O1e(t,e){Hs().setPropagationContext(rx()),Yn().setPropagationContext(rx()),t.emit("startNavigationSpan",e),Yn().setTransactionName(e.name);const n=hs();return(n&&fn(n).op)==="navigation"?n:void 0}function DU(t){const e=Wme(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}function N1e(t,e,n,r){let i;const s=()=>{const o="ui.action.click",a=hs(),l=a&&Ei(a);if(l){const c=fn(l).op;if(["navigation","pageload"].includes(c)){Di&&Ae.warn(`[Tracing] Did not create ${o} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(aC,"interactionInterrupted"),i.end(),i=void 0),!r.name){Di&&Ae.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}i=Y6({name:r.name,op:o,attributes:{[ba]:r.source||"url"}},{idleTimeout:t,finalTimeout:e,childSpanTimeout:n})};Nt.document&&addEventListener("click",s,{once:!1,capture:!0})}function D1e(t){const e={...t};return i8(e,"react"),Z6("react",{version:O.version}),Y_e(e)}D1e({dsn:"https://05772a9162217d81eb0cc3cd35a9f4fa@o4507517649747968.ingest.us.sentry.io/4507517656039424",integrations:[L1e(),_1e()],tracesSampleRate:1,tracePropagationTargets:["localhost",/^https:\/\/yourserver\.io\/api/],replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});TE.createRoot(document.getElementById("root")).render(U.jsx(zo.StrictMode,{children:U.jsx(cX,{children:U.jsx(xee,{children:U.jsx(Ome,{})})})}));export{_x as g};
//# sourceMappingURL=index-D8HXPSMy.js.map
